(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Ra(e){const r=Object.create(null);for(const t of e.split(","))r[t]=1;return t=>t in r}const Ae={},qn=[],Ot=()=>{},nf=()=>!1,Xs=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ma=e=>e.startsWith("onUpdate:"),Xe=Object.assign,Ia=(e,r)=>{const t=e.indexOf(r);t>-1&&e.splice(t,1)},rf=Object.prototype.hasOwnProperty,Ee=(e,r)=>rf.call(e,r),ue=Array.isArray,zn=e=>Zs(e)==="[object Map]",wu=e=>Zs(e)==="[object Set]",de=e=>typeof e=="function",Be=e=>typeof e=="string",dn=e=>typeof e=="symbol",Oe=e=>e!==null&&typeof e=="object",Cu=e=>(Oe(e)||de(e))&&de(e.then)&&de(e.catch),Tu=Object.prototype.toString,Zs=e=>Tu.call(e),sf=e=>Zs(e).slice(8,-1),Au=e=>Zs(e)==="[object Object]",La=e=>Be(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Pr=Ra(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Qs=e=>{const r=Object.create(null);return t=>r[t]||(r[t]=e(t))},af=/-(\w)/g,gt=Qs(e=>e.replace(af,(r,t)=>t?t.toUpperCase():"")),of=/\B([A-Z])/g,An=Qs(e=>e.replace(of,"-$1").toLowerCase()),ei=Qs(e=>e.charAt(0).toUpperCase()+e.slice(1)),bi=Qs(e=>e?`on${ei(e)}`:""),nn=(e,r)=>!Object.is(e,r),Es=(e,...r)=>{for(let t=0;t<e.length;t++)e[t](...r)},xu=(e,r,t,n=!1)=>{Object.defineProperty(e,r,{configurable:!0,enumerable:!1,writable:n,value:t})},$i=e=>{const r=parseFloat(e);return isNaN(r)?e:r};let _o;const ti=()=>_o||(_o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ni(e){if(ue(e)){const r={};for(let t=0;t<e.length;t++){const n=e[t],s=Be(n)?df(n):ni(n);if(s)for(const i in s)r[i]=s[i]}return r}else if(Be(e)||Oe(e))return e}const lf=/;(?![^(]*\))/g,uf=/:([^]+)/,cf=/\/\*[^]*?\*\//g;function df(e){const r={};return e.replace(cf,"").split(lf).forEach(t=>{if(t){const n=t.split(uf);n.length>1&&(r[n[0].trim()]=n[1].trim())}}),r}function ri(e){let r="";if(Be(e))r=e;else if(ue(e))for(let t=0;t<e.length;t++){const n=ri(e[t]);n&&(r+=n+" ")}else if(Oe(e))for(const t in e)e[t]&&(r+=t+" ");return r.trim()}const ff="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",hf=Ra(ff);function Ru(e){return!!e||e===""}const Mu=e=>!!(e&&e.__v_isRef===!0),Oa=e=>Be(e)?e:e==null?"":ue(e)||Oe(e)&&(e.toString===Tu||!de(e.toString))?Mu(e)?Oa(e.value):JSON.stringify(e,Iu,2):String(e),Iu=(e,r)=>Mu(r)?Iu(e,r.value):zn(r)?{[`Map(${r.size})`]:[...r.entries()].reduce((t,[n,s],i)=>(t[_i(n,i)+" =>"]=s,t),{})}:wu(r)?{[`Set(${r.size})`]:[...r.values()].map(t=>_i(t))}:dn(r)?_i(r):Oe(r)&&!ue(r)&&!Au(r)?String(r):r,_i=(e,r="")=>{var t;return dn(e)?`Symbol(${(t=e.description)!=null?t:r})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ft;class Lu{constructor(r=!1){this.detached=r,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ft,!r&&ft&&(this.index=(ft.scopes||(ft.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let r,t;if(this.scopes)for(r=0,t=this.scopes.length;r<t;r++)this.scopes[r].pause();for(r=0,t=this.effects.length;r<t;r++)this.effects[r].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let r,t;if(this.scopes)for(r=0,t=this.scopes.length;r<t;r++)this.scopes[r].resume();for(r=0,t=this.effects.length;r<t;r++)this.effects[r].resume()}}run(r){if(this._active){const t=ft;try{return ft=this,r()}finally{ft=t}}}on(){ft=this}off(){ft=this.parent}stop(r){if(this._active){this._active=!1;let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(this.effects.length=0,t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!r){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function pf(e){return new Lu(e)}function mf(){return ft}let Me;const Si=new WeakSet;class Ou{constructor(r){this.fn=r,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ft&&ft.active&&ft.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Si.has(this)&&(Si.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Nu(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,So(this),Du(this);const r=Me,t=Et;Me=this,Et=!0;try{return this.fn()}finally{Bu(this),Me=r,Et=t,this.flags&=-3}}stop(){if(this.flags&1){for(let r=this.deps;r;r=r.nextDep)Da(r);this.deps=this.depsTail=void 0,So(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Si.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Vi(this)&&this.run()}get dirty(){return Vi(this)}}let Pu=0,Nr,Dr;function Nu(e,r=!1){if(e.flags|=8,r){e.next=Dr,Dr=e;return}e.next=Nr,Nr=e}function Pa(){Pu++}function Na(){if(--Pu>0)return;if(Dr){let r=Dr;for(Dr=void 0;r;){const t=r.next;r.next=void 0,r.flags&=-9,r=t}}let e;for(;Nr;){let r=Nr;for(Nr=void 0;r;){const t=r.next;if(r.next=void 0,r.flags&=-9,r.flags&1)try{r.trigger()}catch(n){e||(e=n)}r=t}}if(e)throw e}function Du(e){for(let r=e.deps;r;r=r.nextDep)r.version=-1,r.prevActiveLink=r.dep.activeLink,r.dep.activeLink=r}function Bu(e){let r,t=e.depsTail,n=t;for(;n;){const s=n.prevDep;n.version===-1?(n===t&&(t=s),Da(n),vf(n)):r=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=s}e.deps=r,e.depsTail=t}function Vi(e){for(let r=e.deps;r;r=r.nextDep)if(r.dep.version!==r.version||r.dep.computed&&(Fu(r.dep.computed)||r.dep.version!==r.version))return!0;return!!e._dirty}function Fu(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===zr))return;e.globalVersion=zr;const r=e.dep;if(e.flags|=2,r.version>0&&!e.isSSR&&e.deps&&!Vi(e)){e.flags&=-3;return}const t=Me,n=Et;Me=e,Et=!0;try{Du(e);const s=e.fn(e._value);(r.version===0||nn(s,e._value))&&(e._value=s,r.version++)}catch(s){throw r.version++,s}finally{Me=t,Et=n,Bu(e),e.flags&=-3}}function Da(e,r=!1){const{dep:t,prevSub:n,nextSub:s}=e;if(n&&(n.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=n,e.nextSub=void 0),t.subs===e&&(t.subs=n,!n&&t.computed)){t.computed.flags&=-5;for(let i=t.computed.deps;i;i=i.nextDep)Da(i,!0)}!r&&!--t.sc&&t.map&&t.map.delete(t.key)}function vf(e){const{prevDep:r,nextDep:t}=e;r&&(r.nextDep=t,e.prevDep=void 0),t&&(t.prevDep=r,e.nextDep=void 0)}let Et=!0;const ju=[];function fn(){ju.push(Et),Et=!1}function hn(){const e=ju.pop();Et=e===void 0?!0:e}function So(e){const{cleanup:r}=e;if(e.cleanup=void 0,r){const t=Me;Me=void 0;try{r()}finally{Me=t}}}let zr=0;class gf{constructor(r,t){this.sub=r,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ba{constructor(r){this.computed=r,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(r){if(!Me||!Et||Me===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==Me)t=this.activeLink=new gf(Me,this),Me.deps?(t.prevDep=Me.depsTail,Me.depsTail.nextDep=t,Me.depsTail=t):Me.deps=Me.depsTail=t,Uu(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const n=t.nextDep;n.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=n),t.prevDep=Me.depsTail,t.nextDep=void 0,Me.depsTail.nextDep=t,Me.depsTail=t,Me.deps===t&&(Me.deps=n)}return t}trigger(r){this.version++,zr++,this.notify(r)}notify(r){Pa();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{Na()}}}function Uu(e){if(e.dep.sc++,e.sub.flags&4){const r=e.dep.computed;if(r&&!e.dep.subs){r.flags|=20;for(let n=r.deps;n;n=n.nextDep)Uu(n)}const t=e.dep.subs;t!==e&&(e.prevSub=t,t&&(t.nextSub=e)),e.dep.subs=e}}const qi=new WeakMap,bn=Symbol(""),zi=Symbol(""),Gr=Symbol("");function Ke(e,r,t){if(Et&&Me){let n=qi.get(e);n||qi.set(e,n=new Map);let s=n.get(t);s||(n.set(t,s=new Ba),s.map=n,s.key=t),s.track()}}function qt(e,r,t,n,s,i){const a=qi.get(e);if(!a){zr++;return}const o=l=>{l&&l.trigger()};if(Pa(),r==="clear")a.forEach(o);else{const l=ue(e),u=l&&La(t);if(l&&t==="length"){const c=Number(n);a.forEach((d,h)=>{(h==="length"||h===Gr||!dn(h)&&h>=c)&&o(d)})}else switch((t!==void 0||a.has(void 0))&&o(a.get(t)),u&&o(a.get(Gr)),r){case"add":l?u&&o(a.get("length")):(o(a.get(bn)),zn(e)&&o(a.get(zi)));break;case"delete":l||(o(a.get(bn)),zn(e)&&o(a.get(zi)));break;case"set":zn(e)&&o(a.get(bn));break}}Na()}function Pn(e){const r=Se(e);return r===e?r:(Ke(r,"iterate",Gr),vt(e)?r:r.map(We))}function si(e){return Ke(e=Se(e),"iterate",Gr),e}const yf={__proto__:null,[Symbol.iterator](){return Ei(this,Symbol.iterator,We)},concat(...e){return Pn(this).concat(...e.map(r=>ue(r)?Pn(r):r))},entries(){return Ei(this,"entries",e=>(e[1]=We(e[1]),e))},every(e,r){return Bt(this,"every",e,r,void 0,arguments)},filter(e,r){return Bt(this,"filter",e,r,t=>t.map(We),arguments)},find(e,r){return Bt(this,"find",e,r,We,arguments)},findIndex(e,r){return Bt(this,"findIndex",e,r,void 0,arguments)},findLast(e,r){return Bt(this,"findLast",e,r,We,arguments)},findLastIndex(e,r){return Bt(this,"findLastIndex",e,r,void 0,arguments)},forEach(e,r){return Bt(this,"forEach",e,r,void 0,arguments)},includes(...e){return ki(this,"includes",e)},indexOf(...e){return ki(this,"indexOf",e)},join(e){return Pn(this).join(e)},lastIndexOf(...e){return ki(this,"lastIndexOf",e)},map(e,r){return Bt(this,"map",e,r,void 0,arguments)},pop(){return rr(this,"pop")},push(...e){return rr(this,"push",e)},reduce(e,...r){return Eo(this,"reduce",e,r)},reduceRight(e,...r){return Eo(this,"reduceRight",e,r)},shift(){return rr(this,"shift")},some(e,r){return Bt(this,"some",e,r,void 0,arguments)},splice(...e){return rr(this,"splice",e)},toReversed(){return Pn(this).toReversed()},toSorted(e){return Pn(this).toSorted(e)},toSpliced(...e){return Pn(this).toSpliced(...e)},unshift(...e){return rr(this,"unshift",e)},values(){return Ei(this,"values",We)}};function Ei(e,r,t){const n=si(e),s=n[r]();return n!==e&&!vt(e)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=t(i.value)),i}),s}const bf=Array.prototype;function Bt(e,r,t,n,s,i){const a=si(e),o=a!==e&&!vt(e),l=a[r];if(l!==bf[r]){const d=l.apply(e,i);return o?We(d):d}let u=t;a!==e&&(o?u=function(d,h){return t.call(this,We(d),h,e)}:t.length>2&&(u=function(d,h){return t.call(this,d,h,e)}));const c=l.call(a,u,n);return o&&s?s(c):c}function Eo(e,r,t,n){const s=si(e);let i=t;return s!==e&&(vt(e)?t.length>3&&(i=function(a,o,l){return t.call(this,a,o,l,e)}):i=function(a,o,l){return t.call(this,a,We(o),l,e)}),s[r](i,...n)}function ki(e,r,t){const n=Se(e);Ke(n,"iterate",Gr);const s=n[r](...t);return(s===-1||s===!1)&&Ha(t[0])?(t[0]=Se(t[0]),n[r](...t)):s}function rr(e,r,t=[]){fn(),Pa();const n=Se(e)[r].apply(e,t);return Na(),hn(),n}const _f=Ra("__proto__,__v_isRef,__isVue"),Hu=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(dn));function Sf(e){dn(e)||(e=String(e));const r=Se(this);return Ke(r,"has",e),r.hasOwnProperty(e)}class $u{constructor(r=!1,t=!1){this._isReadonly=r,this._isShallow=t}get(r,t,n){if(t==="__v_skip")return r.__v_skip;const s=this._isReadonly,i=this._isShallow;if(t==="__v_isReactive")return!s;if(t==="__v_isReadonly")return s;if(t==="__v_isShallow")return i;if(t==="__v_raw")return n===(s?i?If:Gu:i?zu:qu).get(r)||Object.getPrototypeOf(r)===Object.getPrototypeOf(n)?r:void 0;const a=ue(r);if(!s){let l;if(a&&(l=yf[t]))return l;if(t==="hasOwnProperty")return Sf}const o=Reflect.get(r,t,Ye(r)?r:n);return(dn(t)?Hu.has(t):_f(t))||(s||Ke(r,"get",t),i)?o:Ye(o)?a&&La(t)?o:o.value:Oe(o)?s?ja(o):as(o):o}}class Vu extends $u{constructor(r=!1){super(!1,r)}set(r,t,n,s){let i=r[t];if(!this._isShallow){const l=kn(i);if(!vt(n)&&!kn(n)&&(i=Se(i),n=Se(n)),!ue(r)&&Ye(i)&&!Ye(n))return l?!1:(i.value=n,!0)}const a=ue(r)&&La(t)?Number(t)<r.length:Ee(r,t),o=Reflect.set(r,t,n,Ye(r)?r:s);return r===Se(s)&&(a?nn(n,i)&&qt(r,"set",t,n):qt(r,"add",t,n)),o}deleteProperty(r,t){const n=Ee(r,t);r[t];const s=Reflect.deleteProperty(r,t);return s&&n&&qt(r,"delete",t,void 0),s}has(r,t){const n=Reflect.has(r,t);return(!dn(t)||!Hu.has(t))&&Ke(r,"has",t),n}ownKeys(r){return Ke(r,"iterate",ue(r)?"length":bn),Reflect.ownKeys(r)}}class Ef extends $u{constructor(r=!1){super(!0,r)}set(r,t){return!0}deleteProperty(r,t){return!0}}const kf=new Vu,wf=new Ef,Cf=new Vu(!0);const Gi=e=>e,fs=e=>Reflect.getPrototypeOf(e);function Tf(e,r,t){return function(...n){const s=this.__v_raw,i=Se(s),a=zn(i),o=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,u=s[e](...n),c=t?Gi:r?Ki:We;return!r&&Ke(i,"iterate",l?zi:bn),{next(){const{value:d,done:h}=u.next();return h?{value:d,done:h}:{value:o?[c(d[0]),c(d[1])]:c(d),done:h}},[Symbol.iterator](){return this}}}}function hs(e){return function(...r){return e==="delete"?!1:e==="clear"?void 0:this}}function Af(e,r){const t={get(s){const i=this.__v_raw,a=Se(i),o=Se(s);e||(nn(s,o)&&Ke(a,"get",s),Ke(a,"get",o));const{has:l}=fs(a),u=r?Gi:e?Ki:We;if(l.call(a,s))return u(i.get(s));if(l.call(a,o))return u(i.get(o));i!==a&&i.get(s)},get size(){const s=this.__v_raw;return!e&&Ke(Se(s),"iterate",bn),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,a=Se(i),o=Se(s);return e||(nn(s,o)&&Ke(a,"has",s),Ke(a,"has",o)),s===o?i.has(s):i.has(s)||i.has(o)},forEach(s,i){const a=this,o=a.__v_raw,l=Se(o),u=r?Gi:e?Ki:We;return!e&&Ke(l,"iterate",bn),o.forEach((c,d)=>s.call(i,u(c),u(d),a))}};return Xe(t,e?{add:hs("add"),set:hs("set"),delete:hs("delete"),clear:hs("clear")}:{add(s){!r&&!vt(s)&&!kn(s)&&(s=Se(s));const i=Se(this);return fs(i).has.call(i,s)||(i.add(s),qt(i,"add",s,s)),this},set(s,i){!r&&!vt(i)&&!kn(i)&&(i=Se(i));const a=Se(this),{has:o,get:l}=fs(a);let u=o.call(a,s);u||(s=Se(s),u=o.call(a,s));const c=l.call(a,s);return a.set(s,i),u?nn(i,c)&&qt(a,"set",s,i):qt(a,"add",s,i),this},delete(s){const i=Se(this),{has:a,get:o}=fs(i);let l=a.call(i,s);l||(s=Se(s),l=a.call(i,s)),o&&o.call(i,s);const u=i.delete(s);return l&&qt(i,"delete",s,void 0),u},clear(){const s=Se(this),i=s.size!==0,a=s.clear();return i&&qt(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=Tf(s,e,r)}),t}function Fa(e,r){const t=Af(e,r);return(n,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?n:Reflect.get(Ee(t,s)&&s in n?t:n,s,i)}const xf={get:Fa(!1,!1)},Rf={get:Fa(!1,!0)},Mf={get:Fa(!0,!1)};const qu=new WeakMap,zu=new WeakMap,Gu=new WeakMap,If=new WeakMap;function Lf(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Of(e){return e.__v_skip||!Object.isExtensible(e)?0:Lf(sf(e))}function as(e){return kn(e)?e:Ua(e,!1,kf,xf,qu)}function Ku(e){return Ua(e,!1,Cf,Rf,zu)}function ja(e){return Ua(e,!0,wf,Mf,Gu)}function Ua(e,r,t,n,s){if(!Oe(e)||e.__v_raw&&!(r&&e.__v_isReactive))return e;const i=s.get(e);if(i)return i;const a=Of(e);if(a===0)return e;const o=new Proxy(e,a===2?n:t);return s.set(e,o),o}function Gn(e){return kn(e)?Gn(e.__v_raw):!!(e&&e.__v_isReactive)}function kn(e){return!!(e&&e.__v_isReadonly)}function vt(e){return!!(e&&e.__v_isShallow)}function Ha(e){return e?!!e.__v_raw:!1}function Se(e){const r=e&&e.__v_raw;return r?Se(r):e}function Wu(e){return!Ee(e,"__v_skip")&&Object.isExtensible(e)&&xu(e,"__v_skip",!0),e}const We=e=>Oe(e)?as(e):e,Ki=e=>Oe(e)?ja(e):e;function Ye(e){return e?e.__v_isRef===!0:!1}function it(e){return Ju(e,!1)}function Pf(e){return Ju(e,!0)}function Ju(e,r){return Ye(e)?e:new Nf(e,r)}class Nf{constructor(r,t){this.dep=new Ba,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?r:Se(r),this._value=t?r:We(r),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(r){const t=this._rawValue,n=this.__v_isShallow||vt(r)||kn(r);r=n?r:Se(r),nn(r,t)&&(this._rawValue=r,this._value=n?r:We(r),this.dep.trigger())}}function $e(e){return Ye(e)?e.value:e}const Df={get:(e,r,t)=>r==="__v_raw"?e:$e(Reflect.get(e,r,t)),set:(e,r,t,n)=>{const s=e[r];return Ye(s)&&!Ye(t)?(s.value=t,!0):Reflect.set(e,r,t,n)}};function Yu(e){return Gn(e)?e:new Proxy(e,Df)}class Bf{constructor(r,t,n){this.fn=r,this.setter=t,this._value=void 0,this.dep=new Ba(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=zr-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Me!==this)return Nu(this,!0),!0}get value(){const r=this.dep.track();return Fu(this),r&&(r.version=this.dep.version),this._value}set value(r){this.setter&&this.setter(r)}}function Ff(e,r,t=!1){let n,s;return de(e)?n=e:(n=e.get,s=e.set),new Bf(n,s,t)}const ps={},Fs=new WeakMap;let gn;function jf(e,r=!1,t=gn){if(t){let n=Fs.get(t);n||Fs.set(t,n=[]),n.push(e)}}function Uf(e,r,t=Ae){const{immediate:n,deep:s,once:i,scheduler:a,augmentJob:o,call:l}=t,u=T=>s?T:vt(T)||s===!1||s===0?zt(T,1):zt(T);let c,d,h,f,m=!1,p=!1;if(Ye(e)?(d=()=>e.value,m=vt(e)):Gn(e)?(d=()=>u(e),m=!0):ue(e)?(p=!0,m=e.some(T=>Gn(T)||vt(T)),d=()=>e.map(T=>{if(Ye(T))return T.value;if(Gn(T))return u(T);if(de(T))return l?l(T,2):T()})):de(e)?r?d=l?()=>l(e,2):e:d=()=>{if(h){fn();try{h()}finally{hn()}}const T=gn;gn=c;try{return l?l(e,3,[f]):e(f)}finally{gn=T}}:d=Ot,r&&s){const T=d,x=s===!0?1/0:s;d=()=>zt(T(),x)}const y=mf(),g=()=>{c.stop(),y&&y.active&&Ia(y.effects,c)};if(i&&r){const T=r;r=(...x)=>{T(...x),g()}}let S=p?new Array(e.length).fill(ps):ps;const k=T=>{if(!(!(c.flags&1)||!c.dirty&&!T))if(r){const x=c.run();if(s||m||(p?x.some((I,F)=>nn(I,S[F])):nn(x,S))){h&&h();const I=gn;gn=c;try{const F=[x,S===ps?void 0:p&&S[0]===ps?[]:S,f];l?l(r,3,F):r(...F),S=x}finally{gn=I}}}else c.run()};return o&&o(k),c=new Ou(d),c.scheduler=a?()=>a(k,!1):k,f=T=>jf(T,!1,c),h=c.onStop=()=>{const T=Fs.get(c);if(T){if(l)l(T,4);else for(const x of T)x();Fs.delete(c)}},r?n?k(!0):S=c.run():a?a(k.bind(null,!0),!0):c.run(),g.pause=c.pause.bind(c),g.resume=c.resume.bind(c),g.stop=g,g}function zt(e,r=1/0,t){if(r<=0||!Oe(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),r--,Ye(e))zt(e.value,r,t);else if(ue(e))for(let n=0;n<e.length;n++)zt(e[n],r,t);else if(wu(e)||zn(e))e.forEach(n=>{zt(n,r,t)});else if(Au(e)){for(const n in e)zt(e[n],r,t);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&zt(e[n],r,t)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function os(e,r,t,n){try{return n?e(...n):e()}catch(s){ii(s,r,t)}}function Dt(e,r,t,n){if(de(e)){const s=os(e,r,t,n);return s&&Cu(s)&&s.catch(i=>{ii(i,r,t)}),s}if(ue(e)){const s=[];for(let i=0;i<e.length;i++)s.push(Dt(e[i],r,t,n));return s}}function ii(e,r,t,n=!0){const s=r?r.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=r&&r.appContext.config||Ae;if(r){let o=r.parent;const l=r.proxy,u=`https://vuejs.org/error-reference/#runtime-${t}`;for(;o;){const c=o.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](e,l,u)===!1)return}o=o.parent}if(i){fn(),os(i,null,10,[e,l,u]),hn();return}}Hf(e,t,s,n,a)}function Hf(e,r,t,n=!0,s=!1){if(s)throw e;console.error(e)}const nt=[];let Rt=-1;const Kn=[];let Qt=null,Bn=0;const Xu=Promise.resolve();let js=null;function $a(e){const r=js||Xu;return e?r.then(this?e.bind(this):e):r}function $f(e){let r=Rt+1,t=nt.length;for(;r<t;){const n=r+t>>>1,s=nt[n],i=Kr(s);i<e||i===e&&s.flags&2?r=n+1:t=n}return r}function Va(e){if(!(e.flags&1)){const r=Kr(e),t=nt[nt.length-1];!t||!(e.flags&2)&&r>=Kr(t)?nt.push(e):nt.splice($f(r),0,e),e.flags|=1,Zu()}}function Zu(){js||(js=Xu.then(ec))}function Vf(e){ue(e)?Kn.push(...e):Qt&&e.id===-1?Qt.splice(Bn+1,0,e):e.flags&1||(Kn.push(e),e.flags|=1),Zu()}function ko(e,r,t=Rt+1){for(;t<nt.length;t++){const n=nt[t];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;nt.splice(t,1),t--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Qu(e){if(Kn.length){const r=[...new Set(Kn)].sort((t,n)=>Kr(t)-Kr(n));if(Kn.length=0,Qt){Qt.push(...r);return}for(Qt=r,Bn=0;Bn<Qt.length;Bn++){const t=Qt[Bn];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}Qt=null,Bn=0}}const Kr=e=>e.id==null?e.flags&2?-1:1/0:e.id;function ec(e){try{for(Rt=0;Rt<nt.length;Rt++){const r=nt[Rt];r&&!(r.flags&8)&&(r.flags&4&&(r.flags&=-2),os(r,r.i,r.i?15:14),r.flags&4||(r.flags&=-2))}}finally{for(;Rt<nt.length;Rt++){const r=nt[Rt];r&&(r.flags&=-2)}Rt=-1,nt.length=0,Qu(),js=null,(nt.length||Kn.length)&&ec()}}let at=null,tc=null;function Us(e){const r=at;return at=e,tc=e&&e.type.__scopeId||null,r}function nc(e,r=at,t){if(!r||e._n)return e;const n=(...s)=>{n._d&&Oo(-1);const i=Us(r);let a;try{a=e(...s)}finally{Us(i),n._d&&Oo(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function wi(e,r){if(at===null)return e;const t=ui(at),n=e.dirs||(e.dirs=[]);for(let s=0;s<r.length;s++){let[i,a,o,l=Ae]=r[s];i&&(de(i)&&(i={mounted:i,updated:i}),i.deep&&zt(a),n.push({dir:i,instance:t,value:a,oldValue:void 0,arg:o,modifiers:l}))}return e}function pn(e,r,t,n){const s=e.dirs,i=r&&r.dirs;for(let a=0;a<s.length;a++){const o=s[a];i&&(o.oldValue=i[a].value);let l=o.dir[n];l&&(fn(),Dt(l,t,8,[e.el,o,e,r]),hn())}}const qf=Symbol("_vte"),zf=e=>e.__isTeleport;function qa(e,r){e.shapeFlag&6&&e.component?(e.transition=r,qa(e.component.subTree,r)):e.shapeFlag&128?(e.ssContent.transition=r.clone(e.ssContent),e.ssFallback.transition=r.clone(e.ssFallback)):e.transition=r}/*! #__NO_SIDE_EFFECTS__ */function xn(e,r){return de(e)?Xe({name:e.name},r,{setup:e}):e}function rc(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Hs(e,r,t,n,s=!1){if(ue(e)){e.forEach((m,p)=>Hs(m,r&&(ue(r)?r[p]:r),t,n,s));return}if(Br(n)&&!s){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Hs(e,r,t,n.component.subTree);return}const i=n.shapeFlag&4?ui(n.component):n.el,a=s?null:i,{i:o,r:l}=e,u=r&&r.r,c=o.refs===Ae?o.refs={}:o.refs,d=o.setupState,h=Se(d),f=d===Ae?()=>!1:m=>Ee(h,m);if(u!=null&&u!==l&&(Be(u)?(c[u]=null,f(u)&&(d[u]=null)):Ye(u)&&(u.value=null)),de(l))os(l,o,12,[a,c]);else{const m=Be(l),p=Ye(l);if(m||p){const y=()=>{if(e.f){const g=m?f(l)?d[l]:c[l]:l.value;s?ue(g)&&Ia(g,i):ue(g)?g.includes(i)||g.push(i):m?(c[l]=[i],f(l)&&(d[l]=c[l])):(l.value=[i],e.k&&(c[e.k]=l.value))}else m?(c[l]=a,f(l)&&(d[l]=a)):p&&(l.value=a,e.k&&(c[e.k]=a))};a?(y.id=-1,dt(y,t)):y()}}}ti().requestIdleCallback;ti().cancelIdleCallback;const Br=e=>!!e.type.__asyncLoader,sc=e=>e.type.__isKeepAlive;function Gf(e,r){ic(e,"a",r)}function Kf(e,r){ic(e,"da",r)}function ic(e,r,t=qe){const n=e.__wdc||(e.__wdc=()=>{let s=t;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(ai(r,n,t),t){let s=t.parent;for(;s&&s.parent;)sc(s.parent.vnode)&&Wf(n,r,t,s),s=s.parent}}function Wf(e,r,t,n){const s=ai(r,e,n,!0);ac(()=>{Ia(n[r],s)},t)}function ai(e,r,t=qe,n=!1){if(t){const s=t[e]||(t[e]=[]),i=r.__weh||(r.__weh=(...a)=>{fn();const o=ls(t),l=Dt(r,t,e,a);return o(),hn(),l});return n?s.unshift(i):s.push(i),i}}const Yt=e=>(r,t=qe)=>{(!Jr||e==="sp")&&ai(e,(...n)=>r(...n),t)},Jf=Yt("bm"),za=Yt("m"),Yf=Yt("bu"),Xf=Yt("u"),Zf=Yt("bum"),ac=Yt("um"),Qf=Yt("sp"),eh=Yt("rtg"),th=Yt("rtc");function nh(e,r=qe){ai("ec",e,r)}const rh="components";function sh(e,r){return ah(rh,e,!0,r)||e}const ih=Symbol.for("v-ndc");function ah(e,r,t=!0,n=!1){const s=at||qe;if(s){const i=s.type;{const o=Jh(i,!1);if(o&&(o===r||o===gt(r)||o===ei(gt(r))))return i}const a=wo(s[e]||i[e],r)||wo(s.appContext[e],r);return!a&&n?i:a}}function wo(e,r){return e&&(e[r]||e[gt(r)]||e[ei(gt(r))])}function oh(e,r,t,n){let s;const i=t,a=ue(e);if(a||Be(e)){const o=a&&Gn(e);let l=!1;o&&(l=!vt(e),e=si(e)),s=new Array(e.length);for(let u=0,c=e.length;u<c;u++)s[u]=r(l?We(e[u]):e[u],u,void 0,i)}else if(typeof e=="number"){s=new Array(e);for(let o=0;o<e;o++)s[o]=r(o+1,o,void 0,i)}else if(Oe(e))if(e[Symbol.iterator])s=Array.from(e,(o,l)=>r(o,l,void 0,i));else{const o=Object.keys(e);s=new Array(o.length);for(let l=0,u=o.length;l<u;l++){const c=o[l];s[l]=r(e[c],c,l,i)}}else s=[];return s}const Wi=e=>e?Ac(e)?ui(e):Wi(e.parent):null,Fr=Xe(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Wi(e.parent),$root:e=>Wi(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>lc(e),$forceUpdate:e=>e.f||(e.f=()=>{Va(e.update)}),$nextTick:e=>e.n||(e.n=$a.bind(e.proxy)),$watch:e=>xh.bind(e)}),Ci=(e,r)=>e!==Ae&&!e.__isScriptSetup&&Ee(e,r),lh={get({_:e},r){if(r==="__v_skip")return!0;const{ctx:t,setupState:n,data:s,props:i,accessCache:a,type:o,appContext:l}=e;let u;if(r[0]!=="$"){const f=a[r];if(f!==void 0)switch(f){case 1:return n[r];case 2:return s[r];case 4:return t[r];case 3:return i[r]}else{if(Ci(n,r))return a[r]=1,n[r];if(s!==Ae&&Ee(s,r))return a[r]=2,s[r];if((u=e.propsOptions[0])&&Ee(u,r))return a[r]=3,i[r];if(t!==Ae&&Ee(t,r))return a[r]=4,t[r];Ji&&(a[r]=0)}}const c=Fr[r];let d,h;if(c)return r==="$attrs"&&Ke(e.attrs,"get",""),c(e);if((d=o.__cssModules)&&(d=d[r]))return d;if(t!==Ae&&Ee(t,r))return a[r]=4,t[r];if(h=l.config.globalProperties,Ee(h,r))return h[r]},set({_:e},r,t){const{data:n,setupState:s,ctx:i}=e;return Ci(s,r)?(s[r]=t,!0):n!==Ae&&Ee(n,r)?(n[r]=t,!0):Ee(e.props,r)||r[0]==="$"&&r.slice(1)in e?!1:(i[r]=t,!0)},has({_:{data:e,setupState:r,accessCache:t,ctx:n,appContext:s,propsOptions:i}},a){let o;return!!t[a]||e!==Ae&&Ee(e,a)||Ci(r,a)||(o=i[0])&&Ee(o,a)||Ee(n,a)||Ee(Fr,a)||Ee(s.config.globalProperties,a)},defineProperty(e,r,t){return t.get!=null?e._.accessCache[r]=0:Ee(t,"value")&&this.set(e,r,t.value,null),Reflect.defineProperty(e,r,t)}};function Co(e){return ue(e)?e.reduce((r,t)=>(r[t]=null,r),{}):e}let Ji=!0;function uh(e){const r=lc(e),t=e.proxy,n=e.ctx;Ji=!1,r.beforeCreate&&To(r.beforeCreate,e,"bc");const{data:s,computed:i,methods:a,watch:o,provide:l,inject:u,created:c,beforeMount:d,mounted:h,beforeUpdate:f,updated:m,activated:p,deactivated:y,beforeDestroy:g,beforeUnmount:S,destroyed:k,unmounted:T,render:x,renderTracked:I,renderTriggered:F,errorCaptured:$,serverPrefetch:ae,expose:me,inheritAttrs:re,components:se,directives:ge,filters:z}=r;if(u&&ch(u,n,null),a)for(const R in a){const L=a[R];de(L)&&(n[R]=L.bind(t))}if(s){const R=s.call(t,t);Oe(R)&&(e.data=as(R))}if(Ji=!0,i)for(const R in i){const L=i[R],J=de(L)?L.bind(t,t):de(L.get)?L.get.bind(t,t):Ot,X=!de(L)&&de(L.set)?L.set.bind(t):Ot,G=St({get:J,set:X});Object.defineProperty(n,R,{enumerable:!0,configurable:!0,get:()=>G.value,set:ce=>G.value=ce})}if(o)for(const R in o)oc(o[R],n,t,R);if(l){const R=de(l)?l.call(t):l;Reflect.ownKeys(R).forEach(L=>{ks(L,R[L])})}c&&To(c,e,"c");function D(R,L){ue(L)?L.forEach(J=>R(J.bind(t))):L&&R(L.bind(t))}if(D(Jf,d),D(za,h),D(Yf,f),D(Xf,m),D(Gf,p),D(Kf,y),D(nh,$),D(th,I),D(eh,F),D(Zf,S),D(ac,T),D(Qf,ae),ue(me))if(me.length){const R=e.exposed||(e.exposed={});me.forEach(L=>{Object.defineProperty(R,L,{get:()=>t[L],set:J=>t[L]=J})})}else e.exposed||(e.exposed={});x&&e.render===Ot&&(e.render=x),re!=null&&(e.inheritAttrs=re),se&&(e.components=se),ge&&(e.directives=ge),ae&&rc(e)}function ch(e,r,t=Ot){ue(e)&&(e=Yi(e));for(const n in e){const s=e[n];let i;Oe(s)?"default"in s?i=Pt(s.from||n,s.default,!0):i=Pt(s.from||n):i=Pt(s),Ye(i)?Object.defineProperty(r,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):r[n]=i}}function To(e,r,t){Dt(ue(e)?e.map(n=>n.bind(r.proxy)):e.bind(r.proxy),r,t)}function oc(e,r,t,n){let s=n.includes(".")?Ec(t,n):()=>t[n];if(Be(e)){const i=r[e];de(i)&&Gt(s,i)}else if(de(e))Gt(s,e.bind(t));else if(Oe(e))if(ue(e))e.forEach(i=>oc(i,r,t,n));else{const i=de(e.handler)?e.handler.bind(t):r[e.handler];de(i)&&Gt(s,i,e)}}function lc(e){const r=e.type,{mixins:t,extends:n}=r,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=e.appContext,o=i.get(r);let l;return o?l=o:!s.length&&!t&&!n?l=r:(l={},s.length&&s.forEach(u=>$s(l,u,a,!0)),$s(l,r,a)),Oe(r)&&i.set(r,l),l}function $s(e,r,t,n=!1){const{mixins:s,extends:i}=r;i&&$s(e,i,t,!0),s&&s.forEach(a=>$s(e,a,t,!0));for(const a in r)if(!(n&&a==="expose")){const o=dh[a]||t&&t[a];e[a]=o?o(e[a],r[a]):r[a]}return e}const dh={data:Ao,props:xo,emits:xo,methods:xr,computed:xr,beforeCreate:et,created:et,beforeMount:et,mounted:et,beforeUpdate:et,updated:et,beforeDestroy:et,beforeUnmount:et,destroyed:et,unmounted:et,activated:et,deactivated:et,errorCaptured:et,serverPrefetch:et,components:xr,directives:xr,watch:hh,provide:Ao,inject:fh};function Ao(e,r){return r?e?function(){return Xe(de(e)?e.call(this,this):e,de(r)?r.call(this,this):r)}:r:e}function fh(e,r){return xr(Yi(e),Yi(r))}function Yi(e){if(ue(e)){const r={};for(let t=0;t<e.length;t++)r[e[t]]=e[t];return r}return e}function et(e,r){return e?[...new Set([].concat(e,r))]:r}function xr(e,r){return e?Xe(Object.create(null),e,r):r}function xo(e,r){return e?ue(e)&&ue(r)?[...new Set([...e,...r])]:Xe(Object.create(null),Co(e),Co(r??{})):r}function hh(e,r){if(!e)return r;if(!r)return e;const t=Xe(Object.create(null),e);for(const n in r)t[n]=et(e[n],r[n]);return t}function uc(){return{app:null,config:{isNativeTag:nf,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ph=0;function mh(e,r){return function(n,s=null){de(n)||(n=Xe({},n)),s!=null&&!Oe(s)&&(s=null);const i=uc(),a=new WeakSet,o=[];let l=!1;const u=i.app={_uid:ph++,_component:n,_props:s,_container:null,_context:i,_instance:null,version:Xh,get config(){return i.config},set config(c){},use(c,...d){return a.has(c)||(c&&de(c.install)?(a.add(c),c.install(u,...d)):de(c)&&(a.add(c),c(u,...d))),u},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),u},component(c,d){return d?(i.components[c]=d,u):i.components[c]},directive(c,d){return d?(i.directives[c]=d,u):i.directives[c]},mount(c,d,h){if(!l){const f=u._ceVNode||Je(n,s);return f.appContext=i,h===!0?h="svg":h===!1&&(h=void 0),e(f,c,h),l=!0,u._container=c,c.__vue_app__=u,ui(f.component)}},onUnmount(c){o.push(c)},unmount(){l&&(Dt(o,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(c,d){return i.provides[c]=d,u},runWithContext(c){const d=Wn;Wn=u;try{return c()}finally{Wn=d}}};return u}}let Wn=null;function ks(e,r){if(qe){let t=qe.provides;const n=qe.parent&&qe.parent.provides;n===t&&(t=qe.provides=Object.create(n)),t[e]=r}}function Pt(e,r,t=!1){const n=qe||at;if(n||Wn){const s=Wn?Wn._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return t&&de(r)?r.call(n&&n.proxy):r}}const cc={},dc=()=>Object.create(cc),fc=e=>Object.getPrototypeOf(e)===cc;function vh(e,r,t,n=!1){const s={},i=dc();e.propsDefaults=Object.create(null),hc(e,r,s,i);for(const a in e.propsOptions[0])a in s||(s[a]=void 0);t?e.props=n?s:Ku(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function gh(e,r,t,n){const{props:s,attrs:i,vnode:{patchFlag:a}}=e,o=Se(s),[l]=e.propsOptions;let u=!1;if((n||a>0)&&!(a&16)){if(a&8){const c=e.vnode.dynamicProps;for(let d=0;d<c.length;d++){let h=c[d];if(oi(e.emitsOptions,h))continue;const f=r[h];if(l)if(Ee(i,h))f!==i[h]&&(i[h]=f,u=!0);else{const m=gt(h);s[m]=Xi(l,o,m,f,e,!1)}else f!==i[h]&&(i[h]=f,u=!0)}}}else{hc(e,r,s,i)&&(u=!0);let c;for(const d in o)(!r||!Ee(r,d)&&((c=An(d))===d||!Ee(r,c)))&&(l?t&&(t[d]!==void 0||t[c]!==void 0)&&(s[d]=Xi(l,o,d,void 0,e,!0)):delete s[d]);if(i!==o)for(const d in i)(!r||!Ee(r,d))&&(delete i[d],u=!0)}u&&qt(e.attrs,"set","")}function hc(e,r,t,n){const[s,i]=e.propsOptions;let a=!1,o;if(r)for(let l in r){if(Pr(l))continue;const u=r[l];let c;s&&Ee(s,c=gt(l))?!i||!i.includes(c)?t[c]=u:(o||(o={}))[c]=u:oi(e.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,a=!0)}if(i){const l=Se(t),u=o||Ae;for(let c=0;c<i.length;c++){const d=i[c];t[d]=Xi(s,l,d,u[d],e,!Ee(u,d))}}return a}function Xi(e,r,t,n,s,i){const a=e[t];if(a!=null){const o=Ee(a,"default");if(o&&n===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&de(l)){const{propsDefaults:u}=s;if(t in u)n=u[t];else{const c=ls(s);n=u[t]=l.call(null,r),c()}}else n=l;s.ce&&s.ce._setProp(t,n)}a[0]&&(i&&!o?n=!1:a[1]&&(n===""||n===An(t))&&(n=!0))}return n}const yh=new WeakMap;function pc(e,r,t=!1){const n=t?yh:r.propsCache,s=n.get(e);if(s)return s;const i=e.props,a={},o=[];let l=!1;if(!de(e)){const c=d=>{l=!0;const[h,f]=pc(d,r,!0);Xe(a,h),f&&o.push(...f)};!t&&r.mixins.length&&r.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!i&&!l)return Oe(e)&&n.set(e,qn),qn;if(ue(i))for(let c=0;c<i.length;c++){const d=gt(i[c]);Ro(d)&&(a[d]=Ae)}else if(i)for(const c in i){const d=gt(c);if(Ro(d)){const h=i[c],f=a[d]=ue(h)||de(h)?{type:h}:Xe({},h),m=f.type;let p=!1,y=!0;if(ue(m))for(let g=0;g<m.length;++g){const S=m[g],k=de(S)&&S.name;if(k==="Boolean"){p=!0;break}else k==="String"&&(y=!1)}else p=de(m)&&m.name==="Boolean";f[0]=p,f[1]=y,(p||Ee(f,"default"))&&o.push(d)}}const u=[a,o];return Oe(e)&&n.set(e,u),u}function Ro(e){return e[0]!=="$"&&!Pr(e)}const mc=e=>e[0]==="_"||e==="$stable",Ga=e=>ue(e)?e.map(Mt):[Mt(e)],bh=(e,r,t)=>{if(r._n)return r;const n=nc((...s)=>Ga(r(...s)),t);return n._c=!1,n},vc=(e,r,t)=>{const n=e._ctx;for(const s in e){if(mc(s))continue;const i=e[s];if(de(i))r[s]=bh(s,i,n);else if(i!=null){const a=Ga(i);r[s]=()=>a}}},gc=(e,r)=>{const t=Ga(r);e.slots.default=()=>t},yc=(e,r,t)=>{for(const n in r)(t||n!=="_")&&(e[n]=r[n])},_h=(e,r,t)=>{const n=e.slots=dc();if(e.vnode.shapeFlag&32){const s=r._;s?(yc(n,r,t),t&&xu(n,"_",s,!0)):vc(r,n)}else r&&gc(e,r)},Sh=(e,r,t)=>{const{vnode:n,slots:s}=e;let i=!0,a=Ae;if(n.shapeFlag&32){const o=r._;o?t&&o===1?i=!1:yc(s,r,t):(i=!r.$stable,vc(r,s)),a=r}else r&&(gc(e,r),a={default:1});if(i)for(const o in s)!mc(o)&&a[o]==null&&delete s[o]},dt=Nh;function Eh(e){return kh(e)}function kh(e,r){const t=ti();t.__VUE__=!0;const{insert:n,remove:s,patchProp:i,createElement:a,createText:o,createComment:l,setText:u,setElementText:c,parentNode:d,nextSibling:h,setScopeId:f=Ot,insertStaticContent:m}=e,p=(b,_,E,O=null,N=null,P=null,H=void 0,U=null,j=!!_.dynamicChildren)=>{if(b===_)return;b&&!sr(b,_)&&(O=M(b),ce(b,N,P,!0),b=null),_.patchFlag===-2&&(j=!1,_.dynamicChildren=null);const{type:B,ref:ie,shapeFlag:q}=_;switch(B){case li:y(b,_,E,O);break;case wn:g(b,_,E,O);break;case Ai:b==null&&S(_,E,O,H);break;case bt:se(b,_,E,O,N,P,H,U,j);break;default:q&1?x(b,_,E,O,N,P,H,U,j):q&6?ge(b,_,E,O,N,P,H,U,j):(q&64||q&128)&&B.process(b,_,E,O,N,P,H,U,j,Q)}ie!=null&&N&&Hs(ie,b&&b.ref,P,_||b,!_)},y=(b,_,E,O)=>{if(b==null)n(_.el=o(_.children),E,O);else{const N=_.el=b.el;_.children!==b.children&&u(N,_.children)}},g=(b,_,E,O)=>{b==null?n(_.el=l(_.children||""),E,O):_.el=b.el},S=(b,_,E,O)=>{[b.el,b.anchor]=m(b.children,_,E,O,b.el,b.anchor)},k=({el:b,anchor:_},E,O)=>{let N;for(;b&&b!==_;)N=h(b),n(b,E,O),b=N;n(_,E,O)},T=({el:b,anchor:_})=>{let E;for(;b&&b!==_;)E=h(b),s(b),b=E;s(_)},x=(b,_,E,O,N,P,H,U,j)=>{_.type==="svg"?H="svg":_.type==="math"&&(H="mathml"),b==null?I(_,E,O,N,P,H,U,j):ae(b,_,N,P,H,U,j)},I=(b,_,E,O,N,P,H,U)=>{let j,B;const{props:ie,shapeFlag:q,transition:ne,dirs:le}=b;if(j=b.el=a(b.type,P,ie&&ie.is,ie),q&8?c(j,b.children):q&16&&$(b.children,j,null,O,N,Ti(b,P),H,U),le&&pn(b,null,O,"created"),F(j,b,b.scopeId,H,O),ie){for(const Re in ie)Re!=="value"&&!Pr(Re)&&i(j,Re,null,ie[Re],P,O);"value"in ie&&i(j,"value",null,ie.value,P),(B=ie.onVnodeBeforeMount)&&xt(B,O,b)}le&&pn(b,null,O,"beforeMount");const ye=wh(N,ne);ye&&ne.beforeEnter(j),n(j,_,E),((B=ie&&ie.onVnodeMounted)||ye||le)&&dt(()=>{B&&xt(B,O,b),ye&&ne.enter(j),le&&pn(b,null,O,"mounted")},N)},F=(b,_,E,O,N)=>{if(E&&f(b,E),O)for(let P=0;P<O.length;P++)f(b,O[P]);if(N){let P=N.subTree;if(_===P||wc(P.type)&&(P.ssContent===_||P.ssFallback===_)){const H=N.vnode;F(b,H,H.scopeId,H.slotScopeIds,N.parent)}}},$=(b,_,E,O,N,P,H,U,j=0)=>{for(let B=j;B<b.length;B++){const ie=b[B]=U?en(b[B]):Mt(b[B]);p(null,ie,_,E,O,N,P,H,U)}},ae=(b,_,E,O,N,P,H)=>{const U=_.el=b.el;let{patchFlag:j,dynamicChildren:B,dirs:ie}=_;j|=b.patchFlag&16;const q=b.props||Ae,ne=_.props||Ae;let le;if(E&&mn(E,!1),(le=ne.onVnodeBeforeUpdate)&&xt(le,E,_,b),ie&&pn(_,b,E,"beforeUpdate"),E&&mn(E,!0),(q.innerHTML&&ne.innerHTML==null||q.textContent&&ne.textContent==null)&&c(U,""),B?me(b.dynamicChildren,B,U,E,O,Ti(_,N),P):H||L(b,_,U,null,E,O,Ti(_,N),P,!1),j>0){if(j&16)re(U,q,ne,E,N);else if(j&2&&q.class!==ne.class&&i(U,"class",null,ne.class,N),j&4&&i(U,"style",q.style,ne.style,N),j&8){const ye=_.dynamicProps;for(let Re=0;Re<ye.length;Re++){const we=ye[Re],ut=q[we],rt=ne[we];(rt!==ut||we==="value")&&i(U,we,ut,rt,N,E)}}j&1&&b.children!==_.children&&c(U,_.children)}else!H&&B==null&&re(U,q,ne,E,N);((le=ne.onVnodeUpdated)||ie)&&dt(()=>{le&&xt(le,E,_,b),ie&&pn(_,b,E,"updated")},O)},me=(b,_,E,O,N,P,H)=>{for(let U=0;U<_.length;U++){const j=b[U],B=_[U],ie=j.el&&(j.type===bt||!sr(j,B)||j.shapeFlag&70)?d(j.el):E;p(j,B,ie,null,O,N,P,H,!0)}},re=(b,_,E,O,N)=>{if(_!==E){if(_!==Ae)for(const P in _)!Pr(P)&&!(P in E)&&i(b,P,_[P],null,N,O);for(const P in E){if(Pr(P))continue;const H=E[P],U=_[P];H!==U&&P!=="value"&&i(b,P,U,H,N,O)}"value"in E&&i(b,"value",_.value,E.value,N)}},se=(b,_,E,O,N,P,H,U,j)=>{const B=_.el=b?b.el:o(""),ie=_.anchor=b?b.anchor:o("");let{patchFlag:q,dynamicChildren:ne,slotScopeIds:le}=_;le&&(U=U?U.concat(le):le),b==null?(n(B,E,O),n(ie,E,O),$(_.children||[],E,ie,N,P,H,U,j)):q>0&&q&64&&ne&&b.dynamicChildren?(me(b.dynamicChildren,ne,E,N,P,H,U),(_.key!=null||N&&_===N.subTree)&&bc(b,_,!0)):L(b,_,E,ie,N,P,H,U,j)},ge=(b,_,E,O,N,P,H,U,j)=>{_.slotScopeIds=U,b==null?_.shapeFlag&512?N.ctx.activate(_,E,O,H,j):z(_,E,O,N,P,H,j):De(b,_,j)},z=(b,_,E,O,N,P,H)=>{const U=b.component=qh(b,O,N);if(sc(b)&&(U.ctx.renderer=Q),zh(U,!1,H),U.asyncDep){if(N&&N.registerDep(U,D,H),!b.el){const j=U.subTree=Je(wn);g(null,j,_,E)}}else D(U,b,_,E,N,P,H)},De=(b,_,E)=>{const O=_.component=b.component;if(Oh(b,_,E))if(O.asyncDep&&!O.asyncResolved){R(O,_,E);return}else O.next=_,O.update();else _.el=b.el,O.vnode=_},D=(b,_,E,O,N,P,H)=>{const U=()=>{if(b.isMounted){let{next:q,bu:ne,u:le,parent:ye,vnode:Re}=b;{const Tt=_c(b);if(Tt){q&&(q.el=Re.el,R(b,q,H)),Tt.asyncDep.then(()=>{b.isUnmounted||U()});return}}let we=q,ut;mn(b,!1),q?(q.el=Re.el,R(b,q,H)):q=Re,ne&&Es(ne),(ut=q.props&&q.props.onVnodeBeforeUpdate)&&xt(ut,ye,q,Re),mn(b,!0);const rt=Io(b),Ct=b.subTree;b.subTree=rt,p(Ct,rt,d(Ct.el),M(Ct),b,N,P),q.el=rt.el,we===null&&Ph(b,rt.el),le&&dt(le,N),(ut=q.props&&q.props.onVnodeUpdated)&&dt(()=>xt(ut,ye,q,Re),N)}else{let q;const{el:ne,props:le}=_,{bm:ye,m:Re,parent:we,root:ut,type:rt}=b,Ct=Br(_);mn(b,!1),ye&&Es(ye),!Ct&&(q=le&&le.onVnodeBeforeMount)&&xt(q,we,_),mn(b,!0);{ut.ce&&ut.ce._injectChildStyle(rt);const Tt=b.subTree=Io(b);p(null,Tt,E,O,b,N,P),_.el=Tt.el}if(Re&&dt(Re,N),!Ct&&(q=le&&le.onVnodeMounted)){const Tt=_;dt(()=>xt(q,we,Tt),N)}(_.shapeFlag&256||we&&Br(we.vnode)&&we.vnode.shapeFlag&256)&&b.a&&dt(b.a,N),b.isMounted=!0,_=E=O=null}};b.scope.on();const j=b.effect=new Ou(U);b.scope.off();const B=b.update=j.run.bind(j),ie=b.job=j.runIfDirty.bind(j);ie.i=b,ie.id=b.uid,j.scheduler=()=>Va(ie),mn(b,!0),B()},R=(b,_,E)=>{_.component=b;const O=b.vnode.props;b.vnode=_,b.next=null,gh(b,_.props,O,E),Sh(b,_.children,E),fn(),ko(b),hn()},L=(b,_,E,O,N,P,H,U,j=!1)=>{const B=b&&b.children,ie=b?b.shapeFlag:0,q=_.children,{patchFlag:ne,shapeFlag:le}=_;if(ne>0){if(ne&128){X(B,q,E,O,N,P,H,U,j);return}else if(ne&256){J(B,q,E,O,N,P,H,U,j);return}}le&8?(ie&16&&Le(B,N,P),q!==B&&c(E,q)):ie&16?le&16?X(B,q,E,O,N,P,H,U,j):Le(B,N,P,!0):(ie&8&&c(E,""),le&16&&$(q,E,O,N,P,H,U,j))},J=(b,_,E,O,N,P,H,U,j)=>{b=b||qn,_=_||qn;const B=b.length,ie=_.length,q=Math.min(B,ie);let ne;for(ne=0;ne<q;ne++){const le=_[ne]=j?en(_[ne]):Mt(_[ne]);p(b[ne],le,E,null,N,P,H,U,j)}B>ie?Le(b,N,P,!0,!1,q):$(_,E,O,N,P,H,U,j,q)},X=(b,_,E,O,N,P,H,U,j)=>{let B=0;const ie=_.length;let q=b.length-1,ne=ie-1;for(;B<=q&&B<=ne;){const le=b[B],ye=_[B]=j?en(_[B]):Mt(_[B]);if(sr(le,ye))p(le,ye,E,null,N,P,H,U,j);else break;B++}for(;B<=q&&B<=ne;){const le=b[q],ye=_[ne]=j?en(_[ne]):Mt(_[ne]);if(sr(le,ye))p(le,ye,E,null,N,P,H,U,j);else break;q--,ne--}if(B>q){if(B<=ne){const le=ne+1,ye=le<ie?_[le].el:O;for(;B<=ne;)p(null,_[B]=j?en(_[B]):Mt(_[B]),E,ye,N,P,H,U,j),B++}}else if(B>ne)for(;B<=q;)ce(b[B],N,P,!0),B++;else{const le=B,ye=B,Re=new Map;for(B=ye;B<=ne;B++){const ct=_[B]=j?en(_[B]):Mt(_[B]);ct.key!=null&&Re.set(ct.key,B)}let we,ut=0;const rt=ne-ye+1;let Ct=!1,Tt=0;const nr=new Array(rt);for(B=0;B<rt;B++)nr[B]=0;for(B=le;B<=q;B++){const ct=b[B];if(ut>=rt){ce(ct,N,P,!0);continue}let At;if(ct.key!=null)At=Re.get(ct.key);else for(we=ye;we<=ne;we++)if(nr[we-ye]===0&&sr(ct,_[we])){At=we;break}At===void 0?ce(ct,N,P,!0):(nr[At-ye]=B+1,At>=Tt?Tt=At:Ct=!0,p(ct,_[At],E,null,N,P,H,U,j),ut++)}const yo=Ct?Ch(nr):qn;for(we=yo.length-1,B=rt-1;B>=0;B--){const ct=ye+B,At=_[ct],bo=ct+1<ie?_[ct+1].el:O;nr[B]===0?p(null,At,E,bo,N,P,H,U,j):Ct&&(we<0||B!==yo[we]?G(At,E,bo,2):we--)}}},G=(b,_,E,O,N=null)=>{const{el:P,type:H,transition:U,children:j,shapeFlag:B}=b;if(B&6){G(b.component.subTree,_,E,O);return}if(B&128){b.suspense.move(_,E,O);return}if(B&64){H.move(b,_,E,Q);return}if(H===bt){n(P,_,E);for(let q=0;q<j.length;q++)G(j[q],_,E,O);n(b.anchor,_,E);return}if(H===Ai){k(b,_,E);return}if(O!==2&&B&1&&U)if(O===0)U.beforeEnter(P),n(P,_,E),dt(()=>U.enter(P),N);else{const{leave:q,delayLeave:ne,afterLeave:le}=U,ye=()=>n(P,_,E),Re=()=>{q(P,()=>{ye(),le&&le()})};ne?ne(P,ye,Re):Re()}else n(P,_,E)},ce=(b,_,E,O=!1,N=!1)=>{const{type:P,props:H,ref:U,children:j,dynamicChildren:B,shapeFlag:ie,patchFlag:q,dirs:ne,cacheIndex:le}=b;if(q===-2&&(N=!1),U!=null&&Hs(U,null,E,b,!0),le!=null&&(_.renderCache[le]=void 0),ie&256){_.ctx.deactivate(b);return}const ye=ie&1&&ne,Re=!Br(b);let we;if(Re&&(we=H&&H.onVnodeBeforeUnmount)&&xt(we,_,b),ie&6)Qe(b.component,E,O);else{if(ie&128){b.suspense.unmount(E,O);return}ye&&pn(b,null,_,"beforeUnmount"),ie&64?b.type.remove(b,_,E,Q,O):B&&!B.hasOnce&&(P!==bt||q>0&&q&64)?Le(B,_,E,!1,!0):(P===bt&&q&384||!N&&ie&16)&&Le(j,_,E),O&&Te(b)}(Re&&(we=H&&H.onVnodeUnmounted)||ye)&&dt(()=>{we&&xt(we,_,b),ye&&pn(b,null,_,"unmounted")},E)},Te=b=>{const{type:_,el:E,anchor:O,transition:N}=b;if(_===bt){Ce(E,O);return}if(_===Ai){T(b);return}const P=()=>{s(E),N&&!N.persisted&&N.afterLeave&&N.afterLeave()};if(b.shapeFlag&1&&N&&!N.persisted){const{leave:H,delayLeave:U}=N,j=()=>H(E,P);U?U(b.el,P,j):j()}else P()},Ce=(b,_)=>{let E;for(;b!==_;)E=h(b),s(b),b=E;s(_)},Qe=(b,_,E)=>{const{bum:O,scope:N,job:P,subTree:H,um:U,m:j,a:B}=b;Mo(j),Mo(B),O&&Es(O),N.stop(),P&&(P.flags|=8,ce(H,b,_,E)),U&&dt(U,_),dt(()=>{b.isUnmounted=!0},_),_&&_.pendingBranch&&!_.isUnmounted&&b.asyncDep&&!b.asyncResolved&&b.suspenseId===_.pendingId&&(_.deps--,_.deps===0&&_.resolve())},Le=(b,_,E,O=!1,N=!1,P=0)=>{for(let H=P;H<b.length;H++)ce(b[H],_,E,O,N)},M=b=>{if(b.shapeFlag&6)return M(b.component.subTree);if(b.shapeFlag&128)return b.suspense.next();const _=h(b.anchor||b.el),E=_&&_[qf];return E?h(E):_};let K=!1;const V=(b,_,E)=>{b==null?_._vnode&&ce(_._vnode,null,null,!0):p(_._vnode||null,b,_,null,null,null,E),_._vnode=b,K||(K=!0,ko(),Qu(),K=!1)},Q={p,um:ce,m:G,r:Te,mt:z,mc:$,pc:L,pbc:me,n:M,o:e};return{render:V,hydrate:void 0,createApp:mh(V)}}function Ti({type:e,props:r},t){return t==="svg"&&e==="foreignObject"||t==="mathml"&&e==="annotation-xml"&&r&&r.encoding&&r.encoding.includes("html")?void 0:t}function mn({effect:e,job:r},t){t?(e.flags|=32,r.flags|=4):(e.flags&=-33,r.flags&=-5)}function wh(e,r){return(!e||e&&!e.pendingBranch)&&r&&!r.persisted}function bc(e,r,t=!1){const n=e.children,s=r.children;if(ue(n)&&ue(s))for(let i=0;i<n.length;i++){const a=n[i];let o=s[i];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=s[i]=en(s[i]),o.el=a.el),!t&&o.patchFlag!==-2&&bc(a,o)),o.type===li&&(o.el=a.el)}}function Ch(e){const r=e.slice(),t=[0];let n,s,i,a,o;const l=e.length;for(n=0;n<l;n++){const u=e[n];if(u!==0){if(s=t[t.length-1],e[s]<u){r[n]=s,t.push(n);continue}for(i=0,a=t.length-1;i<a;)o=i+a>>1,e[t[o]]<u?i=o+1:a=o;u<e[t[i]]&&(i>0&&(r[n]=t[i-1]),t[i]=n)}}for(i=t.length,a=t[i-1];i-- >0;)t[i]=a,a=r[a];return t}function _c(e){const r=e.subTree.component;if(r)return r.asyncDep&&!r.asyncResolved?r:_c(r)}function Mo(e){if(e)for(let r=0;r<e.length;r++)e[r].flags|=8}const Th=Symbol.for("v-scx"),Ah=()=>Pt(Th);function Gt(e,r,t){return Sc(e,r,t)}function Sc(e,r,t=Ae){const{immediate:n,deep:s,flush:i,once:a}=t,o=Xe({},t),l=r&&n||!r&&i!=="post";let u;if(Jr){if(i==="sync"){const f=Ah();u=f.__watcherHandles||(f.__watcherHandles=[])}else if(!l){const f=()=>{};return f.stop=Ot,f.resume=Ot,f.pause=Ot,f}}const c=qe;o.call=(f,m,p)=>Dt(f,c,m,p);let d=!1;i==="post"?o.scheduler=f=>{dt(f,c&&c.suspense)}:i!=="sync"&&(d=!0,o.scheduler=(f,m)=>{m?f():Va(f)}),o.augmentJob=f=>{r&&(f.flags|=4),d&&(f.flags|=2,c&&(f.id=c.uid,f.i=c))};const h=Uf(e,r,o);return Jr&&(u?u.push(h):l&&h()),h}function xh(e,r,t){const n=this.proxy,s=Be(e)?e.includes(".")?Ec(n,e):()=>n[e]:e.bind(n,n);let i;de(r)?i=r:(i=r.handler,t=r);const a=ls(this),o=Sc(s,i.bind(n),t);return a(),o}function Ec(e,r){const t=r.split(".");return()=>{let n=e;for(let s=0;s<t.length&&n;s++)n=n[t[s]];return n}}const Rh=(e,r)=>r==="modelValue"||r==="model-value"?e.modelModifiers:e[`${r}Modifiers`]||e[`${gt(r)}Modifiers`]||e[`${An(r)}Modifiers`];function Mh(e,r,...t){if(e.isUnmounted)return;const n=e.vnode.props||Ae;let s=t;const i=r.startsWith("update:"),a=i&&Rh(n,r.slice(7));a&&(a.trim&&(s=t.map(c=>Be(c)?c.trim():c)),a.number&&(s=t.map($i)));let o,l=n[o=bi(r)]||n[o=bi(gt(r))];!l&&i&&(l=n[o=bi(An(r))]),l&&Dt(l,e,6,s);const u=n[o+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[o])return;e.emitted[o]=!0,Dt(u,e,6,s)}}function kc(e,r,t=!1){const n=r.emitsCache,s=n.get(e);if(s!==void 0)return s;const i=e.emits;let a={},o=!1;if(!de(e)){const l=u=>{const c=kc(u,r,!0);c&&(o=!0,Xe(a,c))};!t&&r.mixins.length&&r.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!i&&!o?(Oe(e)&&n.set(e,null),null):(ue(i)?i.forEach(l=>a[l]=null):Xe(a,i),Oe(e)&&n.set(e,a),a)}function oi(e,r){return!e||!Xs(r)?!1:(r=r.slice(2).replace(/Once$/,""),Ee(e,r[0].toLowerCase()+r.slice(1))||Ee(e,An(r))||Ee(e,r))}function Io(e){const{type:r,vnode:t,proxy:n,withProxy:s,propsOptions:[i],slots:a,attrs:o,emit:l,render:u,renderCache:c,props:d,data:h,setupState:f,ctx:m,inheritAttrs:p}=e,y=Us(e);let g,S;try{if(t.shapeFlag&4){const T=s||n,x=T;g=Mt(u.call(x,T,c,d,f,h,m)),S=o}else{const T=r;g=Mt(T.length>1?T(d,{attrs:o,slots:a,emit:l}):T(d,null)),S=r.props?o:Ih(o)}}catch(T){jr.length=0,ii(T,e,1),g=Je(wn)}let k=g;if(S&&p!==!1){const T=Object.keys(S),{shapeFlag:x}=k;T.length&&x&7&&(i&&T.some(Ma)&&(S=Lh(S,i)),k=Xn(k,S,!1,!0))}return t.dirs&&(k=Xn(k,null,!1,!0),k.dirs=k.dirs?k.dirs.concat(t.dirs):t.dirs),t.transition&&qa(k,t.transition),g=k,Us(y),g}const Ih=e=>{let r;for(const t in e)(t==="class"||t==="style"||Xs(t))&&((r||(r={}))[t]=e[t]);return r},Lh=(e,r)=>{const t={};for(const n in e)(!Ma(n)||!(n.slice(9)in r))&&(t[n]=e[n]);return t};function Oh(e,r,t){const{props:n,children:s,component:i}=e,{props:a,children:o,patchFlag:l}=r,u=i.emitsOptions;if(r.dirs||r.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return n?Lo(n,a,u):!!a;if(l&8){const c=r.dynamicProps;for(let d=0;d<c.length;d++){const h=c[d];if(a[h]!==n[h]&&!oi(u,h))return!0}}}else return(s||o)&&(!o||!o.$stable)?!0:n===a?!1:n?a?Lo(n,a,u):!0:!!a;return!1}function Lo(e,r,t){const n=Object.keys(r);if(n.length!==Object.keys(e).length)return!0;for(let s=0;s<n.length;s++){const i=n[s];if(r[i]!==e[i]&&!oi(t,i))return!0}return!1}function Ph({vnode:e,parent:r},t){for(;r;){const n=r.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=r.vnode).el=t,r=r.parent;else break}}const wc=e=>e.__isSuspense;function Nh(e,r){r&&r.pendingBranch?ue(e)?r.effects.push(...e):r.effects.push(e):Vf(e)}const bt=Symbol.for("v-fgt"),li=Symbol.for("v-txt"),wn=Symbol.for("v-cmt"),Ai=Symbol.for("v-stc"),jr=[];let ht=null;function kt(e=!1){jr.push(ht=e?null:[])}function Dh(){jr.pop(),ht=jr[jr.length-1]||null}let Wr=1;function Oo(e,r=!1){Wr+=e,e<0&&ht&&r&&(ht.hasOnce=!0)}function Cc(e){return e.dynamicChildren=Wr>0?ht||qn:null,Dh(),Wr>0&&ht&&ht.push(e),e}function rn(e,r,t,n,s,i){return Cc(be(e,r,t,n,s,i,!0))}function Ka(e,r,t,n,s){return Cc(Je(e,r,t,n,s,!0))}function Vs(e){return e?e.__v_isVNode===!0:!1}function sr(e,r){return e.type===r.type&&e.key===r.key}const Tc=({key:e})=>e??null,ws=({ref:e,ref_key:r,ref_for:t})=>(typeof e=="number"&&(e=""+e),e!=null?Be(e)||Ye(e)||de(e)?{i:at,r:e,k:r,f:!!t}:e:null);function be(e,r=null,t=null,n=0,s=null,i=e===bt?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:r,key:r&&Tc(r),ref:r&&ws(r),scopeId:tc,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:at};return o?(Wa(l,t),i&128&&e.normalize(l)):t&&(l.shapeFlag|=Be(t)?8:16),Wr>0&&!a&&ht&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&ht.push(l),l}const Je=Bh;function Bh(e,r=null,t=null,n=0,s=null,i=!1){if((!e||e===ih)&&(e=wn),Vs(e)){const o=Xn(e,r,!0);return t&&Wa(o,t),Wr>0&&!i&&ht&&(o.shapeFlag&6?ht[ht.indexOf(e)]=o:ht.push(o)),o.patchFlag=-2,o}if(Yh(e)&&(e=e.__vccOpts),r){r=Fh(r);let{class:o,style:l}=r;o&&!Be(o)&&(r.class=ri(o)),Oe(l)&&(Ha(l)&&!ue(l)&&(l=Xe({},l)),r.style=ni(l))}const a=Be(e)?1:wc(e)?128:zf(e)?64:Oe(e)?4:de(e)?2:0;return be(e,r,t,n,s,a,i,!0)}function Fh(e){return e?Ha(e)||fc(e)?Xe({},e):e:null}function Xn(e,r,t=!1,n=!1){const{props:s,ref:i,patchFlag:a,children:o,transition:l}=e,u=r?Hh(s||{},r):s,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&Tc(u),ref:r&&r.ref?t&&i?ue(i)?i.concat(ws(r)):[i,ws(r)]:ws(r):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:r&&e.type!==bt?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Xn(e.ssContent),ssFallback:e.ssFallback&&Xn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&n&&qa(c,l.clone(c)),c}function jh(e=" ",r=0){return Je(li,null,e,r)}function Uh(e="",r=!1){return r?(kt(),Ka(wn,null,e)):Je(wn,null,e)}function Mt(e){return e==null||typeof e=="boolean"?Je(wn):ue(e)?Je(bt,null,e.slice()):Vs(e)?en(e):Je(li,null,String(e))}function en(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Xn(e)}function Wa(e,r){let t=0;const{shapeFlag:n}=e;if(r==null)r=null;else if(ue(r))t=16;else if(typeof r=="object")if(n&65){const s=r.default;s&&(s._c&&(s._d=!1),Wa(e,s()),s._c&&(s._d=!0));return}else{t=32;const s=r._;!s&&!fc(r)?r._ctx=at:s===3&&at&&(at.slots._===1?r._=1:(r._=2,e.patchFlag|=1024))}else de(r)?(r={default:r,_ctx:at},t=32):(r=String(r),n&64?(t=16,r=[jh(r)]):t=8);e.children=r,e.shapeFlag|=t}function Hh(...e){const r={};for(let t=0;t<e.length;t++){const n=e[t];for(const s in n)if(s==="class")r.class!==n.class&&(r.class=ri([r.class,n.class]));else if(s==="style")r.style=ni([r.style,n.style]);else if(Xs(s)){const i=r[s],a=n[s];a&&i!==a&&!(ue(i)&&i.includes(a))&&(r[s]=i?[].concat(i,a):a)}else s!==""&&(r[s]=n[s])}return r}function xt(e,r,t,n=null){Dt(e,r,7,[t,n])}const $h=uc();let Vh=0;function qh(e,r,t){const n=e.type,s=(r?r.appContext:e.appContext)||$h,i={uid:Vh++,vnode:e,type:n,parent:r,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Lu(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:r?r.provides:Object.create(s.provides),ids:r?r.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:pc(n,s),emitsOptions:kc(n,s),emit:null,emitted:null,propsDefaults:Ae,inheritAttrs:n.inheritAttrs,ctx:Ae,data:Ae,props:Ae,attrs:Ae,slots:Ae,refs:Ae,setupState:Ae,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=r?r.root:i,i.emit=Mh.bind(null,i),e.ce&&e.ce(i),i}let qe=null;const Po=()=>qe||at;let qs,Zi;{const e=ti(),r=(t,n)=>{let s;return(s=e[t])||(s=e[t]=[]),s.push(n),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};qs=r("__VUE_INSTANCE_SETTERS__",t=>qe=t),Zi=r("__VUE_SSR_SETTERS__",t=>Jr=t)}const ls=e=>{const r=qe;return qs(e),e.scope.on(),()=>{e.scope.off(),qs(r)}},No=()=>{qe&&qe.scope.off(),qs(null)};function Ac(e){return e.vnode.shapeFlag&4}let Jr=!1;function zh(e,r=!1,t=!1){r&&Zi(r);const{props:n,children:s}=e.vnode,i=Ac(e);vh(e,n,i,r),_h(e,s,t);const a=i?Gh(e,r):void 0;return r&&Zi(!1),a}function Gh(e,r){const t=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,lh);const{setup:n}=t;if(n){fn();const s=e.setupContext=n.length>1?Wh(e):null,i=ls(e),a=os(n,e,0,[e.props,s]),o=Cu(a);if(hn(),i(),(o||e.sp)&&!Br(e)&&rc(e),o){if(a.then(No,No),r)return a.then(l=>{Do(e,l)}).catch(l=>{ii(l,e,0)});e.asyncDep=a}else Do(e,a)}else xc(e)}function Do(e,r,t){de(r)?e.type.__ssrInlineRender?e.ssrRender=r:e.render=r:Oe(r)&&(e.setupState=Yu(r)),xc(e)}function xc(e,r,t){const n=e.type;e.render||(e.render=n.render||Ot);{const s=ls(e);fn();try{uh(e)}finally{hn(),s()}}}const Kh={get(e,r){return Ke(e,"get",""),e[r]}};function Wh(e){const r=t=>{e.exposed=t||{}};return{attrs:new Proxy(e.attrs,Kh),slots:e.slots,emit:e.emit,expose:r}}function ui(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Yu(Wu(e.exposed)),{get(r,t){if(t in r)return r[t];if(t in Fr)return Fr[t](e)},has(r,t){return t in r||t in Fr}})):e.proxy}function Jh(e,r=!0){return de(e)?e.displayName||e.name:e.name||r&&e.__name}function Yh(e){return de(e)&&"__vccOpts"in e}const St=(e,r)=>Ff(e,r,Jr);function Rc(e,r,t){const n=arguments.length;return n===2?Oe(r)&&!ue(r)?Vs(r)?Je(e,null,[r]):Je(e,r):Je(e,null,r):(n>3?t=Array.prototype.slice.call(arguments,2):n===3&&Vs(t)&&(t=[t]),Je(e,r,t))}const Xh="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Qi;const Bo=typeof window<"u"&&window.trustedTypes;if(Bo)try{Qi=Bo.createPolicy("vue",{createHTML:e=>e})}catch{}const Mc=Qi?e=>Qi.createHTML(e):e=>e,Zh="http://www.w3.org/2000/svg",Qh="http://www.w3.org/1998/Math/MathML",$t=typeof document<"u"?document:null,Fo=$t&&$t.createElement("template"),ep={insert:(e,r,t)=>{r.insertBefore(e,t||null)},remove:e=>{const r=e.parentNode;r&&r.removeChild(e)},createElement:(e,r,t,n)=>{const s=r==="svg"?$t.createElementNS(Zh,e):r==="mathml"?$t.createElementNS(Qh,e):t?$t.createElement(e,{is:t}):$t.createElement(e);return e==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:e=>$t.createTextNode(e),createComment:e=>$t.createComment(e),setText:(e,r)=>{e.nodeValue=r},setElementText:(e,r)=>{e.textContent=r},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>$t.querySelector(e),setScopeId(e,r){e.setAttribute(r,"")},insertStaticContent(e,r,t,n,s,i){const a=t?t.previousSibling:r.lastChild;if(s&&(s===i||s.nextSibling))for(;r.insertBefore(s.cloneNode(!0),t),!(s===i||!(s=s.nextSibling)););else{Fo.innerHTML=Mc(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const o=Fo.content;if(n==="svg"||n==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}r.insertBefore(o,t)}return[a?a.nextSibling:r.firstChild,t?t.previousSibling:r.lastChild]}},tp=Symbol("_vtc");function np(e,r,t){const n=e[tp];n&&(r=(r?[r,...n]:[...n]).join(" ")),r==null?e.removeAttribute("class"):t?e.setAttribute("class",r):e.className=r}const zs=Symbol("_vod"),Ic=Symbol("_vsh"),rp={beforeMount(e,{value:r},{transition:t}){e[zs]=e.style.display==="none"?"":e.style.display,t&&r?t.beforeEnter(e):ir(e,r)},mounted(e,{value:r},{transition:t}){t&&r&&t.enter(e)},updated(e,{value:r,oldValue:t},{transition:n}){!r!=!t&&(n?r?(n.beforeEnter(e),ir(e,!0),n.enter(e)):n.leave(e,()=>{ir(e,!1)}):ir(e,r))},beforeUnmount(e,{value:r}){ir(e,r)}};function ir(e,r){e.style.display=r?e[zs]:"none",e[Ic]=!r}const sp=Symbol(""),ip=/(^|;)\s*display\s*:/;function ap(e,r,t){const n=e.style,s=Be(t);let i=!1;if(t&&!s){if(r)if(Be(r))for(const a of r.split(";")){const o=a.slice(0,a.indexOf(":")).trim();t[o]==null&&Cs(n,o,"")}else for(const a in r)t[a]==null&&Cs(n,a,"");for(const a in t)a==="display"&&(i=!0),Cs(n,a,t[a])}else if(s){if(r!==t){const a=n[sp];a&&(t+=";"+a),n.cssText=t,i=ip.test(t)}}else r&&e.removeAttribute("style");zs in e&&(e[zs]=i?n.display:"",e[Ic]&&(n.display="none"))}const jo=/\s*!important$/;function Cs(e,r,t){if(ue(t))t.forEach(n=>Cs(e,r,n));else if(t==null&&(t=""),r.startsWith("--"))e.setProperty(r,t);else{const n=op(e,r);jo.test(t)?e.setProperty(An(n),t.replace(jo,""),"important"):e[n]=t}}const Uo=["Webkit","Moz","ms"],xi={};function op(e,r){const t=xi[r];if(t)return t;let n=gt(r);if(n!=="filter"&&n in e)return xi[r]=n;n=ei(n);for(let s=0;s<Uo.length;s++){const i=Uo[s]+n;if(i in e)return xi[r]=i}return r}const Ho="http://www.w3.org/1999/xlink";function $o(e,r,t,n,s,i=hf(r)){n&&r.startsWith("xlink:")?t==null?e.removeAttributeNS(Ho,r.slice(6,r.length)):e.setAttributeNS(Ho,r,t):t==null||i&&!Ru(t)?e.removeAttribute(r):e.setAttribute(r,i?"":dn(t)?String(t):t)}function Vo(e,r,t,n,s){if(r==="innerHTML"||r==="textContent"){t!=null&&(e[r]=r==="innerHTML"?Mc(t):t);return}const i=e.tagName;if(r==="value"&&i!=="PROGRESS"&&!i.includes("-")){const o=i==="OPTION"?e.getAttribute("value")||"":e.value,l=t==null?e.type==="checkbox"?"on":"":String(t);(o!==l||!("_value"in e))&&(e.value=l),t==null&&e.removeAttribute(r),e._value=t;return}let a=!1;if(t===""||t==null){const o=typeof e[r];o==="boolean"?t=Ru(t):t==null&&o==="string"?(t="",a=!0):o==="number"&&(t=0,a=!0)}try{e[r]=t}catch{}a&&e.removeAttribute(s||r)}function Fn(e,r,t,n){e.addEventListener(r,t,n)}function lp(e,r,t,n){e.removeEventListener(r,t,n)}const qo=Symbol("_vei");function up(e,r,t,n,s=null){const i=e[qo]||(e[qo]={}),a=i[r];if(n&&a)a.value=n;else{const[o,l]=cp(r);if(n){const u=i[r]=hp(n,s);Fn(e,o,u,l)}else a&&(lp(e,o,a,l),i[r]=void 0)}}const zo=/(?:Once|Passive|Capture)$/;function cp(e){let r;if(zo.test(e)){r={};let n;for(;n=e.match(zo);)e=e.slice(0,e.length-n[0].length),r[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):An(e.slice(2)),r]}let Ri=0;const dp=Promise.resolve(),fp=()=>Ri||(dp.then(()=>Ri=0),Ri=Date.now());function hp(e,r){const t=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=t.attached)return;Dt(pp(n,t.value),r,5,[n])};return t.value=e,t.attached=fp(),t}function pp(e,r){if(ue(r)){const t=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{t.call(e),e._stopped=!0},r.map(n=>s=>!s._stopped&&n&&n(s))}else return r}const Go=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,mp=(e,r,t,n,s,i)=>{const a=s==="svg";r==="class"?np(e,n,a):r==="style"?ap(e,t,n):Xs(r)?Ma(r)||up(e,r,t,n,i):(r[0]==="."?(r=r.slice(1),!0):r[0]==="^"?(r=r.slice(1),!1):vp(e,r,n,a))?(Vo(e,r,n),!e.tagName.includes("-")&&(r==="value"||r==="checked"||r==="selected")&&$o(e,r,n,a,i,r!=="value")):e._isVueCE&&(/[A-Z]/.test(r)||!Be(n))?Vo(e,gt(r),n,i,r):(r==="true-value"?e._trueValue=n:r==="false-value"&&(e._falseValue=n),$o(e,r,n,a))};function vp(e,r,t,n){if(n)return!!(r==="innerHTML"||r==="textContent"||r in e&&Go(r)&&de(t));if(r==="spellcheck"||r==="draggable"||r==="translate"||r==="form"||r==="list"&&e.tagName==="INPUT"||r==="type"&&e.tagName==="TEXTAREA")return!1;if(r==="width"||r==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Go(r)&&Be(t)?!1:r in e}const Ko=e=>{const r=e.props["onUpdate:modelValue"]||!1;return ue(r)?t=>Es(r,t):r};function gp(e){e.target.composing=!0}function Wo(e){const r=e.target;r.composing&&(r.composing=!1,r.dispatchEvent(new Event("input")))}const Mi=Symbol("_assign"),Jo={created(e,{modifiers:{lazy:r,trim:t,number:n}},s){e[Mi]=Ko(s);const i=n||s.props&&s.props.type==="number";Fn(e,r?"change":"input",a=>{if(a.target.composing)return;let o=e.value;t&&(o=o.trim()),i&&(o=$i(o)),e[Mi](o)}),t&&Fn(e,"change",()=>{e.value=e.value.trim()}),r||(Fn(e,"compositionstart",gp),Fn(e,"compositionend",Wo),Fn(e,"change",Wo))},mounted(e,{value:r}){e.value=r??""},beforeUpdate(e,{value:r,oldValue:t,modifiers:{lazy:n,trim:s,number:i}},a){if(e[Mi]=Ko(a),e.composing)return;const o=(i||e.type==="number")&&!/^0\d/.test(e.value)?$i(e.value):e.value,l=r??"";o!==l&&(document.activeElement===e&&e.type!=="range"&&(n&&r===t||s&&e.value.trim()===l)||(e.value=l))}},yp=Xe({patchProp:mp},ep);let Yo;function bp(){return Yo||(Yo=Eh(yp))}const _p=(...e)=>{const r=bp().createApp(...e),{mount:t}=r;return r.mount=n=>{const s=Ep(n);if(!s)return;const i=r._component;!de(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=t(s,!1,Sp(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},r};function Sp(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Ep(e){return Be(e)?document.querySelector(e):e}/*!
 * pinia v3.0.2
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const kp=Symbol();var Xo;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Xo||(Xo={}));function wp(){const e=pf(!0),r=e.run(()=>it({}));let t=[],n=[];const s=Wu({install(i){s._a=i,i.provide(kp,s),i.config.globalProperties.$pinia=s,n.forEach(a=>t.push(a)),n=[]},use(i){return this._a?t.push(i):n.push(i),this},_p:t,_a:null,_e:e,_s:new Map,state:r});return s}var Cp=Object.defineProperty,Zo=Object.getOwnPropertySymbols,Tp=Object.prototype.hasOwnProperty,Ap=Object.prototype.propertyIsEnumerable,Qo=(e,r,t)=>r in e?Cp(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,xp=(e,r)=>{for(var t in r||(r={}))Tp.call(r,t)&&Qo(e,t,r[t]);if(Zo)for(var t of Zo(r))Ap.call(r,t)&&Qo(e,t,r[t]);return e};function Ja(e){return e==null||e===""||Array.isArray(e)&&e.length===0||!(e instanceof Date)&&typeof e=="object"&&Object.keys(e).length===0}function Rp(e){return typeof e=="function"&&"call"in e&&"apply"in e}function Pe(e){return!Ja(e)}function sn(e,r=!0){return e instanceof Object&&e.constructor===Object&&(r||Object.keys(e).length!==0)}function Lc(e={},r={}){const t=xp({},e);return Object.keys(r).forEach(n=>{const s=n;sn(r[s])&&s in e&&sn(e[s])?t[s]=Lc(e[s],r[s]):t[s]=r[s]}),t}function Mp(...e){return e.reduce((r,t,n)=>n===0?t:Lc(r,t),{})}function _n(e,...r){return Rp(e)?e(...r):e}function Zn(e,r=!0){return typeof e=="string"&&(r||e!=="")}function Oc(e,r=!0){return Array.isArray(e)&&(r||e.length!==0)}function Ip(e){return Pe(e)&&!isNaN(e)}function Kt(e,r){if(r){const t=r.test(e);return r.lastIndex=0,t}return!1}function Lp(...e){return Mp(...e)}function Ur(e){return e&&e.replace(/\/\*(?:(?!\*\/)[\s\S])*\*\/|[\r\n\t]+/g,"").replace(/ {2,}/g," ").replace(/ ([{:}]) /g,"$1").replace(/([;,]) /g,"$1").replace(/ !/g,"!").replace(/: /g,":")}function Pc(e){return Zn(e)?e.replace(/(_)/g,"-").replace(/[A-Z]/g,(r,t)=>t===0?r:"-"+r.toLowerCase()).toLowerCase():e}function el(e){return Zn(e)?e.replace(/[A-Z]/g,(r,t)=>t===0?r:"."+r.toLowerCase()).toLowerCase():e}function Nc(){const e=new Map;return{on(r,t){let n=e.get(r);return n?n.push(t):n=[t],e.set(r,n),this},off(r,t){const n=e.get(r);return n&&n.splice(n.indexOf(t)>>>0,1),this},emit(r,t){const n=e.get(r);n&&n.forEach(s=>{s(t)})},clear(){e.clear()}}}function Op(e){if(e){let r=e.parentNode;return r&&r instanceof ShadowRoot&&r.host&&(r=r.host),r}return null}function Pp(e){return!!(e!==null&&typeof e<"u"&&e.nodeName&&Op(e))}function Dc(e){return typeof Element<"u"?e instanceof Element:e!==null&&typeof e=="object"&&e.nodeType===1&&typeof e.nodeName=="string"}function ea(e,r={}){if(Dc(e)){const t=(n,s)=>{var i,a;const o=(i=e==null?void 0:e.$attrs)!=null&&i[n]?[(a=e==null?void 0:e.$attrs)==null?void 0:a[n]]:[];return[s].flat().reduce((l,u)=>{if(u!=null){const c=typeof u;if(c==="string"||c==="number")l.push(u);else if(c==="object"){const d=Array.isArray(u)?t(n,u):Object.entries(u).map(([h,f])=>n==="style"&&(f||f===0)?`${h.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}:${f}`:f?h:void 0);l=d.length?l.concat(d.filter(h=>!!h)):l}}return l},o)};Object.entries(r).forEach(([n,s])=>{if(s!=null){const i=n.match(/^on(.+)/);i?e.addEventListener(i[1].toLowerCase(),s):n==="p-bind"||n==="pBind"?ea(e,s):(s=n==="class"?[...new Set(t("class",s))].join(" ").trim():n==="style"?t("style",s).join(";").trim():s,(e.$attrs=e.$attrs||{})&&(e.$attrs[n]=s),e.setAttribute(n,s))}})}}function Np(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function Dp(e,r="",t){Dc(e)&&t!==null&&t!==void 0&&e.setAttribute(r,t)}var Bp=Object.defineProperty,Fp=Object.defineProperties,jp=Object.getOwnPropertyDescriptors,Gs=Object.getOwnPropertySymbols,Bc=Object.prototype.hasOwnProperty,Fc=Object.prototype.propertyIsEnumerable,tl=(e,r,t)=>r in e?Bp(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,_t=(e,r)=>{for(var t in r||(r={}))Bc.call(r,t)&&tl(e,t,r[t]);if(Gs)for(var t of Gs(r))Fc.call(r,t)&&tl(e,t,r[t]);return e},Ii=(e,r)=>Fp(e,jp(r)),Ft=(e,r)=>{var t={};for(var n in e)Bc.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&Gs)for(var n of Gs(e))r.indexOf(n)<0&&Fc.call(e,n)&&(t[n]=e[n]);return t},Up=Nc(),Vt=Up;function nl(e,r){Oc(e)?e.push(...r||[]):sn(e)&&Object.assign(e,r)}function Hp(e){return sn(e)&&e.hasOwnProperty("$value")&&e.hasOwnProperty("$type")?e.$value:e}function $p(e){return e.replaceAll(/ /g,"").replace(/[^\w]/g,"-")}function ta(e="",r=""){return $p(`${Zn(e,!1)&&Zn(r,!1)?`${e}-`:e}${r}`)}function jc(e="",r=""){return`--${ta(e,r)}`}function Vp(e=""){const r=(e.match(/{/g)||[]).length,t=(e.match(/}/g)||[]).length;return(r+t)%2!==0}function Uc(e,r="",t="",n=[],s){if(Zn(e)){const i=/{([^}]*)}/g,a=e.trim();if(Vp(a))return;if(Kt(a,i)){const o=a.replaceAll(i,c=>{const h=c.replace(/{|}/g,"").split(".").filter(f=>!n.some(m=>Kt(f,m)));return`var(${jc(t,Pc(h.join("-")))}${Pe(s)?`, ${s}`:""})`}),l=/(\d+\s+[\+\-\*\/]\s+\d+)/g,u=/var\([^)]+\)/g;return Kt(o.replace(u,"0"),l)?`calc(${o})`:o}return a}else if(Ip(e))return e}function qp(e,r,t){Zn(r,!1)&&e.push(`${r}:${t};`)}function jn(e,r){return e?`${e}{${r}}`:""}function Hc(e,r){const t=a=>{let o=0,l=-1;for(let u=0;u<a.length;u++)if(a.slice(u,u+3)==="dt(")o===0&&(l=u),o++,u+=2;else if(a[u]===")"&&o>0&&(o--,o===0))return{start:l,end:u,content:a.slice(l,u+1)};return null},n=a=>{const o=[];let l="",u=0,c=null;for(let d=0;d<a.length;d++){const h=a[d],f=a[d-1];if((h==='"'||h==="'"||h==="`")&&f!=="\\"&&(c=c===h?null:h),!c&&(h==="("&&u++,h===")"&&u--,h===","&&u===0)){o.push(s(l.trim())),l="";continue}l+=h}return l.trim()&&o.push(s(l.trim())),o},s=a=>{if(a.startsWith("dt("))return Hc(a,r);if(/^(['"`])(.*)\1$/.test(a))return a.slice(1,-1);const o=Number(a);return isNaN(o)?a:o};let i=e;for(;;){const a=t(i);if(!a)break;const o=n(a.content.slice(3,-1)),l=r(...o);i=i.slice(0,a.start)+l+i.slice(a.end+1)}return i}var Jn=(...e)=>zp(Ge.getTheme(),...e),zp=(e={},r,t,n)=>{if(r){const{variable:s,options:i}=Ge.defaults||{},{prefix:a,transform:o}=(e==null?void 0:e.options)||i||{},u=Kt(r,/{([^}]*)}/g)?r:`{${r}}`;return n==="value"||Ja(n)&&o==="strict"?Ge.getTokenValue(r):Uc(u,void 0,a,[s.excludedKeyRegex],t)}return""};function na(e,...r){if(e instanceof Array){const t=e.reduce((n,s,i)=>{var a;return n+s+((a=_n(r[i],{dt:Jn}))!=null?a:"")},"");return Hc(t,Jn)}return _n(e,{dt:Jn})}function Gp(e,r={}){const t=Ge.defaults.variable,{prefix:n=t.prefix,selector:s=t.selector,excludedKeyRegex:i=t.excludedKeyRegex}=r,a=(u,c="")=>Object.entries(u).reduce((d,[h,f])=>{const m=Kt(h,i)?ta(c):ta(c,Pc(h)),p=Hp(f);if(sn(p)){const{variables:y,tokens:g}=a(p,m);nl(d.tokens,g),nl(d.variables,y)}else d.tokens.push((n?m.replace(`${n}-`,""):m).replaceAll("-",".")),qp(d.variables,jc(m),Uc(p,m,n,[i]));return d},{variables:[],tokens:[]}),{variables:o,tokens:l}=a(e,n);return{value:o,tokens:l,declarations:o.join(""),css:jn(s,o.join(""))}}var yt={regex:{rules:{class:{pattern:/^\.([a-zA-Z][\w-]*)$/,resolve(e){return{type:"class",selector:e,matched:this.pattern.test(e.trim())}}},attr:{pattern:/^\[(.*)\]$/,resolve(e){return{type:"attr",selector:`:root${e}`,matched:this.pattern.test(e.trim())}}},media:{pattern:/^@media (.*)$/,resolve(e){return{type:"media",selector:`${e}{:root{[CSS]}}`,matched:this.pattern.test(e.trim())}}},system:{pattern:/^system$/,resolve(e){return{type:"system",selector:"@media (prefers-color-scheme: dark){:root{[CSS]}}",matched:this.pattern.test(e.trim())}}},custom:{resolve(e){return{type:"custom",selector:e,matched:!0}}}},resolve(e){const r=Object.keys(this.rules).filter(t=>t!=="custom").map(t=>this.rules[t]);return[e].flat().map(t=>{var n;return(n=r.map(s=>s.resolve(t)).find(s=>s.matched))!=null?n:this.rules.custom.resolve(t)})}},_toVariables(e,r){return Gp(e,{prefix:r==null?void 0:r.prefix})},getCommon({name:e="",theme:r={},params:t,set:n,defaults:s}){var i,a,o,l,u,c,d;const{preset:h,options:f}=r;let m,p,y,g,S,k,T;if(Pe(h)&&f.transform!=="strict"){const{primitive:x,semantic:I,extend:F}=h,$=I||{},{colorScheme:ae}=$,me=Ft($,["colorScheme"]),re=F||{},{colorScheme:se}=re,ge=Ft(re,["colorScheme"]),z=ae||{},{dark:De}=z,D=Ft(z,["dark"]),R=se||{},{dark:L}=R,J=Ft(R,["dark"]),X=Pe(x)?this._toVariables({primitive:x},f):{},G=Pe(me)?this._toVariables({semantic:me},f):{},ce=Pe(D)?this._toVariables({light:D},f):{},Te=Pe(De)?this._toVariables({dark:De},f):{},Ce=Pe(ge)?this._toVariables({semantic:ge},f):{},Qe=Pe(J)?this._toVariables({light:J},f):{},Le=Pe(L)?this._toVariables({dark:L},f):{},[M,K]=[(i=X.declarations)!=null?i:"",X.tokens],[V,Q]=[(a=G.declarations)!=null?a:"",G.tokens||[]],[ke,b]=[(o=ce.declarations)!=null?o:"",ce.tokens||[]],[_,E]=[(l=Te.declarations)!=null?l:"",Te.tokens||[]],[O,N]=[(u=Ce.declarations)!=null?u:"",Ce.tokens||[]],[P,H]=[(c=Qe.declarations)!=null?c:"",Qe.tokens||[]],[U,j]=[(d=Le.declarations)!=null?d:"",Le.tokens||[]];m=this.transformCSS(e,M,"light","variable",f,n,s),p=K;const B=this.transformCSS(e,`${V}${ke}`,"light","variable",f,n,s),ie=this.transformCSS(e,`${_}`,"dark","variable",f,n,s);y=`${B}${ie}`,g=[...new Set([...Q,...b,...E])];const q=this.transformCSS(e,`${O}${P}color-scheme:light`,"light","variable",f,n,s),ne=this.transformCSS(e,`${U}color-scheme:dark`,"dark","variable",f,n,s);S=`${q}${ne}`,k=[...new Set([...N,...H,...j])],T=na`${h.css}`}return{primitive:{css:m,tokens:p},semantic:{css:y,tokens:g},global:{css:S,tokens:k},style:T}},getPreset({name:e="",preset:r={},options:t,params:n,set:s,defaults:i,selector:a}){var o,l,u;let c,d,h;if(Pe(r)&&t.transform!=="strict"){const f=e.replace("-directive",""),m=r,{colorScheme:p,extend:y,css:g}=m,S=Ft(m,["colorScheme","extend","css"]),k=y||{},{colorScheme:T}=k,x=Ft(k,["colorScheme"]),I=p||{},{dark:F}=I,$=Ft(I,["dark"]),ae=T||{},{dark:me}=ae,re=Ft(ae,["dark"]),se=Pe(S)?this._toVariables({[f]:_t(_t({},S),x)},t):{},ge=Pe($)?this._toVariables({[f]:_t(_t({},$),re)},t):{},z=Pe(F)?this._toVariables({[f]:_t(_t({},F),me)},t):{},[De,D]=[(o=se.declarations)!=null?o:"",se.tokens||[]],[R,L]=[(l=ge.declarations)!=null?l:"",ge.tokens||[]],[J,X]=[(u=z.declarations)!=null?u:"",z.tokens||[]],G=this.transformCSS(f,`${De}${R}`,"light","variable",t,s,i,a),ce=this.transformCSS(f,J,"dark","variable",t,s,i,a);c=`${G}${ce}`,d=[...new Set([...D,...L,...X])],h=na`${g}`}return{css:c,tokens:d,style:h}},getPresetC({name:e="",theme:r={},params:t,set:n,defaults:s}){var i;const{preset:a,options:o}=r,l=(i=a==null?void 0:a.components)==null?void 0:i[e];return this.getPreset({name:e,preset:l,options:o,params:t,set:n,defaults:s})},getPresetD({name:e="",theme:r={},params:t,set:n,defaults:s}){var i,a;const o=e.replace("-directive",""),{preset:l,options:u}=r,c=((i=l==null?void 0:l.components)==null?void 0:i[o])||((a=l==null?void 0:l.directives)==null?void 0:a[o]);return this.getPreset({name:o,preset:c,options:u,params:t,set:n,defaults:s})},applyDarkColorScheme(e){return!(e.darkModeSelector==="none"||e.darkModeSelector===!1)},getColorSchemeOption(e,r){var t;return this.applyDarkColorScheme(e)?this.regex.resolve(e.darkModeSelector===!0?r.options.darkModeSelector:(t=e.darkModeSelector)!=null?t:r.options.darkModeSelector):[]},getLayerOrder(e,r={},t,n){const{cssLayer:s}=r;return s?`@layer ${_n(s.order||"primeui",t)}`:""},getCommonStyleSheet({name:e="",theme:r={},params:t,props:n={},set:s,defaults:i}){const a=this.getCommon({name:e,theme:r,params:t,set:s,defaults:i}),o=Object.entries(n).reduce((l,[u,c])=>l.push(`${u}="${c}"`)&&l,[]).join(" ");return Object.entries(a||{}).reduce((l,[u,c])=>{if(sn(c)&&Object.hasOwn(c,"css")){const d=Ur(c.css),h=`${u}-variables`;l.push(`<style type="text/css" data-primevue-style-id="${h}" ${o}>${d}</style>`)}return l},[]).join("")},getStyleSheet({name:e="",theme:r={},params:t,props:n={},set:s,defaults:i}){var a;const o={name:e,theme:r,params:t,set:s,defaults:i},l=(a=e.includes("-directive")?this.getPresetD(o):this.getPresetC(o))==null?void 0:a.css,u=Object.entries(n).reduce((c,[d,h])=>c.push(`${d}="${h}"`)&&c,[]).join(" ");return l?`<style type="text/css" data-primevue-style-id="${e}-variables" ${u}>${Ur(l)}</style>`:""},createTokens(e={},r,t="",n="",s={}){return Object.entries(e).forEach(([i,a])=>{const o=Kt(i,r.variable.excludedKeyRegex)?t:t?`${t}.${el(i)}`:el(i),l=n?`${n}.${i}`:i;sn(a)?this.createTokens(a,r,o,l,s):(s[o]||(s[o]={paths:[],computed(u,c={}){var d,h;return this.paths.length===1?(d=this.paths[0])==null?void 0:d.computed(this.paths[0].scheme,c.binding):u&&u!=="none"?(h=this.paths.find(f=>f.scheme===u))==null?void 0:h.computed(u,c.binding):this.paths.map(f=>f.computed(f.scheme,c[f.scheme]))}}),s[o].paths.push({path:l,value:a,scheme:l.includes("colorScheme.light")?"light":l.includes("colorScheme.dark")?"dark":"none",computed(u,c={}){const d=/{([^}]*)}/g;let h=a;if(c.name=this.path,c.binding||(c.binding={}),Kt(a,d)){const m=a.trim().replaceAll(d,g=>{var S;const k=g.replace(/{|}/g,""),T=(S=s[k])==null?void 0:S.computed(u,c);return Oc(T)&&T.length===2?`light-dark(${T[0].value},${T[1].value})`:T==null?void 0:T.value}),p=/(\d+\w*\s+[\+\-\*\/]\s+\d+\w*)/g,y=/var\([^)]+\)/g;h=Kt(m.replace(y,"0"),p)?`calc(${m})`:m}return Ja(c.binding)&&delete c.binding,{colorScheme:u,path:this.path,paths:c,value:h.includes("undefined")?void 0:h}}}))}),s},getTokenValue(e,r,t){var n;const i=(l=>l.split(".").filter(c=>!Kt(c.toLowerCase(),t.variable.excludedKeyRegex)).join("."))(r),a=r.includes("colorScheme.light")?"light":r.includes("colorScheme.dark")?"dark":void 0,o=[(n=e[i])==null?void 0:n.computed(a)].flat().filter(l=>l);return o.length===1?o[0].value:o.reduce((l={},u)=>{const c=u,{colorScheme:d}=c,h=Ft(c,["colorScheme"]);return l[d]=h,l},void 0)},getSelectorRule(e,r,t,n){return t==="class"||t==="attr"?jn(Pe(r)?`${e}${r},${e} ${r}`:e,n):jn(e,Pe(r)?jn(r,n):n)},transformCSS(e,r,t,n,s={},i,a,o){if(Pe(r)){const{cssLayer:l}=s;if(n!=="style"){const u=this.getColorSchemeOption(s,a);r=t==="dark"?u.reduce((c,{type:d,selector:h})=>(Pe(h)&&(c+=h.includes("[CSS]")?h.replace("[CSS]",r):this.getSelectorRule(h,o,d,r)),c),""):jn(o??":root",r)}if(l){const u={name:"primeui"};sn(l)&&(u.name=_n(l.name,{name:e,type:n})),Pe(u.name)&&(r=jn(`@layer ${u.name}`,r),i==null||i.layerNames(u.name))}return r}return""}},Ge={defaults:{variable:{prefix:"p",selector:":root",excludedKeyRegex:/^(primitive|semantic|components|directives|variables|colorscheme|light|dark|common|root|states|extend|css)$/gi},options:{prefix:"p",darkModeSelector:"system",cssLayer:!1}},_theme:void 0,_layerNames:new Set,_loadedStyleNames:new Set,_loadingStyles:new Set,_tokens:{},update(e={}){const{theme:r}=e;r&&(this._theme=Ii(_t({},r),{options:_t(_t({},this.defaults.options),r.options)}),this._tokens=yt.createTokens(this.preset,this.defaults),this.clearLoadedStyleNames())},get theme(){return this._theme},get preset(){var e;return((e=this.theme)==null?void 0:e.preset)||{}},get options(){var e;return((e=this.theme)==null?void 0:e.options)||{}},get tokens(){return this._tokens},getTheme(){return this.theme},setTheme(e){this.update({theme:e}),Vt.emit("theme:change",e)},getPreset(){return this.preset},setPreset(e){this._theme=Ii(_t({},this.theme),{preset:e}),this._tokens=yt.createTokens(e,this.defaults),this.clearLoadedStyleNames(),Vt.emit("preset:change",e),Vt.emit("theme:change",this.theme)},getOptions(){return this.options},setOptions(e){this._theme=Ii(_t({},this.theme),{options:e}),this.clearLoadedStyleNames(),Vt.emit("options:change",e),Vt.emit("theme:change",this.theme)},getLayerNames(){return[...this._layerNames]},setLayerNames(e){this._layerNames.add(e)},getLoadedStyleNames(){return this._loadedStyleNames},isStyleNameLoaded(e){return this._loadedStyleNames.has(e)},setLoadedStyleName(e){this._loadedStyleNames.add(e)},deleteLoadedStyleName(e){this._loadedStyleNames.delete(e)},clearLoadedStyleNames(){this._loadedStyleNames.clear()},getTokenValue(e){return yt.getTokenValue(this.tokens,e,this.defaults)},getCommon(e="",r){return yt.getCommon({name:e,theme:this.theme,params:r,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}})},getComponent(e="",r){const t={name:e,theme:this.theme,params:r,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}};return yt.getPresetC(t)},getDirective(e="",r){const t={name:e,theme:this.theme,params:r,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}};return yt.getPresetD(t)},getCustomPreset(e="",r,t,n){const s={name:e,preset:r,options:this.options,selector:t,params:n,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}};return yt.getPreset(s)},getLayerOrderCSS(e=""){return yt.getLayerOrder(e,this.options,{names:this.getLayerNames()},this.defaults)},transformCSS(e="",r,t="style",n){return yt.transformCSS(e,r,n,t,this.options,{layerNames:this.setLayerNames.bind(this)},this.defaults)},getCommonStyleSheet(e="",r,t={}){return yt.getCommonStyleSheet({name:e,theme:this.theme,params:r,props:t,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}})},getStyleSheet(e,r,t={}){return yt.getStyleSheet({name:e,theme:this.theme,params:r,props:t,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}})},onStyleMounted(e){this._loadingStyles.add(e)},onStyleUpdated(e){this._loadingStyles.add(e)},onStyleLoaded(e,{name:r}){this._loadingStyles.size&&(this._loadingStyles.delete(r),Vt.emit(`theme:${r}:load`,e),!this._loadingStyles.size&&Vt.emit("theme:load"))}},ze={STARTS_WITH:"startsWith",CONTAINS:"contains",NOT_CONTAINS:"notContains",ENDS_WITH:"endsWith",EQUALS:"equals",NOT_EQUALS:"notEquals",LESS_THAN:"lt",LESS_THAN_OR_EQUAL_TO:"lte",GREATER_THAN:"gt",GREATER_THAN_OR_EQUAL_TO:"gte",DATE_IS:"dateIs",DATE_IS_NOT:"dateIsNot",DATE_BEFORE:"dateBefore",DATE_AFTER:"dateAfter"},Kp=na`
    *,
    ::before,
    ::after {
        box-sizing: border-box;
    }

    /* Non vue overlay animations */
    .p-connected-overlay {
        opacity: 0;
        transform: scaleY(0.8);
        transition:
            transform 0.12s cubic-bezier(0, 0, 0.2, 1),
            opacity 0.12s cubic-bezier(0, 0, 0.2, 1);
    }

    .p-connected-overlay-visible {
        opacity: 1;
        transform: scaleY(1);
    }

    .p-connected-overlay-hidden {
        opacity: 0;
        transform: scaleY(1);
        transition: opacity 0.1s linear;
    }

    /* Vue based overlay animations */
    .p-connected-overlay-enter-from {
        opacity: 0;
        transform: scaleY(0.8);
    }

    .p-connected-overlay-leave-to {
        opacity: 0;
    }

    .p-connected-overlay-enter-active {
        transition:
            transform 0.12s cubic-bezier(0, 0, 0.2, 1),
            opacity 0.12s cubic-bezier(0, 0, 0.2, 1);
    }

    .p-connected-overlay-leave-active {
        transition: opacity 0.1s linear;
    }

    /* Toggleable Content */
    .p-toggleable-content-enter-from,
    .p-toggleable-content-leave-to {
        max-height: 0;
    }

    .p-toggleable-content-enter-to,
    .p-toggleable-content-leave-from {
        max-height: 1000px;
    }

    .p-toggleable-content-leave-active {
        overflow: hidden;
        transition: max-height 0.45s cubic-bezier(0, 1, 0, 1);
    }

    .p-toggleable-content-enter-active {
        overflow: hidden;
        transition: max-height 1s ease-in-out;
    }

    .p-disabled,
    .p-disabled * {
        cursor: default;
        pointer-events: none;
        user-select: none;
    }

    .p-disabled,
    .p-component:disabled {
        opacity: dt('disabled.opacity');
    }

    .pi {
        font-size: dt('icon.size');
    }

    .p-icon {
        width: dt('icon.size');
        height: dt('icon.size');
    }

    .p-overlay-mask {
        background: dt('mask.background');
        color: dt('mask.color');
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }

    .p-overlay-mask-enter {
        animation: p-overlay-mask-enter-animation dt('mask.transition.duration') forwards;
    }

    .p-overlay-mask-leave {
        animation: p-overlay-mask-leave-animation dt('mask.transition.duration') forwards;
    }

    @keyframes p-overlay-mask-enter-animation {
        from {
            background: transparent;
        }
        to {
            background: dt('mask.background');
        }
    }
    @keyframes p-overlay-mask-leave-animation {
        from {
            background: dt('mask.background');
        }
        to {
            background: transparent;
        }
    }
`;function Yr(e){"@babel/helpers - typeof";return Yr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Yr(e)}function rl(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),t.push.apply(t,n)}return t}function sl(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?rl(Object(t),!0).forEach(function(n){Wp(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):rl(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Wp(e,r,t){return(r=Jp(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Jp(e){var r=Yp(e,"string");return Yr(r)=="symbol"?r:r+""}function Yp(e,r){if(Yr(e)!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var n=t.call(e,r);if(Yr(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Xp(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;Po()&&Po().components?za(e):r?e():$a(e)}var Zp=0;function Qp(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=it(!1),n=it(e),s=it(null),i=Np()?window.document:void 0,a=r.document,o=a===void 0?i:a,l=r.immediate,u=l===void 0?!0:l,c=r.manual,d=c===void 0?!1:c,h=r.name,f=h===void 0?"style_".concat(++Zp):h,m=r.id,p=m===void 0?void 0:m,y=r.media,g=y===void 0?void 0:y,S=r.nonce,k=S===void 0?void 0:S,T=r.first,x=T===void 0?!1:T,I=r.onMounted,F=I===void 0?void 0:I,$=r.onUpdated,ae=$===void 0?void 0:$,me=r.onLoad,re=me===void 0?void 0:me,se=r.props,ge=se===void 0?{}:se,z=function(){},De=function(L){var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(o){var X=sl(sl({},ge),J),G=X.name||f,ce=X.id||p,Te=X.nonce||k;s.value=o.querySelector('style[data-primevue-style-id="'.concat(G,'"]'))||o.getElementById(ce)||o.createElement("style"),s.value.isConnected||(n.value=L||e,ea(s.value,{type:"text/css",id:ce,media:g,nonce:Te}),x?o.head.prepend(s.value):o.head.appendChild(s.value),Dp(s.value,"data-primevue-style-id",G),ea(s.value,X),s.value.onload=function(Ce){return re==null?void 0:re(Ce,{name:G})},F==null||F(G)),!t.value&&(z=Gt(n,function(Ce){s.value.textContent=Ce,ae==null||ae(G)},{immediate:!0}),t.value=!0)}},D=function(){!o||!t.value||(z(),Pp(s.value)&&o.head.removeChild(s.value),t.value=!1,s.value=null)};return u&&!d&&Xp(De),{id:p,name:f,el:s,css:n,unload:D,load:De,isLoaded:ja(t)}}function Xr(e){"@babel/helpers - typeof";return Xr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Xr(e)}function il(e,r){return rm(e)||nm(e,r)||tm(e,r)||em()}function em(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tm(e,r){if(e){if(typeof e=="string")return al(e,r);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?al(e,r):void 0}}function al(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function nm(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n,s,i,a,o=[],l=!0,u=!1;try{if(i=(t=t.call(e)).next,r!==0)for(;!(l=(n=i.call(t)).done)&&(o.push(n.value),o.length!==r);l=!0);}catch(c){u=!0,s=c}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw s}}return o}}function rm(e){if(Array.isArray(e))return e}function ol(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),t.push.apply(t,n)}return t}function Li(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?ol(Object(t),!0).forEach(function(n){sm(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ol(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function sm(e,r,t){return(r=im(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function im(e){var r=am(e,"string");return Xr(r)=="symbol"?r:r+""}function am(e,r){if(Xr(e)!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var n=t.call(e,r);if(Xr(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var om=function(r){var t=r.dt;return`
.p-hidden-accessible {
    border: 0;
    clip: rect(0 0 0 0);
    height: 1px;
    margin: -1px;
    opacity: 0;
    overflow: hidden;
    padding: 0;
    pointer-events: none;
    position: absolute;
    white-space: nowrap;
    width: 1px;
}

.p-overflow-hidden {
    overflow: hidden;
    padding-right: `.concat(t("scrollbar.width"),`;
}
`)},lm={},um={},Nn={name:"base",css:om,style:Kp,classes:lm,inlineStyles:um,load:function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(i){return i},s=n(_n(r,{dt:Jn}));return Pe(s)?Qp(Ur(s),Li({name:this.name},t)):{}},loadCSS:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.load(this.css,r)},loadStyle:function(){var r=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return this.load(this.style,t,function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return Ge.transformCSS(t.name||r.name,"".concat(s).concat(n))})},getCommonTheme:function(r){return Ge.getCommon(this.name,r)},getComponentTheme:function(r){return Ge.getComponent(this.name,r)},getDirectiveTheme:function(r){return Ge.getDirective(this.name,r)},getPresetTheme:function(r,t,n){return Ge.getCustomPreset(this.name,r,t,n)},getLayerOrderThemeCSS:function(){return Ge.getLayerOrderCSS(this.name)},getStyleSheet:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.css){var n=_n(this.css,{dt:Jn})||"",s=Ur("".concat(n).concat(r)),i=Object.entries(t).reduce(function(a,o){var l=il(o,2),u=l[0],c=l[1];return a.push("".concat(u,'="').concat(c,'"'))&&a},[]).join(" ");return Pe(s)?'<style type="text/css" data-primevue-style-id="'.concat(this.name,'" ').concat(i,">").concat(s,"</style>"):""}return""},getCommonThemeStyleSheet:function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ge.getCommonStyleSheet(this.name,r,t)},getThemeStyleSheet:function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=[Ge.getStyleSheet(this.name,r,t)];if(this.style){var s=this.name==="base"?"global-style":"".concat(this.name,"-style"),i=_n(this.style,{dt:Jn}),a=Ur(Ge.transformCSS(s,i)),o=Object.entries(t).reduce(function(l,u){var c=il(u,2),d=c[0],h=c[1];return l.push("".concat(d,'="').concat(h,'"'))&&l},[]).join(" ");Pe(a)&&n.push('<style type="text/css" data-primevue-style-id="'.concat(s,'" ').concat(o,">").concat(a,"</style>"))}return n.join("")},extend:function(r){return Li(Li({},this),{},{css:void 0,style:void 0},r)}},ms=Nc();function Zr(e){"@babel/helpers - typeof";return Zr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Zr(e)}function ll(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),t.push.apply(t,n)}return t}function vs(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?ll(Object(t),!0).forEach(function(n){cm(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ll(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function cm(e,r,t){return(r=dm(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function dm(e){var r=fm(e,"string");return Zr(r)=="symbol"?r:r+""}function fm(e,r){if(Zr(e)!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var n=t.call(e,r);if(Zr(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var hm={ripple:!1,inputStyle:null,inputVariant:null,locale:{startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",completed:"Completed",pending:"Pending",fileSizeTypes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],chooseYear:"Choose Year",chooseMonth:"Choose Month",chooseDate:"Choose Date",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",prevHour:"Previous Hour",nextHour:"Next Hour",prevMinute:"Previous Minute",nextMinute:"Next Minute",prevSecond:"Previous Second",nextSecond:"Next Second",am:"am",pm:"pm",today:"Today",weekHeader:"Wk",firstDayOfWeek:0,showMonthAfterYear:!1,dateFormat:"mm/dd/yy",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyFilterMessage:"No results found",searchMessage:"{0} results are available",selectionMessage:"{0} items selected",emptySelectionMessage:"No selected item",emptySearchMessage:"No results found",fileChosenMessage:"{0} files",noFileChosenMessage:"No file chosen",emptyMessage:"No available options",aria:{trueLabel:"True",falseLabel:"False",nullLabel:"Not Selected",star:"1 star",stars:"{star} stars",selectAll:"All items selected",unselectAll:"All items unselected",close:"Close",previous:"Previous",next:"Next",navigation:"Navigation",scrollTop:"Scroll Top",moveTop:"Move Top",moveUp:"Move Up",moveDown:"Move Down",moveBottom:"Move Bottom",moveToTarget:"Move to Target",moveToSource:"Move to Source",moveAllToTarget:"Move All to Target",moveAllToSource:"Move All to Source",pageLabel:"Page {page}",firstPageLabel:"First Page",lastPageLabel:"Last Page",nextPageLabel:"Next Page",prevPageLabel:"Previous Page",rowsPerPageLabel:"Rows per page",jumpToPageDropdownLabel:"Jump to Page Dropdown",jumpToPageInputLabel:"Jump to Page Input",selectRow:"Row Selected",unselectRow:"Row Unselected",expandRow:"Row Expanded",collapseRow:"Row Collapsed",showFilterMenu:"Show Filter Menu",hideFilterMenu:"Hide Filter Menu",filterOperator:"Filter Operator",filterConstraint:"Filter Constraint",editRow:"Row Edit",saveEdit:"Save Edit",cancelEdit:"Cancel Edit",listView:"List View",gridView:"Grid View",slide:"Slide",slideNumber:"{slideNumber}",zoomImage:"Zoom Image",zoomIn:"Zoom In",zoomOut:"Zoom Out",rotateRight:"Rotate Right",rotateLeft:"Rotate Left",listLabel:"Option List"}},filterMatchModeOptions:{text:[ze.STARTS_WITH,ze.CONTAINS,ze.NOT_CONTAINS,ze.ENDS_WITH,ze.EQUALS,ze.NOT_EQUALS],numeric:[ze.EQUALS,ze.NOT_EQUALS,ze.LESS_THAN,ze.LESS_THAN_OR_EQUAL_TO,ze.GREATER_THAN,ze.GREATER_THAN_OR_EQUAL_TO],date:[ze.DATE_IS,ze.DATE_IS_NOT,ze.DATE_BEFORE,ze.DATE_AFTER]},zIndex:{modal:1100,overlay:1e3,menu:1e3,tooltip:1100},theme:void 0,unstyled:!1,pt:void 0,ptOptions:{mergeSections:!0,mergeProps:!1},csp:{nonce:void 0}},pm=Symbol();function mm(e,r){var t={config:as(r)};return e.config.globalProperties.$primevue=t,e.provide(pm,t),vm(),gm(e,t),t}var Vn=[];function vm(){Vt.clear(),Vn.forEach(function(e){return e==null?void 0:e()}),Vn=[]}function gm(e,r){var t=it(!1),n=function(){var u;if(((u=r.config)===null||u===void 0?void 0:u.theme)!=="none"&&!Ge.isStyleNameLoaded("common")){var c,d,h=((c=Nn.getCommonTheme)===null||c===void 0?void 0:c.call(Nn))||{},f=h.primitive,m=h.semantic,p=h.global,y=h.style,g={nonce:(d=r.config)===null||d===void 0||(d=d.csp)===null||d===void 0?void 0:d.nonce};Nn.load(f==null?void 0:f.css,vs({name:"primitive-variables"},g)),Nn.load(m==null?void 0:m.css,vs({name:"semantic-variables"},g)),Nn.load(p==null?void 0:p.css,vs({name:"global-variables"},g)),Nn.loadStyle(vs({name:"global-style"},g),y),Ge.setLoadedStyleName("common")}};Vt.on("theme:change",function(l){t.value||(e.config.globalProperties.$primevue.config.theme=l,t.value=!0)});var s=Gt(r.config,function(l,u){ms.emit("config:change",{newValue:l,oldValue:u})},{immediate:!0,deep:!0}),i=Gt(function(){return r.config.ripple},function(l,u){ms.emit("config:ripple:change",{newValue:l,oldValue:u})},{immediate:!0,deep:!0}),a=Gt(function(){return r.config.theme},function(l,u){t.value||Ge.setTheme(l),r.config.unstyled||n(),t.value=!1,ms.emit("config:theme:change",{newValue:l,oldValue:u})},{immediate:!0,deep:!1}),o=Gt(function(){return r.config.unstyled},function(l,u){!l&&r.config.theme&&n(),ms.emit("config:unstyled:change",{newValue:l,oldValue:u})},{immediate:!0,deep:!0});Vn.push(s),Vn.push(i),Vn.push(a),Vn.push(o)}var ym={install:function(r,t){var n=Lp(hm,t);mm(r,n)}};/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Un=typeof document<"u";function $c(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function bm(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&$c(e.default)}const _e=Object.assign;function Oi(e,r){const t={};for(const n in r){const s=r[n];t[n]=wt(s)?s.map(e):e(s)}return t}const Hr=()=>{},wt=Array.isArray,Vc=/#/g,_m=/&/g,Sm=/\//g,Em=/=/g,km=/\?/g,qc=/\+/g,wm=/%5B/g,Cm=/%5D/g,zc=/%5E/g,Tm=/%60/g,Gc=/%7B/g,Am=/%7C/g,Kc=/%7D/g,xm=/%20/g;function Ya(e){return encodeURI(""+e).replace(Am,"|").replace(wm,"[").replace(Cm,"]")}function Rm(e){return Ya(e).replace(Gc,"{").replace(Kc,"}").replace(zc,"^")}function ra(e){return Ya(e).replace(qc,"%2B").replace(xm,"+").replace(Vc,"%23").replace(_m,"%26").replace(Tm,"`").replace(Gc,"{").replace(Kc,"}").replace(zc,"^")}function Mm(e){return ra(e).replace(Em,"%3D")}function Im(e){return Ya(e).replace(Vc,"%23").replace(km,"%3F")}function Lm(e){return e==null?"":Im(e).replace(Sm,"%2F")}function Qr(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const Om=/\/$/,Pm=e=>e.replace(Om,"");function Pi(e,r,t="/"){let n,s={},i="",a="";const o=r.indexOf("#");let l=r.indexOf("?");return o<l&&o>=0&&(l=-1),l>-1&&(n=r.slice(0,l),i=r.slice(l+1,o>-1?o:r.length),s=e(i)),o>-1&&(n=n||r.slice(0,o),a=r.slice(o,r.length)),n=Fm(n??r,t),{fullPath:n+(i&&"?")+i+a,path:n,query:s,hash:Qr(a)}}function Nm(e,r){const t=r.query?e(r.query):"";return r.path+(t&&"?")+t+(r.hash||"")}function ul(e,r){return!r||!e.toLowerCase().startsWith(r.toLowerCase())?e:e.slice(r.length)||"/"}function Dm(e,r,t){const n=r.matched.length-1,s=t.matched.length-1;return n>-1&&n===s&&Qn(r.matched[n],t.matched[s])&&Wc(r.params,t.params)&&e(r.query)===e(t.query)&&r.hash===t.hash}function Qn(e,r){return(e.aliasOf||e)===(r.aliasOf||r)}function Wc(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const t in e)if(!Bm(e[t],r[t]))return!1;return!0}function Bm(e,r){return wt(e)?cl(e,r):wt(r)?cl(r,e):e===r}function cl(e,r){return wt(r)?e.length===r.length&&e.every((t,n)=>t===r[n]):e.length===1&&e[0]===r}function Fm(e,r){if(e.startsWith("/"))return e;if(!e)return r;const t=r.split("/"),n=e.split("/"),s=n[n.length-1];(s===".."||s===".")&&n.push("");let i=t.length-1,a,o;for(a=0;a<n.length;a++)if(o=n[a],o!==".")if(o==="..")i>1&&i--;else break;return t.slice(0,i).join("/")+"/"+n.slice(a).join("/")}const Xt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var es;(function(e){e.pop="pop",e.push="push"})(es||(es={}));var $r;(function(e){e.back="back",e.forward="forward",e.unknown=""})($r||($r={}));function jm(e){if(!e)if(Un){const r=document.querySelector("base");e=r&&r.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Pm(e)}const Um=/^[^#]+#/;function Hm(e,r){return e.replace(Um,"#")+r}function $m(e,r){const t=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:r.behavior,left:n.left-t.left-(r.left||0),top:n.top-t.top-(r.top||0)}}const ci=()=>({left:window.scrollX,top:window.scrollY});function Vm(e){let r;if("el"in e){const t=e.el,n=typeof t=="string"&&t.startsWith("#"),s=typeof t=="string"?n?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!s)return;r=$m(s,e)}else r=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(r):window.scrollTo(r.left!=null?r.left:window.scrollX,r.top!=null?r.top:window.scrollY)}function dl(e,r){return(history.state?history.state.position-r:-1)+e}const sa=new Map;function qm(e,r){sa.set(e,r)}function zm(e){const r=sa.get(e);return sa.delete(e),r}let Gm=()=>location.protocol+"//"+location.host;function Jc(e,r){const{pathname:t,search:n,hash:s}=r,i=e.indexOf("#");if(i>-1){let o=s.includes(e.slice(i))?e.slice(i).length:1,l=s.slice(o);return l[0]!=="/"&&(l="/"+l),ul(l,"")}return ul(t,e)+n+s}function Km(e,r,t,n){let s=[],i=[],a=null;const o=({state:h})=>{const f=Jc(e,location),m=t.value,p=r.value;let y=0;if(h){if(t.value=f,r.value=h,a&&a===m){a=null;return}y=p?h.position-p.position:0}else n(f);s.forEach(g=>{g(t.value,m,{delta:y,type:es.pop,direction:y?y>0?$r.forward:$r.back:$r.unknown})})};function l(){a=t.value}function u(h){s.push(h);const f=()=>{const m=s.indexOf(h);m>-1&&s.splice(m,1)};return i.push(f),f}function c(){const{history:h}=window;h.state&&h.replaceState(_e({},h.state,{scroll:ci()}),"")}function d(){for(const h of i)h();i=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:l,listen:u,destroy:d}}function fl(e,r,t,n=!1,s=!1){return{back:e,current:r,forward:t,replaced:n,position:window.history.length,scroll:s?ci():null}}function Wm(e){const{history:r,location:t}=window,n={value:Jc(e,t)},s={value:r.state};s.value||i(n.value,{back:null,current:n.value,forward:null,position:r.length-1,replaced:!0,scroll:null},!0);function i(l,u,c){const d=e.indexOf("#"),h=d>-1?(t.host&&document.querySelector("base")?e:e.slice(d))+l:Gm()+e+l;try{r[c?"replaceState":"pushState"](u,"",h),s.value=u}catch(f){console.error(f),t[c?"replace":"assign"](h)}}function a(l,u){const c=_e({},r.state,fl(s.value.back,l,s.value.forward,!0),u,{position:s.value.position});i(l,c,!0),n.value=l}function o(l,u){const c=_e({},s.value,r.state,{forward:l,scroll:ci()});i(c.current,c,!0);const d=_e({},fl(n.value,l,null),{position:c.position+1},u);i(l,d,!1),n.value=l}return{location:n,state:s,push:o,replace:a}}function Jm(e){e=jm(e);const r=Wm(e),t=Km(e,r.state,r.location,r.replace);function n(i,a=!0){a||t.pauseListeners(),history.go(i)}const s=_e({location:"",base:e,go:n,createHref:Hm.bind(null,e)},r,t);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>r.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>r.state.value}),s}function Ym(e){return typeof e=="string"||e&&typeof e=="object"}function Yc(e){return typeof e=="string"||typeof e=="symbol"}const Xc=Symbol("");var hl;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(hl||(hl={}));function er(e,r){return _e(new Error,{type:e,[Xc]:!0},r)}function jt(e,r){return e instanceof Error&&Xc in e&&(r==null||!!(e.type&r))}const pl="[^/]+?",Xm={sensitive:!1,strict:!1,start:!0,end:!0},Zm=/[.+*?^${}()[\]/\\]/g;function Qm(e,r){const t=_e({},Xm,r),n=[];let s=t.start?"^":"";const i=[];for(const u of e){const c=u.length?[]:[90];t.strict&&!u.length&&(s+="/");for(let d=0;d<u.length;d++){const h=u[d];let f=40+(t.sensitive?.25:0);if(h.type===0)d||(s+="/"),s+=h.value.replace(Zm,"\\$&"),f+=40;else if(h.type===1){const{value:m,repeatable:p,optional:y,regexp:g}=h;i.push({name:m,repeatable:p,optional:y});const S=g||pl;if(S!==pl){f+=10;try{new RegExp(`(${S})`)}catch(T){throw new Error(`Invalid custom RegExp for param "${m}" (${S}): `+T.message)}}let k=p?`((?:${S})(?:/(?:${S}))*)`:`(${S})`;d||(k=y&&u.length<2?`(?:/${k})`:"/"+k),y&&(k+="?"),s+=k,f+=20,y&&(f+=-8),p&&(f+=-20),S===".*"&&(f+=-50)}c.push(f)}n.push(c)}if(t.strict&&t.end){const u=n.length-1;n[u][n[u].length-1]+=.7000000000000001}t.strict||(s+="/?"),t.end?s+="$":t.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const a=new RegExp(s,t.sensitive?"":"i");function o(u){const c=u.match(a),d={};if(!c)return null;for(let h=1;h<c.length;h++){const f=c[h]||"",m=i[h-1];d[m.name]=f&&m.repeatable?f.split("/"):f}return d}function l(u){let c="",d=!1;for(const h of e){(!d||!c.endsWith("/"))&&(c+="/"),d=!1;for(const f of h)if(f.type===0)c+=f.value;else if(f.type===1){const{value:m,repeatable:p,optional:y}=f,g=m in u?u[m]:"";if(wt(g)&&!p)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const S=wt(g)?g.join("/"):g;if(!S)if(y)h.length<2&&(c.endsWith("/")?c=c.slice(0,-1):d=!0);else throw new Error(`Missing required param "${m}"`);c+=S}}return c||"/"}return{re:a,score:n,keys:i,parse:o,stringify:l}}function ev(e,r){let t=0;for(;t<e.length&&t<r.length;){const n=r[t]-e[t];if(n)return n;t++}return e.length<r.length?e.length===1&&e[0]===80?-1:1:e.length>r.length?r.length===1&&r[0]===80?1:-1:0}function Zc(e,r){let t=0;const n=e.score,s=r.score;for(;t<n.length&&t<s.length;){const i=ev(n[t],s[t]);if(i)return i;t++}if(Math.abs(s.length-n.length)===1){if(ml(n))return 1;if(ml(s))return-1}return s.length-n.length}function ml(e){const r=e[e.length-1];return e.length>0&&r[r.length-1]<0}const tv={type:0,value:""},nv=/[a-zA-Z0-9_]/;function rv(e){if(!e)return[[]];if(e==="/")return[[tv]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function r(f){throw new Error(`ERR (${t})/"${u}": ${f}`)}let t=0,n=t;const s=[];let i;function a(){i&&s.push(i),i=[]}let o=0,l,u="",c="";function d(){u&&(t===0?i.push({type:0,value:u}):t===1||t===2||t===3?(i.length>1&&(l==="*"||l==="+")&&r(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):r("Invalid state to consume buffer"),u="")}function h(){u+=l}for(;o<e.length;){if(l=e[o++],l==="\\"&&t!==2){n=t,t=4;continue}switch(t){case 0:l==="/"?(u&&d(),a()):l===":"?(d(),t=1):h();break;case 4:h(),t=n;break;case 1:l==="("?t=2:nv.test(l)?h():(d(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&o--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:t=3:c+=l;break;case 3:d(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&o--,c="";break;default:r("Unknown state");break}}return t===2&&r(`Unfinished custom RegExp for param "${u}"`),d(),a(),s}function sv(e,r,t){const n=Qm(rv(e.path),t),s=_e(n,{record:e,parent:r,children:[],alias:[]});return r&&!s.record.aliasOf==!r.record.aliasOf&&r.children.push(s),s}function iv(e,r){const t=[],n=new Map;r=bl({strict:!1,end:!0,sensitive:!1},r);function s(d){return n.get(d)}function i(d,h,f){const m=!f,p=gl(d);p.aliasOf=f&&f.record;const y=bl(r,d),g=[p];if("alias"in d){const T=typeof d.alias=="string"?[d.alias]:d.alias;for(const x of T)g.push(gl(_e({},p,{components:f?f.record.components:p.components,path:x,aliasOf:f?f.record:p})))}let S,k;for(const T of g){const{path:x}=T;if(h&&x[0]!=="/"){const I=h.record.path,F=I[I.length-1]==="/"?"":"/";T.path=h.record.path+(x&&F+x)}if(S=sv(T,h,y),f?f.alias.push(S):(k=k||S,k!==S&&k.alias.push(S),m&&d.name&&!yl(S)&&a(d.name)),Qc(S)&&l(S),p.children){const I=p.children;for(let F=0;F<I.length;F++)i(I[F],S,f&&f.children[F])}f=f||S}return k?()=>{a(k)}:Hr}function a(d){if(Yc(d)){const h=n.get(d);h&&(n.delete(d),t.splice(t.indexOf(h),1),h.children.forEach(a),h.alias.forEach(a))}else{const h=t.indexOf(d);h>-1&&(t.splice(h,1),d.record.name&&n.delete(d.record.name),d.children.forEach(a),d.alias.forEach(a))}}function o(){return t}function l(d){const h=lv(d,t);t.splice(h,0,d),d.record.name&&!yl(d)&&n.set(d.record.name,d)}function u(d,h){let f,m={},p,y;if("name"in d&&d.name){if(f=n.get(d.name),!f)throw er(1,{location:d});y=f.record.name,m=_e(vl(h.params,f.keys.filter(k=>!k.optional).concat(f.parent?f.parent.keys.filter(k=>k.optional):[]).map(k=>k.name)),d.params&&vl(d.params,f.keys.map(k=>k.name))),p=f.stringify(m)}else if(d.path!=null)p=d.path,f=t.find(k=>k.re.test(p)),f&&(m=f.parse(p),y=f.record.name);else{if(f=h.name?n.get(h.name):t.find(k=>k.re.test(h.path)),!f)throw er(1,{location:d,currentLocation:h});y=f.record.name,m=_e({},h.params,d.params),p=f.stringify(m)}const g=[];let S=f;for(;S;)g.unshift(S.record),S=S.parent;return{name:y,path:p,params:m,matched:g,meta:ov(g)}}e.forEach(d=>i(d));function c(){t.length=0,n.clear()}return{addRoute:i,resolve:u,removeRoute:a,clearRoutes:c,getRoutes:o,getRecordMatcher:s}}function vl(e,r){const t={};for(const n of r)n in e&&(t[n]=e[n]);return t}function gl(e){const r={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:av(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(r,"mods",{value:{}}),r}function av(e){const r={},t=e.props||!1;if("component"in e)r.default=t;else for(const n in e.components)r[n]=typeof t=="object"?t[n]:t;return r}function yl(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function ov(e){return e.reduce((r,t)=>_e(r,t.meta),{})}function bl(e,r){const t={};for(const n in e)t[n]=n in r?r[n]:e[n];return t}function lv(e,r){let t=0,n=r.length;for(;t!==n;){const i=t+n>>1;Zc(e,r[i])<0?n=i:t=i+1}const s=uv(e);return s&&(n=r.lastIndexOf(s,n-1)),n}function uv(e){let r=e;for(;r=r.parent;)if(Qc(r)&&Zc(e,r)===0)return r}function Qc({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function cv(e){const r={};if(e===""||e==="?")return r;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<n.length;++s){const i=n[s].replace(qc," "),a=i.indexOf("="),o=Qr(a<0?i:i.slice(0,a)),l=a<0?null:Qr(i.slice(a+1));if(o in r){let u=r[o];wt(u)||(u=r[o]=[u]),u.push(l)}else r[o]=l}return r}function _l(e){let r="";for(let t in e){const n=e[t];if(t=Mm(t),n==null){n!==void 0&&(r+=(r.length?"&":"")+t);continue}(wt(n)?n.map(i=>i&&ra(i)):[n&&ra(n)]).forEach(i=>{i!==void 0&&(r+=(r.length?"&":"")+t,i!=null&&(r+="="+i))})}return r}function dv(e){const r={};for(const t in e){const n=e[t];n!==void 0&&(r[t]=wt(n)?n.map(s=>s==null?null:""+s):n==null?n:""+n)}return r}const fv=Symbol(""),Sl=Symbol(""),di=Symbol(""),ed=Symbol(""),ia=Symbol("");function ar(){let e=[];function r(n){return e.push(n),()=>{const s=e.indexOf(n);s>-1&&e.splice(s,1)}}function t(){e=[]}return{add:r,list:()=>e.slice(),reset:t}}function tn(e,r,t,n,s,i=a=>a()){const a=n&&(n.enterCallbacks[s]=n.enterCallbacks[s]||[]);return()=>new Promise((o,l)=>{const u=h=>{h===!1?l(er(4,{from:t,to:r})):h instanceof Error?l(h):Ym(h)?l(er(2,{from:r,to:h})):(a&&n.enterCallbacks[s]===a&&typeof h=="function"&&a.push(h),o())},c=i(()=>e.call(n&&n.instances[s],r,t,u));let d=Promise.resolve(c);e.length<3&&(d=d.then(u)),d.catch(h=>l(h))})}function Ni(e,r,t,n,s=i=>i()){const i=[];for(const a of e)for(const o in a.components){let l=a.components[o];if(!(r!=="beforeRouteEnter"&&!a.instances[o]))if($c(l)){const c=(l.__vccOpts||l)[r];c&&i.push(tn(c,t,n,a,o,s))}else{let u=l();i.push(()=>u.then(c=>{if(!c)throw new Error(`Couldn't resolve component "${o}" at "${a.path}"`);const d=bm(c)?c.default:c;a.mods[o]=c,a.components[o]=d;const f=(d.__vccOpts||d)[r];return f&&tn(f,t,n,a,o,s)()}))}}return i}function El(e){const r=Pt(di),t=Pt(ed),n=St(()=>{const l=$e(e.to);return r.resolve(l)}),s=St(()=>{const{matched:l}=n.value,{length:u}=l,c=l[u-1],d=t.matched;if(!c||!d.length)return-1;const h=d.findIndex(Qn.bind(null,c));if(h>-1)return h;const f=kl(l[u-2]);return u>1&&kl(c)===f&&d[d.length-1].path!==f?d.findIndex(Qn.bind(null,l[u-2])):h}),i=St(()=>s.value>-1&&gv(t.params,n.value.params)),a=St(()=>s.value>-1&&s.value===t.matched.length-1&&Wc(t.params,n.value.params));function o(l={}){if(vv(l)){const u=r[$e(e.replace)?"replace":"push"]($e(e.to)).catch(Hr);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:n,href:St(()=>n.value.href),isActive:i,isExactActive:a,navigate:o}}function hv(e){return e.length===1?e[0]:e}const pv=xn({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:El,setup(e,{slots:r}){const t=as(El(e)),{options:n}=Pt(di),s=St(()=>({[wl(e.activeClass,n.linkActiveClass,"router-link-active")]:t.isActive,[wl(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const i=r.default&&hv(r.default(t));return e.custom?i:Rc("a",{"aria-current":t.isExactActive?e.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:s.value},i)}}}),mv=pv;function vv(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const r=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(r))return}return e.preventDefault&&e.preventDefault(),!0}}function gv(e,r){for(const t in r){const n=r[t],s=e[t];if(typeof n=="string"){if(n!==s)return!1}else if(!wt(s)||s.length!==n.length||n.some((i,a)=>i!==s[a]))return!1}return!0}function kl(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const wl=(e,r,t)=>e??r??t,yv=xn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:r,slots:t}){const n=Pt(ia),s=St(()=>e.route||n.value),i=Pt(Sl,0),a=St(()=>{let u=$e(i);const{matched:c}=s.value;let d;for(;(d=c[u])&&!d.components;)u++;return u}),o=St(()=>s.value.matched[a.value]);ks(Sl,St(()=>a.value+1)),ks(fv,o),ks(ia,s);const l=it();return Gt(()=>[l.value,o.value,e.name],([u,c,d],[h,f,m])=>{c&&(c.instances[d]=u,f&&f!==c&&u&&u===h&&(c.leaveGuards.size||(c.leaveGuards=f.leaveGuards),c.updateGuards.size||(c.updateGuards=f.updateGuards))),u&&c&&(!f||!Qn(c,f)||!h)&&(c.enterCallbacks[d]||[]).forEach(p=>p(u))},{flush:"post"}),()=>{const u=s.value,c=e.name,d=o.value,h=d&&d.components[c];if(!h)return Cl(t.default,{Component:h,route:u});const f=d.props[c],m=f?f===!0?u.params:typeof f=="function"?f(u):f:null,y=Rc(h,_e({},m,r,{onVnodeUnmounted:g=>{g.component.isUnmounted&&(d.instances[c]=null)},ref:l}));return Cl(t.default,{Component:y,route:u})||y}}});function Cl(e,r){if(!e)return null;const t=e(r);return t.length===1?t[0]:t}const td=yv;function bv(e){const r=iv(e.routes,e),t=e.parseQuery||cv,n=e.stringifyQuery||_l,s=e.history,i=ar(),a=ar(),o=ar(),l=Pf(Xt);let u=Xt;Un&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=Oi.bind(null,M=>""+M),d=Oi.bind(null,Lm),h=Oi.bind(null,Qr);function f(M,K){let V,Q;return Yc(M)?(V=r.getRecordMatcher(M),Q=K):Q=M,r.addRoute(Q,V)}function m(M){const K=r.getRecordMatcher(M);K&&r.removeRoute(K)}function p(){return r.getRoutes().map(M=>M.record)}function y(M){return!!r.getRecordMatcher(M)}function g(M,K){if(K=_e({},K||l.value),typeof M=="string"){const E=Pi(t,M,K.path),O=r.resolve({path:E.path},K),N=s.createHref(E.fullPath);return _e(E,O,{params:h(O.params),hash:Qr(E.hash),redirectedFrom:void 0,href:N})}let V;if(M.path!=null)V=_e({},M,{path:Pi(t,M.path,K.path).path});else{const E=_e({},M.params);for(const O in E)E[O]==null&&delete E[O];V=_e({},M,{params:d(E)}),K.params=d(K.params)}const Q=r.resolve(V,K),ke=M.hash||"";Q.params=c(h(Q.params));const b=Nm(n,_e({},M,{hash:Rm(ke),path:Q.path})),_=s.createHref(b);return _e({fullPath:b,hash:ke,query:n===_l?dv(M.query):M.query||{}},Q,{redirectedFrom:void 0,href:_})}function S(M){return typeof M=="string"?Pi(t,M,l.value.path):_e({},M)}function k(M,K){if(u!==M)return er(8,{from:K,to:M})}function T(M){return F(M)}function x(M){return T(_e(S(M),{replace:!0}))}function I(M){const K=M.matched[M.matched.length-1];if(K&&K.redirect){const{redirect:V}=K;let Q=typeof V=="function"?V(M):V;return typeof Q=="string"&&(Q=Q.includes("?")||Q.includes("#")?Q=S(Q):{path:Q},Q.params={}),_e({query:M.query,hash:M.hash,params:Q.path!=null?{}:M.params},Q)}}function F(M,K){const V=u=g(M),Q=l.value,ke=M.state,b=M.force,_=M.replace===!0,E=I(V);if(E)return F(_e(S(E),{state:typeof E=="object"?_e({},ke,E.state):ke,force:b,replace:_}),K||V);const O=V;O.redirectedFrom=K;let N;return!b&&Dm(n,Q,V)&&(N=er(16,{to:O,from:Q}),G(Q,Q,!0,!1)),(N?Promise.resolve(N):me(O,Q)).catch(P=>jt(P)?jt(P,2)?P:X(P):L(P,O,Q)).then(P=>{if(P){if(jt(P,2))return F(_e({replace:_},S(P.to),{state:typeof P.to=="object"?_e({},ke,P.to.state):ke,force:b}),K||O)}else P=se(O,Q,!0,_,ke);return re(O,Q,P),P})}function $(M,K){const V=k(M,K);return V?Promise.reject(V):Promise.resolve()}function ae(M){const K=Ce.values().next().value;return K&&typeof K.runWithContext=="function"?K.runWithContext(M):M()}function me(M,K){let V;const[Q,ke,b]=_v(M,K);V=Ni(Q.reverse(),"beforeRouteLeave",M,K);for(const E of Q)E.leaveGuards.forEach(O=>{V.push(tn(O,M,K))});const _=$.bind(null,M,K);return V.push(_),Le(V).then(()=>{V=[];for(const E of i.list())V.push(tn(E,M,K));return V.push(_),Le(V)}).then(()=>{V=Ni(ke,"beforeRouteUpdate",M,K);for(const E of ke)E.updateGuards.forEach(O=>{V.push(tn(O,M,K))});return V.push(_),Le(V)}).then(()=>{V=[];for(const E of b)if(E.beforeEnter)if(wt(E.beforeEnter))for(const O of E.beforeEnter)V.push(tn(O,M,K));else V.push(tn(E.beforeEnter,M,K));return V.push(_),Le(V)}).then(()=>(M.matched.forEach(E=>E.enterCallbacks={}),V=Ni(b,"beforeRouteEnter",M,K,ae),V.push(_),Le(V))).then(()=>{V=[];for(const E of a.list())V.push(tn(E,M,K));return V.push(_),Le(V)}).catch(E=>jt(E,8)?E:Promise.reject(E))}function re(M,K,V){o.list().forEach(Q=>ae(()=>Q(M,K,V)))}function se(M,K,V,Q,ke){const b=k(M,K);if(b)return b;const _=K===Xt,E=Un?history.state:{};V&&(Q||_?s.replace(M.fullPath,_e({scroll:_&&E&&E.scroll},ke)):s.push(M.fullPath,ke)),l.value=M,G(M,K,V,_),X()}let ge;function z(){ge||(ge=s.listen((M,K,V)=>{if(!Qe.listening)return;const Q=g(M),ke=I(Q);if(ke){F(_e(ke,{replace:!0,force:!0}),Q).catch(Hr);return}u=Q;const b=l.value;Un&&qm(dl(b.fullPath,V.delta),ci()),me(Q,b).catch(_=>jt(_,12)?_:jt(_,2)?(F(_e(S(_.to),{force:!0}),Q).then(E=>{jt(E,20)&&!V.delta&&V.type===es.pop&&s.go(-1,!1)}).catch(Hr),Promise.reject()):(V.delta&&s.go(-V.delta,!1),L(_,Q,b))).then(_=>{_=_||se(Q,b,!1),_&&(V.delta&&!jt(_,8)?s.go(-V.delta,!1):V.type===es.pop&&jt(_,20)&&s.go(-1,!1)),re(Q,b,_)}).catch(Hr)}))}let De=ar(),D=ar(),R;function L(M,K,V){X(M);const Q=D.list();return Q.length?Q.forEach(ke=>ke(M,K,V)):console.error(M),Promise.reject(M)}function J(){return R&&l.value!==Xt?Promise.resolve():new Promise((M,K)=>{De.add([M,K])})}function X(M){return R||(R=!M,z(),De.list().forEach(([K,V])=>M?V(M):K()),De.reset()),M}function G(M,K,V,Q){const{scrollBehavior:ke}=e;if(!Un||!ke)return Promise.resolve();const b=!V&&zm(dl(M.fullPath,0))||(Q||!V)&&history.state&&history.state.scroll||null;return $a().then(()=>ke(M,K,b)).then(_=>_&&Vm(_)).catch(_=>L(_,M,K))}const ce=M=>s.go(M);let Te;const Ce=new Set,Qe={currentRoute:l,listening:!0,addRoute:f,removeRoute:m,clearRoutes:r.clearRoutes,hasRoute:y,getRoutes:p,resolve:g,options:e,push:T,replace:x,go:ce,back:()=>ce(-1),forward:()=>ce(1),beforeEach:i.add,beforeResolve:a.add,afterEach:o.add,onError:D.add,isReady:J,install(M){const K=this;M.component("RouterLink",mv),M.component("RouterView",td),M.config.globalProperties.$router=K,Object.defineProperty(M.config.globalProperties,"$route",{enumerable:!0,get:()=>$e(l)}),Un&&!Te&&l.value===Xt&&(Te=!0,T(s.location).catch(ke=>{}));const V={};for(const ke in Xt)Object.defineProperty(V,ke,{get:()=>l.value[ke],enumerable:!0});M.provide(di,K),M.provide(ed,Ku(V)),M.provide(ia,l);const Q=M.unmount;Ce.add(M),M.unmount=function(){Ce.delete(M),Ce.size<1&&(u=Xt,ge&&ge(),ge=null,l.value=Xt,Te=!1,R=!1),Q()}}};function Le(M){return M.reduce((K,V)=>K.then(()=>ae(V)),Promise.resolve())}return Qe}function _v(e,r){const t=[],n=[],s=[],i=Math.max(r.matched.length,e.matched.length);for(let a=0;a<i;a++){const o=r.matched[a];o&&(e.matched.find(u=>Qn(u,o))?n.push(o):t.push(o));const l=e.matched[a];l&&(r.matched.find(u=>Qn(u,l))||s.push(l))}return[t,n,s]}function nd(){return Pt(di)}const Sv=xn({__name:"App",setup(e){return(r,t)=>(kt(),Ka($e(td)))}});function Ev(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=Za(e))||r){t&&(e=t);var n=0,s=function(){};return{s,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,a=!0,o=!1;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return a=u.done,u},e:function(u){o=!0,i=u},f:function(){try{a||t.return==null||t.return()}finally{if(o)throw i}}}}function aa(e){var r=typeof Map=="function"?new Map:void 0;return aa=function(n){if(n===null||!wv(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(r!==void 0){if(r.has(n))return r.get(n);r.set(n,s)}function s(){return kv(n,arguments,ts(this).constructor)}return s.prototype=Object.create(n.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),ns(s,n)},aa(e)}function kv(e,r,t){if(Qa())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,r);var s=new(e.bind.apply(e,n));return t&&ns(s,t.prototype),s}function wv(e){try{return Function.toString.call(e).indexOf("[native code]")!==-1}catch{return typeof e=="function"}}function Xa(e,r){return Av(e)||Tv(e,r)||Za(e,r)||Cv()}function Cv(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tv(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n,s,i,a,o=[],l=!0,u=!1;try{if(i=(t=t.call(e)).next,r!==0)for(;!(l=(n=i.call(t)).done)&&(o.push(n.value),o.length!==r);l=!0);}catch(c){u=!0,s=c}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw s}}return o}}function Av(e){if(Array.isArray(e))return e}function us(e){return Mv(e)||Rv(e)||Za(e)||xv()}function xv(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Za(e,r){if(e){if(typeof e=="string")return oa(e,r);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?oa(e,r):void 0}}function Rv(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Mv(e){if(Array.isArray(e))return oa(e)}function oa(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function ee(e,r,t){return r=ts(r),Iv(e,Qa()?Reflect.construct(r,t||[],ts(e).constructor):r.apply(e,t))}function Iv(e,r){if(r&&(W(r)=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tr(e)}function tr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qa(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Qa=function(){return!!e})()}function ts(e){return ts=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ts(e)}function te(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&ns(e,r)}function ns(e,r){return ns=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},ns(e,r)}function v(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */v=function(){return r};var e,r={},t=Object.prototype,n=t.hasOwnProperty,s=Object.defineProperty||function(D,R,L){D[R]=L.value},i=typeof Symbol=="function"?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function u(D,R,L){return Object.defineProperty(D,R,{value:L,enumerable:!0,configurable:!0,writable:!0}),D[R]}try{u({},"")}catch{u=function(L,J,X){return L[J]=X}}function c(D,R,L,J){var X=R&&R.prototype instanceof g?R:g,G=Object.create(X.prototype),ce=new z(J||[]);return s(G,"_invoke",{value:me(D,L,ce)}),G}function d(D,R,L){try{return{type:"normal",arg:D.call(R,L)}}catch(J){return{type:"throw",arg:J}}}r.wrap=c;var h="suspendedStart",f="suspendedYield",m="executing",p="completed",y={};function g(){}function S(){}function k(){}var T={};u(T,a,function(){return this});var x=Object.getPrototypeOf,I=x&&x(x(De([])));I&&I!==t&&n.call(I,a)&&(T=I);var F=k.prototype=g.prototype=Object.create(T);function $(D){["next","throw","return"].forEach(function(R){u(D,R,function(L){return this._invoke(R,L)})})}function ae(D,R){function L(X,G,ce,Te){var Ce=d(D[X],D,G);if(Ce.type!=="throw"){var Qe=Ce.arg,Le=Qe.value;return Le&&W(Le)=="object"&&n.call(Le,"__await")?R.resolve(Le.__await).then(function(M){L("next",M,ce,Te)},function(M){L("throw",M,ce,Te)}):R.resolve(Le).then(function(M){Qe.value=M,ce(Qe)},function(M){return L("throw",M,ce,Te)})}Te(Ce.arg)}var J;s(this,"_invoke",{value:function(G,ce){function Te(){return new R(function(Ce,Qe){L(G,ce,Ce,Qe)})}return J=J?J.then(Te,Te):Te()}})}function me(D,R,L){var J=h;return function(X,G){if(J===m)throw Error("Generator is already running");if(J===p){if(X==="throw")throw G;return{value:e,done:!0}}for(L.method=X,L.arg=G;;){var ce=L.delegate;if(ce){var Te=re(ce,L);if(Te){if(Te===y)continue;return Te}}if(L.method==="next")L.sent=L._sent=L.arg;else if(L.method==="throw"){if(J===h)throw J=p,L.arg;L.dispatchException(L.arg)}else L.method==="return"&&L.abrupt("return",L.arg);J=m;var Ce=d(D,R,L);if(Ce.type==="normal"){if(J=L.done?p:f,Ce.arg===y)continue;return{value:Ce.arg,done:L.done}}Ce.type==="throw"&&(J=p,L.method="throw",L.arg=Ce.arg)}}}function re(D,R){var L=R.method,J=D.iterator[L];if(J===e)return R.delegate=null,L==="throw"&&D.iterator.return&&(R.method="return",R.arg=e,re(D,R),R.method==="throw")||L!=="return"&&(R.method="throw",R.arg=new TypeError("The iterator does not provide a '"+L+"' method")),y;var X=d(J,D.iterator,R.arg);if(X.type==="throw")return R.method="throw",R.arg=X.arg,R.delegate=null,y;var G=X.arg;return G?G.done?(R[D.resultName]=G.value,R.next=D.nextLoc,R.method!=="return"&&(R.method="next",R.arg=e),R.delegate=null,y):G:(R.method="throw",R.arg=new TypeError("iterator result is not an object"),R.delegate=null,y)}function se(D){var R={tryLoc:D[0]};1 in D&&(R.catchLoc=D[1]),2 in D&&(R.finallyLoc=D[2],R.afterLoc=D[3]),this.tryEntries.push(R)}function ge(D){var R=D.completion||{};R.type="normal",delete R.arg,D.completion=R}function z(D){this.tryEntries=[{tryLoc:"root"}],D.forEach(se,this),this.reset(!0)}function De(D){if(D||D===""){var R=D[a];if(R)return R.call(D);if(typeof D.next=="function")return D;if(!isNaN(D.length)){var L=-1,J=function X(){for(;++L<D.length;)if(n.call(D,L))return X.value=D[L],X.done=!1,X;return X.value=e,X.done=!0,X};return J.next=J}}throw new TypeError(W(D)+" is not iterable")}return S.prototype=k,s(F,"constructor",{value:k,configurable:!0}),s(k,"constructor",{value:S,configurable:!0}),S.displayName=u(k,l,"GeneratorFunction"),r.isGeneratorFunction=function(D){var R=typeof D=="function"&&D.constructor;return!!R&&(R===S||(R.displayName||R.name)==="GeneratorFunction")},r.mark=function(D){return Object.setPrototypeOf?Object.setPrototypeOf(D,k):(D.__proto__=k,u(D,l,"GeneratorFunction")),D.prototype=Object.create(F),D},r.awrap=function(D){return{__await:D}},$(ae.prototype),u(ae.prototype,o,function(){return this}),r.AsyncIterator=ae,r.async=function(D,R,L,J,X){X===void 0&&(X=Promise);var G=new ae(c(D,R,L,J),X);return r.isGeneratorFunction(R)?G:G.next().then(function(ce){return ce.done?ce.value:G.next()})},$(F),u(F,l,"Generator"),u(F,a,function(){return this}),u(F,"toString",function(){return"[object Generator]"}),r.keys=function(D){var R=Object(D),L=[];for(var J in R)L.push(J);return L.reverse(),function X(){for(;L.length;){var G=L.pop();if(G in R)return X.value=G,X.done=!1,X}return X.done=!0,X}},r.values=De,z.prototype={constructor:z,reset:function(R){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(ge),!R)for(var L in this)L.charAt(0)==="t"&&n.call(this,L)&&!isNaN(+L.slice(1))&&(this[L]=e)},stop:function(){this.done=!0;var R=this.tryEntries[0].completion;if(R.type==="throw")throw R.arg;return this.rval},dispatchException:function(R){if(this.done)throw R;var L=this;function J(Qe,Le){return ce.type="throw",ce.arg=R,L.next=Qe,Le&&(L.method="next",L.arg=e),!!Le}for(var X=this.tryEntries.length-1;X>=0;--X){var G=this.tryEntries[X],ce=G.completion;if(G.tryLoc==="root")return J("end");if(G.tryLoc<=this.prev){var Te=n.call(G,"catchLoc"),Ce=n.call(G,"finallyLoc");if(Te&&Ce){if(this.prev<G.catchLoc)return J(G.catchLoc,!0);if(this.prev<G.finallyLoc)return J(G.finallyLoc)}else if(Te){if(this.prev<G.catchLoc)return J(G.catchLoc,!0)}else{if(!Ce)throw Error("try statement without catch or finally");if(this.prev<G.finallyLoc)return J(G.finallyLoc)}}}},abrupt:function(R,L){for(var J=this.tryEntries.length-1;J>=0;--J){var X=this.tryEntries[J];if(X.tryLoc<=this.prev&&n.call(X,"finallyLoc")&&this.prev<X.finallyLoc){var G=X;break}}G&&(R==="break"||R==="continue")&&G.tryLoc<=L&&L<=G.finallyLoc&&(G=null);var ce=G?G.completion:{};return ce.type=R,ce.arg=L,G?(this.method="next",this.next=G.finallyLoc,y):this.complete(ce)},complete:function(R,L){if(R.type==="throw")throw R.arg;return R.type==="break"||R.type==="continue"?this.next=R.arg:R.type==="return"?(this.rval=this.arg=R.arg,this.method="return",this.next="end"):R.type==="normal"&&L&&(this.next=L),y},finish:function(R){for(var L=this.tryEntries.length-1;L>=0;--L){var J=this.tryEntries[L];if(J.finallyLoc===R)return this.complete(J.completion,J.afterLoc),ge(J),y}},catch:function(R){for(var L=this.tryEntries.length-1;L>=0;--L){var J=this.tryEntries[L];if(J.tryLoc===R){var X=J.completion;if(X.type==="throw"){var G=X.arg;ge(J)}return G}}throw Error("illegal catch attempt")},delegateYield:function(R,L,J){return this.delegate={iterator:De(R),resultName:L,nextLoc:J},this.method==="next"&&(this.arg=e),y}},r}function Tl(e,r,t,n,s,i,a){try{var o=e[i](a),l=o.value}catch(u){return void t(u)}o.done?r(l):Promise.resolve(l).then(n,s)}function A(e){return function(){var r=this,t=arguments;return new Promise(function(n,s){var i=e.apply(r,t);function a(l){Tl(i,n,s,a,o,"next",l)}function o(l){Tl(i,n,s,a,o,"throw",l)}a(void 0)})}}function Al(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),t.push.apply(t,n)}return t}function ve(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Al(Object(t),!0).forEach(function(n){Ks(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Al(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Ks(e,r,t){return(r=rd(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function W(e){"@babel/helpers - typeof";return W=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},W(e)}function w(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function xl(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rd(n.key),n)}}function C(e,r,t){return r&&xl(e.prototype,r),t&&xl(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function rd(e){var r=Lv(e,"string");return W(r)=="symbol"?r:r+""}function Lv(e,r){if(W(e)!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var n=t.call(e,r);if(W(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var Ov=function(){function e(){w(this,e)}return C(e,null,[{key:"render",value:function(t,n){var s=document.createElement("div");s.id="error-view",s.innerText=n,t.replaceChildren(s)}}])}(),Pv=function(){function e(){w(this,e)}return C(e,null,[{key:"onLoad",value:function(t){t.innerHTML='<div id="loading-validate-key-property"></div>'}},{key:"createElements",value:function(){var t=document.createElement("div");return t.id="validate-property-key-view",t}},{key:"render",value:function(t,n,s){var i=e.createElements(),a={onSuccess:n,onFail:Ov.render.bind(this,t,"Your 'key' has failed authentication"),onLoad:e.onLoad.bind(this,i)};s.key&&s.verifyKey(s.key,a),t.replaceChildren(i)}}])}(),He=function(){function e(){w(this,e)}return C(e,null,[{key:"unsetStyle",value:function(t,n){var s=Object.keys(n).reduce(function(i,a){return i[a]="",i},{});Object.assign(t.style,s)}},{key:"unsetActivityCSSMouseStates",value:function(t,n){n.click&&e.unsetStyle(t,n.click),n.hover&&e.unsetStyle(t,n.hover)}},{key:"unsetAllCSSMouseStates",value:function(t,n){e.unsetActivityCSSMouseStates(t,n),n.default&&e.unsetStyle(t,n.default)}},{key:"processStateful",value:function(t){var n=t.default||{},s=Object.assign(JSON.parse(JSON.stringify(n)),t==null?void 0:t.hover),i=Object.assign(JSON.parse(JSON.stringify(s)),t==null?void 0:t.click);return{default:n,hover:s,click:i}}},{key:"mergeStatefulStyles",value:function(t){var n={default:{},hover:{},click:{}};return t.forEach(function(s){n.default=Object.assign(n.default,s.default),n.hover=Object.assign(n.hover,s.hover),n.click=Object.assign(n.click,s.click)}),n}},{key:"overwriteDefaultWithAlreadyApplied",value:function(t,n){Object.keys(t.default||[]).forEach(function(s){var i,a=s;n.style[a]&&(i=t.default)!=null&&i[a]&&(t.default[s]=n.style[a])})}},{key:"applyToStyleIfNotDefined",value:function(t,n){for(var s in n){var i=n[s];t[s]===""&&i&&(t[s]=i)}}}])}(),la=function(){function e(){w(this,e)}return C(e,null,[{key:"attemptAppendStyleSheetToHead",value:function(t){if(!(t.fontFamily&&t.fontFamily!==e.DEFAULT_FONT_FAMILY)){var n=document.getElementsByTagName("head")[0];if(!Array.from(n.getElementsByTagName("link")).some(function(i){return i.getAttribute("href")===e.FONT_URL})){var s=document.createElement("link");s.rel="stylesheet",s.href=e.FONT_URL,n.appendChild(s)}}}}])}();la.FONT_URL="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap",la.DEFAULT_FONT_FAMILY="'Inter', sans-serif, Avenir, Helvetica, Arial";var sd=la,id=function(){function e(){w(this,e)}return C(e,null,[{key:"apply",value:function(t,n){if(n)try{e.applyStyleSheet(t,n)}catch{e.addStyleElement(t,n)}}},{key:"applyStyleSheet",value:function(t,n){var s=new CSSStyleSheet;s.replaceSync(t),n.adoptedStyleSheets.push(s)}},{key:"addStyleElement",value:function(t,n){var s=document.createElement("style");s.innerHTML=t,n.appendChild(s)}},{key:"applyDefaultStyleToComponent",value:function(t,n){n&&He.applyToStyleIfNotDefined(t,n),He.applyToStyleIfNotDefined(t,e.DEFAULT_COMPONENT_STYLE)}}])}();id.DEFAULT_COMPONENT_STYLE={height:"350px",width:"320px",borderTop:"1px solid #cacaca",borderRight:"1px solid #cacaca",borderLeft:"1px solid #cacaca",borderBottom:"1px solid #cacaca",fontFamily:sd.DEFAULT_FONT_FAMILY,fontSize:"0.9rem",backgroundColor:"white",position:"relative",overflow:"hidden"};var Di=id,Ts=C(function e(){w(this,e)});Ts.IS_SAFARI=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),Ts.IS_CHROMIUM=window.chrome,Ts.IS_MOBILE=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);var Sn=Ts,Ue=function(e){return e.ESCAPE="Escape",e.ENTER="Enter",e.TAB="Tab",e.ARROW_UP="ArrowUp",e.ARROW_DOWN="ArrowDown",e.ARROW_RIGHT="ArrowRight",e.ARROW_LEFT="ArrowLeft",e.BACKSPACE="Backspace",e.DELETE="Delete",e.META="Meta",e.CONTROL="Control",e}(Ue||{}),ad=function(){function e(){w(this,e)}return C(e,null,[{key:"add",value:function(t,n,s,i){s!==void 0&&t.addEventListener("keydown",e.onKeyDown.bind(this,s)),t.oninput=e.onInput.bind(this,s,i),t.addEventListener("paste",function(a){var o;a.preventDefault(),(o=a.clipboardData)!=null&&o.files.length&&n.addFilesToAnyType(Array.from(a.clipboardData.files))})}},{key:"onKeyDown",value:function(t,n){var s=n.target.textContent;s&&s.length>=t&&!e.PERMITTED_KEYS.has(n.key)&&!e.isKeyCombinationPermitted(n)&&n.preventDefault()}},{key:"isKeyCombinationPermitted",value:function(t){return t.key==="a"?t.ctrlKey||t.metaKey:!1}},{key:"onInput",value:function(t,n,s){var i=s.target,a=i.textContent||"";t!==void 0&&a.length>t&&(i.textContent=a.substring(0,t),eo.focusEndOfInput(i)),n==null||n()}}])}();ad.PERMITTED_KEYS=new Set([Ue.BACKSPACE,Ue.DELETE,Ue.ARROW_RIGHT,Ue.ARROW_LEFT,Ue.ARROW_DOWN,Ue.ARROW_UP,Ue.META,Ue.CONTROL,Ue.ENTER]);var Nv=ad,Dv=function(){function e(){w(this,e)}return C(e,null,[{key:"sanitizePastedTextContent",value:function(t){var n,s;t.preventDefault();var i=(n=t.clipboardData)==null?void 0:n.getData("text/plain");i&&((s=document.execCommand)==null||s.call(document,"insertText",!1,i))}}])}(),od=function(){function e(r,t,n){var s=this;w(this,e);var i,a;this._isComposing=!1;var o=e.processConfig(t,r.textInput);this.elementRef=e.createContainerElement((i=o==null?void 0:o.styles)==null?void 0:i.container),this._config=o,this.inputElementRef=this.createInputElement(),this.elementRef.appendChild(this.inputElementRef),r.setPlaceholderText=this.setPlaceholderText.bind(this),r.setPlaceholderText(((a=this._config.placeholder)==null?void 0:a.text)||"Ask me anything!"),setTimeout(function(){Nv.add(s.inputElementRef,n,s._config.characterLimit,r._validationHandler)})}return C(e,[{key:"clear",value:function(){var t,n=window.scrollY;this.inputElementRef.classList.contains("text-input-disabled")||(Object.assign(this.inputElementRef.style,(t=this._config.placeholder)==null?void 0:t.style),this.inputElementRef.textContent="",eo.focusEndOfInput(this.inputElementRef)),Sn.IS_CHROMIUM&&window.scrollTo({top:n})}},{key:"createInputElement",value:function(){var t,n,s,i,a=document.createElement("div");return a.id=e.TEXT_INPUT_ID,a.classList.add("text-input-styling"),a.role="textbox",Sn.IS_CHROMIUM&&e.preventAutomaticScrollUpOnNewLine(a),typeof this._config.disabled=="boolean"&&this._config.disabled===!0?(a.contentEditable="false",a.classList.add("text-input-disabled"),a.setAttribute("aria-disabled","true")):(a.contentEditable="true",a.removeAttribute("aria-disabled"),this.addEventListeners(a)),Object.assign(a.style,(t=this._config.styles)==null?void 0:t.text),Object.assign(a.style,(n=this._config.placeholder)==null?void 0:n.style),(i=(s=this._config.placeholder)==null?void 0:s.style)!=null&&i.color||a.setAttribute("textcolor",""),a}},{key:"removePlaceholderStyle",value:function(){var t,n,s,i;!this.inputElementRef.classList.contains("text-input-disabled")&&(t=this._config.placeholder)!=null&&t.style&&(He.unsetStyle(this.inputElementRef,(n=this._config.placeholder)==null?void 0:n.style),Object.assign(this.inputElementRef.style,(i=(s=this._config)==null?void 0:s.styles)==null?void 0:i.text))}},{key:"addEventListeners",value:function(t){var n=this,s,i;(s=this._config.styles)!=null&&s.focus&&(t.onfocus=function(){var a;return Object.assign(n.elementRef.style,(a=n._config.styles)==null?void 0:a.focus)},t.onblur=this.onBlur.bind(this,this._config.styles.focus,(i=this._config.styles)==null?void 0:i.container)),t.addEventListener("keydown",this.onKeydown.bind(this)),t.addEventListener("input",this.onInput.bind(this)),t.addEventListener("paste",Dv.sanitizePastedTextContent),t.addEventListener("compositionstart",function(){return n._isComposing=!0}),t.addEventListener("compositionend",function(){return n._isComposing=!1})}},{key:"onBlur",value:function(t,n){He.unsetStyle(this.elementRef,t),n&&Object.assign(this.elementRef.style,n)}},{key:"onKeydown",value:function(t){var n;t.key===Ue.ENTER&&!Sn.IS_MOBILE&&!this._isComposing&&!t.ctrlKey&&!t.shiftKey&&(t.preventDefault(),(n=this.submit)==null||n.call(this))}},{key:"onInput",value:function(){var t;this.isTextInputEmpty()?Object.assign(this.inputElementRef.style,(t=this._config.placeholder)==null?void 0:t.style):this.removePlaceholderStyle()}},{key:"setPlaceholderText",value:function(t){this.inputElementRef.setAttribute("deep-chat-placeholder-text",t),this.inputElementRef.setAttribute("aria-label",t)}},{key:"isTextInputEmpty",value:function(){return this.inputElementRef.textContent===""}}],[{key:"processConfig",value:function(t,n){var s,i,a,o;return n??(n={}),(s=n.disabled)!==null&&s!==void 0||(n.disabled=t.isTextInputDisabled),(i=n.placeholder)!==null&&i!==void 0||(n.placeholder={}),(a=(o=n.placeholder).text)!==null&&a!==void 0||(o.text=t.textInputPlaceholderText),n}},{key:"createContainerElement",value:function(t){var n=document.createElement("div");return n.id="text-input-container",Object.assign(n.style,t),n}},{key:"preventAutomaticScrollUpOnNewLine",value:function(t){var n;t.addEventListener("keydown",function(){n=window.scrollY}),t.addEventListener("input",function(){n!==window.scrollY&&window.scrollTo({top:n})})}}])}();od.TEXT_INPUT_ID="text-input";var ld=od,eo=function(){function e(){w(this,e)}return C(e,null,[{key:"focusEndOfInput",value:function(t){var n=document.createRange();n.selectNodeContents(t),n.collapse(!1);var s=window.getSelection();s==null||s.removeAllRanges(),s==null||s.addRange(n)}},{key:"focusFromParentElement",value:function(t){var n=t.querySelector("#".concat(ld.TEXT_INPUT_ID));n&&(Sn.IS_SAFARI&&n.focus(),e.focusEndOfInput(n))}}])}();function Rl(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Bv(e){return e&&JSON.stringify(e)}function to(e,r,t,n){var s=`
`.concat(Rl(r)," message: ").concat(JSON.stringify(e),` 
`),i=t?"".concat(Rl(r)," message after interceptor: ").concat(Bv(n),` 
`):"";return s+i}function Fv(e,r,t,n){return"".concat(to(e,r,t,n),"Make sure the ").concat(r,` message is using the Response format: https://deepchat.dev/docs/connect/#Response 
You can also augment it using the responseInterceptor property: https://deepchat.dev/docs/interceptors#responseInterceptor`)}function jv(e,r,t){var n="response";return"".concat(to(e,n,r,t),"Make sure the ").concat(n,' message is using the {text: string} format, e.g: {text: "Model Response"}')}function Uv(e,r){var t="request";return"".concat(to(e,t,r),"Make sure the ").concat(t,' message is using the {body: {text: string}} format, e.g: {body: {text: "Model Response"}}')}var Ml=`Make sure the events are using {text: string} or {html: string} format.
You can also augment them using the responseInterceptor property: https://deepchat.dev/docs/interceptors#responseInterceptor`,xe={INVALID_KEY:"Invalid API Key",CONNECTION_FAILED:"Failed to connect",INVALID_RESPONSE:Fv,INVALID_MODEL_REQUEST:Uv,INVALID_MODEL_RESPONSE:jv,INVALID_STREAM_ARRAY_RESPONSE:"Multi-response arrays are not supported for streaming",INVALID_STREAM_EVENT:Ml,INVALID_STREAM_EVENT_MIX:"Cannot mix {text: string} and {html: string} responses.",NO_VALID_STREAM_EVENTS_SENT:`No valid stream events were sent.
`.concat(Ml),READABLE_STREAM_CONNECTION_ERROR:"Readable Stream connection error."},ud=function(){function e(){w(this,e)}return C(e,null,[{key:"addElements",value:function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];s.forEach(function(a){return t.appendChild(a)})}},{key:"isScrollbarAtBottomOfElement",value:function(t){var n=t.scrollHeight,s=t.clientHeight,i=t.scrollTop,a=n-s;return i>=a-e.CODE_SNIPPET_GENERATION_JUMP}},{key:"cloneElement",value:function(t){var n=t.cloneNode(!0);return t.parentNode.replaceChild(n,t),n}},{key:"scrollToBottom",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n?t.scrollTo({left:0,top:t.scrollHeight,behavior:"smooth"}):t.scrollTop=t.scrollHeight}},{key:"scrollToTop",value:function(t){t.scrollTop=0}}])}();ud.CODE_SNIPPET_GENERATION_JUMP=.5;var pt=ud,cd=function(){function e(){w(this,e)}return C(e,null,[{key:"speak",value:function(t,n){if(window.SpeechSynthesisUtterance){var s=new SpeechSynthesisUtterance(t);Object.assign(s,n),speechSynthesis.speak(s)}}},{key:"processConfig",value:function(t,n){var s={};setTimeout(function(){if(W(t)=="object"&&(t.lang&&(s.lang=t.lang),t.pitch&&(s.pitch=t.pitch),t.rate&&(s.rate=t.rate),t.volume&&(s.volume=t.volume),t.voiceName)){var i=window.speechSynthesis.getVoices().find(function(a){var o;return a.name.toLocaleLowerCase()===((o=t.voiceName)==null?void 0:o.toLocaleLowerCase())});i&&(s.voice=i)}n(s)},e.LOAD_VOICES_MS)}}])}();cd.LOAD_VOICES_MS=200;var As=cd,ua=function(){function e(){w(this,e)}return C(e,null,[{key:"colorToHex",value:function(t){var n=document.createElement("div");return n.style.color=t,document.body.appendChild(n),"#".concat(window.getComputedStyle(n).color.match(/\d+/g).map(function(s){return parseInt(s).toString(16).padStart(2,"0")}).join(""))}},{key:"setDots",value:function(t,n){var s,i,a,o;if((o=(a=(i=(s=n==null?void 0:n.loading)==null?void 0:s.message)==null?void 0:i.styles)==null?void 0:a.bubble)!=null&&o.color){var l=e.colorToHex(n.loading.message.styles.bubble.color);t.style.setProperty("--loading-message-color",l),t.style.setProperty("--loading-message-color-fade","".concat(l,"33"))}else t.style.setProperty("--loading-message-color","#848484"),t.style.setProperty("--loading-message-color-fade","#55555533")}},{key:"setRing",value:function(t,n){var s=n||{},i=s.color,a=s.width,o=s.height,l=s.margin,u=s.border;if(i){var c=e.colorToHex(i);t.style.setProperty("--loading-history-color",c)}else t.style.setProperty("--loading-history-color","#dbdbdb");t.style.setProperty("--loading-history-height",o||"57px"),t.style.setProperty("--loading-history-width",a||"57px"),t.style.setProperty("--loading-history-margin",l||"7px"),t.style.setProperty("--loading-history-border",u||"6px solid")}}])}();ua.BUBBLE_CLASS="deep-chat-loading-message-bubble",ua.DOTS_CONTAINER_CLASS="deep-chat-loading-message-dots-container";var yn=ua,ca=function(){function e(){w(this,e)}return C(e,null,[{key:"setElementProps",value:function(t,n,s,i){var a;s!=="loading"&&(t.applyCustomStyles(n,i,!0,(a=t.messageStyles)==null?void 0:a[s]),n.bubbleElement.classList.add(e.FILE_BUBBLE_CLASS))}},{key:"addMessage",value:function(t,n,s,i,a){e.setElementProps(t,n,s,i),a||(t.appendOuterContainerElemet(n.outerContainer),t.focusMode||(t.elementRef.scrollTop=t.elementRef.scrollHeight))}},{key:"wrapInLink",value:function(t,n,s){var i=document.createElement("a");return i.href=n,i.download=s||e.DEFAULT_FILE_NAME,i.target="_blank",i.appendChild(t),i}},{key:"isNonLinkableDataUrl",value:function(t,n){return!n.startsWith("data")||t==="image"?!1:t==="any"&&n.startsWith("data:text/javascript")||!n.startsWith("data:image")&&!n.startsWith("data:application")}},{key:"processContent",value:function(t,n,s,i){return!s||e.isNonLinkableDataUrl(t,s)?n:e.wrapInLink(n,s,i)}},{key:"waitToLoadThenScroll",value:function(t){setTimeout(function(){t.scrollTop=t.scrollHeight},60)}},{key:"scrollDownOnImageLoad",value:function(t,n){if(t.startsWith("data"))e.waitToLoadThenScroll(n);else try{fetch(t,{mode:"no-cors"}).catch(function(){}).finally(function(){e.waitToLoadThenScroll(n)})}catch{n.scrollTop=n.scrollHeight}}},{key:"reAddFileRefToObject",value:function(t,n){var s;(s=t.files)==null||s.forEach(function(i,a){var o;i.ref&&(o=n.message.files)!=null&&o[a]&&(n.message.files[a].ref=i.ref)})}},{key:"removeFileRef",value:function(t){var n=ve({},t);return delete n.ref,n}},{key:"isAudioFile",value:function(t){var n=/\.(mp3|ogg|wav|aac|webm|4a)$/i,s=t.type,i=t.src;return s==="audio"||(i==null?void 0:i.startsWith("data:audio"))||i&&n.test(i)}},{key:"isImageFile",value:function(t){var n=t.type,s=t.src;return n==="image"||(s==null?void 0:s.startsWith("data:image"))||s&&e.isImageFileExtension(s)}},{key:"isImageFileExtension",value:function(t){return/\.(jpg|jpeg|png|gif|bmp)$/i.test(t)}}])}();ca.DEFAULT_FILE_NAME="file",ca.FILE_BUBBLE_CLASS="file-message";var st=ca,lt=function(){function e(){w(this,e)}return C(e,null,[{key:"checkForContainerStyles",value:function(t,n){var s=t.containerStyle;s&&(Object.assign(n.style,s),console.error("The containerStyle property is deprecated since version 1.3.14."),console.error("Please change to using the style property instead: https://deepchat.dev/docs/styles#style"))}},{key:"handleResponseProperty",value:function(t){return console.error("The {result: ....} response object type is deprecated since version 1.3.0."),console.error("Please change to using the new response object: https://deepchat.dev/docs/connect#Response"),t.result}},{key:"processHistory",value:function(t){var n=t.initialMessages;if(n)return console.error("The initialMessages property is deprecated since version 2.0.0."),console.error("Please change to using the history property instead: https://deepchat.dev/docs/messages/#history"),n}},{key:"processHistoryFile",value:function(t){var n=t.file;n&&(console.error("The file property in MessageContent is deprecated since version 1.3.17."),console.error("Please change to using the files array property: https://deepchat.dev/docs/messages/#MessageContent"),t.files=[n])}},{key:"processValidateInput",value:function(t){var n=t.validateMessageBeforeSending;if(n)return console.error("The validateMessageBeforeSending property is deprecated since version 1.3.24."),console.error("Please change to using validateInput: https://deepchat.dev/docs/interceptors#validateInput"),n}},{key:"processSubmitUserMessage",value:function(t){return console.error("The submitUserMessage(text: string) argument string type is deprecated since version 1.4.4."),console.error("Please change to using the new argument type: https://deepchat.dev/docs/methods#submitUserMessage"),{text:t}}},{key:"flagHTMLUpdateClass",value:function(t){var n;(n=t.children[0])!=null&&n.classList.contains("deep-chat-update-message")&&(console.error('The "deep-chat-update-message" html class is deprecated since version 1.4.4.'),console.error("Please change to using {..., overwrite: true} object: https://deepchat.dev/docs/connect#Response"))}},{key:"processConnect",value:function(t){var n=t;n.request&&(n.connect?Object.assign(n.connect,n.request):n.connect=n.request,console.error("The request property is deprecated since version 2.0.0."),console.error("Please see the connect object: https://deepchat.dev/docs/connect#connect-1"))}},{key:"checkForStream",value:function(t){var n=t.stream;if(n)return console.error("The stream property has been moved to the connect object in version 2.0.0."),console.error("Please see the connect object: https://deepchat.dev/docs/connect#connect-1"),n}},{key:"fireOnNewMessage",value:function(t,n){var s,i=t;i.onNewMessage&&(console.error("The onNewMessage event has been deprecated since version 2.0.0."),console.error("Please see the onMessage event: https://deepchat.dev/docs/events#onMessage"),(s=i.onNewMessage)==null||s.call(i,n)),t.dispatchEvent(new CustomEvent("new-message",{detail:n}))}},{key:"processFileConfigConnect",value:function(t){var n=t;n.request&&(console.error("The request property in file configuration is deprecated since version 2.0.0."),console.error("Please use the connect property instead: https://deepchat.dev/docs/files"),n.connect||(n.connect=n.request))}},{key:"processMessageStyles",value:function(t){if(t){var n=JSON.parse(JSON.stringify(t)),s=n.loading;return s&&(s.outerContainer||s.innerContainer||s.bubble||s.media)&&(console.error("The loading message styles are defined using LoadingMessageStyles interface since version 2.1.0."),console.error("Check it out here: https://deepchat.dev/docs/messages/styles#LoadingMessageStyles"),n.loading={message:{styles:s}}),n}}},{key:"processDemo",value:function(t){return typeof t=="boolean"||t.displayLoadingBubble&&(console.error("The demo displayLoadingBubble property is deprecated since version 2.1.0."),console.error("Please use displayLoading instead: https://deepchat.dev/docs/modes#demo"),t.displayLoading={message:!0}),t}}])}(),no=function(){function e(){w(this,e)}return C(e,null,[{key:"mouseUp",value:function(t,n){He.unsetAllCSSMouseStates(t,n),Object.assign(t.style,n.default),Object.assign(t.style,n.hover)}},{key:"mouseDown",value:function(t,n){Object.assign(t.style,n.click)}},{key:"mouseLeave",value:function(t,n){He.unsetAllCSSMouseStates(t,n),Object.assign(t.style,n.default)}},{key:"mouseEnter",value:function(t,n){Object.assign(t.style,n.hover)}},{key:"add",value:function(t,n){t.addEventListener("mouseenter",e.mouseEnter.bind(this,t,n)),t.addEventListener("mouseleave",e.mouseLeave.bind(this,t,n)),t.addEventListener("mousedown",e.mouseDown.bind(this,t,n)),t.addEventListener("mouseup",e.mouseUp.bind(this,t,n))}}])}(),Hv="deep-chat-temporary-message",$v="deep-chat-suggestion-button",da={"deep-chat-button":{styles:{default:{backgroundColor:"white",padding:"5px",paddingLeft:"7px",paddingRight:"7px",border:"1px solid #c2c2c2",borderRadius:"6px",cursor:"pointer"},hover:{backgroundColor:"#fafafa"},click:{backgroundColor:"#f1f1f1"}}}},Il=Object.keys(da),Yn=function(){function e(){w(this,e)}return C(e,null,[{key:"applySuggestionEvent",value:function(t,n){setTimeout(function(){n.addEventListener("click",function(){var s,i;(i=t.submitUserMessage)==null||i.call(t,{text:((s=n.textContent)==null?void 0:s.trim())||""})})})}},{key:"isElementTemporary",value:function(t){var n;return t?(n=t.bubbleElement.children[0])==null?void 0:n.classList.contains(Hv):!1}},{key:"doesElementContainDeepChatClass",value:function(t){return Il.find(function(n){return t.classList.contains(n)})}},{key:"applyEvents",value:function(t,n){var s=da[n].events;Object.keys(s||[]).forEach(function(i){t.addEventListener(i,s==null?void 0:s[i])})}},{key:"getProcessedStyles",value:function(t,n,s){var i=Array.from(n.classList).reduce(function(u,c){var d,h=(d=t[c])==null?void 0:d.styles;return h&&t[c].styles&&u.push(h),u},[]),a=da[s].styles;if(a){var o=JSON.parse(JSON.stringify(a));o.default&&He.overwriteDefaultWithAlreadyApplied(o,n),i.unshift(o)}var l=He.mergeStatefulStyles(i);return He.processStateful(l)}},{key:"applyDeepChatUtilities",value:function(t,n,s){Il.forEach(function(a){var o=s.getElementsByClassName(a);Array.from(o||[]).forEach(function(l){var u=e.getProcessedStyles(n,l,a);an.applyStylesToElement(l,u),e.applyEvents(l,a)})});var i=s.getElementsByClassName($v);Array.from(i).forEach(function(a){return e.applySuggestionEvent(t,a)})}}])}(),an=function(){function e(){w(this,e)}return C(e,null,[{key:"applyStylesToElement",value:function(t,n){var s=He.processStateful(n);no.add(t,s),Object.assign(t.style,s.default)}},{key:"applyEventsToElement",value:function(t,n){Object.keys(n).forEach(function(s){var i=n[s];i&&t.addEventListener(s,i)})}},{key:"applyClassUtilitiesToElement",value:function(t,n){var s=n.events,i=n.styles;s&&e.applyEventsToElement(t,s),i&&!Yn.doesElementContainDeepChatClass(t)&&e.applyStylesToElement(t,i)}},{key:"applyCustomClassUtilities",value:function(t,n){Object.keys(t).forEach(function(s){var i=n.getElementsByClassName(s);Array.from(i).forEach(function(a){t[s]&&e.applyClassUtilitiesToElement(a,t[s])})})}},{key:"apply",value:function(t,n){Yn.applyDeepChatUtilities(t,t.htmlClassUtilities,n),e.applyCustomClassUtilities(t.htmlClassUtilities,n)}},{key:"traverseNodes",value:function(t,n){t.nodeType===Node.ELEMENT_NODE&&n.push(t.outerHTML),t.childNodes.forEach(function(s){e.traverseNodes(s,n)})}},{key:"splitHTML",value:function(t){var n=new DOMParser().parseFromString(t,"text/html"),s=[];return n.body.childNodes.forEach(function(i){e.traverseNodes(i,s)}),s}},{key:"isTemporaryBasedOnHTML",value:function(t){var n=document.createElement("div");return n.innerHTML=t,Yn.isElementTemporary({outerContainer:n,bubbleElement:n,innerContainer:n})}},{key:"replaceElementWithNewClone",value:function(t,n){var s,i=(n||t).cloneNode(!0);return(s=t.parentNode)==null||s.replaceChild(i,t),i}}])}(),dd=function(){function e(){w(this,e)}return C(e,null,[{key:"addElement",value:function(t,n){t.appendOuterContainerElemet(n),t.focusMode||(t.elementRef.scrollTop=t.elementRef.scrollHeight)}},{key:"createElements",value:function(t,n,s,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,o=t.createMessageElementsOnOrientation("",s,i,a);return o.bubbleElement.classList.add(e.HTML_BUBBLE_CLASS),o.bubbleElement.innerHTML=n,o}},{key:"overwriteElements",value:function(t,n,s){s.bubbleElement.innerHTML=n,an.apply(t,s.outerContainer),lt.flagHTMLUpdateClass(s.bubbleElement)}},{key:"overwrite",value:function(t,n,s,i){var a=t.messageToElements,o=Z.overwriteMessage(a,i,n,s,"html",e.HTML_BUBBLE_CLASS);return o&&e.overwriteElements(t,n,o),o}},{key:"create",value:function(t,n,s){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,a,o=e.createElements(t,n,s,i);return Z.fillEmptyMessageElement(o.bubbleElement,n),an.apply(t,o.outerContainer),lt.flagHTMLUpdateClass(o.bubbleElement),t.applyCustomStyles(o,s,!1,(a=t.messageStyles)==null?void 0:a.html),o}},{key:"add",value:function(t,n,s,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(i!=null&&i.status){var o=this.overwrite(t,n,s,t.messageElementRefs);if(o)return o;i.status=!1}if(!(a&&t.messageElementRefs.length>0&&an.isTemporaryBasedOnHTML(n))){var l=e.create(t,n,s,a);return a||e.addElement(t,l.outerContainer),l}}}])}();dd.HTML_BUBBLE_CLASS="html-message";var on=dd,gs;function fd(e){return gs=gs||document.createElement("textarea"),gs.innerHTML="&"+e+";",gs.value}var Vv=Object.prototype.hasOwnProperty;function qv(e,r){return e?Vv.call(e,r):!1}function hd(e){var r=[].slice.call(arguments,1);return r.forEach(function(t){if(t){if(W(t)!="object")throw new TypeError(t+"must be object");Object.keys(t).forEach(function(n){e[n]=t[n]})}}),e}var zv=/\\([\\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function rs(e){return e.indexOf("\\")<0?e:e.replace(zv,"$1")}function pd(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function fa(e){if(e>65535){e-=65536;var r=55296+(e>>10),t=56320+(e&1023);return String.fromCharCode(r,t)}return String.fromCharCode(e)}var Gv=/&([a-z#][a-z0-9]{1,31});/gi,Kv=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i;function Wv(e,r){var t=0,n=fd(r);return r!==n?n:r.charCodeAt(0)===35&&Kv.test(r)&&(t=r[1].toLowerCase()==="x"?parseInt(r.slice(2),16):parseInt(r.slice(1),10),pd(t))?fa(t):e}function Cn(e){return e.indexOf("&")<0?e:e.replace(Gv,Wv)}var Jv=/[&<>"]/,Yv=/[&<>"]/g,Xv={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function Zv(e){return Xv[e]}function ot(e){return Jv.test(e)?e.replace(Yv,Zv):e}var Y={};Y.blockquote_open=function(){return`<blockquote>
`};Y.blockquote_close=function(e,r){return"</blockquote>"+Rn(e,r)};Y.code=function(e,r){return e[r].block?"<pre><code>"+ot(e[r].content)+"</code></pre>"+Rn(e,r):"<code>"+ot(e[r].content)+"</code>"};Y.fence=function(e,r,t,n,s){var i=e[r],a="",o=t.langPrefix,l="",u,c,d;if(i.params){if(u=i.params.split(/\s+/g),c=u.join(" "),qv(s.rules.fence_custom,u[0]))return s.rules.fence_custom[u[0]](e,r,t,n,s);l=ot(Cn(rs(c))),a=' class="'+o+l+'"'}return t.highlight?d=t.highlight.apply(t.highlight,[i.content].concat(u))||ot(i.content):d=ot(i.content),"<pre><code"+a+">"+d+"</code></pre>"+Rn(e,r)};Y.fence_custom={};Y.heading_open=function(e,r){return"<h"+e[r].hLevel+">"};Y.heading_close=function(e,r){return"</h"+e[r].hLevel+`>
`};Y.hr=function(e,r,t){return(t.xhtmlOut?"<hr />":"<hr>")+Rn(e,r)};Y.bullet_list_open=function(){return`<ul>
`};Y.bullet_list_close=function(e,r){return"</ul>"+Rn(e,r)};Y.list_item_open=function(){return"<li>"};Y.list_item_close=function(){return`</li>
`};Y.ordered_list_open=function(e,r){var t=e[r],n=t.order>1?' start="'+t.order+'"':"";return"<ol"+n+`>
`};Y.ordered_list_close=function(e,r){return"</ol>"+Rn(e,r)};Y.paragraph_open=function(e,r){return e[r].tight?"":"<p>"};Y.paragraph_close=function(e,r){var t=!(e[r].tight&&r&&e[r-1].type==="inline"&&!e[r-1].content);return(e[r].tight?"":"</p>")+(t?Rn(e,r):"")};Y.link_open=function(e,r,t){var n=e[r].title?' title="'+ot(Cn(e[r].title))+'"':"",s=t.linkTarget?' target="'+t.linkTarget+'"':"";return'<a href="'+ot(e[r].href)+'"'+n+s+">"};Y.link_close=function(){return"</a>"};Y.image=function(e,r,t){var n=' src="'+ot(e[r].src)+'"',s=e[r].title?' title="'+ot(Cn(e[r].title))+'"':"",i=' alt="'+(e[r].alt?ot(Cn(rs(e[r].alt))):"")+'"',a=t.xhtmlOut?" /":"";return"<img"+n+i+s+a+">"};Y.table_open=function(){return`<table>
`};Y.table_close=function(){return`</table>
`};Y.thead_open=function(){return`<thead>
`};Y.thead_close=function(){return`</thead>
`};Y.tbody_open=function(){return`<tbody>
`};Y.tbody_close=function(){return`</tbody>
`};Y.tr_open=function(){return"<tr>"};Y.tr_close=function(){return`</tr>
`};Y.th_open=function(e,r){var t=e[r];return"<th"+(t.align?' style="text-align:'+t.align+'"':"")+">"};Y.th_close=function(){return"</th>"};Y.td_open=function(e,r){var t=e[r];return"<td"+(t.align?' style="text-align:'+t.align+'"':"")+">"};Y.td_close=function(){return"</td>"};Y.strong_open=function(){return"<strong>"};Y.strong_close=function(){return"</strong>"};Y.em_open=function(){return"<em>"};Y.em_close=function(){return"</em>"};Y.del_open=function(){return"<del>"};Y.del_close=function(){return"</del>"};Y.ins_open=function(){return"<ins>"};Y.ins_close=function(){return"</ins>"};Y.mark_open=function(){return"<mark>"};Y.mark_close=function(){return"</mark>"};Y.sub=function(e,r){return"<sub>"+ot(e[r].content)+"</sub>"};Y.sup=function(e,r){return"<sup>"+ot(e[r].content)+"</sup>"};Y.hardbreak=function(e,r,t){return t.xhtmlOut?`<br />
`:`<br>
`};Y.softbreak=function(e,r,t){return t.breaks?t.xhtmlOut?`<br />
`:`<br>
`:`
`};Y.text=function(e,r){return ot(e[r].content)};Y.htmlblock=function(e,r){return e[r].content};Y.htmltag=function(e,r){return e[r].content};Y.abbr_open=function(e,r){return'<abbr title="'+ot(Cn(e[r].title))+'">'};Y.abbr_close=function(){return"</abbr>"};Y.footnote_ref=function(e,r){var t=Number(e[r].id+1).toString(),n="fnref"+t;return e[r].subId>0&&(n+=":"+e[r].subId),'<sup class="footnote-ref"><a href="#fn'+t+'" id="'+n+'">['+t+"]</a></sup>"};Y.footnote_block_open=function(e,r,t){var n=t.xhtmlOut?`<hr class="footnotes-sep" />
`:`<hr class="footnotes-sep">
`;return n+`<section class="footnotes">
<ol class="footnotes-list">
`};Y.footnote_block_close=function(){return`</ol>
</section>
`};Y.footnote_open=function(e,r){var t=Number(e[r].id+1).toString();return'<li id="fn'+t+'"  class="footnote-item">'};Y.footnote_close=function(){return`</li>
`};Y.footnote_anchor=function(e,r){var t=Number(e[r].id+1).toString(),n="fnref"+t;return e[r].subId>0&&(n+=":"+e[r].subId),' <a href="#'+n+'" class="footnote-backref"></a>'};Y.dl_open=function(){return`<dl>
`};Y.dt_open=function(){return"<dt>"};Y.dd_open=function(){return"<dd>"};Y.dl_close=function(){return`</dl>
`};Y.dt_close=function(){return`</dt>
`};Y.dd_close=function(){return`</dd>
`};function md(e,r){return++r>=e.length-2?r:e[r].type==="paragraph_open"&&e[r].tight&&e[r+1].type==="inline"&&e[r+1].content.length===0&&e[r+2].type==="paragraph_close"&&e[r+2].tight?md(e,r+2):r}var Rn=Y.getBreak=function(e,r){return r=md(e,r),r<e.length&&e[r].type==="list_item_close"?"":`
`};function ro(){this.rules=hd({},Y),this.getBreak=Y.getBreak}ro.prototype.renderInline=function(e,r,t){for(var n=this.rules,s=e.length,i=0,a="";s--;)a+=n[e[i].type](e,i++,r,t,this);return a};ro.prototype.render=function(e,r,t){for(var n=this.rules,s=e.length,i=-1,a="";++i<s;)e[i].type==="inline"?a+=this.renderInline(e[i].children,r,t):a+=n[e[i].type](e,i,r,t,this);return a};function mt(){this.__rules__=[],this.__cache__=null}mt.prototype.__find__=function(e){for(var r=this.__rules__.length,t=-1;r--;)if(this.__rules__[++t].name===e)return t;return-1};mt.prototype.__compile__=function(){var e=this,r=[""];e.__rules__.forEach(function(t){t.enabled&&t.alt.forEach(function(n){r.indexOf(n)<0&&r.push(n)})}),e.__cache__={},r.forEach(function(t){e.__cache__[t]=[],e.__rules__.forEach(function(n){n.enabled&&(t&&n.alt.indexOf(t)<0||e.__cache__[t].push(n.fn))})})};mt.prototype.at=function(e,r,t){var n=this.__find__(e),s=t||{};if(n===-1)throw new Error("Parser rule not found: "+e);this.__rules__[n].fn=r,this.__rules__[n].alt=s.alt||[],this.__cache__=null};mt.prototype.before=function(e,r,t,n){var s=this.__find__(e),i=n||{};if(s===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(s,0,{name:r,enabled:!0,fn:t,alt:i.alt||[]}),this.__cache__=null};mt.prototype.after=function(e,r,t,n){var s=this.__find__(e),i=n||{};if(s===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(s+1,0,{name:r,enabled:!0,fn:t,alt:i.alt||[]}),this.__cache__=null};mt.prototype.push=function(e,r,t){var n=t||{};this.__rules__.push({name:e,enabled:!0,fn:r,alt:n.alt||[]}),this.__cache__=null};mt.prototype.enable=function(e,r){e=Array.isArray(e)?e:[e],r&&this.__rules__.forEach(function(t){t.enabled=!1}),e.forEach(function(t){var n=this.__find__(t);if(n<0)throw new Error("Rules manager: invalid rule name "+t);this.__rules__[n].enabled=!0},this),this.__cache__=null};mt.prototype.disable=function(e){e=Array.isArray(e)?e:[e],e.forEach(function(r){var t=this.__find__(r);if(t<0)throw new Error("Rules manager: invalid rule name "+r);this.__rules__[t].enabled=!1},this),this.__cache__=null};mt.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function Qv(e){e.inlineMode?e.tokens.push({type:"inline",content:e.src.replace(/\n/g," ").trim(),level:0,lines:[0,1],children:[]}):e.block.parse(e.src,e.options,e.env,e.tokens)}function Mn(e,r,t,n,s){this.src=e,this.env=n,this.options=t,this.parser=r,this.tokens=s,this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache=[],this.isInLabel=!1,this.linkLevel=0,this.linkContent="",this.labelUnmatchedScopes=0}Mn.prototype.pushPending=function(){this.tokens.push({type:"text",content:this.pending,level:this.pendingLevel}),this.pending=""};Mn.prototype.push=function(e){this.pending&&this.pushPending(),this.tokens.push(e),this.pendingLevel=this.level};Mn.prototype.cacheSet=function(e,r){for(var t=this.cache.length;t<=e;t++)this.cache.push(0);this.cache[e]=r};Mn.prototype.cacheGet=function(e){return e<this.cache.length?this.cache[e]:0};function ss(e,r){var t,n,s,i=-1,a=e.posMax,o=e.pos,l=e.isInLabel;if(e.isInLabel)return-1;if(e.labelUnmatchedScopes)return e.labelUnmatchedScopes--,-1;for(e.pos=r+1,e.isInLabel=!0,t=1;e.pos<a;){if(s=e.src.charCodeAt(e.pos),s===91)t++;else if(s===93&&(t--,t===0)){n=!0;break}e.parser.skipToken(e)}return n?(i=e.pos,e.labelUnmatchedScopes=0):e.labelUnmatchedScopes=t-1,e.pos=o,e.isInLabel=l,i}function eg(e,r,t,n){var s,i,a,o,l,u;if(e.charCodeAt(0)!==42||e.charCodeAt(1)!==91||e.indexOf("]:")===-1||(s=new Mn(e,r,t,n,[]),i=ss(s,1),i<0||e.charCodeAt(i+1)!==58))return-1;for(o=s.posMax,a=i+2;a<o&&s.src.charCodeAt(a)!==10;a++);return l=e.slice(2,i),u=e.slice(i+2,a).trim(),u.length===0?-1:(n.abbreviations||(n.abbreviations={}),W(n.abbreviations[":"+l])>"u"&&(n.abbreviations[":"+l]=u),a)}function tg(e){var r=e.tokens,t,n,s,i;if(!e.inlineMode){for(t=1,n=r.length-1;t<n;t++)if(r[t-1].type==="paragraph_open"&&r[t].type==="inline"&&r[t+1].type==="paragraph_close"){for(s=r[t].content;s.length&&(i=eg(s,e.inline,e.options,e.env),!(i<0));)s=s.slice(i).trim();r[t].content=s,s.length||(r[t-1].tight=!0,r[t+1].tight=!0)}}}function ha(e){var r=Cn(e);try{r=decodeURI(r)}catch{}return encodeURI(r)}function vd(e,r){var t,n,s,i=r,a=e.posMax;if(e.src.charCodeAt(r)===60){for(r++;r<a;){if(t=e.src.charCodeAt(r),t===10)return!1;if(t===62)return s=ha(rs(e.src.slice(i+1,r))),e.parser.validateLink(s)?(e.pos=r+1,e.linkContent=s,!0):!1;if(t===92&&r+1<a){r+=2;continue}r++}return!1}for(n=0;r<a&&(t=e.src.charCodeAt(r),!(t===32||t<32||t===127));){if(t===92&&r+1<a){r+=2;continue}if(t===40&&(n++,n>1)||t===41&&(n--,n<0))break;r++}return i===r||(s=rs(e.src.slice(i,r)),!e.parser.validateLink(s))?!1:(e.linkContent=s,e.pos=r,!0)}function gd(e,r){var t,n=r,s=e.posMax,i=e.src.charCodeAt(r);if(i!==34&&i!==39&&i!==40)return!1;for(r++,i===40&&(i=41);r<s;){if(t=e.src.charCodeAt(r),t===i)return e.pos=r+1,e.linkContent=rs(e.src.slice(n+1,r)),!0;if(t===92&&r+1<s){r+=2;continue}r++}return!1}function yd(e){return e.trim().replace(/\s+/g," ").toUpperCase()}function ng(e,r,t,n){var s,i,a,o,l,u,c,d,h;if(e.charCodeAt(0)!==91||e.indexOf("]:")===-1||(s=new Mn(e,r,t,n,[]),i=ss(s,0),i<0||e.charCodeAt(i+1)!==58))return-1;for(o=s.posMax,a=i+2;a<o&&(l=s.src.charCodeAt(a),!(l!==32&&l!==10));a++);if(!vd(s,a))return-1;for(c=s.linkContent,a=s.pos,u=a,a=a+1;a<o&&(l=s.src.charCodeAt(a),!(l!==32&&l!==10));a++);for(a<o&&u!==a&&gd(s,a)?(d=s.linkContent,a=s.pos):(d="",a=u);a<o&&s.src.charCodeAt(a)===32;)a++;return a<o&&s.src.charCodeAt(a)!==10?-1:(h=yd(e.slice(1,i)),W(n.references[h])>"u"&&(n.references[h]={title:d,href:c}),a)}function rg(e){var r=e.tokens,t,n,s,i;if(e.env.references=e.env.references||{},!e.inlineMode){for(t=1,n=r.length-1;t<n;t++)if(r[t].type==="inline"&&r[t-1].type==="paragraph_open"&&r[t+1].type==="paragraph_close"){for(s=r[t].content;s.length&&(i=ng(s,e.inline,e.options,e.env),!(i<0));)s=s.slice(i).trim();r[t].content=s,s.length||(r[t-1].tight=!0,r[t+1].tight=!0)}}}function sg(e){var r=e.tokens,t,n,s;for(n=0,s=r.length;n<s;n++)t=r[n],t.type==="inline"&&e.inline.parse(t.content,e.options,e.env,t.children)}function ig(e){var r,t,n,s,i,a,o,l,u,c=0,d=!1,h={};if(e.env.footnotes&&(e.tokens=e.tokens.filter(function(f){return f.type==="footnote_reference_open"?(d=!0,l=[],u=f.label,!1):f.type==="footnote_reference_close"?(d=!1,h[":"+u]=l,!1):(d&&l.push(f),!d)}),!!e.env.footnotes.list)){for(a=e.env.footnotes.list,e.tokens.push({type:"footnote_block_open",level:c++}),r=0,t=a.length;r<t;r++){for(e.tokens.push({type:"footnote_open",id:r,level:c++}),a[r].tokens?(o=[],o.push({type:"paragraph_open",tight:!1,level:c++}),o.push({type:"inline",content:"",level:c,children:a[r].tokens}),o.push({type:"paragraph_close",tight:!1,level:--c})):a[r].label&&(o=h[":"+a[r].label]),e.tokens=e.tokens.concat(o),e.tokens[e.tokens.length-1].type==="paragraph_close"?i=e.tokens.pop():i=null,s=a[r].count>0?a[r].count:1,n=0;n<s;n++)e.tokens.push({type:"footnote_anchor",id:r,subId:n,level:c});i&&e.tokens.push(i),e.tokens.push({type:"footnote_close",level:--c})}e.tokens.push({type:"footnote_block_close",level:--c})}}var Ll=` 
()[]'".,!?-`;function Bi(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1")}function ag(e){var r,t,n,s,i,a,o,l,u,c,d,h,f=e.tokens;if(e.env.abbreviations){for(e.env.abbrRegExp||(h="(^|["+Ll.split("").map(Bi).join("")+"])("+Object.keys(e.env.abbreviations).map(function(m){return m.substr(1)}).sort(function(m,p){return p.length-m.length}).map(Bi).join("|")+")($|["+Ll.split("").map(Bi).join("")+"])",e.env.abbrRegExp=new RegExp(h,"g")),c=e.env.abbrRegExp,t=0,n=f.length;t<n;t++)if(f[t].type==="inline"){for(s=f[t].children,r=s.length-1;r>=0;r--)if(i=s[r],i.type==="text"){for(l=0,a=i.content,c.lastIndex=0,u=i.level,o=[];d=c.exec(a);)c.lastIndex>l&&o.push({type:"text",content:a.slice(l,d.index+d[1].length),level:u}),o.push({type:"abbr_open",title:e.env.abbreviations[":"+d[2]],level:u++}),o.push({type:"text",content:d[2],level:u}),o.push({type:"abbr_close",level:--u}),l=c.lastIndex-d[3].length;o.length&&(l<a.length&&o.push({type:"text",content:a.slice(l),level:u}),f[t].children=s=[].concat(s.slice(0,r),o,s.slice(r+1)))}}}}var og=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,lg=/\((c|tm|r|p)\)/ig,ug={c:"",r:"",p:"",tm:""};function cg(e){return e.indexOf("(")<0?e:e.replace(lg,function(r,t){return ug[t.toLowerCase()]})}function dg(e){var r,t,n,s,i;if(e.options.typographer){for(i=e.tokens.length-1;i>=0;i--)if(e.tokens[i].type==="inline")for(s=e.tokens[i].children,r=s.length-1;r>=0;r--)t=s[r],t.type==="text"&&(n=t.content,n=cg(n),og.test(n)&&(n=n.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---([^-]|$)/mg,"$1$2").replace(/(^|\s)--(\s|$)/mg,"$1$2").replace(/(^|[^-\s])--([^-\s]|$)/mg,"$1$2")),t.content=n)}}var fg=/['"]/,Ol=/['"]/g,hg=/[-\s()\[\]]/,Pl="";function Nl(e,r){return r<0||r>=e.length?!1:!hg.test(e[r])}function Dn(e,r,t){return e.substr(0,r)+t+e.substr(r+1)}function pg(e){var r,t,n,s,i,a,o,l,u,c,d,h,f,m,p,y,g;if(e.options.typographer){for(g=[],p=e.tokens.length-1;p>=0;p--)if(e.tokens[p].type==="inline"){for(y=e.tokens[p].children,g.length=0,r=0;r<y.length;r++)if(t=y[r],!(t.type!=="text"||fg.test(t.text))){for(o=y[r].level,f=g.length-1;f>=0&&!(g[f].level<=o);f--);g.length=f+1,n=t.content,i=0,a=n.length;e:for(;i<a&&(Ol.lastIndex=i,s=Ol.exec(n),!!s);){if(l=!Nl(n,s.index-1),i=s.index+1,m=s[0]==="'",u=!Nl(n,i),!u&&!l){m&&(t.content=Dn(t.content,s.index,Pl));continue}if(d=!u,h=!l,h){for(f=g.length-1;f>=0&&(c=g[f],!(g[f].level<o));f--)if(c.single===m&&g[f].level===o){c=g[f],m?(y[c.token].content=Dn(y[c.token].content,c.pos,e.options.quotes[2]),t.content=Dn(t.content,s.index,e.options.quotes[3])):(y[c.token].content=Dn(y[c.token].content,c.pos,e.options.quotes[0]),t.content=Dn(t.content,s.index,e.options.quotes[1])),g.length=f;continue e}}d?g.push({token:r,pos:s.index,single:m,level:o}):h&&m&&(t.content=Dn(t.content,s.index,Pl))}}}}}var Fi=[["block",Qv],["abbr",tg],["references",rg],["inline",sg],["footnote_tail",ig],["abbr2",ag],["replacements",dg],["smartquotes",pg]];function bd(){this.options={},this.ruler=new mt;for(var e=0;e<Fi.length;e++)this.ruler.push(Fi[e][0],Fi[e][1])}bd.prototype.process=function(e){var r,t,n;for(n=this.ruler.getRules(""),r=0,t=n.length;r<t;r++)n[r](e)};function In(e,r,t,n,s){var i,a,o,l,u,c,d;for(this.src=e,this.parser=r,this.options=t,this.env=n,this.tokens=s,this.bMarks=[],this.eMarks=[],this.tShift=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.parentType="root",this.ddIndent=-1,this.level=0,this.result="",a=this.src,c=0,d=!1,o=l=c=0,u=a.length;l<u;l++){if(i=a.charCodeAt(l),!d)if(i===32){c++;continue}else d=!0;(i===10||l===u-1)&&(i!==10&&l++,this.bMarks.push(o),this.eMarks.push(l),this.tShift.push(c),d=!1,c=0,o=l+1)}this.bMarks.push(a.length),this.eMarks.push(a.length),this.tShift.push(0),this.lineMax=this.bMarks.length-1}In.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};In.prototype.skipEmptyLines=function(e){for(var r=this.lineMax;e<r&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};In.prototype.skipSpaces=function(e){for(var r=this.src.length;e<r&&this.src.charCodeAt(e)===32;e++);return e};In.prototype.skipChars=function(e,r){for(var t=this.src.length;e<t&&this.src.charCodeAt(e)===r;e++);return e};In.prototype.skipCharsBack=function(e,r,t){if(e<=t)return e;for(;e>t;)if(r!==this.src.charCodeAt(--e))return e+1;return e};In.prototype.getLines=function(e,r,t,n){var s,i,a,o,l,u=e;if(e>=r)return"";if(u+1===r)return i=this.bMarks[u]+Math.min(this.tShift[u],t),a=n?this.eMarks[u]+1:this.eMarks[u],this.src.slice(i,a);for(o=new Array(r-e),s=0;u<r;u++,s++)l=this.tShift[u],l>t&&(l=t),l<0&&(l=0),i=this.bMarks[u]+l,u+1<r||n?a=this.eMarks[u]+1:a=this.eMarks[u],o[s]=this.src.slice(i,a);return o.join("")};function mg(e,r,t){var n,s;if(e.tShift[r]-e.blkIndent<4)return!1;for(s=n=r+1;n<t;){if(e.isEmpty(n)){n++;continue}if(e.tShift[n]-e.blkIndent>=4){n++,s=n;continue}break}return e.line=n,e.tokens.push({type:"code",content:e.getLines(r,s,4+e.blkIndent,!0),block:!0,lines:[r,e.line],level:e.level}),!0}function vg(e,r,t,n){var s,i,a,o,l,u=!1,c=e.bMarks[r]+e.tShift[r],d=e.eMarks[r];if(c+3>d||(s=e.src.charCodeAt(c),s!==126&&s!==96)||(l=c,c=e.skipChars(c,s),i=c-l,i<3)||(a=e.src.slice(c,d).trim(),a.indexOf("`")>=0))return!1;if(n)return!0;for(o=r;o++,!(o>=t||(c=l=e.bMarks[o]+e.tShift[o],d=e.eMarks[o],c<d&&e.tShift[o]<e.blkIndent));)if(e.src.charCodeAt(c)===s&&!(e.tShift[o]-e.blkIndent>=4)&&(c=e.skipChars(c,s),!(c-l<i)&&(c=e.skipSpaces(c),!(c<d)))){u=!0;break}return i=e.tShift[r],e.line=o+(u?1:0),e.tokens.push({type:"fence",params:a,content:e.getLines(r+1,o,i,!0),lines:[r,e.line],level:e.level}),!0}function gg(e,r,t,n){var s,i,a,o,l,u,c,d,h,f,m,p=e.bMarks[r]+e.tShift[r],y=e.eMarks[r];if(p>y||e.src.charCodeAt(p++)!==62||e.level>=e.options.maxNesting)return!1;if(n)return!0;for(e.src.charCodeAt(p)===32&&p++,l=e.blkIndent,e.blkIndent=0,o=[e.bMarks[r]],e.bMarks[r]=p,p=p<y?e.skipSpaces(p):p,i=p>=y,a=[e.tShift[r]],e.tShift[r]=p-e.bMarks[r],d=e.parser.ruler.getRules("blockquote"),s=r+1;s<t&&(p=e.bMarks[s]+e.tShift[s],y=e.eMarks[s],!(p>=y));s++){if(e.src.charCodeAt(p++)===62){e.src.charCodeAt(p)===32&&p++,o.push(e.bMarks[s]),e.bMarks[s]=p,p=p<y?e.skipSpaces(p):p,i=p>=y,a.push(e.tShift[s]),e.tShift[s]=p-e.bMarks[s];continue}if(i)break;for(m=!1,h=0,f=d.length;h<f;h++)if(d[h](e,s,t,!0)){m=!0;break}if(m)break;o.push(e.bMarks[s]),a.push(e.tShift[s]),e.tShift[s]=-1337}for(u=e.parentType,e.parentType="blockquote",e.tokens.push({type:"blockquote_open",lines:c=[r,0],level:e.level++}),e.parser.tokenize(e,r,s),e.tokens.push({type:"blockquote_close",level:--e.level}),e.parentType=u,c[1]=e.line,h=0;h<a.length;h++)e.bMarks[h+r]=o[h],e.tShift[h+r]=a[h];return e.blkIndent=l,!0}function yg(e,r,t,n){var s,i,a,o=e.bMarks[r],l=e.eMarks[r];if(o+=e.tShift[r],o>l||(s=e.src.charCodeAt(o++),s!==42&&s!==45&&s!==95))return!1;for(i=1;o<l;){if(a=e.src.charCodeAt(o++),a!==s&&a!==32)return!1;a===s&&i++}return i<3?!1:(n||(e.line=r+1,e.tokens.push({type:"hr",lines:[r,e.line],level:e.level})),!0)}function Dl(e,r){var t,n,s;return n=e.bMarks[r]+e.tShift[r],s=e.eMarks[r],n>=s||(t=e.src.charCodeAt(n++),t!==42&&t!==45&&t!==43)||n<s&&e.src.charCodeAt(n)!==32?-1:n}function Bl(e,r){var t,n=e.bMarks[r]+e.tShift[r],s=e.eMarks[r];if(n+1>=s||(t=e.src.charCodeAt(n++),t<48||t>57))return-1;for(;;){if(n>=s)return-1;if(t=e.src.charCodeAt(n++),!(t>=48&&t<=57)){if(t===41||t===46)break;return-1}}return n<s&&e.src.charCodeAt(n)!==32?-1:n}function bg(e,r){var t,n,s=e.level+2;for(t=r+2,n=e.tokens.length-2;t<n;t++)e.tokens[t].level===s&&e.tokens[t].type==="paragraph_open"&&(e.tokens[t+2].tight=!0,e.tokens[t].tight=!0,t+=2)}function _g(e,r,t,n){var s,i,a,o,l,u,c,d,h,f,m,p,y,g,S,k,T,x,I=!0,F,$,ae,me;if((d=Bl(e,r))>=0)y=!0;else if((d=Dl(e,r))>=0)y=!1;else return!1;if(e.level>=e.options.maxNesting)return!1;if(p=e.src.charCodeAt(d-1),n)return!0;for(S=e.tokens.length,y?(c=e.bMarks[r]+e.tShift[r],m=Number(e.src.substr(c,d-c-1)),e.tokens.push({type:"ordered_list_open",order:m,lines:T=[r,0],level:e.level++})):e.tokens.push({type:"bullet_list_open",lines:T=[r,0],level:e.level++}),s=r,k=!1,F=e.parser.ruler.getRules("list");s<t&&(g=e.skipSpaces(d),h=e.eMarks[s],g>=h?f=1:f=g-d,f>4&&(f=1),f<1&&(f=1),i=d-e.bMarks[s]+f,e.tokens.push({type:"list_item_open",lines:x=[r,0],level:e.level++}),o=e.blkIndent,l=e.tight,a=e.tShift[r],u=e.parentType,e.tShift[r]=g-e.bMarks[r],e.blkIndent=i,e.tight=!0,e.parentType="list",e.parser.tokenize(e,r,t,!0),(!e.tight||k)&&(I=!1),k=e.line-r>1&&e.isEmpty(e.line-1),e.blkIndent=o,e.tShift[r]=a,e.tight=l,e.parentType=u,e.tokens.push({type:"list_item_close",level:--e.level}),s=r=e.line,x[1]=s,g=e.bMarks[r],!(s>=t||e.isEmpty(s)||e.tShift[s]<e.blkIndent));){for(me=!1,$=0,ae=F.length;$<ae;$++)if(F[$](e,s,t,!0)){me=!0;break}if(me)break;if(y){if(d=Bl(e,s),d<0)break}else if(d=Dl(e,s),d<0)break;if(p!==e.src.charCodeAt(d-1))break}return e.tokens.push({type:y?"ordered_list_close":"bullet_list_close",level:--e.level}),T[1]=s,e.line=s,I&&bg(e,S),!0}function Sg(e,r,t,n){var s,i,a,o,l,u=e.bMarks[r]+e.tShift[r],c=e.eMarks[r];if(u+4>c||e.src.charCodeAt(u)!==91||e.src.charCodeAt(u+1)!==94||e.level>=e.options.maxNesting)return!1;for(o=u+2;o<c;o++){if(e.src.charCodeAt(o)===32)return!1;if(e.src.charCodeAt(o)===93)break}return o===u+2||o+1>=c||e.src.charCodeAt(++o)!==58?!1:(n||(o++,e.env.footnotes||(e.env.footnotes={}),e.env.footnotes.refs||(e.env.footnotes.refs={}),l=e.src.slice(u+2,o-2),e.env.footnotes.refs[":"+l]=-1,e.tokens.push({type:"footnote_reference_open",label:l,level:e.level++}),s=e.bMarks[r],i=e.tShift[r],a=e.parentType,e.tShift[r]=e.skipSpaces(o)-o,e.bMarks[r]=o,e.blkIndent+=4,e.parentType="footnote",e.tShift[r]<e.blkIndent&&(e.tShift[r]+=e.blkIndent,e.bMarks[r]-=e.blkIndent),e.parser.tokenize(e,r,t,!0),e.parentType=a,e.blkIndent-=4,e.tShift[r]=i,e.bMarks[r]=s,e.tokens.push({type:"footnote_reference_close",level:--e.level})),!0)}function Eg(e,r,t,n){var s,i,a,o=e.bMarks[r]+e.tShift[r],l=e.eMarks[r];if(o>=l||(s=e.src.charCodeAt(o),s!==35||o>=l))return!1;for(i=1,s=e.src.charCodeAt(++o);s===35&&o<l&&i<=6;)i++,s=e.src.charCodeAt(++o);return i>6||o<l&&s!==32?!1:(n||(l=e.skipCharsBack(l,32,o),a=e.skipCharsBack(l,35,o),a>o&&e.src.charCodeAt(a-1)===32&&(l=a),e.line=r+1,e.tokens.push({type:"heading_open",hLevel:i,lines:[r,e.line],level:e.level}),o<l&&e.tokens.push({type:"inline",content:e.src.slice(o,l).trim(),level:e.level+1,lines:[r,e.line],children:[]}),e.tokens.push({type:"heading_close",hLevel:i,level:e.level})),!0)}function kg(e,r,t){var n,s,i,a=r+1;return a>=t||e.tShift[a]<e.blkIndent||e.tShift[a]-e.blkIndent>3||(s=e.bMarks[a]+e.tShift[a],i=e.eMarks[a],s>=i)||(n=e.src.charCodeAt(s),n!==45&&n!==61)||(s=e.skipChars(s,n),s=e.skipSpaces(s),s<i)?!1:(s=e.bMarks[r]+e.tShift[r],e.line=a+1,e.tokens.push({type:"heading_open",hLevel:n===61?1:2,lines:[r,e.line],level:e.level}),e.tokens.push({type:"inline",content:e.src.slice(s,e.eMarks[r]).trim(),level:e.level+1,lines:[r,e.line-1],children:[]}),e.tokens.push({type:"heading_close",hLevel:n===61?1:2,level:e.level}),!0)}var _d={};["article","aside","button","blockquote","body","canvas","caption","col","colgroup","dd","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","iframe","li","map","object","ol","output","p","pre","progress","script","section","style","table","tbody","td","textarea","tfoot","th","tr","thead","ul","video"].forEach(function(e){_d[e]=!0});var wg=/^<([a-zA-Z]{1,15})[\s\/>]/,Cg=/^<\/([a-zA-Z]{1,15})[\s>]/;function Tg(e){var r=e|32;return r>=97&&r<=122}function Ag(e,r,t,n){var s,i,a,o=e.bMarks[r],l=e.eMarks[r],u=e.tShift[r];if(o+=u,!e.options.html||u>3||o+2>=l||e.src.charCodeAt(o)!==60)return!1;if(s=e.src.charCodeAt(o+1),s===33||s===63){if(n)return!0}else if(s===47||Tg(s)){if(s===47){if(i=e.src.slice(o,l).match(Cg),!i)return!1}else if(i=e.src.slice(o,l).match(wg),!i)return!1;if(_d[i[1].toLowerCase()]!==!0)return!1;if(n)return!0}else return!1;for(a=r+1;a<e.lineMax&&!e.isEmpty(a);)a++;return e.line=a,e.tokens.push({type:"htmlblock",level:e.level,lines:[r,e.line],content:e.getLines(r,a,0,!0)}),!0}function ji(e,r){var t=e.bMarks[r]+e.blkIndent,n=e.eMarks[r];return e.src.substr(t,n-t)}function xg(e,r,t,n){var s,i,a,o,l,u,c,d,h,f,m;if(r+2>t||(l=r+1,e.tShift[l]<e.blkIndent)||(a=e.bMarks[l]+e.tShift[l],a>=e.eMarks[l])||(s=e.src.charCodeAt(a),s!==124&&s!==45&&s!==58)||(i=ji(e,r+1),!/^[-:| ]+$/.test(i))||(u=i.split("|"),u<=2))return!1;for(d=[],o=0;o<u.length;o++){if(h=u[o].trim(),!h){if(o===0||o===u.length-1)continue;return!1}if(!/^:?-+:?$/.test(h))return!1;h.charCodeAt(h.length-1)===58?d.push(h.charCodeAt(0)===58?"center":"right"):h.charCodeAt(0)===58?d.push("left"):d.push("")}if(i=ji(e,r).trim(),i.indexOf("|")===-1||(u=i.replace(/^\||\|$/g,"").split("|"),d.length!==u.length))return!1;if(n)return!0;for(e.tokens.push({type:"table_open",lines:f=[r,0],level:e.level++}),e.tokens.push({type:"thead_open",lines:[r,r+1],level:e.level++}),e.tokens.push({type:"tr_open",lines:[r,r+1],level:e.level++}),o=0;o<u.length;o++)e.tokens.push({type:"th_open",align:d[o],lines:[r,r+1],level:e.level++}),e.tokens.push({type:"inline",content:u[o].trim(),lines:[r,r+1],level:e.level,children:[]}),e.tokens.push({type:"th_close",level:--e.level});for(e.tokens.push({type:"tr_close",level:--e.level}),e.tokens.push({type:"thead_close",level:--e.level}),e.tokens.push({type:"tbody_open",lines:m=[r+2,0],level:e.level++}),l=r+2;l<t&&!(e.tShift[l]<e.blkIndent||(i=ji(e,l).trim(),i.indexOf("|")===-1));l++){for(u=i.replace(/^\||\|$/g,"").split("|"),e.tokens.push({type:"tr_open",level:e.level++}),o=0;o<u.length;o++)e.tokens.push({type:"td_open",align:d[o],level:e.level++}),c=u[o].substring(u[o].charCodeAt(0)===124?1:0,u[o].charCodeAt(u[o].length-1)===124?u[o].length-1:u[o].length).trim(),e.tokens.push({type:"inline",content:c,level:e.level,children:[]}),e.tokens.push({type:"td_close",level:--e.level});e.tokens.push({type:"tr_close",level:--e.level})}return e.tokens.push({type:"tbody_close",level:--e.level}),e.tokens.push({type:"table_close",level:--e.level}),f[1]=m[1]=l,e.line=l,!0}function ys(e,r){var t,n,s=e.bMarks[r]+e.tShift[r],i=e.eMarks[r];return s>=i||(n=e.src.charCodeAt(s++),n!==126&&n!==58)||(t=e.skipSpaces(s),s===t)||t>=i?-1:t}function Rg(e,r){var t,n,s=e.level+2;for(t=r+2,n=e.tokens.length-2;t<n;t++)e.tokens[t].level===s&&e.tokens[t].type==="paragraph_open"&&(e.tokens[t+2].tight=!0,e.tokens[t].tight=!0,t+=2)}function Mg(e,r,t,n){var s,i,a,o,l,u,c,d,h,f,m,p,y,g;if(n)return e.ddIndent<0?!1:ys(e,r)>=0;if(c=r+1,e.isEmpty(c)&&++c>t||e.tShift[c]<e.blkIndent||(s=ys(e,c),s<0)||e.level>=e.options.maxNesting)return!1;u=e.tokens.length,e.tokens.push({type:"dl_open",lines:l=[r,0],level:e.level++}),a=r,i=c;e:for(;;){for(g=!0,y=!1,e.tokens.push({type:"dt_open",lines:[a,a],level:e.level++}),e.tokens.push({type:"inline",content:e.getLines(a,a+1,e.blkIndent,!1).trim(),level:e.level+1,lines:[a,a],children:[]}),e.tokens.push({type:"dt_close",level:--e.level});;){if(e.tokens.push({type:"dd_open",lines:o=[c,0],level:e.level++}),p=e.tight,h=e.ddIndent,d=e.blkIndent,m=e.tShift[i],f=e.parentType,e.blkIndent=e.ddIndent=e.tShift[i]+2,e.tShift[i]=s-e.bMarks[i],e.tight=!0,e.parentType="deflist",e.parser.tokenize(e,i,t,!0),(!e.tight||y)&&(g=!1),y=e.line-i>1&&e.isEmpty(e.line-1),e.tShift[i]=m,e.tight=p,e.parentType=f,e.blkIndent=d,e.ddIndent=h,e.tokens.push({type:"dd_close",level:--e.level}),o[1]=c=e.line,c>=t||e.tShift[c]<e.blkIndent)break e;if(s=ys(e,c),s<0)break;i=c}if(c>=t||(a=c,e.isEmpty(a))||e.tShift[a]<e.blkIndent||(i=a+1,i>=t)||(e.isEmpty(i)&&i++,i>=t)||e.tShift[i]<e.blkIndent||(s=ys(e,i),s<0))break}return e.tokens.push({type:"dl_close",level:--e.level}),l[1]=c,e.line=c,g&&Rg(e,u),!0}function Ig(e,r){var t,n,s,i,a,o=r+1,l;if(t=e.lineMax,o<t&&!e.isEmpty(o)){for(l=e.parser.ruler.getRules("paragraph");o<t&&!e.isEmpty(o);o++)if(!(e.tShift[o]-e.blkIndent>3)){for(s=!1,i=0,a=l.length;i<a;i++)if(l[i](e,o,t,!0)){s=!0;break}if(s)break}}return n=e.getLines(r,o,e.blkIndent,!1).trim(),e.line=o,n.length&&(e.tokens.push({type:"paragraph_open",tight:!1,lines:[r,e.line],level:e.level}),e.tokens.push({type:"inline",content:n,level:e.level+1,lines:[r,e.line],children:[]}),e.tokens.push({type:"paragraph_close",tight:!1,level:e.level})),!0}var bs=[["code",mg],["fences",vg,["paragraph","blockquote","list"]],["blockquote",gg,["paragraph","blockquote","list"]],["hr",yg,["paragraph","blockquote","list"]],["list",_g,["paragraph","blockquote"]],["footnote",Sg,["paragraph"]],["heading",Eg,["paragraph","blockquote"]],["lheading",kg],["htmlblock",Ag,["paragraph","blockquote"]],["table",xg,["paragraph"]],["deflist",Mg,["paragraph"]],["paragraph",Ig]];function so(){this.ruler=new mt;for(var e=0;e<bs.length;e++)this.ruler.push(bs[e][0],bs[e][1],{alt:(bs[e][2]||[]).slice()})}so.prototype.tokenize=function(e,r,t){for(var n=this.ruler.getRules(""),s=n.length,i=r,a=!1,o,l;i<t&&(e.line=i=e.skipEmptyLines(i),!(i>=t||e.tShift[i]<e.blkIndent));){for(l=0;l<s&&(o=n[l](e,i,t,!1),!o);l++);if(e.tight=!a,e.isEmpty(e.line-1)&&(a=!0),i=e.line,i<t&&e.isEmpty(i)){if(a=!0,i++,i<t&&e.parentType==="list"&&e.isEmpty(i))break;e.line=i}}};var Lg=/[\n\t]/g,Og=/\r[\n\u0085]|[\u2424\u2028\u0085]/g,Pg=/\u00a0/g;so.prototype.parse=function(e,r,t,n){var s,i=0,a=0;if(!e)return[];e=e.replace(Pg," "),e=e.replace(Og,`
`),e.indexOf("	")>=0&&(e=e.replace(Lg,function(o,l){var u;return e.charCodeAt(l)===10?(i=l+1,a=0,o):(u="    ".slice((l-i-a)%4),a=l-i+1,u)})),s=new In(e,this,r,t,n),this.tokenize(s,s.line,s.lineMax)};function Ng(e){switch(e){case 10:case 92:case 96:case 42:case 95:case 94:case 91:case 93:case 33:case 38:case 60:case 62:case 123:case 125:case 36:case 37:case 64:case 126:case 43:case 61:case 58:return!0;default:return!1}}function Dg(e,r){for(var t=e.pos;t<e.posMax&&!Ng(e.src.charCodeAt(t));)t++;return t===e.pos?!1:(r||(e.pending+=e.src.slice(e.pos,t)),e.pos=t,!0)}function Bg(e,r){var t,n,s=e.pos;if(e.src.charCodeAt(s)!==10)return!1;if(t=e.pending.length-1,n=e.posMax,!r)if(t>=0&&e.pending.charCodeAt(t)===32)if(t>=1&&e.pending.charCodeAt(t-1)===32){for(var i=t-2;i>=0;i--)if(e.pending.charCodeAt(i)!==32){e.pending=e.pending.substring(0,i+1);break}e.push({type:"hardbreak",level:e.level})}else e.pending=e.pending.slice(0,-1),e.push({type:"softbreak",level:e.level});else e.push({type:"softbreak",level:e.level});for(s++;s<n&&e.src.charCodeAt(s)===32;)s++;return e.pos=s,!0}var io=[];for(var Fl=0;Fl<256;Fl++)io.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){io[e.charCodeAt(0)]=1});function Fg(e,r){var t,n=e.pos,s=e.posMax;if(e.src.charCodeAt(n)!==92)return!1;if(n++,n<s){if(t=e.src.charCodeAt(n),t<256&&io[t]!==0)return r||(e.pending+=e.src[n]),e.pos+=2,!0;if(t===10){for(r||e.push({type:"hardbreak",level:e.level}),n++;n<s&&e.src.charCodeAt(n)===32;)n++;return e.pos=n,!0}}return r||(e.pending+="\\"),e.pos++,!0}function jg(e,r){var t,n,s,i,a,o=e.pos,l=e.src.charCodeAt(o);if(l!==96)return!1;for(t=o,o++,n=e.posMax;o<n&&e.src.charCodeAt(o)===96;)o++;for(s=e.src.slice(t,o),i=a=o;(i=e.src.indexOf("`",a))!==-1;){for(a=i+1;a<n&&e.src.charCodeAt(a)===96;)a++;if(a-i===s.length)return r||e.push({type:"code",content:e.src.slice(o,i).replace(/[ \n]+/g," ").trim(),block:!1,level:e.level}),e.pos=a,!0}return r||(e.pending+=s),e.pos+=s.length,!0}function Ug(e,r){var t,n,s,i=e.posMax,a=e.pos,o,l;if(e.src.charCodeAt(a)!==126||r||a+4>=i||e.src.charCodeAt(a+1)!==126||e.level>=e.options.maxNesting||(o=a>0?e.src.charCodeAt(a-1):-1,l=e.src.charCodeAt(a+2),o===126)||l===126||l===32||l===10)return!1;for(n=a+2;n<i&&e.src.charCodeAt(n)===126;)n++;if(n>a+3)return e.pos+=n-a,r||(e.pending+=e.src.slice(a,n)),!0;for(e.pos=a+2,s=1;e.pos+1<i;){if(e.src.charCodeAt(e.pos)===126&&e.src.charCodeAt(e.pos+1)===126&&(o=e.src.charCodeAt(e.pos-1),l=e.pos+2<i?e.src.charCodeAt(e.pos+2):-1,l!==126&&o!==126&&(o!==32&&o!==10?s--:l!==32&&l!==10&&s++,s<=0))){t=!0;break}e.parser.skipToken(e)}return t?(e.posMax=e.pos,e.pos=a+2,r||(e.push({type:"del_open",level:e.level++}),e.parser.tokenize(e),e.push({type:"del_close",level:--e.level})),e.pos=e.posMax+2,e.posMax=i,!0):(e.pos=a,!1)}function Hg(e,r){var t,n,s,i=e.posMax,a=e.pos,o,l;if(e.src.charCodeAt(a)!==43||r||a+4>=i||e.src.charCodeAt(a+1)!==43||e.level>=e.options.maxNesting||(o=a>0?e.src.charCodeAt(a-1):-1,l=e.src.charCodeAt(a+2),o===43)||l===43||l===32||l===10)return!1;for(n=a+2;n<i&&e.src.charCodeAt(n)===43;)n++;if(n!==a+2)return e.pos+=n-a,r||(e.pending+=e.src.slice(a,n)),!0;for(e.pos=a+2,s=1;e.pos+1<i;){if(e.src.charCodeAt(e.pos)===43&&e.src.charCodeAt(e.pos+1)===43&&(o=e.src.charCodeAt(e.pos-1),l=e.pos+2<i?e.src.charCodeAt(e.pos+2):-1,l!==43&&o!==43&&(o!==32&&o!==10?s--:l!==32&&l!==10&&s++,s<=0))){t=!0;break}e.parser.skipToken(e)}return t?(e.posMax=e.pos,e.pos=a+2,r||(e.push({type:"ins_open",level:e.level++}),e.parser.tokenize(e),e.push({type:"ins_close",level:--e.level})),e.pos=e.posMax+2,e.posMax=i,!0):(e.pos=a,!1)}function $g(e,r){var t,n,s,i=e.posMax,a=e.pos,o,l;if(e.src.charCodeAt(a)!==61||r||a+4>=i||e.src.charCodeAt(a+1)!==61||e.level>=e.options.maxNesting||(o=a>0?e.src.charCodeAt(a-1):-1,l=e.src.charCodeAt(a+2),o===61)||l===61||l===32||l===10)return!1;for(n=a+2;n<i&&e.src.charCodeAt(n)===61;)n++;if(n!==a+2)return e.pos+=n-a,r||(e.pending+=e.src.slice(a,n)),!0;for(e.pos=a+2,s=1;e.pos+1<i;){if(e.src.charCodeAt(e.pos)===61&&e.src.charCodeAt(e.pos+1)===61&&(o=e.src.charCodeAt(e.pos-1),l=e.pos+2<i?e.src.charCodeAt(e.pos+2):-1,l!==61&&o!==61&&(o!==32&&o!==10?s--:l!==32&&l!==10&&s++,s<=0))){t=!0;break}e.parser.skipToken(e)}return t?(e.posMax=e.pos,e.pos=a+2,r||(e.push({type:"mark_open",level:e.level++}),e.parser.tokenize(e),e.push({type:"mark_close",level:--e.level})),e.pos=e.posMax+2,e.posMax=i,!0):(e.pos=a,!1)}function jl(e){return e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122}function Ul(e,r){var t=r,n,s,i,a=!0,o=!0,l=e.posMax,u=e.src.charCodeAt(r);for(n=r>0?e.src.charCodeAt(r-1):-1;t<l&&e.src.charCodeAt(t)===u;)t++;return t>=l&&(a=!1),i=t-r,i>=4?a=o=!1:(s=t<l?e.src.charCodeAt(t):-1,(s===32||s===10)&&(a=!1),(n===32||n===10)&&(o=!1),u===95&&(jl(n)&&(a=!1),jl(s)&&(o=!1))),{can_open:a,can_close:o,delims:i}}function Vg(e,r){var t,n,s,i,a,o,l,u=e.posMax,c=e.pos,d=e.src.charCodeAt(c);if(d!==95&&d!==42||r)return!1;if(l=Ul(e,c),t=l.delims,!l.can_open)return e.pos+=t,r||(e.pending+=e.src.slice(c,e.pos)),!0;if(e.level>=e.options.maxNesting)return!1;for(e.pos=c+t,o=[t];e.pos<u;){if(e.src.charCodeAt(e.pos)===d){if(l=Ul(e,e.pos),n=l.delims,l.can_close){for(i=o.pop(),a=n;i!==a;){if(a<i){o.push(i-a);break}if(a-=i,o.length===0)break;e.pos+=i,i=o.pop()}if(o.length===0){t=i,s=!0;break}e.pos+=n;continue}l.can_open&&o.push(n),e.pos+=n;continue}e.parser.skipToken(e)}return s?(e.posMax=e.pos,e.pos=c+t,r||((t===2||t===3)&&e.push({type:"strong_open",level:e.level++}),(t===1||t===3)&&e.push({type:"em_open",level:e.level++}),e.parser.tokenize(e),(t===1||t===3)&&e.push({type:"em_close",level:--e.level}),(t===2||t===3)&&e.push({type:"strong_close",level:--e.level})),e.pos=e.posMax+t,e.posMax=u,!0):(e.pos=c,!1)}var qg=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function zg(e,r){var t,n,s=e.posMax,i=e.pos;if(e.src.charCodeAt(i)!==126||r||i+2>=s||e.level>=e.options.maxNesting)return!1;for(e.pos=i+1;e.pos<s;){if(e.src.charCodeAt(e.pos)===126){t=!0;break}e.parser.skipToken(e)}return!t||i+1===e.pos||(n=e.src.slice(i+1,e.pos),n.match(/(^|[^\\])(\\\\)*\s/))?(e.pos=i,!1):(e.posMax=e.pos,e.pos=i+1,r||e.push({type:"sub",level:e.level,content:n.replace(qg,"$1")}),e.pos=e.posMax+1,e.posMax=s,!0)}var Gg=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function Kg(e,r){var t,n,s=e.posMax,i=e.pos;if(e.src.charCodeAt(i)!==94||r||i+2>=s||e.level>=e.options.maxNesting)return!1;for(e.pos=i+1;e.pos<s;){if(e.src.charCodeAt(e.pos)===94){t=!0;break}e.parser.skipToken(e)}return!t||i+1===e.pos||(n=e.src.slice(i+1,e.pos),n.match(/(^|[^\\])(\\\\)*\s/))?(e.pos=i,!1):(e.posMax=e.pos,e.pos=i+1,r||e.push({type:"sup",level:e.level,content:n.replace(Gg,"$1")}),e.pos=e.posMax+1,e.posMax=s,!0)}function Wg(e,r){var t,n,s,i,a,o,l,u,c=!1,d=e.pos,h=e.posMax,f=e.pos,m=e.src.charCodeAt(f);if(m===33&&(c=!0,m=e.src.charCodeAt(++f)),m!==91||e.level>=e.options.maxNesting||(t=f+1,n=ss(e,f),n<0))return!1;if(o=n+1,o<h&&e.src.charCodeAt(o)===40){for(o++;o<h&&(u=e.src.charCodeAt(o),!(u!==32&&u!==10));o++);if(o>=h)return!1;for(f=o,vd(e,o)?(i=e.linkContent,o=e.pos):i="",f=o;o<h&&(u=e.src.charCodeAt(o),!(u!==32&&u!==10));o++);if(o<h&&f!==o&&gd(e,o))for(a=e.linkContent,o=e.pos;o<h&&(u=e.src.charCodeAt(o),!(u!==32&&u!==10));o++);else a="";if(o>=h||e.src.charCodeAt(o)!==41)return e.pos=d,!1;o++}else{if(e.linkLevel>0)return!1;for(;o<h&&(u=e.src.charCodeAt(o),!(u!==32&&u!==10));o++);if(o<h&&e.src.charCodeAt(o)===91&&(f=o+1,o=ss(e,o),o>=0?s=e.src.slice(f,o++):o=f-1),s||(W(s)>"u"&&(o=n+1),s=e.src.slice(t,n)),l=e.env.references[yd(s)],!l)return e.pos=d,!1;i=l.href,a=l.title}return r||(e.pos=t,e.posMax=n,c?e.push({type:"image",src:i,title:a,alt:e.src.substr(t,n-t),level:e.level}):(e.push({type:"link_open",href:i,title:a,level:e.level++}),e.linkLevel++,e.parser.tokenize(e),e.linkLevel--,e.push({type:"link_close",level:--e.level}))),e.pos=o,e.posMax=h,!0}function Jg(e,r){var t,n,s,i,a=e.posMax,o=e.pos;return o+2>=a||e.src.charCodeAt(o)!==94||e.src.charCodeAt(o+1)!==91||e.level>=e.options.maxNesting||(t=o+2,n=ss(e,o+1),n<0)?!1:(r||(e.env.footnotes||(e.env.footnotes={}),e.env.footnotes.list||(e.env.footnotes.list=[]),s=e.env.footnotes.list.length,e.pos=t,e.posMax=n,e.push({type:"footnote_ref",id:s,level:e.level}),e.linkLevel++,i=e.tokens.length,e.parser.tokenize(e),e.env.footnotes.list[s]={tokens:e.tokens.splice(i)},e.linkLevel--),e.pos=n+1,e.posMax=a,!0)}function Yg(e,r){var t,n,s,i,a=e.posMax,o=e.pos;if(o+3>a||!e.env.footnotes||!e.env.footnotes.refs||e.src.charCodeAt(o)!==91||e.src.charCodeAt(o+1)!==94||e.level>=e.options.maxNesting)return!1;for(n=o+2;n<a;n++){if(e.src.charCodeAt(n)===32||e.src.charCodeAt(n)===10)return!1;if(e.src.charCodeAt(n)===93)break}return n===o+2||n>=a||(n++,t=e.src.slice(o+2,n-1),W(e.env.footnotes.refs[":"+t])>"u")?!1:(r||(e.env.footnotes.list||(e.env.footnotes.list=[]),e.env.footnotes.refs[":"+t]<0?(s=e.env.footnotes.list.length,e.env.footnotes.list[s]={label:t,count:0},e.env.footnotes.refs[":"+t]=s):s=e.env.footnotes.refs[":"+t],i=e.env.footnotes.list[s].count,e.env.footnotes.list[s].count++,e.push({type:"footnote_ref",id:s,subId:i,level:e.level})),e.pos=n,e.posMax=a,!0)}var Xg=["coap","doi","javascript","aaa","aaas","about","acap","cap","cid","crid","data","dav","dict","dns","file","ftp","geo","go","gopher","h323","http","https","iax","icap","im","imap","info","ipp","iris","iris.beep","iris.xpc","iris.xpcs","iris.lwz","ldap","mailto","mid","msrp","msrps","mtqp","mupdate","news","nfs","ni","nih","nntp","opaquelocktoken","pop","pres","rtsp","service","session","shttp","sieve","sip","sips","sms","snmp","soap.beep","soap.beeps","tag","tel","telnet","tftp","thismessage","tn3270","tip","tv","urn","vemmi","ws","wss","xcon","xcon-userid","xmlrpc.beep","xmlrpc.beeps","xmpp","z39.50r","z39.50s","adiumxtra","afp","afs","aim","apt","attachment","aw","beshare","bitcoin","bolo","callto","chrome","chrome-extension","com-eventbrite-attendee","content","cvs","dlna-playsingle","dlna-playcontainer","dtn","dvb","ed2k","facetime","feed","finger","fish","gg","git","gizmoproject","gtalk","hcp","icon","ipn","irc","irc6","ircs","itms","jar","jms","keyparc","lastfm","ldaps","magnet","maps","market","message","mms","ms-help","msnim","mumble","mvn","notes","oid","palm","paparazzi","platform","proxy","psyc","query","res","resource","rmi","rsync","rtmp","secondlife","sftp","sgn","skype","smb","soldat","spotify","ssh","steam","svn","teamspeak","things","udp","unreal","ut2004","ventrilo","view-source","webcal","wtai","wyciwyg","xfire","xri","ymsgr"],Zg=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,Qg=/^<([a-zA-Z.\-]{1,25}):([^<>\x00-\x20]*)>/;function ey(e,r){var t,n,s,i,a,o=e.pos;return e.src.charCodeAt(o)!==60||(t=e.src.slice(o),t.indexOf(">")<0)?!1:(n=t.match(Qg),n?Xg.indexOf(n[1].toLowerCase())<0||(i=n[0].slice(1,-1),a=ha(i),!e.parser.validateLink(i))?!1:(r||(e.push({type:"link_open",href:a,level:e.level}),e.push({type:"text",content:i,level:e.level+1}),e.push({type:"link_close",level:e.level})),e.pos+=n[0].length,!0):(s=t.match(Zg),s?(i=s[0].slice(1,-1),a=ha("mailto:"+i),e.parser.validateLink(a)?(r||(e.push({type:"link_open",href:a,level:e.level}),e.push({type:"text",content:i,level:e.level+1}),e.push({type:"link_close",level:e.level})),e.pos+=s[0].length,!0):!1):!1))}function fi(e,r){return e=e.source,r=r||"",function t(n,s){return n?(s=s.source||s,e=e.replace(n,s),t):new RegExp(e,r)}}var ty=/[a-zA-Z_:][a-zA-Z0-9:._-]*/,ny=/[^"'=<>`\x00-\x20]+/,ry=/'[^']*'/,sy=/"[^"]*"/,iy=fi(/(?:unquoted|single_quoted|double_quoted)/)("unquoted",ny)("single_quoted",ry)("double_quoted",sy)(),ay=fi(/(?:\s+attr_name(?:\s*=\s*attr_value)?)/)("attr_name",ty)("attr_value",iy)(),oy=fi(/<[A-Za-z][A-Za-z0-9]*attribute*\s*\/?>/)("attribute",ay)(),ly=/<\/[A-Za-z][A-Za-z0-9]*\s*>/,uy=/<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->/,cy=/<[?].*?[?]>/,dy=/<![A-Z]+\s+[^>]*>/,fy=/<!\[CDATA\[[\s\S]*?\]\]>/,hy=fi(/^(?:open_tag|close_tag|comment|processing|declaration|cdata)/)("open_tag",oy)("close_tag",ly)("comment",uy)("processing",cy)("declaration",dy)("cdata",fy)();function py(e){var r=e|32;return r>=97&&r<=122}function my(e,r){var t,n,s,i=e.pos;return!e.options.html||(s=e.posMax,e.src.charCodeAt(i)!==60||i+2>=s)||(t=e.src.charCodeAt(i+1),t!==33&&t!==63&&t!==47&&!py(t))||(n=e.src.slice(i).match(hy),!n)?!1:(r||e.push({type:"htmltag",content:e.src.slice(i,i+n[0].length),level:e.level}),e.pos+=n[0].length,!0)}var vy=/^&#((?:x[a-f0-9]{1,8}|[0-9]{1,8}));/i,gy=/^&([a-z][a-z0-9]{1,31});/i;function yy(e,r){var t,n,s,i=e.pos,a=e.posMax;if(e.src.charCodeAt(i)!==38)return!1;if(i+1<a){if(t=e.src.charCodeAt(i+1),t===35){if(s=e.src.slice(i).match(vy),s)return r||(n=s[1][0].toLowerCase()==="x"?parseInt(s[1].slice(1),16):parseInt(s[1],10),e.pending+=pd(n)?fa(n):fa(65533)),e.pos+=s[0].length,!0}else if(s=e.src.slice(i).match(gy),s){var o=fd(s[1]);if(s[1]!==o)return r||(e.pending+=o),e.pos+=s[0].length,!0}}return r||(e.pending+="&"),e.pos++,!0}var Ui=[["text",Dg],["newline",Bg],["escape",Fg],["backticks",jg],["del",Ug],["ins",Hg],["mark",$g],["emphasis",Vg],["sub",zg],["sup",Kg],["links",Wg],["footnote_inline",Jg],["footnote_ref",Yg],["autolink",ey],["htmltag",my],["entity",yy]];function hi(){this.ruler=new mt;for(var e=0;e<Ui.length;e++)this.ruler.push(Ui[e][0],Ui[e][1]);this.validateLink=by}hi.prototype.skipToken=function(e){var r=this.ruler.getRules(""),t=r.length,n=e.pos,s,i;if((i=e.cacheGet(n))>0){e.pos=i;return}for(s=0;s<t;s++)if(r[s](e,!0)){e.cacheSet(n,e.pos);return}e.pos++,e.cacheSet(n,e.pos)};hi.prototype.tokenize=function(e){for(var r=this.ruler.getRules(""),t=r.length,n=e.posMax,s,i;e.pos<n;){for(i=0;i<t&&(s=r[i](e,!1),!s);i++);if(s){if(e.pos>=n)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};hi.prototype.parse=function(e,r,t,n){var s=new Mn(e,this,r,t,n);this.tokenize(s)};function by(e){var r=["vbscript","javascript","file","data"],t=e.trim().toLowerCase();return t=Cn(t),!(t.indexOf(":")!==-1&&r.indexOf(t.split(":")[0])!==-1)}var _y={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkTarget:"",typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["block","inline","references","replacements","smartquotes","references","abbr2","footnote_tail"]},block:{rules:["blockquote","code","fences","footnote","heading","hr","htmlblock","lheading","list","paragraph","table"]},inline:{rules:["autolink","backticks","del","emphasis","entity","escape","footnote_ref","htmltag","links","newline","text"]}}},Sy={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkTarget:"",typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{},block:{},inline:{}}},Ey={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkTarget:"",typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["block","inline","references","abbr2"]},block:{rules:["blockquote","code","fences","heading","hr","htmlblock","lheading","list","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","htmltag","links","newline","text"]}}},ky={default:_y,full:Sy,commonmark:Ey};function Sd(e,r,t){this.src=r,this.env=t,this.options=e.options,this.tokens=[],this.inlineMode=!1,this.inline=e.inline,this.block=e.block,this.renderer=e.renderer,this.typographer=e.typographer}function Nt(e,r){typeof e!="string"&&(r=e,e="default"),r&&r.linkify!=null&&console.warn(`linkify option is removed. Use linkify plugin instead:

import Remarkable from 'remarkable';
import linkify from 'remarkable/linkify';
new Remarkable().use(linkify)
`),this.inline=new hi,this.block=new so,this.core=new bd,this.renderer=new ro,this.ruler=new mt,this.options={},this.configure(ky[e]),this.set(r||{})}Nt.prototype.set=function(e){hd(this.options,e)};Nt.prototype.configure=function(e){var r=this;if(!e)throw new Error("Wrong `remarkable` preset, check name/content");e.options&&r.set(e.options),e.components&&Object.keys(e.components).forEach(function(t){e.components[t].rules&&r[t].ruler.enable(e.components[t].rules,!0)})};Nt.prototype.use=function(e,r){return e(this,r),this};Nt.prototype.parse=function(e,r){var t=new Sd(this,e,r);return this.core.process(t),t.tokens};Nt.prototype.render=function(e,r){return r=r||{},this.renderer.render(this.parse(e,r),this.options,r)};Nt.prototype.parseInline=function(e,r){var t=new Sd(this,e,r);return t.inlineMode=!0,this.core.process(t),t.tokens};Nt.prototype.renderInline=function(e,r){return r=r||{},this.renderer.render(this.parseInline(e,r),this.options,r)};var Ed=function(){function e(){w(this,e)}return C(e,null,[{key:"instantiate",value:function(t){if(t)return new Nt(ve(ve({},e.DEFAULT_PROPERTIES),t));if(window.hljs){var n=window.hljs;return new Nt({highlight:function(i,a){if(a&&n.getLanguage(a))try{return n.highlight(i,{language:a}).value}catch{console.error("failed to setup the highlight dependency")}try{return n.highlightAuto(i).value}catch{console.error("failed to automatically highlight messages")}return""},html:!1,xhtmlOut:!1,breaks:!0,langPrefix:"language-",linkTarget:"_blank",typographer:!0})}else return new Nt(e.DEFAULT_PROPERTIES)}},{key:"createNew",value:function(t){var n=e.instantiate(t);return n.inline.validateLink=function(){return!0},n}}])}();Ed.DEFAULT_PROPERTIES={breaks:!0,linkTarget:"_blank"};var pa=Ed,xs=function(){function e(){w(this,e)}return C(e,null,[{key:"applyCustomStylesToElements",value:function(t,n,s){if(s&&(Object.assign(t.outerContainer.style,s.outerContainer),Object.assign(t.innerContainer.style,s.innerContainer),Object.assign(t.bubbleElement.style,s.bubble),n)){var i=t.bubbleElement.children[0],a=i.tagName.toLocaleLowerCase()!=="a"?i:i.children[0];Object.assign(a.style,s.media)}}},{key:"applySideStyles",value:function(t,n,s,i){i&&(e.applyCustomStylesToElements(t,s,i.shared),n===Z.USER_ROLE?e.applyCustomStylesToElements(t,s,i.user):(e.applyCustomStylesToElements(t,s,i.ai),e.applyCustomStylesToElements(t,s,i[n])))}},{key:"isElementsStyles",value:function(t){return!!(t.outerContainer||t.innerContainer||t.bubble||t.media)}},{key:"applyCustomStyles",value:function(t,n,s,i,a){var o;a&&t.default!==a?e.isElementsStyles(a)?(e.applyCustomStylesToElements(n,i,(o=t.default)==null?void 0:o.shared),e.applyCustomStylesToElements(n,i,a)):(e.applySideStyles(n,s,i,t.default),e.applySideStyles(n,s,i,a)):e.applySideStyles(n,s,i,t.default)}},{key:"extractParticularSharedStyles",value:function(t,n){if(n!=null&&n.shared){var s=n.shared,i={outerContainer:{},innerContainer:{},bubble:{},media:{}};return t.forEach(function(a){var o,l,u,c;i.outerContainer[a]=((o=s.outerContainer)==null?void 0:o[a])||"",i.innerContainer[a]=((l=s.innerContainer)==null?void 0:l[a])||"",i.bubble[a]=((u=s.bubble)==null?void 0:u[a])||"",i.media[a]=((c=s.media)==null?void 0:c[a])||""}),i}}}])}(),Ws=function(){function e(){w(this,e)}return C(e,null,[{key:"onMessage",value:function(t,n,s){var i,a=JSON.parse(JSON.stringify({message:n,isHistory:s,isInitial:s}));st.reAddFileRefToObject(n,a),(i=t.onMessage)==null||i.call(t,a),t.dispatchEvent(new CustomEvent("message",{detail:a})),lt.fireOnNewMessage(t,a)}},{key:"onClearMessages",value:function(t){var n;(n=t.onClearMessages)==null||n.call(t),t.dispatchEvent(new CustomEvent("clear-messages"))}},{key:"onRender",value:function(t){var n;(n=t.onComponentRender)==null||n.call(t,t),t.dispatchEvent(new CustomEvent("render",{detail:t}))}},{key:"onError",value:function(t,n){var s;(s=t.onError)==null||s.call(t,n),t.dispatchEvent(new CustomEvent("error",{detail:n}))}}])}(),Rs=function(){function e(){w(this,e)}return C(e,null,[{key:"generateLoadingRingElement",value:function(){var t=document.createElement("div");return t.classList.add("loading-history"),t.appendChild(document.createElement("div")),t.appendChild(document.createElement("div")),t.appendChild(document.createElement("div")),t.appendChild(document.createElement("div")),t}},{key:"apply",value:function(t,n,s){yn.setRing(n.bubbleElement,s==null?void 0:s.bubble),s!=null&&s.bubble&&(s=JSON.parse(JSON.stringify(s)),delete s.bubble),t.applyCustomStyles(n,"history",!1,s)}},{key:"addLoadHistoryMessage",value:function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i,a,o,l,u,c,d,h;t.bubbleElement.classList.add(e.CLASS);var f=s?e.FULL_VIEW_CLASS:e.SMALL_CLASS;t.outerContainer.classList.add(f);var m=s?(l=(o=(a=(i=n.messageStyles)==null?void 0:i.loading)==null?void 0:a.history)==null?void 0:o.full)==null?void 0:l.styles:(h=(d=(c=(u=n.messageStyles)==null?void 0:u.loading)==null?void 0:c.history)==null?void 0:d.small)==null?void 0:h.styles;e.apply(n,t,m),n.elementRef.prepend(t.outerContainer)}},{key:"createDefaultElements",value:function(t){var n=t.createMessageElements("",Z.AI_ROLE),s=n.bubbleElement,i=e.generateLoadingRingElement();return s.appendChild(i),n}},{key:"addMessage",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,s,i,a,o,l=(o=(a=(i=(s=t.messageStyles)==null?void 0:s.loading)==null?void 0:i.history)==null?void 0:a.full)==null?void 0:o.html,u=l?on.createElements(t,l,Z.AI_ROLE,!0,!0):e.createDefaultElements(t);return e.addLoadHistoryMessage(u,t,n),Z.softRemRoleElements(u.innerContainer,t.avatar,t.name),u}},{key:"tryChangeViewToSmall",value:function(t,n){var s,i,a,o,l,u,c,d;if(n!=null&&n.outerContainer.classList.contains(e.FULL_VIEW_CLASS)){n.outerContainer.classList.replace(e.FULL_VIEW_CLASS,e.SMALL_CLASS);var h=(o=(a=(i=(s=t.messageStyles)==null?void 0:s.loading)==null?void 0:i.history)==null?void 0:a.small)==null?void 0:o.styles;h&&e.apply(t,n,h);var f=(d=(c=(u=(l=t.messageStyles)==null?void 0:l.loading)==null?void 0:u.history)==null?void 0:c.small)==null?void 0:d.html;return f&&(n.bubbleElement.innerHTML=f),!0}return!1}},{key:"changeFullViewToSmall",value:function(t){var n=t.messageElementRefs[t.messageElementRefs.length-1];e.tryChangeViewToSmall(t,n)||e.tryChangeViewToSmall(t,t.messageElementRefs[0])}}])}();Rs.CLASS="loading-history-message",Rs.FULL_VIEW_CLASS="loading-history-message-full-view",Rs.SMALL_CLASS="loading-history-message-small";var En=Rs,kd=function(){function e(){w(this,e)}return C(e,null,[{key:"setFade",value:function(t,n){t.style.transitionDuration=typeof n=="number"?"".concat(n,"ms"):"".concat(e.DEFAULT_FADE_MS,"ms")}},{key:"fadeAnimation",value:function(){var r=A(v().mark(function n(s,i){var a;return v().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s.style.opacity="0",a=typeof i=="number"?i:e.DEFAULT_FADE_MS,l.next=4,new Promise(function(u){setTimeout(function(){return u()},a)});case 4:s.style.opacity="1";case 5:case"end":return l.stop()}},n)}));function t(n,s){return r.apply(this,arguments)}return t}()}])}();kd.DEFAULT_FADE_MS=500;var wd=kd,Hl="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3csvg%20fill='%23000000'%20version='1.1'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%2032%2032'%20xml:space='preserve'%3e%3cpath%20d='M23,30.36H9c-2.404,0-4.36-1.956-4.36-4.36V15c0-2.404,1.956-4.36,4.36-4.36h3.659%20c0.167-1.566,1.415-2.813,2.981-2.981V5.333c-1.131-0.174-2-1.154-2-2.333c0-1.301,1.059-2.36,2.36-2.36%20c1.302,0,2.36,1.059,2.36,2.36c0,1.179-0.869,2.159-2,2.333V7.66c1.566,0.167,2.814,1.415,2.981,2.981H23%20c2.404,0,4.36,1.956,4.36,4.36v11C27.36,28.404,25.404,30.36,23,30.36z%20M9,11.36c-2.007,0-3.64,1.633-3.64,3.64v11%20c0,2.007,1.633,3.64,3.64,3.64h14c2.007,0,3.64-1.633,3.64-3.64V15c0-2.007-1.633-3.64-3.64-3.64H9z%20M13.384,10.64h5.231%20C18.439,9.354,17.334,8.36,16,8.36C14.667,8.36,13.561,9.354,13.384,10.64z%20M16,1.36c-0.904,0-1.64,0.736-1.64,1.64%20S15.096,4.64,16,4.64c0.904,0,1.64-0.736,1.64-1.64S16.904,1.36,16,1.36z%20M20,27.36h-8c-1.301,0-2.36-1.059-2.36-2.36%20s1.059-2.36,2.36-2.36h8c1.302,0,2.36,1.059,2.36,2.36S21.302,27.36,20,27.36z%20M12,23.36c-0.904,0-1.64,0.735-1.64,1.64%20s0.736,1.64,1.64,1.64h8c0.904,0,1.64-0.735,1.64-1.64s-0.735-1.64-1.64-1.64H12z%20M31,23.86h-2c-0.199,0-0.36-0.161-0.36-0.36V15%20c0-0.199,0.161-0.36,0.36-0.36h2c0.199,0,0.36,0.161,0.36,0.36v8.5C31.36,23.699,31.199,23.86,31,23.86z%20M29.36,23.14h1.279v-7.78%20H29.36V23.14z%20M3,23.86H1c-0.199,0-0.36-0.161-0.36-0.36V15c0-0.199,0.161-0.36,0.36-0.36h2c0.199,0,0.36,0.161,0.36,0.36v8.5%20C3.36,23.699,3.199,23.86,3,23.86z%20M1.36,23.14h1.28v-7.78H1.36V23.14z%20M20,20.36c-1.302,0-2.36-1.059-2.36-2.36%20s1.059-2.36,2.36-2.36s2.36,1.059,2.36,2.36C22.36,19.302,21.302,20.36,20,20.36z%20M20,16.36c-0.904,0-1.64,0.736-1.64,1.64%20s0.735,1.64,1.64,1.64s1.64-0.735,1.64-1.64S20.904,16.36,20,16.36z%20M12,20.36c-1.301,0-2.36-1.059-2.36-2.36s1.059-2.36,2.36-2.36%20s2.36,1.059,2.36,2.36C14.36,19.302,13.301,20.36,12,20.36z%20M12,16.36c-0.904,0-1.64,0.736-1.64,1.64s0.736,1.64,1.64,1.64%20s1.64-0.735,1.64-1.64S12.904,16.36,12,16.36z'/%3e%3crect%20style='fill:none;'%20width='32'%20height='32'/%3e%3c/svg%3e",ma="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAD6CAMAAAC/MqoPAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAADNQTFRF////9vX18vLy/Pz86enp4+Li2tnZ1tbWzczM+fn57Ozs4N/f09LS0M/P5uXl7+/v3dzcwtncCAAAAAFiS0dEAIgFHUgAAAAJcEhZcwAAAEgAAABIAEbJaz4AAAZNSURBVHja7d3bdtsqEABQYABZSLH9/3+ZpnUsIcF5iOM6PfElNoMHMfPQdq3GmL0GkLhEUqLaUExnOtOZznSmM53pTGc605nOdKYznelMZzrTmV4LXSqllKyJDkob26xWq8Zae/iH0QoWTm9d1xur4WuypQJtTd+5dqn0VjcxzNO5/57mEBvdLo8Oron6aseWOjYOFkVvjQs3DmgyONMuht52EfztP+4hdu0i6LCO808/M8c1lE/fuPGej41uUzgdtoO/75N+2ELJ9I3b3//hPXbiMenm3pR/Jt4USgcLBIp4Bh10gqKVhvLo0klCxeSky96nKcj3siw6pJIL4XsoiQ7apyvMY/V3HHrSRioLopvEhSpTCn2TPEuwKYMOIX0tAxRBf/Hpa+lfSqBv9gi1FPsNfTrMAiVmIE/vJhz61FGnQxRIEYE4vfNYdN8Rp6MlHaHotHTn8ejekaZPAjEmyvQWdZFTtYTpXqCGJ0zvcek9Yfoel76nS0ffv1NMp1ca+pkgyfRCGind4L7OWWc605l+cxjsyhqy9AGbPpClc1/nvl5VX0c/3Alk6RU3+Am7shNZ+h6bvidLr7jBB+zKBrL0irOOudmIUDzTmf5gIP+iEuXtRuTVaEmY/oZLfyNMrzjryPc0gerMTdpVg0tvjJUU6bLPcGOoUv46SLL6Wi8yhLf06C7TUyekI0efRaaYqdFltkeNpPumRPSMDxgBYvSM035FrKAmH72hRW99PrpvSdEHkTEGUvSsK3yKVDkuJ92RohcZaehzzirPpOg+J92Tolfc4Cumx5xVXpGiZ34+ICX6W84qv5GiR5NPbiIpOv6BCoSvSkTX+eiaGP092zINvBOj4x8mSf9FqejvNo/cvpOji19ZbmviL0GPLsYMFzgzCor0+Bv/ePDvSJKOb9dJ5UlnbnEHiHgzv6cdTpJOWuc/u3FEucLDOL75xGtBiefrcwgoC9NDSH/jkH6pAuXmBqPQ9HSUPVdZBH1GGOrMXAQdYxcKZfxAoK+KKBKFLosoEoX+u4giUehz8jlcnAuhp78I46yDYNAd+QLR6K+pr+yvxdBTHyVDubQh0UfSxaHSd0lbvNkVRE87JGOtc+PQd2QLQ6fHhJkKsSh6yg13tO08JPprsgrrXWH0dJd2vH1MLPprot4eXoujpzrdhngiD40ek2y92lggPcnWa8qN1Yz0BFuvZhRl0uOfR0v4Ewuli/Bg4Qr3lArqGdndQ3UPO1EunXYwnelMZzrTmc50pjOd6UxnOtOZznSmM53pTGf6kuj6oedFKV0s3fX6sX1S3bsi6a4PD7+/YAqYeBw6pIB/4qEgOqxdSPbGiim4NRRCbzs3Jj0L4UfXtQXQVRfn5IdA/Bw7RZzurEV6EtdsLeGXkIPuA+K1UoVeA0l62zmN/LqfSSft9KkepmoRuvi3nd5uKNFB9zbbXEANqdr941XO0NJx2v2jdJenpf+/3bvn0ts16ph+sd6hX7dPo2+2cZzE02Ia43bzDHqr+2Evnhz74ZHU30ffbKOeng1/NPV30Ns1gYQnSP2P6e65Pfxc6h02XZqXQCjhJ6kPL6bFo4NrGvAU4UII4SE2P1vQuZkuOxckVfehisF1MjUddN/MZBN+kvq5uf0O/xa66gyNS9ktMWlz44rO1Z8C19i5FPdHzPamXn+F3hryPfxMr78+4F+kq22kO6Rf6fUQt+puuustyWv4rbG3l/duztFB96GYoe1cTBdXMr+nw9qVM6ZfxOvzezff0nXi/ZOndvrR6Zvpm0c3h6nhdb+5iS7tsIim/qXZD9+97/Jf+rpZ5BET1ayv0GUzLhEuhBBjIy/RdVPgndutIRt9nt7p5cKFEEJ3Z+jQFDZL+XnMDXxHB73gxn5s9Kc3d3/pFciFkN/QTSXHJpX5l66gDrkQoP6hL3xsPw39la4qOiV8tH78XeSbue6N9mvWa6J/ybpc1CT1Wnh5Qq9meP8IOKH3ddH7E/ri1iYux/SXDrXR4UiPdck/wUpU+FtPf6/orja6O9KL3l56LOvVxe5Ib2qjN0d6Vbex4ghWlU3bPqI90If66MNng680FNpbJijH6kCvaF3uMzQ3+IrpFerV4Y9dffQdN3im10ivbuImhD3Qq5u4HdZkua8znelMZ/pS4z9CPVKkxowNxgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNy0wMy0yN1QxNTo0NToxNSswMDowMN1xSg4AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTctMDMtMjdUMTU6NDU6MTUrMDA6MDCsLPKyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",Cd=function(){function e(r){w(this,e),this.className=r}return C(e,[{key:"tryHide",value:function(t){var n;(n=t.getElementsByClassName(this.className)[0].style).visibility||(n.visibility="hidden")}},{key:"tryReveal",value:function(t){t.getElementsByClassName(this.className)[0].style.visibility=""}},{key:"trySoftRem",value:function(t){t.getElementsByClassName(this.className)[0].classList.add("role-hidden")}}])}(),wy=function(e){function r(t){var n;return w(this,r),n=ee(this,r,["avatar-container"]),n._avatars=t,n}return te(r,e),C(r,[{key:"addBesideMsg",value:function(n,s){var i=typeof this._avatars=="boolean"?void 0:this._avatars,a=this.createAvatar(s,i),o=this.getPosition(s,i);a.classList.add(o==="left"?"left-item-position":"right-item-position"),n.insertAdjacentElement(o==="left"?"beforebegin":"afterend",a)}},{key:"createAvatar",value:function(n,s){var i,a,o,l,u,c=document.createElement("img");n===Z.USER_ROLE?(c.src=((i=s==null?void 0:s.user)==null?void 0:i.src)||((a=s==null?void 0:s.default)==null?void 0:a.src)||ma,c.onerror=r.errorFallback.bind(this,ma)):(c.src=((o=s==null?void 0:s[n])==null?void 0:o.src)||((l=s==null?void 0:s.ai)==null?void 0:l.src)||((u=s==null?void 0:s.default)==null?void 0:u.src)||Hl,c.onerror=r.errorFallback.bind(this,Hl)),c.classList.add("avatar"),c.alt="".concat(n," avatar");var d=document.createElement("div");return d.classList.add(this.className),d.appendChild(c),s&&r.applyCustomStyles(d,c,s,n),d}},{key:"getPosition",value:function(n,s){var i,a,o,l,u,c,d=(a=(i=s==null?void 0:s[n])==null?void 0:i.styles)==null?void 0:a.position;return n!==Z.USER_ROLE&&(d??(d=(l=(o=s==null?void 0:s.ai)==null?void 0:o.styles)==null?void 0:l.position)),d??(d=(c=(u=s==null?void 0:s.default)==null?void 0:u.styles)==null?void 0:c.position),d??(d=n===Z.USER_ROLE?"right":"left"),d}}],[{key:"errorFallback",value:function(n,s){var i=s.target;i.onerror=null,i.src=n}},{key:"applyCustomStylesToElements",value:function(n,s,i){Object.assign(n.style,i.container),Object.assign(s.style,i.avatar)}},{key:"applyCustomStyles",value:function(n,s,i,a){var o,l,u,c;if((o=i.default)!=null&&o.styles&&r.applyCustomStylesToElements(n,s,i.default.styles),a===Z.USER_ROLE)(l=i.user)!=null&&l.styles&&r.applyCustomStylesToElements(n,s,i.user.styles);else{(u=i.ai)!=null&&u.styles&&r.applyCustomStylesToElements(n,s,i.ai.styles);var d=(c=i[a])==null?void 0:c.styles;d&&r.applyCustomStylesToElements(n,s,d)}}}])}(Cd),Cy=function(e){function r(t){var n;return w(this,r),n=ee(this,r,["name"]),n._names=t,n}return te(r,e),C(r,[{key:"addBesideMsg",value:function(n,s){var i=typeof this._names=="boolean"?{}:this._names,a=this.createName(s,i),o=r.getPosition(s,i);a.classList.add(o==="left"?"left-item-position":"right-item-position"),n.insertAdjacentElement(o==="left"?"beforebegin":"afterend",a)}},{key:"createName",value:function(n,s){var i=document.createElement("div");return i.classList.add(this.className),i.textContent=r.getNameText(n,s),r.applyStyle(i,n,s),i}}],[{key:"getPosition",value:function(n,s){var i,a,o,l=(i=s==null?void 0:s[n])==null?void 0:i.position;return n!==Z.USER_ROLE&&(l??(l=(a=s==null?void 0:s.ai)==null?void 0:a.position)),l??(l=(o=s==null?void 0:s.default)==null?void 0:o.position),l??(l=n===Z.USER_ROLE?"right":"left"),l}},{key:"applyStyle",value:function(n,s,i){var a,o,l,u;Object.assign(n.style,(a=i.default)==null?void 0:a.style),s===Z.USER_ROLE?Object.assign(n.style,(o=i.user)==null?void 0:o.style):(Object.assign(n.style,(l=i.ai)==null?void 0:l.style),Object.assign(n.style,(u=i[s])==null?void 0:u.style))}},{key:"getNameText",value:function(n,s){var i,a,o,l,u,c;return n===Z.USER_ROLE?((i=s.user)==null?void 0:i.text)||((a=s.default)==null?void 0:a.text)||"User":n===Z.AI_ROLE?((o=s.ai)==null?void 0:o.text)||((l=s.default)==null?void 0:l.text)||"AI":((u=s[n])==null?void 0:u.text)||((c=s.default)==null?void 0:c.text)||n}}])}(Cd),Ms=function(){function e(r){var t=this;w(this,e);var n;this.messageElementRefs=[],this.htmlClassUtilities={},this.messageToElements=[],this.elementRef=e.createContainerElement(),this.messageStyles=lt.processMessageStyles(r.messageStyles),this._remarkable=pa.createNew(r.remarkable),r.avatars&&(this.avatar=new wy(r.avatars)),r.names&&(this.name=new Cy(r.names)),this._onMessage=Ws.onMessage.bind(this,r),r.htmlClassUtilities&&(this.htmlClassUtilities=r.htmlClassUtilities),this.focusMode=r.focusMode,this.focusMode||(this._lastGroupMessagesElement=document.createElement("div")),typeof this.focusMode!="boolean"&&(n=this.focusMode)!=null&&n.fade&&wd.setFade(this.elementRef,this.focusMode.fade),setTimeout(function(){t.submitUserMessage=r.submitUserMessage})}return C(e,[{key:"addNewTextMessage",value:function(t,n,s){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(s!=null&&s.status){var a=this.overwriteText(n,t,this.messageElementRefs);if(a)return a;s.status=!1}var o=i?this.createAndPrependNewMessageElement(t,n,i):this.createAndAppendNewMessageElement(t,n);return o.bubbleElement.classList.add(e.TEXT_BUBBLE_CLASS),this.applyCustomStyles(o,n,!1),Z.fillEmptyMessageElement(o.bubbleElement,t),o}},{key:"overwriteText",value:function(t,n,s){var i=Z.overwriteMessage(this.messageToElements,s,n,t,"text",e.TEXT_BUBBLE_CLASS);return i&&this.renderText(i.bubbleElement,n),i}},{key:"createAndAppendNewMessageElement",value:function(t,n){return this.focusMode?this.appendNewMessageElementFocusMode(t,n):this.createAndAppendNewMessageElementDefault(t,n)}},{key:"appendNewMessageElementFocusMode",value:function(t,n){var s=this,i,a=this.createNewMessageElement(t,n);if(this.appendOuterContainerElemet(a.outerContainer,n),n==="user"){var o=typeof this.focusMode!="boolean"&&((i=this.focusMode)==null?void 0:i.scroll);setTimeout(function(){return pt.scrollToBottom(s.elementRef,o)})}return a}},{key:"createNewGroupElementFocusMode",value:function(){var t;(t=this._lastGroupMessagesElement)==null||t.classList.remove(e.LAST_GROUP_MESSAGES_ACTIVE);var n=document.createElement("div");this._lastGroupMessagesElement&&n.classList.add(e.LAST_GROUP_MESSAGES_ACTIVE),this._lastGroupMessagesElement=n}},{key:"createAndAppendNewMessageElementDefault",value:function(t,n){var s=this,i=this.createNewMessageElement(t,n);return this.appendOuterContainerElemet(i.outerContainer),setTimeout(function(){return pt.scrollToBottom(s.elementRef)}),i}},{key:"appendOuterContainerElemet",value:function(t,n){var s;this.focusMode&&(n==="user"||!this._lastGroupMessagesElement)&&this.createNewGroupElementFocusMode(),(s=this._lastGroupMessagesElement)==null||s.appendChild(t),this.elementRef.appendChild(this._lastGroupMessagesElement)}},{key:"createAndPrependNewMessageElement",value:function(t,n,s){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,a,o=this.createNewMessageElement(t,n,s,i);if(s&&(a=this.elementRef.firstChild)!=null&&a.classList.contains(e.INTRO_CLASS)){this.elementRef.firstChild.insertAdjacentElement("afterend",o.outerContainer);var l=this.messageElementRefs[0];this.messageElementRefs[0]=this.messageElementRefs[1],this.messageElementRefs[1]=l}else this.elementRef.insertBefore(o.outerContainer,this.elementRef.firstChild);return o}},{key:"createMessageElementsOnOrientation",value:function(t,n,s){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return s?this.createAndPrependNewMessageElement(t,n,!0,i):this.createNewMessageElement(t,n,i)}},{key:"createNewMessageElement",value:function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,a;i||(a=this._introPanel)==null||a.hide();var o=this.messageElementRefs[this.messageElementRefs.length-1];return En.changeFullViewToSmall(this),!s&&e.isTemporaryElement(o)&&(this.revealRoleElementsIfTempRemoved(o,n),this.removeLastMessage()),this.createMessageElements(t,n,s)}},{key:"revealRoleElementsIfTempRemoved",value:function(t,n){if((this.avatar||this.name)&&Yn.isElementTemporary(t)){var s=this.messageElementRefs[this.messageElementRefs.length-2];s&&this.messageToElements.length>0&&!t.bubbleElement.classList.contains(Z.getRoleClass(n))&&Z.revealRoleElements(s.innerContainer,this.avatar,this.name)}}},{key:"createElements",value:function(t,n){var s=e.createBaseElements(n),i=s.outerContainer,a=s.innerContainer,o=s.bubbleElement;return i.appendChild(a),this.addInnerContainerElements(o,t,n),s}},{key:"createMessageElements",value:function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=this.createElements(t,n);return Z.updateRefArr(this.messageElementRefs,i,s),Z.classifyRoleMessages(this.messageElementRefs,n),i}},{key:"addInnerContainerElements",value:function(t,n,s){var i=this.messageElementRefs[this.messageElementRefs.length-1];return Z.areOuterContainerClassRolesSame(s,i)&&!this.isLastMessageError()&&Z.hideRoleElements(i.innerContainer,this.avatar,this.name),t.classList.add("message-bubble",Z.getRoleClass(s),s===Z.USER_ROLE?"user-message-text":"ai-message-text"),this.renderText(t,n),Z.addRoleElements(t,s,this.avatar,this.name),{bubbleElement:t}}},{key:"applyCustomStyles",value:function(t,n,s,i){t&&this.messageStyles&&xs.applyCustomStyles(this.messageStyles,t,n,s,i)}},{key:"removeMessage",value:function(t){t.outerContainer.remove();var n=this.messageElementRefs.findIndex(function(s){return s===t});this.messageElementRefs.splice(n,1)}},{key:"removeLastMessage",value:function(){this.messageElementRefs[this.messageElementRefs.length-1].outerContainer.remove(),this.messageElementRefs.pop()}},{key:"isLastMessageError",value:function(){var t;return(t=Z.getLastMessageBubbleElement(this.elementRef))==null?void 0:t.classList.contains(Z.ERROR_MESSAGE_TEXT_CLASS)}},{key:"sendClientUpdate",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s;(s=this._onMessage)==null||s.call(this,t,n)}},{key:"renderText",value:function(t,n){t.innerHTML=this._remarkable.render(n),t.innerText.trim().length===0&&(t.innerText=n)}},{key:"refreshTextMessages",value:function(t){var n=this;this._remarkable=pa.createNew(t),this.messageToElements.forEach(function(s){s[1].text&&s[0].text&&n.renderText(s[1].text.bubbleElement,s[0].text)})}}],[{key:"createContainerElement",value:function(){var t=document.createElement("div");return t.id="messages",t}},{key:"isTemporaryElement",value:function(t){return e.isLoadingMessage(t)||Yn.isElementTemporary(t)}},{key:"createBaseElements",value:function(t){var n=document.createElement("div"),s=document.createElement("div");s.classList.add("inner-message-container"),n.appendChild(s),n.classList.add("outer-message-container"),n.classList.add(Z.buildRoleOuterContainerClass(t));var i=document.createElement("div");return i.classList.add("message-bubble"),s.appendChild(i),{outerContainer:n,innerContainer:s,bubbleElement:i}}},{key:"createMessageContent",value:function(t){var n=t.text,s=t.files,i=t.html,a=t.custom,o=t._sessionId,l=t.role,u={role:l||Z.AI_ROLE};return n&&(u.text=n),s&&(u.files=s),i&&(u.html=i),!n&&!s&&!i&&(u.text=""),a&&(u.custom=a),o&&(u._sessionId=o),u}},{key:"isLoadingMessage",value:function(t){return t==null?void 0:t.bubbleElement.classList.contains(yn.BUBBLE_CLASS)}}])}();Ms.TEXT_BUBBLE_CLASS="text-message",Ms.INTRO_CLASS="deep-chat-intro",Ms.LAST_GROUP_MESSAGES_ACTIVE="deep-chat-last-group-messages-active";var It=Ms,Ut=function(){function e(){w(this,e)}return C(e,null,[{key:"getLastElementsByClass",value:function(t,n,s){for(var i=function(){var u=t[o];if(u.bubbleElement.classList.contains(n[0])&&!n.slice(1).find(function(c){return!u.bubbleElement.classList.contains(c)}))if(s){if(!s.find(function(c){return u.bubbleElement.classList.contains(c)}))return{v:u}}else return{v:u}},a,o=t.length-1;o>=0;o-=1)if(a=i(),a)return a.v}},{key:"getLastMessage",value:function(t,n,s){for(var i=t.length-1;i>=0;i-=1)if(t[i][0].role===n)if(s){if(t[i][0][s])return t[i][0]}else return t[i][0]}},{key:"getLastTextToElement",value:function(t,n){for(var s=t.length-1;s>=0;s-=1)if(t[s][0]===n)return t[s]}},{key:"overwriteMessage",value:function(t,n,s,i,a,o){var l=e.getLastElementsByClass(n,[e.getRoleClass(i),o],[yn.BUBBLE_CLASS]),u=e.getLastMessage(t,i,a);return u&&(u[a]=s),l}},{key:"getRoleClass",value:function(t){return"".concat(t,"-message")}},{key:"fillEmptyMessageElement",value:function(t,n){n.trim().length===0&&(t.classList.add(e.EMPTY_MESSAGE_CLASS),t.innerHTML='<div style="color:#00000000">.</div>')}},{key:"unfillEmptyMessageElement",value:function(t,n){t.classList.contains(e.EMPTY_MESSAGE_CLASS)&&n.trim().length>0&&t.replaceChildren()}},{key:"getLastMessageBubbleElement",value:function(t){var n,s,i,a;return(a=Array.from(((i=(s=(n=e.getLastMessageElement(t))==null?void 0:n.children)==null?void 0:s[0])==null?void 0:i.children)||[]).map(function(o){return Array.from((o==null?void 0:o.children)||[]).find(function(l){return l.classList.contains("message-bubble")})}))==null?void 0:a[0]}},{key:"getLastMessageElement",value:function(t){return t.children[t.children.length-1]}},{key:"addRoleElements",value:function(t,n,s,i){s==null||s.addBesideMsg(t,n),i==null||i.addBesideMsg(t,n)}},{key:"hideRoleElements",value:function(t,n,s){n==null||n.tryHide(t),s==null||s.tryHide(t)}},{key:"revealRoleElements",value:function(t,n,s){n==null||n.tryReveal(t),s==null||s.tryReveal(t)}},{key:"softRemRoleElements",value:function(t,n,s){n==null||n.trySoftRem(t),s==null||s.trySoftRem(t)}},{key:"updateRefArr",value:function(t,n,s){s?t.unshift(n):t.push(n)}},{key:"buildRoleOuterContainerClass",value:function(t){return"".concat(e.OUTER_CONTAINER_CLASS_ROLE_PREFIX).concat(t)}},{key:"addNewPositionClasses",value:function(t,n){var s;t.outerContainer.classList.remove(e.POSITION_TOP_MESSAGE_CLASS,e.POSITION_MIDDLE_MESSAGE_CLASS,e.POSITION_BOTTOM_MESSAGE_CLASS),(s=t.outerContainer.classList).add.apply(s,us(n))}},{key:"getNumberOfElements",value:function(t){var n=0;return t.text!==void 0&&(n+=1),t.html!==void 0&&(n+=1),t.files&&(n+=t.files.length),n}},{key:"filterdMessageElements",value:function(t,n){return t.filter(function(s){return s.bubbleElement.classList.contains(n)})}},{key:"findMessageElements",value:function(t,n){return t.find(function(s){return s.bubbleElement.classList.contains(n)})}},{key:"generateMessageBodyElements",value:function(t,n){var s={};return t.text&&(s.text=e.findMessageElements(n,It.TEXT_BUBBLE_CLASS)),t.html&&(s.html=e.findMessageElements(n,on.HTML_BUBBLE_CLASS)),t.files&&(s.files=e.filterdMessageElements(n,st.FILE_BUBBLE_CLASS)),s}},{key:"generateMessageBody",value:function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=e.getNumberOfElements(t),a=s?n.slice(0,i):n.slice(n.length-i);return e.generateMessageBodyElements(t,a)}},{key:"classifyRoleMessages",value:function(t,n){for(var s=n?e.buildRoleOuterContainerClass(n):void 0,i=t.length-1;i>=0;i-=1)if(n||(s=Array.from(t[i].outerContainer.classList).find(function(h){return h.startsWith(e.OUTER_CONTAINER_CLASS_ROLE_PREFIX)})),!!s){var a=t[i],o=a.outerContainer.classList.contains(s),l=t[i-1],u=t[i+1],c=l==null?void 0:l.outerContainer.classList.contains(s),d=u==null?void 0:u.outerContainer.classList.contains(s);if(o)!c&&d?e.addNewPositionClasses(a,[e.POSITION_TOP_MESSAGE_CLASS]):c&&d?e.addNewPositionClasses(a,[e.POSITION_MIDDLE_MESSAGE_CLASS]):c&&!d?e.addNewPositionClasses(a,[e.POSITION_BOTTOM_MESSAGE_CLASS]):!c&&!d&&e.addNewPositionClasses(a,[e.POSITION_TOP_MESSAGE_CLASS,e.POSITION_BOTTOM_MESSAGE_CLASS]);else if(n)break}}},{key:"areOuterContainerClassRolesSame",value:function(t,n){return n?Array.from(n.outerContainer.classList).find(function(s){return s.startsWith(e.OUTER_CONTAINER_CLASS_ROLE_PREFIX)})===e.buildRoleOuterContainerClass(t):!1}},{key:"resetAllRoleElements",value:function(t,n,s){if(!(!n&&!s)){var i="";t.forEach(function(a,o){a.bubbleElement.classList.contains(e.ERROR_MESSAGE_TEXT_CLASS)||e.revealRoleElements(a.innerContainer,n,s);var l=Array.from(a.outerContainer.classList).find(function(u){return u.startsWith(e.OUTER_CONTAINER_CLASS_ROLE_PREFIX)});i===l&&e.hideRoleElements(t[o-1].innerContainer,n,s),i=l})}}}])}();Ut.AI_ROLE="ai",Ut.USER_ROLE="user",Ut.ERROR_MESSAGE_TEXT_CLASS="error-message-text",Ut.OUTER_CONTAINER_CLASS_ROLE_PREFIX="deep-chat-outer-container-role-",Ut.EMPTY_MESSAGE_CLASS="empty-message",Ut.POSITION_TOP_MESSAGE_CLASS="deep-chat-top-message",Ut.POSITION_MIDDLE_MESSAGE_CLASS="deep-chat-middle-message",Ut.POSITION_BOTTOM_MESSAGE_CLASS="deep-chat-bottom-message";var Z=Ut,Td=function(){function e(r){w(this,e),this._fileAdded=!1,this._streamType="",this._hasStreamEnded=!1,this._messages=r}return C(e,[{key:"upsertStreamedMessage",value:function(t){var n;if(!this._hasStreamEnded){if((t==null?void 0:t.text)===void 0&&(t==null?void 0:t.html)===void 0)return console.error(xe.INVALID_STREAM_EVENT);t!=null&&t.custom&&this._message&&(this._message.custom=t.custom);var s=(t==null?void 0:t.text)||(t==null?void 0:t.html)||"",i=pt.isScrollbarAtBottomOfElement(this._messages.elementRef),a=(t==null?void 0:t.text)!==void 0?"text":"html";if(!this._elements&&!this._message)this.setInitialState(a,s,t==null?void 0:t.role);else{if(this._streamType!==a)return console.error(xe.INVALID_STREAM_EVENT_MIX);this.updateBasedOnType(s,a,(n=this._elements)==null?void 0:n.bubbleElement,t==null?void 0:t.overwrite)}i&&pt.scrollToBottom(this._messages.elementRef)}}},{key:"setInitialState",value:function(t,n,s){this._streamType=t,s??(s=Z.AI_ROLE),this._elements=t==="text"?this._messages.addNewTextMessage(n,s):on.add(this._messages,n,s),this._elements&&(this._elements.bubbleElement.classList.add(e.MESSAGE_CLASS),this._activeMessageRole=s,this._message=Ks({role:this._activeMessageRole},t,n),this._messages.messageToElements.push([this._message,Ks({},t,this._elements)]))}},{key:"updateBasedOnType",value:function(t,n,s){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;Z.unfillEmptyMessageElement(s,t),(n==="text"?this.updateText:this.updateHTML).bind(this)(t,s,i)}},{key:"updateText",value:function(t,n,s){this._message&&(this._message.text=s?t:this._message.text+t,this._messages.renderText(n,this._message.text))}},{key:"updateHTML",value:function(t,n,s){if(this._message)if(s)this._message.html=t,n.innerHTML=t;else{var i=document.createElement("span");i.innerHTML=t,n.appendChild(i),this._message.html=(n==null?void 0:n.innerHTML)||""}}},{key:"finaliseStreamedMessage",value:function(){var t;if(!(this._endStreamAfterOperation||!this._message)&&!(this._fileAdded&&!this._elements)){if(!this._elements)throw Error(xe.NO_VALID_STREAM_EVENTS_SENT);(t=this._elements.bubbleElement)!=null&&t.classList.contains(e.MESSAGE_CLASS)&&(this._streamType==="text"?this._messages.textToSpeech&&As.speak(this._message.text||"",this._messages.textToSpeech):this._streamType==="html"&&this._elements&&an.apply(this._messages,this._elements.outerContainer),this._elements.bubbleElement.classList.remove(e.MESSAGE_CLASS),this._message&&this._messages.sendClientUpdate(It.createMessageContent(this._message),!1),this._hasStreamEnded=!0)}}},{key:"markFileAdded",value:function(){this._fileAdded=!0}},{key:"newMessage",value:function(){this.finaliseStreamedMessage(),this._elements=void 0,delete this._message,this._fileAdded=!1,this._hasStreamEnded=!1,this._activeMessageRole=void 0}},{key:"endStreamAfterFileDownloaded",value:function(){var r=A(v().mark(function n(s,i){var a,o,l,u;return v().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this._endStreamAfterOperation=!0,d.next=3,i();case 3:o=d.sent,l=o.text,u=o.files,l&&this.updateBasedOnType(l,"text",(a=this._elements)==null?void 0:a.bubbleElement,!0),this._endStreamAfterOperation=!1,this.finaliseStreamedMessage(),u&&s.addNewMessage({files:u});case 7:case"end":return d.stop()}},n,this)}));function t(n,s){return r.apply(this,arguments)}return t}()}])}();Td.MESSAGE_CLASS="streamed-message";var ln=Td,Ad=function(){function e(){w(this,e)}return C(e,null,[{key:"tempRemoveContentHeader",value:function(){var r=A(v().mark(function n(s,i,a){var o,l;return v().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(s!=null&&s.headers){c.next=2;break}throw new Error("Request settings have not been set up");case 2:return o=s.headers[e.CONTENT_TYPE],delete s.headers[e.CONTENT_TYPE],c.prev=4,c.next=7,i(a);case 7:l=c.sent,c.next=13;break;case 10:throw c.prev=10,c.t0=c.catch(4),s.headers[e.CONTENT_TYPE]=o,c.t0;case 13:return c.abrupt("return",(s.headers[e.CONTENT_TYPE]=o,l));case 14:case"end":return c.stop()}},n,null,[[4,10]])}));function t(n,s,i){return r.apply(this,arguments)}return t}()},{key:"displayError",value:function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Service error, please try again.";if(console.error(n),W(n)=="object")return n instanceof Error?t.addNewErrorMessage("service",n.message):Array.isArray(n)||typeof n.error=="string"?t.addNewErrorMessage("service",n):Object.keys(n).length===0?t.addNewErrorMessage("service",s):t.addNewErrorMessage("service",JSON.stringify(n));t.addNewErrorMessage("service",n)}},{key:"fetch",value:function(r){function t(n,s,i,a){return r.apply(this,arguments)}return t.toString=function(){return r.toString()},t}(function(r,t,n,s){var i,a,o={method:((i=r.connectSettings)==null?void 0:i.method)||"POST",headers:t};return o.method!=="GET"&&(o.body=n?JSON.stringify(s):s),r.connectSettings.credentials&&(o.credentials=r.connectSettings.credentials),fetch(((a=r.connectSettings)==null?void 0:a.url)||r.url||"",o)})},{key:"processResponseByType",value:function(t){var n=t.headers.get("content-type");return n!=null&&n.includes("application/json")?t.json():n!=null&&n.includes("text/plain")||!n?t:t.blob()}},{key:"processRequestInterceptor",value:function(){var r=A(v().mark(function n(s,i){var a,o,l,u;return v().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(a=s.requestInterceptor)==null?void 0:a.call(s,i);case 2:if(d.t0=d.sent,d.t0){d.next=5;break}d.t0=i;case 5:return o=d.t0,l=o,u=o,d.abrupt("return",{body:l.body,headers:l.headers,error:u.error});case 9:case"end":return d.stop()}},n)}));function t(n,s){return r.apply(this,arguments)}return t}()},{key:"validateResponseFormat",value:function(t,n){if(!t)return!1;var s=Array.isArray(t)?t:[t];return n&&s.length>1?(console.error(xe.INVALID_STREAM_ARRAY_RESPONSE),!1):!s.find(function(i){return W(i)!="object"||!(typeof i.error=="string"||typeof i.text=="string"||typeof i.html=="string"||Array.isArray(i.files))})}},{key:"onInterceptorError",value:function(t,n,s){t.addNewErrorMessage("service",n),s==null||s()}},{key:"basicResponseProcessing",value:function(){var r=A(v().mark(function n(s,i){var a,o,l,u,c,d,h,f,m,p,y=arguments;return v().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(a=y.length>2&&y[2]!==void 0?y[2]:{},o=a.io,l=a.displayError,u=l===void 0?!0:l,c=a.useRI,d=c===void 0?!0:c,o!=null&&o.extractResultData){S.next=4;break}return S.abrupt("return",i);case 4:return h=d?o.deepChat.responseInterceptor:void 0,S.next=7,h==null?void 0:h(i);case 7:if(S.t0=S.sent,S.t0){S.next=10;break}S.t0=i;case 10:return f=S.t0,S.next=13,o.extractResultData(f);case 13:if(m=S.sent,!(!m||W(m)!="object"&&!Array.isArray(m))){S.next=17;break}return u&&(p=xe.INVALID_RESPONSE(i,"response",!!h,f),e.displayError(s,p)),S.abrupt("return");case 17:return S.abrupt("return",m);case 18:case"end":return S.stop()}},n)}));function t(n,s){return r.apply(this,arguments)}return t}()}])}();Ad.CONTENT_TYPE="Content-Type";var oe=Ad;function Ty(e,r){return va.apply(this,arguments)}function va(){return va=A(v().mark(function e(r,t){var n,s;return v().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:n=r.getReader();case 1:return a.next=3,n.read();case 3:if((s=a.sent).done){a.next=7;break}t(s.value);case 5:a.next=1;break;case 7:case"end":return a.stop()}},e)})),va.apply(this,arguments)}function Ay(e){var r,t,n,s=!1;return function(i){r===void 0?(r=i,t=0,n=-1):r=Ry(r,i);for(var a=r.length,o=0;t<a;){s&&(r[t]===10&&(o=++t),s=!1);for(var l=-1;t<a&&l===-1;++t)switch(r[t]){case 58:n===-1&&(n=t-o);break;case 13:s=!0;case 10:l=t;break}if(l===-1)break;e(r.subarray(o,l),n),o=t,n=-1}o===a?r=void 0:o!==0&&(r=r.subarray(o),t-=o)}}function xy(e,r,t){var n=$l(),s=new TextDecoder;return function(i,a){if(i.length===0)t==null||t(n),n=$l();else if(a>0){var o=s.decode(i.subarray(0,a)),l=a+(i[a+1]===32?2:1),u=s.decode(i.subarray(l));switch(o){case"data":n.data=n.data?n.data+`
`+u:u;break;case"event":n.event=u;break;case"id":e(n.id=u);break;case"retry":var c=parseInt(u,10);isNaN(c)||r(n.retry=c);break}}}}function Ry(e,r){var t=new Uint8Array(e.length+r.length);return t.set(e),t.set(r,e.length),t}function $l(){return{data:"",event:"",id:"",retry:void 0}}var My=function(r,t){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&t.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(r);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(r,s[i])&&(n[s[i]]=r[s[i]]);return n},ga="text/event-stream",Iy=1e3,Vl="last-event-id";function Ly(e,r){var t=r.signal,n=r.headers,s=r.onopen,i=r.onmessage,a=r.onclose,o=r.onerror,l=r.openWhenHidden,u=r.fetch,c=My(r,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise(function(d,h){var f=Object.assign({},n);f.accept||(f.accept=ga);var m;function p(){m.abort(),document.hidden||x()}l||document.addEventListener("visibilitychange",p);var y=Iy,g=0;function S(){document.removeEventListener("visibilitychange",p),window.clearTimeout(g),m.abort()}t==null||t.addEventListener("abort",function(){S(),d()});var k=u??window.fetch,T=s??Oy;function x(){return I.apply(this,arguments)}function I(){return I=A(v().mark(function F(){var $,ae,me;return v().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return m=new AbortController,se.prev=1,se.next=4,k(e,Object.assign(Object.assign({},c),{headers:f,signal:m.signal}));case 4:return ae=se.sent,se.next=7,T(ae);case 7:return se.next=9,Ty(ae.body,Ay(xy(function(ge){ge?f[Vl]=ge:delete f[Vl]},function(ge){y=ge},i)));case 9:a==null||a(),S(),d(),se.next=17;break;case 14:if(se.prev=14,se.t0=se.catch(1),!m.signal.aborted)try{me=($=o==null?void 0:o(se.t0))!==null&&$!==void 0?$:y,window.clearTimeout(g),g=window.setTimeout(x,me)}catch(ge){S(),h(ge)}case 17:case"end":return se.stop()}},F,null,[[1,14]])})),I.apply(this,arguments)}x()})}function Oy(e){var r=e.headers.get("content-type");if(!(r!=null&&r.startsWith(ga)))throw new Error("Expected content-type to be ".concat(ga,", Actual: ").concat(r))}var je=function(){function e(){w(this,e)}return C(e,null,[{key:"request",value:function(){var r=A(v().mark(function n(s,i,a){var o,l,u,c,d,h,f,m,p,y,g,S,k,T,x,I=arguments;return v().wrap(function($){for(;;)switch($.prev=$.next){case 0:return o=I.length>3&&I[3]!==void 0?I[3]:!0,l=I.length>4&&I[4]!==void 0?I[4]:!1,m={body:i,headers:(u=s.connectSettings)==null?void 0:u.headers},$.next=5,oe.processRequestInterceptor(s.deepChat,m);case 5:if(p=$.sent,y=p.body,g=p.headers,S=p.error,!S){$.next=11;break}return $.abrupt("return",oe.onInterceptorError(a,S,s.streamHandlers.onClose));case 11:if(!((c=s.connectSettings)!=null&&c.handler)){$.next=13;break}return $.abrupt("return",ao.stream(s,y,a));case 13:if(((d=s.connectSettings)==null?void 0:d.url)!==Jt.URL){$.next=15;break}return $.abrupt("return",Jt.requestStream(a,s));case 15:return k=new ln(a),T=oe.fetch.bind(this,s,g,o),x={method:((h=s.connectSettings)==null?void 0:h.method)||"POST",headers:g,credentials:(f=s.connectSettings)==null?void 0:f.credentials,body:o?JSON.stringify(y):y},$.abrupt("return",(W(s.stream)=="object"&&s.stream.readable?e.handleReadableStream(s,a,k,x,l,T,y):e.handleEventStream(s,a,k,x,l,T,y),k));case 17:case"end":return $.stop()}},n,this)}));function t(n,s,i){return r.apply(this,arguments)}return t}()},{key:"handleReadableStream",value:function(t,n,s,i,a,o,l){var u,c=t.streamHandlers,d=c.onOpen,h=c.onClose,f=c.abortStream,m=!1;fetch(((u=t.connectSettings)==null?void 0:u.url)||t.url||"",i).then(function(){var p=A(v().mark(function y(g){var S,k,T,x,I,F,$,ae,me,re,se;return v().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(g.body){z.next=2;break}throw new Error(xe.READABLE_STREAM_CONNECTION_ERROR);case 2:T=g.body.getReader(),x=new TextDecoder,d(),I=!1;case 5:if(!(!I&&!m)){z.next=26;break}return z.next=8,T.read();case 8:if(F=z.sent,$=F.value,ae=F.done,I=ae,!I){z.next=15;break}e.handleClose(t,s,h,a),z.next=24;break;case 15:return me=x.decode($,{stream:!0}),z.next=18,(k=(S=t.deepChat).responseInterceptor)==null?void 0:k.call(S,me);case 18:if(z.t0=z.sent,z.t0){z.next=21;break}z.t0=me;case 21:re=z.t0,se=W(re)=="object"?re:{text:me},e.handleMessage(t,n,s,h,se,o,l);case 24:z.next=5;break;case 26:case"end":return z.stop()}},y)}));return function(y){return p.apply(this,arguments)}}()).catch(function(p){e.handleError(t,n,p)}),f.abort=function(){m=!0}}},{key:"handleEventStream",value:function(t,n,s,i,a,o,l){var u,c=t.streamHandlers,d=c.onOpen,h=c.onClose,f=c.abortStream;Ly(((u=t.connectSettings)==null?void 0:u.url)||t.url||"",ve(ve({},i),{},{openWhenHidden:!0,onopen:function(p){return A(v().mark(function y(){return v().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(!p.ok){S.next=2;break}return S.abrupt("return",d());case 2:return S.next=4,oe.processResponseByType(p);case 4:throw S.sent;case 5:case"end":return S.stop()}},y)}))()},onmessage:function(p){return A(v().mark(function y(){var g,S,k,T;return v().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(JSON.stringify(p.data)===JSON.stringify("[DONE]")){I.next=9;break}try{k=JSON.parse(p.data)}catch{k={}}return I.next=4,(S=(g=t.deepChat).responseInterceptor)==null?void 0:S.call(g,k);case 4:if(I.t0=I.sent,I.t0){I.next=7;break}I.t0=k;case 7:T=I.t0,e.handleMessage(t,n,s,h,T,o,l);case 9:case"end":return I.stop()}},y)}))()},onerror:function(p){throw h(),p},onclose:function(){e.handleClose(t,s,h,a)},signal:f.signal})).catch(function(m){e.handleError(t,n,m)})}},{key:"handleMessage",value:function(t,n,s,i,a,o,l){var u;(u=t.extractResultData)==null||u.call(t,a,o,l).then(function(c){t.asyncCallInProgress&&c&&c.text!==""?(e.simulate(n,t.streamHandlers,c),i(),t.asyncCallInProgress=!1):e.upsertWFiles(n,s.upsertStreamedMessage.bind(s),s,c)}).catch(function(c){return oe.displayError(n,c)})}},{key:"handleError",value:function(t,n,s){var i;n.isLastMessageError()||(i=t.extractResultData)==null||i.call(t,s).then(function(){oe.displayError(n,s)}).catch(function(a){oe.displayError(n,a)})}},{key:"handleClose",value:function(t,n,s,i){if(!t.asyncCallInProgress)try{n.finaliseStreamedMessage(),s()}catch(a){if(!i)throw a}}},{key:"simulate",value:function(){var r=A(v().mark(function n(s,i,a,o){var l,u,c,d;return v().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return l=i,f.next=3,oe.basicResponseProcessing(s,a,{io:o,useRI:!1});case 3:if(f.sent){f.next=5;break}return f.abrupt("return",i.onClose());case 5:if(Array.isArray(a)&&(a=a[0]),!a.files){f.next=10;break}return f.next=8,oe.basicResponseProcessing(s,{files:a.files},{io:o});case 8:u=f.sent,s.addNewMessage(ve({sendUpdate:!1,ignoreText:!0},u),!1);case 10:a.text&&(i.onOpen(),c=a.text.split(""),e.populateMessages(s,c,new ln(s),l,"text",0,o)),a.html&&(i.onOpen(),d=an.splitHTML(a.html),d.length===0&&(d=a.html.split("")),e.populateMessages(s,d,new ln(s),l,"html",0,o)),a.error&&(oe.displayError(s,a.error),i.onClose());case 13:case"end":return f.stop()}},n)}));function t(n,s,i,a){return r.apply(this,arguments)}return t}()},{key:"populateMessages",value:function(){var r=A(v().mark(function n(s,i,a,o,l,u,c){var d,h,f;return v().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(d=i[u],!d){p.next=10;break}return p.next=4,oe.basicResponseProcessing(s,Ks({},l,d),{io:c});case 4:h=p.sent,e.upsertWFiles(s,a.upsertStreamedMessage.bind(a),a,h),f=setTimeout(function(){e.populateMessages(s,i,a,o,l,u+1,c)},o.simulationInterim||6),o.abortStream.abort=function(){e.abort(f,a,o.onClose)},p.next=11;break;case 10:a.finaliseStreamedMessage(),o.onClose();case 11:case"end":return p.stop()}},n)}));function t(n,s,i,a,o,l,u){return r.apply(this,arguments)}return t}()},{key:"isSimulation",value:function(t){return W(t)=="object"&&!!t.simulation}},{key:"isSimulatable",value:function(t,n){return e.isSimulation(t)&&n&&(n.text||n.html)}},{key:"abort",value:function(t,n,s){clearTimeout(t),n.finaliseStreamedMessage(),s()}},{key:"upsertWFiles",value:function(t,n,s,i){if(i&&Array.isArray(i)&&(i=i[0]),i!=null&&i.text||i!=null&&i.html){var a=n(i);s??(s=a||void 0)}i!=null&&i.files&&(t.addNewMessage({files:i.files}),s==null||s.markFileAdded())}}])}(),xd=function(){function e(){w(this,e)}return C(e,null,[{key:"generateResponse",value:function(t){var n=t[t.length-1][0];if(n.files&&n.files.length>0){if(n.files.length>1)return"These are interesting files!";var s=n.files[0];return s.src&&s.src.startsWith("data:image/gif")?"That is a nice gif!":s.type==="image"?"That is a nice image!":s.type==="audio"?"I like the sound of that!":"That is an interesting file!"}if(n.text){if(n.text.charAt(n.text.length-1)==="?")return"I'm sorry but I can't answer that question...";if(n.text.includes("updog"))return"What's updog?"}return"Hi there! This is a demo response!"}},{key:"getCustomResponse",value:function(t,n){return typeof t=="function"?t(n):t}},{key:"getResponse",value:function(t){var n=t.customDemoResponse,s=t.messageToElements;return n?e.getCustomResponse(n,s[s.length-1][0]):{text:e.generateResponse(s)}}},{key:"request",value:function(t,n){var s=e.getResponse(n);setTimeout(A(v().mark(function i(){var a,o,l;return v().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,oe.basicResponseProcessing(n,s,{io:t});case 2:if(a=c.sent,a){c.next=5;break}return c.abrupt("return",t.completionsHandlers.onFinish());case 5:o=Array.isArray(a)?a:[a],l=o.find(function(d){return typeof d.error=="string"}),l?(n.addNewErrorMessage("service",l.error),t.completionsHandlers.onFinish()):je.isSimulatable(t.stream,a)?je.simulate(n,t.streamHandlers,a):(o.forEach(function(d){return n.addNewMessage(d)}),t.completionsHandlers.onFinish());case 7:case"end":return c.stop()}},i)})),400)}},{key:"requestStream",value:function(t,n){setTimeout(function(){var s=e.getResponse(t);je.simulate(t,n.streamHandlers,s,n)},400)}}])}();xd.URL="deep-chat-demo";var Jt=xd,is=function(){function e(){w(this,e)}return C(e,null,[{key:"setup",value:function(t){t.permittedErrorPrefixes=["Connection error","Error in server message"],t.websocket="pending"}},{key:"isElementPresentInDOM",value:function(t){return t.getRootNode({composed:!0})instanceof Document}},{key:"createConnection",value:function(t,n){if(e.isElementPresentInDOM(t.deepChat)){var s=t.connectSettings.websocket;if(s){if(t.connectSettings.handler)return ao.websocket(t,n);try{var i=typeof s!="boolean"?s:void 0,a=new WebSocket(t.connectSettings.url||"",i);t.websocket=a,t.websocket.onopen=function(){var o,l;n.removeError(),t.websocket&&W(t.websocket)=="object"&&e.assignListeners(t,a,n),(l=(o=t.deepChat)._validationHandler)==null||l.call(o)},t.websocket.onerror=function(o){console.error(o),e.retryConnection(t,n)}}catch(o){console.error(o),e.retryConnection(t,n)}}}}},{key:"retryConnection",value:function(t,n){var s,i;(i=(s=t.deepChat)._validationHandler)==null||i.call(s),e.isElementPresentInDOM(t.deepChat)&&(t.websocket="pending",n.isLastMessageError()||n.addNewErrorMessage("service","Connection error"),setTimeout(function(){e.createConnection(t,n)},5e3))}},{key:"assignListeners",value:function(t,n,s){var i=this,a={};n.onmessage=function(){var o=A(v().mark(function l(u){var c,d,h,f,m,p;return v().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(!t.extractResultData){g.next=22;break}return g.prev=1,c=JSON.parse(u.data),g.next=5,oe.basicResponseProcessing(s,c,{io:t,displayError:!1});case 5:if(d=g.sent,d){g.next=8;break}throw Error(xe.INVALID_RESPONSE(c,"server",!!t.deepChat.responseInterceptor,d));case 8:if(!je.isSimulation(t.stream)){g.next=13;break}h=e.stream.bind(i,t,s,a),f=a[c.role||Z.AI_ROLE],je.upsertWFiles(s,h,f,d),g.next=17;break;case 13:if(m=Array.isArray(d)?d:[d],p=m.find(function(S){return typeof S.error=="string"}),!p){g.next=16;break}throw p.error;case 16:m.forEach(function(S){return s.addNewMessage(S)});case 17:g.next=22;break;case 19:g.prev=19,g.t0=g.catch(1),oe.displayError(s,g.t0,"Error in server message");case 22:case"end":return g.stop()}},l,null,[[1,19]])}));return function(l){return o.apply(this,arguments)}}(),n.onclose=function(){console.error("Connection closed"),s.isLastMessageError()||s.addNewErrorMessage("service","Connection error"),t.stream&&t.streamHandlers.abortStream.abort(),e.createConnection(t,s)}}},{key:"sendWebsocket",value:function(){var r=A(v().mark(function n(s,i,a){var o,l,u,c,d,h,f,m,p,y=arguments;return v().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(o=y.length>3&&y[3]!==void 0?y[3]:!0,((l=s.connectSettings)==null?void 0:l.url)!==Jt.URL){S.next=3;break}return S.abrupt("return",Jt.request(s,a));case 3:if(c=s.websocket,!(!c||c==="pending")){S.next=6;break}return S.abrupt("return");case 6:return d={body:i,headers:(u=s.connectSettings)==null?void 0:u.headers},S.next=9,oe.processRequestInterceptor(s.deepChat,d);case 9:if(h=S.sent,f=h.body,m=h.error,!m){S.next=14;break}return S.abrupt("return",a.addNewErrorMessage("service",m));case 14:if(e.isWebSocket(c)){S.next=16;break}return S.abrupt("return",c.newUserMessage.listener(f));case 16:p=o?JSON.stringify(f):f,c.readyState===void 0||c.readyState!==c.OPEN?(console.error("Connection is not open"),a.isLastMessageError()||a.addNewErrorMessage("service","Connection error")):(c.send(JSON.stringify(p)),s.completionsHandlers.onFinish());case 18:case"end":return S.stop()}},n)}));function t(n,s,i){return r.apply(this,arguments)}return t}()},{key:"canSendMessage",value:function(t){return t?t==="pending"?!1:e.isWebSocket(t)?t.readyState!==void 0&&t.readyState===t.OPEN:t.isOpen:!0}},{key:"isWebSocket",value:function(t){return t.send!==void 0}},{key:"stream",value:function(t,n,s,i){if(i){var a=t.stream.simulation;if(typeof a=="string"){var o,l=i.role||Z.AI_ROLE,u=s[l];i.text===a||i.html===a?(u==null||u.finaliseStreamedMessage(),delete s[l]):((o=s[l])!==null&&o!==void 0||(s[l]=new ln(n)),s[l].upsertStreamedMessage(i))}else je.simulate(n,t.streamHandlers,i)}}}])}(),ao=function(){function e(){w(this,e)}return C(e,null,[{key:"request",value:function(){var r=A(v().mark(function n(s,i,a){var o,l,u,c,d;return v().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:u=!0,c=function(){var m=A(v().mark(function p(y){var g,S,k;return v().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(u){x.next=2;break}return x.abrupt("return");case 2:return u=!1,x.next=5,oe.basicResponseProcessing(a,y,{io:s,displayError:!1});case 5:g=x.sent,g?(S=Array.isArray(g)?g:[g],k=S.find(function(I){return typeof I.error=="string"}),k?(console.error(k.error),a.addNewErrorMessage("service",k.error),s.completionsHandlers.onFinish()):je.isSimulatable(s.stream,g)?je.simulate(a,s.streamHandlers,g):(S.forEach(function(I){return a.addNewMessage(I)}),s.completionsHandlers.onFinish())):(console.error(xe.INVALID_RESPONSE(y,"server",!!s.deepChat.responseInterceptor,g)),a.addNewErrorMessage("service","Error in server message"),s.completionsHandlers.onFinish());case 7:case"end":return x.stop()}},p)}));return function(y){return m.apply(this,arguments)}}(),d=e.generateOptionalSignals(),(l=(o=s.connectSettings).handler)==null||l.call(o,i,ve(ve({},d),{},{onResponse:c}));case 3:case"end":return f.stop()}},n)}));function t(n,s,i){return r.apply(this,arguments)}return t}()},{key:"attemptToFinaliseStream",value:function(t,n){try{var s=n.messageElementRefs[n.messageElementRefs.length-1];It.isLoadingMessage(s)?n.removeLastMessage():t.finaliseStreamedMessage()}catch(i){console.error(i),n.addNewErrorMessage("service",i)}}},{key:"stream",value:function(t,n,s){var i,a,o=!0,l=!1,u=new ln(s),c=function(){l||!o||(t.streamHandlers.onOpen(),l=!0)},d=function(){o&&(e.attemptToFinaliseStream(u,s),t.streamHandlers.onClose(),o=!1)},h=function(){var m=A(v().mark(function p(y){var g,S;return v().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(o){T.next=2;break}return T.abrupt("return");case 2:return T.next=4,oe.basicResponseProcessing(s,y,{io:t,displayError:!1});case 4:g=T.sent,g?g.error?(e.streamError(g.error,u,t,s),o=!1):je.upsertWFiles(s,u.upsertStreamedMessage.bind(u),u,g):(S=xe.INVALID_RESPONSE(y,"server",!!t.deepChat.responseInterceptor,g),e.streamError(S,u,t,s),o=!1);case 6:case"end":return T.stop()}},p)}));return function(y){return m.apply(this,arguments)}}();t.streamHandlers.abortStream.abort=function(){e.attemptToFinaliseStream(u,s),t.streamHandlers.onClose(),o=!1};var f=e.generateOptionalSignals();(a=(i=t.connectSettings).handler)==null||a.call(i,n,ve(ve({},f),{},{onOpen:c,onResponse:h,onClose:d,stopClicked:t.streamHandlers.stopClicked}))}},{key:"streamError",value:function(t,n,s,i){console.error(t),n.finaliseStreamedMessage(),i.addNewErrorMessage("service",t),s.streamHandlers.onClose()}},{key:"websocket",value:function(t,n){var s=this,i,a,o={isOpen:!1,newUserMessage:{listener:function(){}},roleToStream:{}};t.websocket=o;var l=function(){n.removeError(),o.isOpen=!0},u=function(){o.isOpen=!1},c=function(){var h=A(v().mark(function f(m){var p,y,g,S,k,T;return v().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(o.isOpen){I.next=2;break}return I.abrupt("return");case 2:return I.next=4,oe.basicResponseProcessing(n,m,{io:t,displayError:!1});case 4:p=I.sent,p?(y=Array.isArray(p)?p:[p],g=y.find(function(F){return typeof F.error=="string"}),g?(console.error(g.error),n.isLastMessageError()||n.addNewErrorMessage("service",g.error)):je.isSimulation(t.stream)?(S=p,k=is.stream.bind(s,t,n,o.roleToStream),T=o.roleToStream[S.role||Z.AI_ROLE],je.upsertWFiles(n,k,T,S)):y.forEach(function(F){return n.addNewMessage(F)})):(console.error(xe.INVALID_RESPONSE(m,"server",!!t.deepChat.responseInterceptor,p)),n.addNewErrorMessage("service","Error in server message"));case 6:case"end":return I.stop()}},f)}));return function(m){return h.apply(this,arguments)}}(),d=e.generateOptionalSignals();(a=(i=t.connectSettings).handler)==null||a.call(i,void 0,ve(ve({},d),{},{onOpen:l,onResponse:c,onClose:u,newUserMessage:o.newUserMessage}))}},{key:"generateOptionalSignals",value:function(){return{onClose:function(){},onOpen:function(){},stopClicked:{listener:function(){}},newUserMessage:{listener:function(){}}}}}])}(),Ie=function(){function e(){w(this,e)}return C(e,null,[{key:"request",value:function(){var r=A(v().mark(function n(s,i,a){var o,l,u,c,d,h,f,m,p,y,g,S,k=arguments;return v().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return o=k.length>3&&k[3]!==void 0?k[3]:!0,d={body:i,headers:(l=s.connectSettings)==null?void 0:l.headers},x.next=4,oe.processRequestInterceptor(s.deepChat,d);case 4:if(h=x.sent,f=h.body,m=h.headers,p=h.error,y=s.completionsHandlers.onFinish,!p){x.next=11;break}return x.abrupt("return",oe.onInterceptorError(a,p,y));case 11:if(!((u=s.connectSettings)!=null&&u.handler)){x.next=13;break}return x.abrupt("return",ao.request(s,f,a));case 13:if(((c=s.connectSettings)==null?void 0:c.url)!==Jt.URL){x.next=15;break}return x.abrupt("return",Jt.request(s,a));case 15:g=!0,S=oe.fetch.bind(this,s,m,o),S(f).then(function(I){return g=!!I.ok,I}).then(function(I){return oe.processResponseByType(I)}).then(function(){var I=A(v().mark(function F($){var ae,me,re,se;return v().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(s.extractResultData){z.next=2;break}return z.abrupt("return");case 2:return z.next=4,(me=(ae=s.deepChat).responseInterceptor)==null?void 0:me.call(ae,$);case 4:if(z.t0=z.sent,z.t0){z.next=7;break}z.t0=$;case 7:return re=z.t0,z.next=10,s.extractResultData(re,S,f);case 10:if(se=z.sent,g){z.next=13;break}throw $;case 13:if(!(!se||W(se)!="object"&&!Array.isArray(se))){z.next=15;break}throw Error(xe.INVALID_RESPONSE($,"response",!!s.deepChat.responseInterceptor,re));case 15:se.makingAnotherRequest||(je.isSimulatable(s.stream,se)?je.simulate(a,s.streamHandlers,se):((Array.isArray(se)?se:[se]).forEach(function(De){return a.addNewMessage(De)}),y()));case 16:case"end":return z.stop()}},F)}));return function(F){return I.apply(this,arguments)}}()).catch(function(I){oe.displayError(a,I),y()});case 18:case"end":return x.stop()}},n,this)}));function t(n,s,i){return r.apply(this,arguments)}return t}()},{key:"executePollRequest",value:function(t,n,s,i){var a=t.completionsHandlers.onFinish;fetch(n,s).then(function(o){return o.json()}).then(function(){var o=A(v().mark(function l(u){var c,d,h;return v().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(t.extractPollResultData){m.next=2;break}return m.abrupt("return");case 2:return m.t0=t,m.next=5,(d=(c=t.deepChat).responseInterceptor)==null?void 0:d.call(c,u);case 5:if(m.t1=m.sent,m.t1){m.next=8;break}m.t1=u;case 8:return m.t2=m.t1,m.next=11,m.t0.extractPollResultData.call(m.t0,m.t2);case 11:h=m.sent,h.timeoutMS?setTimeout(function(){e.executePollRequest(t,n,s,i)},h.timeoutMS):je.isSimulatable(t.stream,h)?je.simulate(i,t.streamHandlers,h):(i.addNewMessage(h),a());case 13:case"end":return m.stop()}},l)}));return function(l){return o.apply(this,arguments)}}()).catch(function(o){oe.displayError(i,o),a()})}},{key:"poll",value:function(){var r=A(v().mark(function n(s,i,a){var o,l,u,c,d,h,f,m,p,y,g,S,k,T=arguments;return v().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return o=T.length>3&&T[3]!==void 0?T[3]:!0,d={body:i,headers:(l=s.connectSettings)==null?void 0:l.headers},I.next=4,oe.processRequestInterceptor(s.deepChat,d);case 4:if(h=I.sent,f=h.body,m=h.headers,p=h.error,!p){I.next=10;break}return I.abrupt("return",oe.onInterceptorError(a,p));case 10:y=((u=s.connectSettings)==null?void 0:u.url)||s.url||"",g=((c=s.connectSettings)==null?void 0:c.method)||"POST",S=o?JSON.stringify(f):f,k={method:g,body:S,headers:m},s.connectSettings.credentials&&(k.credentials=s.connectSettings.credentials),e.executePollRequest(s,y,k,a);case 12:case"end":return I.stop()}},n)}));function t(n,s,i){return r.apply(this,arguments)}return t}()},{key:"verifyKey",value:function(t,n,s,i,a,o,l,u,c){if(t==="")return o(xe.INVALID_KEY);l(),fetch(n,{method:i,headers:s,body:c||null}).then(function(d){return oe.processResponseByType(d)}).then(function(d){u(d,t,a,o)}).catch(function(d){o(xe.CONNECTION_FAILED),console.error(d)})}}])}(),Rd=function(){function e(r,t,n){w(this,e),this._isLoading=!1,this._isPaginationComplete=!1,this._index=0,this._messages=t,n.fetchHistory&&this.fetchHistory(n.fetchHistory),r.loadHistory&&this.setupLoadHistoryOnScroll(r.loadHistory),this.setupInitialHistory(r)}return C(e,[{key:"fetchHistory",value:function(){var r=A(v().mark(function n(s){var i=this,a,o;return v().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return a=En.addMessage(this._messages),u.next=3,s();case 3:o=u.sent,this._messages.removeMessage(a),e.displayIntroMessages(this._messages.messageElementRefs),o.forEach(function(c){return i._messages.addAnyMessage(c,!0)}),setTimeout(function(){return pt.scrollToBottom(i._messages.elementRef)},0);case 5:case"end":return u.stop()}},n,this)}));function t(n){return r.apply(this,arguments)}return t}()},{key:"processLoadedHistory",value:function(t){var n=this,s,i=this._messages,a=i.messageElementRefs,o=i.messageToElements,l=i.elementRef,u=(s=a.find(function(d){return!d.outerContainer.classList.contains(It.INTRO_CLASS)}))==null?void 0:s.outerContainer,c=l.scrollTop;t==null||t.reverse().map(function(d){var h=n._messages.addAnyMessage(ve(ve({},d),{},{sendUpdate:!0}),!0,!0);if(h){var f=Z.generateMessageBody(h,a,!0);o.unshift([h,f])}return h}).filter(function(d){return!!d}).reverse().forEach(function(d){return n._messages.sendClientUpdate(d,!0)}),u&&(l.scrollTop=c+u.offsetTop-40)}},{key:"populateMessages",value:function(t,n){this._messages.removeMessage(t),this._isPaginationComplete=n.findIndex(function(u){return!u})<0;var s=n.filter(function(u){return!!u});this.processLoadedHistory(s);var i=this._messages,a=i.messageElementRefs,o=i.avatar,l=i.name;Z.resetAllRoleElements(a,o,l)}},{key:"setupLoadHistoryOnScroll",value:function(){var r=A(v().mark(function n(s){var i=this;return v().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:this._messages.elementRef.onscroll=A(v().mark(function l(){var u,c;return v().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!(!i._isLoading&&!i._isPaginationComplete&&i._messages.elementRef.scrollTop===0)){h.next=13;break}return i._isLoading=!0,u=En.addMessage(i._messages,!1),h.prev=3,h.next=6,s(i._index++);case 6:c=h.sent,i.populateMessages(u,c),i._isLoading=!1,h.next=13;break;case 10:h.prev=10,h.t0=h.catch(3),i._messages.removeMessage(u),i._isPaginationComplete=!0,i._messages.addNewErrorMessage("service",e.FAILED_ERROR_MESSAGE,!0),console.error(h.t0);case 13:case"end":return h.stop()}},l,null,[[3,10]])}));case 1:case"end":return o.stop()}},n,this)}));function t(n){return r.apply(this,arguments)}return t}()},{key:"populateInitialHistory",value:function(t){var n=this;t.forEach(function(s){lt.processHistoryFile(s),n._messages.addAnyMessage(s,!0)})}},{key:"loadInitialHistory",value:function(){var r=A(v().mark(function n(s){var i=this,a,o,l;return v().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return this._isLoading=!0,a=En.addMessage(this._messages),c.prev=2,c.next=5,s(this._index++);case 5:o=c.sent,l=this._messages.elementRef.scrollTop,this.populateMessages(a,o),l===0&&setTimeout(function(){return pt.scrollToBottom(i._messages.elementRef)},0),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(2),this._messages.removeMessage(a),this._isPaginationComplete=!0,this._messages.addNewErrorMessage("service",e.FAILED_ERROR_MESSAGE,!0),console.error(c.t0);case 13:e.displayIntroMessages(this._messages.messageElementRefs),this._isLoading=!1;case 14:case"end":return c.stop()}},n,this,[[2,10]])}));function t(n){return r.apply(this,arguments)}return t}()},{key:"setupInitialHistory",value:function(){var r=A(v().mark(function n(s){var i;return v().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:s.loadHistory&&this.loadInitialHistory(s.loadHistory),i=s.history||lt.processHistory(s),i&&(this.populateInitialHistory(i),this._index+=1);case 3:case"end":return o.stop()}},n,this)}));function t(n){return r.apply(this,arguments)}return t}()}],[{key:"addErrorPrefix",value:function(t){var n;(n=t.permittedErrorPrefixes)!==null&&n!==void 0||(t.permittedErrorPrefixes=[]),t.permittedErrorPrefixes.push(e.FAILED_ERROR_MESSAGE)}},{key:"displayIntroMessages",value:function(t){for(var n=0;n<t.length;n+=1){var s=t[0];if(s.outerContainer.classList.contains(It.INTRO_CLASS))s.outerContainer.style.display="";else break}}}])}();Rd.FAILED_ERROR_MESSAGE="Failed to load history";var oo=Rd,lo=function(){function e(){w(this,e)}return C(e,null,[{key:"getCharacterLimitMessages",value:function(t,n){var s;if(n===-1)return t;var i=0,a=t.length-1;for(a;a>=0;a-=1){var o=(s=t[a])==null?void 0:s.text;if(o!==void 0&&(i+=o.length,i>n)){t[a].text=o.substring(0,o.length-(i-n));break}}return t.slice(Math.max(a,0))}},{key:"getMaxMessages",value:function(t,n){return t.slice(Math.max(t.length-n,0))}},{key:"processMessages",value:function(t,n,s){return n!==void 0?n>0&&(t=e.getMaxMessages(t,n)):t=[t[t.length-1]],t=JSON.parse(JSON.stringify(t)),s===void 0?t:e.getCharacterLimitMessages(t,s)}}])}(),Py=function(){function e(){w(this,e)}return C(e,null,[{key:"parseConfig",value:function(t,n,s,i){var a,o={files:n};if(W(i)=="object"){lt.processFileConfigConnect(i);var l=i.files,u=i.connect,c=i.button;l&&(l.infoModal&&(o.files.infoModal=l.infoModal,(a=l.infoModal)!=null&&a.textMarkDown&&(o.infoModalTextMarkUp=s.render(l.infoModal.textMarkDown))),l.acceptedFormats&&(o.files.acceptedFormats=l.acceptedFormats),l.maxNumberOfFiles&&(o.files.maxNumberOfFiles=l.maxNumberOfFiles)),o.button=c,u&&(u.headers||u.method||u.url||u.credentials||t.headers||t.method||t.url||t.credentials)&&(o.connect={url:(u==null?void 0:u.url)||t.url,method:(u==null?void 0:u.method)||t.method,headers:(u==null?void 0:u.headers)||t.headers,credentials:(u==null?void 0:u.credentials)||t.credentials})}return o}},{key:"processMixedFiles",value:function(t,n,s){if(s){var i={acceptedFormats:""};t.fileTypes.mixedFiles=e.parseConfig(t.connectSettings,i,n,s)}}},{key:"processMicrophone",value:function(t,n,s,i){var a,o,l,u,c,d,h,f,m=ve({acceptedFormats:"audio/*"},((l=t.fileTypes.audio)==null?void 0:l.files)||{});s&&(navigator.mediaDevices.getUserMedia!==void 0?(t.recordAudio=e.parseConfig(t.connectSettings,m,n,s),W(s)=="object"&&s.files&&((a=(u=t.recordAudio).files)!==null&&a!==void 0||(u.files={}),t.recordAudio.files.format=(c=s.files)==null?void 0:c.format,t.recordAudio.files.maxDurationSeconds=(d=s.files)==null?void 0:d.maxDurationSeconds,(h=t.fileTypes.audio)!=null&&h.files&&((o=(f=t.fileTypes.audio.files).maxNumberOfFiles)!==null&&o!==void 0||(f.maxNumberOfFiles=s.files.maxNumberOfFiles)))):i||(t.fileTypes.audio=e.parseConfig(t.connectSettings,m,n,s)))}},{key:"processAudioConfig",value:function(t,n,s,i){if(!(!s&&!i)){var a=ve({acceptedFormats:"audio/*"},(i==null?void 0:i.files)||{});t.fileTypes.audio=e.parseConfig(t.connectSettings,a,n,s)}}},{key:"processGifConfig",value:function(t,n,s,i){if(!(!s&&!i)){var a=ve({acceptedFormats:"image/gif"},(i==null?void 0:i.files)||{});t.fileTypes.gifs=e.parseConfig(t.connectSettings,a,n,s)}}},{key:"processCamera",value:function(t,n,s,i){var a,o,l,u,c,d=ve({acceptedFormats:"image/*"},((o=t.fileTypes.images)==null?void 0:o.files)||{});s&&(navigator.mediaDevices.getUserMedia!==void 0?(t.camera=e.parseConfig(t.connectSettings,d,n,s),W(s)=="object"&&(t.camera.modalContainerStyle=s.modalContainerStyle,s.files&&((a=(l=t.camera).files)!==null&&a!==void 0||(l.files={}),t.camera.files.format=(u=s.files)==null?void 0:u.format,t.camera.files.dimensions=(c=s.files)==null?void 0:c.dimensions))):i||(t.fileTypes.images=e.parseConfig(t.connectSettings,d,n,s)))}},{key:"processImagesConfig",value:function(t,n,s,i){if(!(!s&&!i)){var a=ve({acceptedFormats:"image/*"},(i==null?void 0:i.files)||{});t.fileTypes.images=e.parseConfig(t.connectSettings,a,n,s)}}},{key:"populateDefaultFileIO",value:function(t,n){var s,i,a,o,l;t&&((s=t.files)!==null&&s!==void 0||(t.files={}),(i=(o=t.files).acceptedFormats)!==null&&i!==void 0||(o.acceptedFormats=n),(a=(l=t.files).maxNumberOfFiles)!==null&&a!==void 0||(l.maxNumberOfFiles=1))}},{key:"set",value:function(t,n,s){e.populateDefaultFileIO(s==null?void 0:s.audio,".4a,.mp3,.webm,.mp4,.mpga,.wav,.mpeg,.m4a"),e.populateDefaultFileIO(s==null?void 0:s.images,".png,.jpg");var i=pa.createNew(t.remarkable);e.processImagesConfig(n,i,t.images,s==null?void 0:s.images),e.processCamera(n,i,t.camera,t.images),e.processGifConfig(n,i,t.gifs,s==null?void 0:s.gifs),e.processAudioConfig(n,i,t.audio,s==null?void 0:s.audio),e.processMicrophone(n,i,t.microphone,t.audio),e.processMixedFiles(n,i,t.mixedFiles)}}])}(),Js=function(){function e(r,t,n){var s;w(this,e);var i,a,o,l,u;this.rawBody={},this.validateKeyProperty=!1,this.canSendMessage=e.canSendMessage,this.connectSettings={},this.fileTypes={},this.completionsHandlers={},this.streamHandlers={},this.deepChat=r,this.demo=n,Object.assign(this.rawBody,(i=r.connect)==null?void 0:i.additionalBodyProps),this.totalMessagesMaxCharLength=(a=r==null?void 0:r.requestBodyLimits)==null?void 0:a.totalMessagesMaxCharLength,this.maxMessages=(o=r==null?void 0:r.requestBodyLimits)==null?void 0:o.maxMessages,Py.set(r,this,t),r.connect&&(this.connectSettings=r.connect),this.demo&&((s=(l=this.connectSettings).url)!==null&&s!==void 0||(l.url=Jt.URL)),this.connectSettings.websocket&&is.setup(this),this.stream=((u=this.deepChat.connect)==null?void 0:u.stream)||lt.checkForStream(this.deepChat),r.loadHistory&&oo.addErrorPrefix(this)}return C(e,[{key:"verifyKey",value:function(t,n){}},{key:"getServiceIOByType",value:function(t){if(t.type.startsWith("audio")&&this.fileTypes.audio)return this.fileTypes.audio;if(t.type.startsWith("image")){if(this.fileTypes.gifs&&t.type.endsWith("/gif"))return this.fileTypes.gifs;if(this.fileTypes.images)return this.fileTypes.images;if(this.camera)return this.camera}return this.fileTypes.mixedFiles}},{key:"request",value:function(){var r=A(v().mark(function n(s,i){var a,o=arguments;return v().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return a=o.length>2&&o[2]!==void 0?o[2]:!0,u.abrupt("return",this.stream&&!je.isSimulation(this.stream)?je.request(this,s,i,a):Ie.request(this,s,i,a));case 2:case"end":return u.stop()}},n,this)}));function t(n,s){return r.apply(this,arguments)}return t}()},{key:"callAPIWithText",value:function(){var r=A(v().mark(function n(s,i){var a,o,l,u,c,d,h,f;return v().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return h=ve({messages:i},this.rawBody),f=!1,(l=this.connectSettings.headers)!=null&&l["Content-Type"]||((a=(u=this.connectSettings).headers)!==null&&a!==void 0||(u.headers={}),(o=(c=this.connectSettings.headers)["Content-Type"])!==null&&o!==void 0||(c["Content-Type"]="application/json"),f=!0),p.next=5,this.request(h,s);case 5:f&&((d=this.connectSettings.headers)==null||delete d["Content-Type"]);case 6:case"end":return p.stop()}},n,this)}));function t(n,s){return r.apply(this,arguments)}return t}()},{key:"callApiWithFiles",value:function(){var r=A(v().mark(function n(s,i,a){var o,l,u;return v().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return o=e.createCustomFormDataBody(this.rawBody,i,a),l=this.connectSettings,u=this.getServiceIOByType(a[0]),this.connectSettings=(u==null?void 0:u.connect)||this.connectSettings,d.next=4,this.request(o,s,!1);case 4:this.connectSettings=l;case 5:case"end":return d.stop()}},n,this)}));function t(n,s,i){return r.apply(this,arguments)}return t}()},{key:"callServiceAPI",value:function(){var r=A(v().mark(function n(s,i,a){return v().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:a?this.callApiWithFiles(s,i,a):this.callAPIWithText(s,i);case 1:case"end":return l.stop()}},n,this)}));function t(n,s,i){return r.apply(this,arguments)}return t}()},{key:"callAPI",value:function(){var r=A(v().mark(function n(s,i){var a,o;return v().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(this.connectSettings){u.next=2;break}throw new Error("Request settings have not been set up");case 2:a=lo.processMessages(i.messageToElements.map(function(c){var d=Xa(c,1),h=d[0];return h}),this.maxMessages,this.totalMessagesMaxCharLength),this.connectSettings.websocket&&(!this.connectSettings.handler||this.connectSettings.url!==Jt.URL)?(o=ve({messages:a},this.rawBody),is.sendWebsocket(this,o,i,!1)):this.callServiceAPI(i,a,s.files);case 4:case"end":return u.stop()}},n,this)}));function t(n,s){return r.apply(this,arguments)}return t}()},{key:"extractResultData",value:function(){var r=A(v().mark(function n(s){return v().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!s.result){a.next=2;break}return a.abrupt("return",lt.handleResponseProperty(s));case 2:if(!oe.validateResponseFormat(s,!!this.stream)){a.next=4;break}return a.abrupt("return",s);case 4:case"end":return a.stop()}},n,this)}));function t(n){return r.apply(this,arguments)}return t}()},{key:"isDirectConnection",value:function(){return!1}},{key:"isWebModel",value:function(){return!1}},{key:"isCustomView",value:function(){return!1}}],[{key:"canSendMessage",value:function(t,n,s){return s?!0:!!(t&&t.trim()!=="")||!!(n&&n.length>0)}},{key:"createCustomFormDataBody",value:function(t,n,s){var i=new FormData;s.forEach(function(l){return i.append("files",l)}),Object.keys(t).forEach(function(l){return i.append(l,String(t[l]))});var a=0;n.slice(0,n.length-1).forEach(function(l){i.append("message".concat(a+=1),JSON.stringify(l))});var o=n[n.length-1];return o.text&&(delete o.files,i.append("message".concat(a+=1),JSON.stringify(o))),i}}])}(),Ze=function(e){function r(t,n,s,i,a){var o;w(this,r);var l;return o=ee(this,r,[t,a]),o.insertKeyPlaceholderText="API Key",o.keyHelpUrl="",Object.assign(o.rawBody,(l=t.connect)==null?void 0:l.additionalBodyProps),o.keyVerificationDetails=n,o.buildHeadersFunc=s,i&&o.setApiKeyProperties(i),o.connectSettings=o.buildConnectSettings(o.key||"",t.connect),o}return te(r,e),C(r,[{key:"setApiKeyProperties",value:function(n){this.key=n.key,n.validateKeyProperty&&(this.validateKeyProperty=n.validateKeyProperty)}},{key:"buildConnectSettings",value:function(n,s){var i,a=s??{};return(i=a.headers)!==null&&i!==void 0||(a.headers={}),Object.assign(a.headers,this.buildHeadersFunc(n)),a}},{key:"keyAuthenticated",value:function(n,s){this.connectSettings=this.buildConnectSettings(s,this.connectSettings),this.key=s,n()}},{key:"verifyKey",value:function(n,s){var i=this.keyVerificationDetails,a=i.url,o=i.method,l=i.handleVerificationResult,u=i.createHeaders,c=i.body,d=(u==null?void 0:u(n))||this.buildHeadersFunc(n);Ie.verifyKey(n,a,d,o,this.keyAuthenticated.bind(this,s.onSuccess),s.onFail,s.onLoad,l,c)}},{key:"isDirectConnection",value:function(){return!0}}])}(Js),Ny=function(){function e(){w(this,e)}return C(e,null,[{key:"waitForPropertiesToBeUpdatedBeforeRender",value:function(t){t._propUpdated_=!1,setTimeout(function(){t._propUpdated_?e.waitForPropertiesToBeUpdatedBeforeRender(t):(t._waitingToRender_=!1,t.onRender())})}},{key:"attemptRender",value:function(t){t._propUpdated_=!0,t._waitingToRender_||(t._waitingToRender_=!0,e.waitForPropertiesToBeUpdatedBeforeRender(t))}}])}(),ya=function(e){function r(){var t;return w(this,r),t=ee(this,r),t._waitingToRender_=!1,t._propUpdated_=!1,Object.keys(r._attributeToProperty_).forEach(function(n){var s=r._attributeToProperty_[n];t.constructPropertyAccessors(s),t.hasOwnProperty(n)||t.constructPropertyAccessors(s,n)}),t}return te(r,e),C(r,[{key:"constructPropertyAccessors",value:function(n,s){var i;Object.defineProperty(this,s||n,{get:function(){return i},set:function(o){i=o,s?this[n]=o:Ny.attemptRender(this)}})}},{key:"attributeChangedCallback",value:function(n,s,i){if(s!==i){var a=r._attributes_[n](i),o=r._attributeToProperty_[n];this[o]=a}}},{key:"onRender",value:function(){}}],[{key:"observedAttributes",get:function(){return Object.keys(r._attributes_)||[]}}])}(aa(HTMLElement));ya._attributes_={},ya._attributeToProperty_={};var Dy=ya,By=`<?xml version="1.0" standalone="no"?>
<svg version="1.1"
	xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
	xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="0.9em" height="0.9em"
	viewBox="0 0 1200 1200" enable-background="new 0 0 1200 1200">
		<path d="
			M669.727,273.516c-22.891-2.476-46.15-3.895-69.727-4.248c-103.025,0.457-209.823,25.517-310.913,73.536
			c-75.058,37.122-148.173,89.529-211.67,154.174C46.232,529.978,6.431,577.76,0,628.74c0.76,44.162,48.153,98.67,77.417,131.764
			c59.543,62.106,130.754,113.013,211.67,154.174c2.75,1.335,5.51,2.654,8.276,3.955l-75.072,131.102l102.005,60.286l551.416-960.033
			l-98.186-60.008L669.727,273.516z M902.563,338.995l-74.927,129.857c34.47,44.782,54.932,100.006,54.932,159.888
			c0,149.257-126.522,270.264-282.642,270.264c-6.749,0-13.29-0.728-19.922-1.172l-49.585,85.84c22.868,2.449,45.99,4.233,69.58,4.541
			c103.123-0.463,209.861-25.812,310.84-73.535c75.058-37.122,148.246-89.529,211.743-154.174
			c31.186-32.999,70.985-80.782,77.417-131.764c-0.76-44.161-48.153-98.669-77.417-131.763
			c-59.543-62.106-130.827-113.013-211.743-154.175C908.108,341.478,905.312,340.287,902.563,338.995L902.563,338.995z
			M599.927,358.478c6.846,0,13.638,0.274,20.361,0.732l-58.081,100.561c-81.514,16.526-142.676,85.88-142.676,168.897
			c0,20.854,3.841,40.819,10.913,59.325c0.008,0.021-0.008,0.053,0,0.074l-58.228,100.854
			c-34.551-44.823-54.932-100.229-54.932-160.182C317.285,479.484,443.808,358.477,599.927,358.478L599.927,358.478z M768.896,570.513
			L638.013,797.271c81.076-16.837,141.797-85.875,141.797-168.603C779.81,608.194,775.724,588.729,768.896,570.513L768.896,570.513z"
			/>
</svg>
`,Fy=`<?xml version="1.0" standalone="no"?>
<svg version="1.1"
	xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
	xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="0.9em" height="0.9em"
	viewBox="0 0 1200 1200" enable-background="new 0 0 1200 1200">
		<path id="path6686" inkscape:connector-curvature="0" d="M779.843,599.925c0,95.331-80.664,172.612-180.169,172.612
			c-99.504,0-180.168-77.281-180.168-172.612c0-95.332,80.664-172.612,180.168-172.612
			C699.179,427.312,779.843,504.594,779.843,599.925z M600,240.521c-103.025,0.457-209.814,25.538-310.904,73.557
			c-75.058,37.122-148.206,89.496-211.702,154.141C46.208,501.218,6.431,549,0,599.981c0.76,44.161,48.13,98.669,77.394,131.763
			c59.543,62.106,130.786,113.018,211.702,154.179c94.271,45.751,198.616,72.092,310.904,73.557
			c103.123-0.464,209.888-25.834,310.866-73.557c75.058-37.122,148.243-89.534,211.74-154.179
			c31.185-32.999,70.962-80.782,77.394-131.763c-0.76-44.161-48.13-98.671-77.394-131.764
			c-59.543-62.106-130.824-112.979-211.74-154.141C816.644,268.36,712.042,242.2,600,240.521z M599.924,329.769
			c156.119,0,282.675,120.994,282.675,270.251c0,149.256-126.556,270.25-282.675,270.25S317.249,749.275,317.249,600.02
			C317.249,450.763,443.805,329.769,599.924,329.769L599.924,329.769z"/>
</svg>
`,Wt=function(){function e(){w(this,e)}return C(e,null,[{key:"createSVGElement",value:function(t){return new DOMParser().parseFromString(t,"image/svg+xml").documentElement}}])}(),Md=function(){function e(){w(this,e)}return C(e,null,[{key:"changeVisibility",value:function(t,n,s,i){i.target.id===e.VISIBLE_ICON_ID?(n.style.display="none",s.style.display="block",t.type="password"):(n.style.display="block",s.style.display="none",t.type="text")}},{key:"createIconElement",value:function(t,n){var s=Wt.createSVGElement(t);return s.id=n,s.classList.add("visibility-icon"),s}},{key:"create",value:function(t){var n=document.createElement("div");n.id="visibility-icon-container";var s=e.createIconElement(Fy,e.VISIBLE_ICON_ID);s.style.display="none",n.appendChild(s);var i=e.createIconElement(By,"not-visible-icon");return n.appendChild(i),n.onclick=e.changeVisibility.bind(this,t,s,i),n}}])}();Md.VISIBLE_ICON_ID="visible-icon";var jy=Md,Uy=function(){function e(){w(this,e)}return C(e,null,[{key:"createCautionText",value:function(){var t=document.createElement("a");return t.classList.add("insert-key-input-help-text"),t.innerText="Please exercise CAUTION when inserting your API key outside of deepchat.dev or localhost!!",t}},{key:"createHelpLink",value:function(t){var n=document.createElement("a");return n.classList.add("insert-key-input-help-text"),n.href=t,n.innerText="Find more info here",n.target="_blank",n}},{key:"createFailText",value:function(){var t=document.createElement("div");return t.id="insert-key-input-invalid-text",t.style.display="none",t}},{key:"createHelpTextContainer",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,s=document.createElement("div");s.id="insert-key-help-text-container";var i=document.createElement("div");i.id="insert-key-help-text-contents";var a=e.createFailText();if(i.appendChild(a),t){var o=e.createHelpLink(t);i.appendChild(o)}if(n===!0){var l=e.createCautionText();i.appendChild(l)}return s.appendChild(i),{helpTextContainerElement:s,failTextElement:a}}},{key:"onFail",value:function(t,n,s,i){t.classList.replace("insert-key-input-valid","insert-key-input-invalid"),s.innerText=i,s.style.display="block",n.innerText="Start",t.classList.remove("loading")}},{key:"onLoad",value:function(t,n){t.classList.add("loading"),n.innerHTML='<div id="loading-key"></div>'}},{key:"verifyKey",value:function(t,n,s){var i=t.value.trim();s.verifyKey(i,n)}},{key:"addVerificationEvents",value:function(t,n,s,i,a){var o={onSuccess:i,onFail:e.onFail.bind(this,t,n,s),onLoad:e.onLoad.bind(this,t,n)},l=e.verifyKey.bind(this,t,o,a);n.onclick=l,t.onkeydown=function(u){!t.classList.contains("loading")&&u.key===Ue.ENTER&&l()}}},{key:"createStartButton",value:function(){var t=document.createElement("div");return t.id="start-button",t.innerText="Start",t}},{key:"onInputFocus",value:function(t){t.target.classList.replace("insert-key-input-invalid","insert-key-input-valid")}},{key:"createInput",value:function(t){var n=document.createElement("div");n.id="insert-key-input-container";var s=document.createElement("input");return s.id="insert-key-input",s.placeholder=t||"API Key",s.type="password",s.classList.add("insert-key-input-valid"),s.onfocus=e.onInputFocus,n.appendChild(s),n}},{key:"createContents",value:function(t,n){var s,i=document.createElement("div");i.id="insert-key-contents";var a=e.createInput(n.insertKeyPlaceholderText),o=a.children[0],l=jy.create(o);a.appendChild(l),i.appendChild(a);var u=e.createStartButton(),c=e.createHelpTextContainer(n.keyHelpUrl,(s=n.deepChat._insertKeyViewStyles)==null?void 0:s.displayCautionText),d=c.helpTextContainerElement,h=c.failTextElement;return i.appendChild(u),i.appendChild(d),e.addVerificationEvents(o,u,h,t,n),i}},{key:"createElements",value:function(t,n){var s=document.createElement("div");s.id="insert-key-view";var i=e.createContents(t,n);return s.appendChild(i),s}},{key:"render",value:function(t,n,s){var i=e.createElements(n,s);t.replaceChildren(i)}}])}(),Rr=function(){function e(){w(this,e)}return C(e,null,[{key:"enableButtons",value:function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;window.webLLM?(t&&(t.disabled=!1),n&&(n.disabled=!1)):s<uo.MODULE_SEARCH_LIMIT_S*4&&setTimeout(function(){return e.enableButtons(t,n,s+1)},250)}},{key:"setUpInitial",value:function(t,n,s,i){var a=(n==null?void 0:n.downloadClass)||e.DOWNLOAD_BUTTON_CLASS,o=(n==null?void 0:n.uploadClass)||e.UPLOAD_BUTTON_CLASS,l=(n==null?void 0:n.fileInputClass)||e.FILE_INPUT_CLASS;return setTimeout(function(){var u=s==null?void 0:s.getElementsByClassName(a)[0],c=s==null?void 0:s.getElementsByClassName(l)[0],d=s==null?void 0:s.getElementsByClassName(o)[0];u&&(u.onclick=function(){return t()}),c&&(c.onchange=function(){c.files&&c.files.length>0&&t(c.files)}),d&&(d.onclick=function(){return c.click()}),(u||d)&&e.enableButtons(u,d)}),(n==null?void 0:n.initialHtml)||`<div>
        Download or upload a web model that will run entirely on your browser: <br/> 
        <button disabled class="`.concat(a,` deep-chat-button deep-chat-web-model-button">Download</button>
        `).concat(i?"":'<input type="file" class="'.concat(l,`" hidden multiple />
          <button disabled class="`).concat(o,' deep-chat-button deep-chat-web-model-button">Upload</button>'),`
      </div>`)}},{key:"exportFile",value:function(t){for(var n=document.createElement("a"),s=4,i=function(l){setTimeout(function(){for(var u=l*s,c=u;c<Math.min(u+s,t.length);c+=1){var d=URL.createObjectURL(t[c]);n.href=d,n.download=t[c].name,document.body.appendChild(n),n.click(),URL.revokeObjectURL(d)}},500*l)},a=0;a<t.length/s;a+=1)i(a)}},{key:"setUpAfterLoad",value:function(t,n,s,i){var a=(n==null?void 0:n.exportFilesClass)||e.EXPORT_BUTTON_CLASS;return setTimeout(function(){var o=s==null?void 0:s.getElementsByClassName(a)[0];o&&(o.onclick=function(){return e.exportFile(t)})}),(n==null?void 0:n.afterLoadHtml)||`<div>
        Model loaded successfully and has been cached for future requests.
        `.concat(i?"":'<br/> <button style="margin-top: 5px" class="'.concat(a,' deep-chat-button">Export</button>'),`
      </div>`)}}])}();Rr.DOWNLOAD_BUTTON_CLASS="deep-chat-download-button",Rr.UPLOAD_BUTTON_CLASS="deep-chat-upload-button",Rr.FILE_INPUT_CLASS="deep-chat-file-input",Rr.EXPORT_BUTTON_CLASS="deep-chat-export-button";var ql=Rr,zl={model_list:[{model_url:"https://huggingface.co/mlc-ai/Llama-2-7b-chat-hf-q4f32_1-MLC/resolve/main/",local_id:"Llama-2-7b-chat-hf-q4f32_1",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/Llama-2-7b-chat-hf/Llama-2-7b-chat-hf-q4f32_1-ctx4k_cs1k-webgpu.wasm",vram_required_MB:9109.03,low_resource_required:!1},{model_url:"https://huggingface.co/mlc-ai/Llama-2-7b-chat-hf-q4f16_1-MLC/resolve/main/",local_id:"Llama-2-7b-chat-hf-q4f16_1",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/Llama-2-7b-chat-hf/Llama-2-7b-chat-hf-q4f16_1-ctx4k_cs1k-webgpu.wasm",vram_required_MB:6749.02,low_resource_required:!1,required_features:["shader-f16"]},{model_url:"https://huggingface.co/mlc-ai/Llama-2-7b-chat-hf-q4f16_1-MLC/resolve/main/",local_id:"Llama-2-7b-chat-hf-q4f16_1-1k",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/Llama-2-7b-chat-hf/Llama-2-7b-chat-hf-q4f16_1-ctx1k-webgpu.wasm",vram_required_MB:4618.52,low_resource_required:!1,required_features:["shader-f16"]},{model_url:"https://huggingface.co/mlc-ai/Llama-2-13b-chat-hf-q4f16_1-MLC/resolve/main/",local_id:"Llama-2-13b-chat-hf-q4f16_1",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/Llama-2-13b-chat-hf/Llama-2-13b-chat-hf-q4f16_1-ctx4k_cs1k-webgpu.wasm",vram_required_MB:11814.09,low_resource_required:!1,required_features:["shader-f16"]},{model_url:"https://huggingface.co/mlc-ai/Llama-2-70b-chat-hf-q4f16_1-MLC/resolve/main/",local_id:"Llama-2-70b-chat-hf-q4f16_1",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/Llama-2-70b-chat-hf/Llama-2-70b-chat-hf-q4f16_1-ctx4k_cs1k-webgpu.wasm",vram_required_MB:43729.05,low_resource_required:!1,required_features:["shader-f16"]},{model_url:"https://huggingface.co/mlc-ai/RedPajama-INCITE-Chat-3B-v1-q4f16_1-MLC/resolve/main/",local_id:"RedPajama-INCITE-Chat-3B-v1-q4f16_1",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/RedPajama-INCITE-Chat-3B-v1/RedPajama-INCITE-Chat-3B-v1-q4f16_1-ctx2k-webgpu.wasm",vram_required_MB:2972.09,low_resource_required:!1,required_features:["shader-f16"]},{model_url:"https://huggingface.co/mlc-ai/RedPajama-INCITE-Chat-3B-v1-q4f32_1-MLC/resolve/main/",local_id:"RedPajama-INCITE-Chat-3B-v1-q4f32_1",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/RedPajama-INCITE-Chat-3B-v1/RedPajama-INCITE-Chat-3B-v1-q4f32_1-ctx2k-webgpu.wasm",vram_required_MB:3928.09,low_resource_required:!1},{model_url:"https://huggingface.co/mlc-ai/RedPajama-INCITE-Chat-3B-v1-q4f16_1-MLC/resolve/main/",local_id:"RedPajama-INCITE-Chat-3B-v1-q4f16_1-1k",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/RedPajama-INCITE-Chat-3B-v1/RedPajama-INCITE-Chat-3B-v1-q4f16_1-ctx1k-webgpu.wasm",vram_required_MB:2041.09,low_resource_required:!0,required_features:["shader-f16"]},{model_url:"https://huggingface.co/mlc-ai/RedPajama-INCITE-Chat-3B-v1-q4f32_1-MLC/resolve/main/",local_id:"RedPajama-INCITE-Chat-3B-v1-q4f32_1-1k",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/RedPajama-INCITE-Chat-3B-v1/RedPajama-INCITE-Chat-3B-v1-q4f32_1-ctx1k-webgpu.wasm",vram_required_MB:2558.09,low_resource_required:!0},{model_url:"https://huggingface.co/mlc-ai/WizardMath-7B-V1.1-q4f16_1-MLC/resolve/main/",local_id:"WizardMath-7B-V1.1-q4f16_1",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/Mistral-7B-Instruct-v0.2/Mistral-7B-Instruct-v0.2-q4f16_1-sw4k_cs1k-webgpu.wasm",vram_required_MB:6079.02,low_resource_required:!1,required_features:["shader-f16"]},{model_url:"https://huggingface.co/mlc-ai/Mistral-7B-Instruct-v0.2-q4f16_1-MLC/resolve/main/",local_id:"Mistral-7B-Instruct-v0.2-q4f16_1",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/Mistral-7B-Instruct-v0.2/Mistral-7B-Instruct-v0.2-q4f16_1-sw4k_cs1k-webgpu.wasm",vram_required_MB:6079.02,low_resource_required:!1,required_features:["shader-f16"]},{model_url:"https://huggingface.co/mlc-ai/OpenHermes-2.5-Mistral-7B-q4f16_1-MLC/resolve/main/",local_id:"OpenHermes-2.5-Mistral-7B-q4f16_1",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/Mistral-7B-Instruct-v0.2/Mistral-7B-Instruct-v0.2-q4f16_1-sw4k_cs1k-webgpu.wasm",vram_required_MB:6079.02,low_resource_required:!1,required_features:["shader-f16"]},{model_url:"https://huggingface.co/mlc-ai/NeuralHermes-2.5-Mistral-7B-q4f16_1-MLC/resolve/main/",local_id:"NeuralHermes-2.5-Mistral-7B-q4f16_1",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/Mistral-7B-Instruct-v0.2/Mistral-7B-Instruct-v0.2-q4f16_1-sw4k_cs1k-webgpu.wasm",vram_required_MB:6079.02,low_resource_required:!1,required_features:["shader-f16"]},{model_url:"https://huggingface.co/mlc-ai/TinyLlama-1.1B-Chat-v0.4-q0f16-MLC/resolve/main/",local_id:"TinyLlama-1.1B-Chat-v0.4-q0f16",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/TinyLlama-1.1B-Chat-v0.4/TinyLlama-1.1B-Chat-v0.4-q0f16-ctx2k-webgpu.wasm",vram_required_MB:5063.52,low_resource_required:!1,required_features:["shader-f16"]},{model_url:"https://huggingface.co/mlc-ai/TinyLlama-1.1B-Chat-v0.4-q0f32-MLC/resolve/main/",local_id:"TinyLlama-1.1B-Chat-v0.4-q0f32",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/TinyLlama-1.1B-Chat-v0.4/TinyLlama-1.1B-Chat-v0.4-q0f32-ctx2k-webgpu.wasm",vram_required_MB:5394.53,low_resource_required:!1},{model_url:"https://huggingface.co/mlc-ai/TinyLlama-1.1B-Chat-v0.4-q4f16_1-MLC/resolve/main/",local_id:"TinyLlama-1.1B-Chat-v0.4-q4f16_1-1k",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/TinyLlama-1.1B-Chat-v0.4/TinyLlama-1.1B-Chat-v0.4-q4f16_1-ctx1k-webgpu.wasm",vram_required_MB:899.11,low_resource_required:!0,required_features:["shader-f16"]},{model_url:"https://huggingface.co/mlc-ai/TinyLlama-1.1B-Chat-v0.4-q4f32_1-MLC/resolve/main/",local_id:"TinyLlama-1.1B-Chat-v0.4-q4f32_1-1k",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/TinyLlama-1.1B-Chat-v0.4/TinyLlama-1.1B-Chat-v0.4-q4f32_1-ctx1k-webgpu.wasm",vram_required_MB:992.11,low_resource_required:!0}],use_web_worker:!0},Hn=function(e){function r(t){var n;w(this,r);var s,i;return n=ee(this,r,[t]),n._isModelLoaded=!1,n._isModelLoading=!1,n._loadOnFirstMessage=!1,n._webModel={},n.permittedErrorPrefixes=[r.MULTIPLE_MODELS_ERROR,r.WEB_LLM_NOT_FOUND_ERROR,r.GENERIC_ERROR],n._conversationHistory=[],W(t.webModel)=="object"&&(n._webModel=t.webModel),(s=n._webModel.load)!=null&&s.clearCache&&r.clearAllCache(),n.findModelInWindow(t),n.canSendMessage=n.canSubmit.bind(tr(n)),n._chatEl=(i=t.shadowRoot)==null?void 0:i.children[0],t.history&&r.setUpHistory(n._conversationHistory,t.history),n}return te(r,e),C(r,[{key:"setUpMessages",value:function(n){var s=this;this._messages=n,this._removeIntro=function(){n.removeIntroductoryMessage(),s._removeIntro=void 0}}},{key:"findModelInWindow",value:function(n){var s=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a;window.webLLM?this.configureInit(this.shouldAddIntroMessage(n.introMessage)):i>r.MODULE_SEARCH_LIMIT_S?((a=this._messages)==null||a.addNewErrorMessage("service",r.WEB_LLM_NOT_FOUND_ERROR),console.error("The deep-chat-web-llm module has not been attached to the window object. Please see the following guide:"),console.error("https://deepchat.dev/examples/externalModules")):setTimeout(function(){return s.findModelInWindow(n,i+1)},1e3)}},{key:"shouldAddIntroMessage",value:function(n){var s;return!n&&this._webModel&&((s=this._webModel.introMessage)==null?void 0:s.displayed)!==!1}},{key:"scrollToTop",value:function(n){var s=this,i;((i=this._webModel.introMessage)==null?void 0:i.autoScroll)!==!1&&setTimeout(function(){var a,o;(a=s._messages)!=null&&a.elementRef&&pt.scrollToTop((o=s._messages)==null?void 0:o.elementRef)},n)}},{key:"getIntroMessage",value:function(n){if(!(!this.shouldAddIntroMessage(n)||!this._chatEl)){var s=ql.setUpInitial(this.init.bind(this),this._webModel.introMessage,this._chatEl,!!this._webModel.worker);return this.scrollToTop(1),{role:Z.AI_ROLE,html:s,sendUpdate:!1}}}},{key:"configureInit",value:function(){var t=A(v().mark(function s(i){var a;return v().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(a=this._webModel.load,!a){l.next=8;break}if(!a.onInit){l.next=5;break}return this.init(),l.abrupt("return");case 5:if(!a.onMessage){l.next=8;break}return this._loadOnFirstMessage=!0,l.abrupt("return");case 8:i||this.init();case 9:case"end":return l.stop()}},s,this)}));function n(s){return t.apply(this,arguments)}return n}()},{key:"init",value:function(){var t=A(v().mark(function s(i){var a,o;return v().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if((a=this._messages)==null||a.removeError(),o=this.attemptToCreateChat(),u.t0=o,!u.t0){u.next=6;break}return u.next=6,this.loadModel(o,i);case 6:case"end":return u.stop()}},s,this)}));function n(s){return t.apply(this,arguments)}return n}()},{key:"attemptToCreateChat",value:function(){var n;if(r.chat){(n=this._messages)==null||n.addNewErrorMessage("service",r.MULTIPLE_MODELS_ERROR),console.error(r.MULTIPLE_MODELS_ERROR);return}if(!(this._isModelLoaded||this._isModelLoading)){var s=this._webModel.worker;return zl.use_web_worker&&s?new window.webLLM.ChatWorkerClient(s):new window.webLLM.ChatModule}}},{key:"getConfig",value:function(){var n,s=r.DEFAULT_MODEL;this._webModel.model&&(s=this._webModel.model);var i=JSON.parse(JSON.stringify(zl));if(this._webModel.urls){var a=i.model_list.find(function(o){return o.local_id=s});a&&(this._webModel.urls.model&&(a.model_url=this._webModel.urls.model),this._webModel.urls.wasm&&(a.model_lib_url=this._webModel.urls.wasm))}return(n=this._webModel.load)!=null&&n.skipCache&&(i.use_cache=!1),{model:s,appConfig:i}}},{key:"loadModel",value:function(){var t=A(v().mark(function s(i,a){var o=this,l,u,c,d,h,f,m,p,y,g,S,k,T,x,I;return v().wrap(function($){for(;;)switch($.prev=$.next){case 0:return this.scrollToTop(),r.chat=i,this._isModelLoading=!0,p=((l=this._webModel.introMessage)==null?void 0:l.displayed)===!1,y=function(me){var re;(re=o._messages)==null||re.addNewMessage({html:"<div>".concat(me.text,"</div>"),overwrite:!0,sendUpdate:!1}),p&&(setTimeout(function(){var se;return pt.scrollToBottom((se=o._messages)==null?void 0:se.elementRef)}),p=!1)},r.chat.setInitProgressCallback(y),$.prev=4,S=this.getConfig(),k=S.model,T=S.appConfig,x={},this._webModel.instruction&&(x.conv_config={system:this._webModel.instruction}),this._conversationHistory.length>0&&(x.conversation_history=this._conversationHistory),$.next=10,r.chat.reload(k,x,T,a);case 10:g=$.sent,$.next=16;break;case 13:return $.prev=13,$.t0=$.catch(4),$.abrupt("return",this.unloadChat($.t0));case 16:(c=(u=this.deepChat)._validationHandler)==null||c.call(u),(d=this._webModel.introMessage)!=null&&d.removeAfterLoad?this._webModel.introMessage.displayed===!1?(f=this._messages)==null||f.removeLastMessage():(m=this._removeIntro)==null||m.call(this):(I=ql.setUpAfterLoad(g,this._webModel.introMessage,this._chatEl,!!this._webModel.worker),(h=this._messages)==null||h.addNewMessage({html:I,overwrite:!0,sendUpdate:!1})),this._isModelLoaded=!0,this._isModelLoading=!1;case 18:case"end":return $.stop()}},s,this,[[4,13]])}));function n(s,i){return t.apply(this,arguments)}return n}()},{key:"unloadChat",value:function(){var t=A(v().mark(function s(i){var a;return v().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if((a=this._messages)==null||a.addNewErrorMessage("service",r.GENERIC_ERROR),console.error(i),this._isModelLoaded=!1,this._isModelLoading=!1,l.t0=r.chat,!l.t0){l.next=9;break}return l.next=8,r.chat.unload();case 8:r.chat=void 0;case 9:case"end":return l.stop()}},s,this)}));function n(s){return t.apply(this,arguments)}return n}()},{key:"immediateResp",value:function(){var t=A(v().mark(function s(i,a,o){var l,u;return v().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,o.generate(a,void 0,0);case 2:return d.t0=d.sent,l={text:d.t0},d.next=6,r.processResponse(this.deepChat,i,l);case 6:u=d.sent,u&&u.forEach(function(h){return i.addNewMessage(h)}),this.completionsHandlers.onFinish();case 8:case"end":return d.stop()}},s,this)}));function n(s,i,a){return t.apply(this,arguments)}return n}()},{key:"streamResp",value:function(){var t=A(v().mark(function s(i,a,o){var l=this,u;return v().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.streamHandlers.abortStream.abort=function(){o.interruptGenerate()},this.streamHandlers.onOpen(),u=new ln(i),d.next=4,o.generate(a,function(){var h=A(v().mark(function f(m,p){var y;return v().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,r.processResponse(l.deepChat,i,{text:p});case 2:y=S.sent,y&&u.upsertStreamedMessage({text:y[0].text,overwrite:!0});case 4:case"end":return S.stop()}},f)}));return function(f,m){return h.apply(this,arguments)}}());case 4:u.finaliseStreamedMessage(),this.streamHandlers.onClose();case 6:case"end":return d.stop()}},s,this)}));function n(s,i,a){return t.apply(this,arguments)}return n}()},{key:"generateRespByType",value:function(){var t=A(v().mark(function s(i,a,o,l){var u;return v().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(d.prev=0,!o){d.next=6;break}return d.next=4,this.streamResp(i,a,l);case 4:d.next=8;break;case 6:return d.next=8,this.immediateResp(i,a,l);case 8:d.next=13;break;case 10:d.prev=10,d.t0=d.catch(0),(u=this._messages)==null||u.addNewErrorMessage("service"),console.log(d.t0);case 13:case"end":return d.stop()}},s,this,[[0,10]])}));function n(s,i,a,o){return t.apply(this,arguments)}return n}()},{key:"generateResp",value:function(){var t=A(v().mark(function s(i,a,o){var l,u,c,d,h,f,m;return v().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return l=a[a.length-1].text,y.next=3,oe.processRequestInterceptor(this.deepChat,{body:{text:l}});case 3:u=y.sent,c=u.body,d=u.error,h=!!this.stream;try{d?(oe.displayError(i,new Error(d)),(h?this.streamHandlers.onClose:this.completionsHandlers.onFinish)()):!c||!c.text?(f=xe.INVALID_MODEL_REQUEST({body:c},!1),console.error(f),m=h?this.streamHandlers.onClose:this.completionsHandlers.onFinish,oe.onInterceptorError(i,f,m)):this.generateRespByType(i,c.text,!!this.stream,o)}catch(g){this.unloadChat(g)}case 8:case"end":return y.stop()}},s,this)}));function n(s,i,a){return t.apply(this,arguments)}return n}()},{key:"callServiceAPI",value:function(){var t=A(v().mark(function s(i,a){var o,l;return v().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(this._isModelLoaded){c.next=7;break}if(!this._loadOnFirstMessage){c.next=6;break}return c.next=4,this.init();case 4:c.next=7;break;case 6:return c.abrupt("return");case 7:!r.chat||this._isModelLoading||((o=this._webModel.introMessage)!=null&&o.removeAfterMessage&&((l=this._removeIntro)==null||l.call(this)),i.addLoadingMessage(),this.generateResp(i,a,r.chat));case 8:case"end":return c.stop()}},s,this)}));function n(s,i){return t.apply(this,arguments)}return n}()},{key:"canSubmit",value:function(n){return!(n!=null&&n.trim())||this._isModelLoading?!1:this._loadOnFirstMessage?!0:!!this._isModelLoaded}},{key:"isWebModel",value:function(){return!0}}],[{key:"setUpHistory",value:function(n,s){s.forEach(function(i,a){if(i.role===Z.USER_ROLE&&i.text){var o=s[a+1];o!=null&&o.text&&o.role!==Z.USER_ROLE&&n.push([i.text,o.text])}})}},{key:"processResponse",value:function(){var t=A(v().mark(function s(i,a,o){var l,u,c,d,h,f;return v().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,(l=i.responseInterceptor)==null?void 0:l.call(i,o);case 2:if(p.t0=p.sent,p.t0){p.next=5;break}p.t0=o;case 5:if(c=p.t0,!((u=i.connect)!=null&&u.stream&&Array.isArray(c)&&c.length>1)){p.next=9;break}return console.error(xe.INVALID_STREAM_ARRAY_RESPONSE),p.abrupt("return");case 9:if(d=Array.isArray(c)?c:[c],h=d.find(function(y){return typeof y.error=="string"}),!h){p.next=15;break}return oe.displayError(a,new Error(h.error)),p.abrupt("return");case 15:if(!d.find(function(y){return!y||!y.text})){p.next=19;break}return f=xe.INVALID_MODEL_RESPONSE(o,!!i.responseInterceptor,c),oe.displayError(a,new Error(f)),p.abrupt("return");case 19:return p.abrupt("return",d);case 20:case"end":return p.stop()}},s)}));function n(s,i,a){return t.apply(this,arguments)}return n}()},{key:"clearAllCache",value:function(){r.clearCache("webllm/model"),r.clearCache("webllm/wasm")}},{key:"clearCache",value:function(n){caches.open(n).then(function(s){s.keys().then(function(i){i.forEach(function(a){s.delete(a)})})})}}])}(Js);Hn.GENERIC_ERROR="Error, please check the [troubleshooting](https://deepchat.dev/docs/webModel#troubleshooting) section of documentation for help.",Hn.MULTIPLE_MODELS_ERROR="Cannot run multiple web models",Hn.WEB_LLM_NOT_FOUND_ERROR="WebLLM module not found",Hn.DEFAULT_MODEL="Llama-2-7b-chat-hf-q4f32_1",Hn.MODULE_SEARCH_LIMIT_S=5;var uo=Hn,Gl=function(){function e(){w(this,e)}return C(e,null,[{key:"buildHeaders",value:function(t){return{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}}},{key:"handleVerificationResult",value:function(t,n,s,i){var a=t;Array.isArray(a.error)&&a.error[0]==="Error in `parameters`: field required"?s(n):i(xe.INVALID_KEY)}},{key:"buildKeyVerificationDetails",value:function(){return{url:"https://api-inference.huggingface.co/models/gpt2",method:"POST",handleVerificationResult:e.handleVerificationResult}}}])}(),Id=function(e){function r(t,n,s,i,a,o){var l;return w(this,r),l=ee(this,r,[t,Gl.buildKeyVerificationDetails(),Gl.buildHeaders,a,o]),l.insertKeyPlaceholderText="Hugging Face Token",l.keyHelpUrl="https://huggingface.co/settings/tokens",l.introPanelMarkUp=`
    <div style="width: 100%; text-align: center; margin-left: -10px"><b>Hugging Face</b></div>
    <p>First message may take an extented amount of time to complete as the model needs to be initialized.</p>`,l.permittedErrorPrefixes=["Authorization header"],l.url="".concat(r.URL_PREFIX).concat(s),l.textInputPlaceholderText=n,W(i)=="object"&&(i.model&&(l.url="".concat(r.URL_PREFIX).concat(i.model)),i.options&&(l.rawBody.options=i.options),i.parameters&&(l.rawBody.parameters=i.parameters)),l}return te(r,e),C(r,[{key:"preprocessBody",value:function(n,s,i){var a,o=JSON.parse(JSON.stringify(n)),l=s[s.length-1].text;if(l)return(a=o.options)!==null&&a!==void 0||(o.options={}),o.options.wait_for_model=!0,ve({inputs:l},o)}},{key:"callServiceAPI",value:function(){var t=A(v().mark(function s(i,a,o){var l;return v().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(this.connectSettings){c.next=2;break}throw new Error("Request settings have not been set up");case 2:l=this.preprocessBody(this.rawBody,a,o),Ie.request(this,l,i);case 4:case"end":return c.stop()}},s,this)}));function n(s,i,a){return t.apply(this,arguments)}return n}()}])}(Ze);Id.URL_PREFIX="https://api-inference.huggingface.co/models/";var Ln=Id,co=function(e){function r(t,n,s,i,a,o){var l;return w(this,r),l=ee(this,r,[t,n,s,i,a,o]),l.isTextInputDisabled=!0,l.canSendMessage=r.canSendFile,l}return te(r,e),C(r,[{key:"preprocessBody",value:function(n,s,i){return i[0]}},{key:"callServiceAPI",value:function(){var t=A(v().mark(function s(i,a,o){return v().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(this.connectSettings){u.next=2;break}throw new Error("Request settings have not been set up");case 2:if(o!=null&&o[0]){u.next=4;break}throw new Error("No file was added");case 4:Ie.poll(this,o[0],i,!1);case 5:case"end":return u.stop()}},s,this)}));function n(s,i,a){return t.apply(this,arguments)}return n}()}],[{key:"canSendFile",value:function(n,s){return!!(s!=null&&s[0])}}])}(Ln),Hy=function(e){function r(t){w(this,r);var n,s,i,a=(s=(n=t.directConnection)==null?void 0:n.huggingFace)==null?void 0:s.audioClassification,o=(i=t.directConnection)==null?void 0:i.huggingFace;return ee(this,r,[t,"Attach an audio file","ehcalabres/wav2vec2-lg-xlsr-en-speech-emotion-recognition",a,o,{audio:{}}])}return te(r,e),C(r,[{key:"extractPollResultData",value:function(){var t=A(v().mark(function s(i){var a;return v().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!i.estimated_time){l.next=2;break}return l.abrupt("return",{timeoutMS:(i.estimated_time+1)*1e3});case 2:if(!i.error){l.next=4;break}throw i.error;case 4:return l.abrupt("return",{text:((a=i[0])==null?void 0:a.label)||""});case 5:case"end":return l.stop()}},s)}));function n(s){return t.apply(this,arguments)}return n}()}])}(co),$y=function(e){function r(t){w(this,r);var n,s,i,a=(s=(n=t.directConnection)==null?void 0:n.huggingFace)==null?void 0:s.imageClassification,o=(i=t.directConnection)==null?void 0:i.huggingFace;return ee(this,r,[t,"Attach an image file","google/vit-base-patch16-224",a,o,{images:{}}])}return te(r,e),C(r,[{key:"extractPollResultData",value:function(){var t=A(v().mark(function s(i){var a;return v().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!i.estimated_time){l.next=2;break}return l.abrupt("return",{timeoutMS:(i.estimated_time+1)*1e3});case 2:if(!i.error){l.next=4;break}throw i.error;case 4:return l.abrupt("return",{text:((a=i[0])==null?void 0:a.label)||""});case 5:case"end":return l.stop()}},s)}));function n(s){return t.apply(this,arguments)}return n}()}])}(co),cs="data:image/png;base64,",cn=function(){function e(){w(this,e)}return C(e,null,[{key:"buildHeaders",value:function(t){return{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}}},{key:"handleVerificationResult",value:function(t,n,s,i){t.message?i(xe.INVALID_KEY):s(n)}},{key:"buildKeyVerificationDetails",value:function(){return{url:"https://api.stability.ai/v1/engines/list",method:"GET",handleVerificationResult:e.handleVerificationResult}}}])}(),pi=function(e){function r(t,n,s,i,a){var o;return w(this,r),o=ee(this,r,[t,n,s,i,a]),o.insertKeyPlaceholderText="Stability AI API Key",o.keyHelpUrl="https://platform.stability.ai/docs/getting-started/authentication",o.permittedErrorPrefixes=["Incorrect","invalid_"],o}return te(r,e),C(r)}(Ze),Vy=function(e){function r(t){var n;w(this,r);var s,i=JSON.parse(JSON.stringify(t.directConnection)),a=i==null?void 0:i.stabilityAI,o={images:{files:{acceptedFormats:".png",maxNumberOfFiles:1}}};n=ee(this,r,[t,cn.buildKeyVerificationDetails(),cn.buildHeaders,a,o]),n.url="https://api.stability.ai/v1/generation/esrgan-v1-x2plus/image-to-image/upscale",n.textInputPlaceholderText="Describe image changes",n.introPanelMarkUp=`
    <div style="width: 100%; text-align: center; margin-left: -10px"><b>Stability AI</b></div>
    <div style="width: 100%; text-align: center; margin-left: -10px; margin-top: 5px"><b>Image to Image Upscale</b></div>
    <p>Upload an image to generate a new one with higher resolution.</p>
    <p>Click <a href="https://platform.stability.ai/">here</a> for more info.</p>`;var l=(s=i==null?void 0:i.stabilityAI)==null?void 0:s.imageToImageUpscale;return W(l)=="object"&&(l.engine_id&&(n.url="https://api.stability.ai/v1/generation/".concat(l.engine_id,"/image-to-image/upscale")),r.cleanConfig(l),Object.assign(n.rawBody,l)),n.canSendMessage=r.canSendFileMessage,n}return te(r,e),C(r,[{key:"createFormDataBody",value:function(n,s){var i=new FormData;return i.append("image",s),Object.keys(n).forEach(function(a){i.append(a,String(n[a]))}),i}},{key:"callServiceAPI",value:function(){var t=A(v().mark(function s(i,a,o){var l;return v().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(this.connectSettings){c.next=2;break}throw new Error("Request settings have not been set up");case 2:if(o){c.next=4;break}throw new Error("Image was not found");case 4:l=this.createFormDataBody(this.rawBody,o[0]),oe.tempRemoveContentHeader(this.connectSettings,Ie.request.bind(this,this,l,i),!1);case 6:case"end":return c.stop()}},s,this)}));function n(s,i,a){return t.apply(this,arguments)}return n}()},{key:"extractResultData",value:function(){var t=A(v().mark(function s(i){return v().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!i.message){o.next=2;break}throw i.message;case 2:return o.abrupt("return",{files:i.artifacts.map(function(l){return{src:"".concat(cs).concat(l.base64),type:"image"}})});case 3:case"end":return o.stop()}},s)}));function n(s){return t.apply(this,arguments)}return n}()}],[{key:"cleanConfig",value:function(n){delete n.engine_id}},{key:"canSendFileMessage",value:function(n,s){return!!(s!=null&&s[0])}}])}(pi),qy=function(e){function r(t){var n;w(this,r);var s,i=JSON.parse(JSON.stringify(t.directConnection)),a=i==null?void 0:i.stabilityAI,o={images:{files:{acceptedFormats:".png",maxNumberOfFiles:2}}};n=ee(this,r,[t,cn.buildKeyVerificationDetails(),cn.buildHeaders,a,o]),n.url="https://api.stability.ai/v1/generation/stable-diffusion-xl-1024-v1-0/image-to-image/masking",n._maskSource="MASK_IMAGE_WHITE",n.textInputPlaceholderText="Describe image changes",n.introPanelMarkUp=`
    <div style="width: 100%; text-align: center; margin-left: -10px"><b>Stability AI</b></div>
    <div style="width: 100%; text-align: center; margin-left: -10px; margin-top: 5px"><b>Image to Image Masking</b></div>
    <p>Upload an image, its mask image to create a new one based on the changes you have described for the mask area.</p>
    <p>Click <a href="https://platform.stability.ai/">here</a> for more info.</p>`;var l=(s=i==null?void 0:i.stabilityAI)==null?void 0:s.imageToImageMasking;return W(l)=="object"&&(l.engine_id&&(n.url="https://api.stability.ai/v1/generation/".concat(l.engine_id,"/image-to-image/masking")),l.weight!==void 0&&l.weight!==null&&(n._imageWeight=l.weight),l.mask_source!==void 0&&l.mask_source!==null&&(n._maskSource=l.mask_source),r.cleanConfig(l),Object.assign(n.rawBody,l)),n.canSendMessage=r.canSendFileTextMessage,n}return te(r,e),C(r,[{key:"createFormDataBody",value:function(n,s,i,a){var o=new FormData;return o.append("init_image",s),o.append("mask_source",String(this._maskSource)),o.append("mask_image",i),a&&a!==""&&o.append("text_prompts[0][text]",a),this._imageWeight!==void 0&&this._imageWeight!==null&&o.append("text_prompts[0][weight]",String(this._imageWeight)),Object.keys(n).forEach(function(l){o.append(l,String(n[l]))}),o.get("weight")===void 0&&o.append("weight",String(1)),o}},{key:"callServiceAPI",value:function(){var t=A(v().mark(function s(i,a,o){var l,u,c,d;return v().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(this.connectSettings){f.next=2;break}throw new Error("Request settings have not been set up");case 2:if(!(!o||!o[0]||!o[1])){f.next=4;break}throw new Error("Image was not found");case 4:c=(u=(l=a[a.length-1])==null?void 0:l.text)==null?void 0:u.trim(),d=this.createFormDataBody(this.rawBody,o[0],o[1],c),oe.tempRemoveContentHeader(this.connectSettings,Ie.request.bind(this,this,d,i),!1);case 6:case"end":return f.stop()}},s,this)}));function n(s,i,a){return t.apply(this,arguments)}return n}()},{key:"extractResultData",value:function(){var t=A(v().mark(function s(i){return v().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!i.message){o.next=2;break}throw i.message;case 2:return o.abrupt("return",{files:i.artifacts.map(function(l){return{src:"".concat(cs).concat(l.base64),type:"image"}})});case 3:case"end":return o.stop()}},s)}));function n(s){return t.apply(this,arguments)}return n}()}],[{key:"cleanConfig",value:function(n){delete n.engine_id,delete n.weight}},{key:"canSendFileTextMessage",value:function(n,s){return!!(s!=null&&s[0])&&!!(n&&n.trim()!=="")}}])}(pi),zy=function(e){function r(t){w(this,r);var n,s,i,a=(s=(n=t.directConnection)==null?void 0:n.huggingFace)==null?void 0:s.audioSpeechRecognition,o=(i=t.directConnection)==null?void 0:i.huggingFace;return ee(this,r,[t,"Attach an audio file","facebook/wav2vec2-large-960h-lv60-self",a,o,{audio:{}}])}return te(r,e),C(r,[{key:"extractPollResultData",value:function(){var t=A(v().mark(function s(i){return v().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!i.estimated_time){o.next=2;break}return o.abrupt("return",{timeoutMS:(i.estimated_time+1)*1e3});case 2:if(!i.error){o.next=4;break}throw i.error;case 4:return o.abrupt("return",{text:i.text||""});case 5:case"end":return o.stop()}},s)}));function n(s){return t.apply(this,arguments)}return n}()}])}(co),Gy=function(e){function r(t){w(this,r);var n,s,i,a=(s=(n=t.directConnection)==null?void 0:n.huggingFace)==null?void 0:s.textGeneration,o=(i=t.directConnection)==null?void 0:i.huggingFace;return ee(this,r,[t,"Once upon a time","gpt2",a,o])}return te(r,e),C(r,[{key:"extractResultData",value:function(){var t=A(v().mark(function s(i){var a;return v().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!i.error){l.next=2;break}throw i.error;case 2:return l.abrupt("return",{text:((a=i[0])==null?void 0:a.generated_text)||""});case 3:case"end":return l.stop()}},s)}));function n(s){return t.apply(this,arguments)}return n}()}])}(Ln),Ky=function(e){function r(t){var n;w(this,r);var s,i,a,o=(i=(s=t.directConnection)==null?void 0:s.huggingFace)==null?void 0:i.questionAnswer,l=(a=t.directConnection)==null?void 0:a.huggingFace;return n=ee(this,r,[t,"Ask a question","bert-large-uncased-whole-word-masking-finetuned-squad",o,l]),n.permittedErrorPrefixes=["Authorization header","Error in"],n.context=o.context,n}return te(r,e),C(r,[{key:"preprocessBody",value:function(n,s){var i=s[s.length-1].text;if(i)return{inputs:{question:i,context:this.context,options:{wait_for_model:!0}}}}},{key:"extractResultData",value:function(){var t=A(v().mark(function s(i){return v().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!i.error){o.next=2;break}throw i.error;case 2:return o.abrupt("return",{text:i.answer||""});case 3:case"end":return o.stop()}},s)}));function n(s){return t.apply(this,arguments)}return n}()}])}(Ln),Wy=function(e){function r(t){w(this,r);var n,s,i,a=(s=(n=t.directConnection)==null?void 0:n.huggingFace)==null?void 0:s.summarization,o=(i=t.directConnection)==null?void 0:i.huggingFace;return ee(this,r,[t,"Insert text to summarize","facebook/bart-large-cnn",a,o])}return te(r,e),C(r,[{key:"extractResultData",value:function(){var t=A(v().mark(function s(i){var a;return v().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!i.error){l.next=2;break}throw i.error;case 2:return l.abrupt("return",{text:((a=i[0])==null?void 0:a.summary_text)||""});case 3:case"end":return l.stop()}},s)}));function n(s){return t.apply(this,arguments)}return n}()}])}(Ln),Jy=function(e){function r(t){var n,s;w(this,r);var i,a,o,l=(a=(i=t.directConnection)==null?void 0:i.huggingFace)==null?void 0:a.conversation,u=(o=t.directConnection)==null?void 0:o.huggingFace;return s=ee(this,r,[t,"Ask me anything!","facebook/blenderbot-400M-distill",l,u]),(n=s.maxMessages)!==null&&n!==void 0||(s.maxMessages=-1),s}return te(r,e),C(r,[{key:"processMessages",value:function(n){var s=n.filter(function(u){return u.text}),i=s[s.length-1].text,a=s.slice(0,s.length-1);if(i){var o=a.filter(function(u){return u.role==="user"}).map(function(u){return u.text}),l=a.filter(function(u){return u.role==="ai"}).map(function(u){return u.text});return{past_user_inputs:o,generated_responses:l,mostRecentMessageText:i}}}},{key:"preprocessBody",value:function(n,s){var i,a=JSON.parse(JSON.stringify(n)),o=this.processMessages(s);if(o)return(i=a.options)!==null&&i!==void 0||(a.options={}),a.options.wait_for_model=!0,ve({inputs:{past_user_inputs:o.past_user_inputs,generated_responses:o.generated_responses,text:o.mostRecentMessageText}},a)}},{key:"extractResultData",value:function(){var t=A(v().mark(function s(i){return v().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!i.error){o.next=2;break}throw i.error;case 2:return o.abrupt("return",{text:i.generated_text||""});case 3:case"end":return o.stop()}},s)}));function n(s){return t.apply(this,arguments)}return n}()}])}(Ln),Yy=function(e){function r(t){var n;w(this,r);var s,i=JSON.parse(JSON.stringify(t.directConnection)),a=i.stabilityAI,o={images:{files:{acceptedFormats:".png",maxNumberOfFiles:1}}};n=ee(this,r,[t,cn.buildKeyVerificationDetails(),cn.buildHeaders,a,o]),n.url="https://api.stability.ai/v1/generation/stable-diffusion-v1-6/image-to-image",n.textInputPlaceholderText="Describe image changes",n.introPanelMarkUp=`
    <div style="width: 100%; text-align: center; margin-left: -10px"><b>Stability AI: Image to Image</b></div>
    <p>Upload an image to create a new one with the changes you have described.</p>
    <p>Click <a href="https://platform.stability.ai/">here</a> for more info.</p>`;var l=(s=i.stabilityAI)==null?void 0:s.imageToImage;return W(l)=="object"&&(l.engine_id&&(n.url="https://api.stability.ai/v1/generation/".concat(l.engine_id,"/text-to-image")),l.weight!==void 0&&l.weight!==null&&(n._imageWeight=l.weight),r.cleanConfig(l),Object.assign(n.rawBody,l)),n.canSendMessage=r.canSendFileTextMessage,n}return te(r,e),C(r,[{key:"createFormDataBody",value:function(n,s,i){var a=new FormData;return a.append("init_image",s),i&&i!==""&&a.append("text_prompts[0][text]",i),this._imageWeight!==void 0&&this._imageWeight!==null&&a.append("text_prompts[0][weight]",String(this._imageWeight)),Object.keys(n).forEach(function(o){a.append(o,String(n[o]))}),a.get("weight")===void 0&&a.append("weight",String(1)),a}},{key:"callServiceAPI",value:function(){var t=A(v().mark(function s(i,a,o){var l,u,c,d;return v().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(this.connectSettings){f.next=2;break}throw new Error("Request settings have not been set up");case 2:if(o){f.next=4;break}throw new Error("Image was not found");case 4:c=(u=(l=a[a.length-1])==null?void 0:l.text)==null?void 0:u.trim(),d=this.createFormDataBody(this.rawBody,o[0],c),oe.tempRemoveContentHeader(this.connectSettings,Ie.request.bind(this,this,d,i),!1);case 6:case"end":return f.stop()}},s,this)}));function n(s,i,a){return t.apply(this,arguments)}return n}()},{key:"extractResultData",value:function(){var t=A(v().mark(function s(i){return v().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!i.message){o.next=2;break}throw i.message;case 2:return o.abrupt("return",{files:i.artifacts.map(function(l){return{src:"".concat(cs).concat(l.base64),type:"image"}})});case 3:case"end":return o.stop()}},s)}));function n(s){return t.apply(this,arguments)}return n}()}],[{key:"cleanConfig",value:function(n){delete n.engine_id,delete n.weight}},{key:"canSendFileTextMessage",value:function(n,s){return!!(s!=null&&s[0])&&!!(n&&n.trim()!=="")}}])}(pi),Xy=function(e){function r(t){w(this,r);var n,s,i,a=(s=(n=t.directConnection)==null?void 0:n.huggingFace)==null?void 0:s.translation,o=(i=t.directConnection)==null?void 0:i.huggingFace;return ee(this,r,[t,"Insert text to translate","Helsinki-NLP/opus-tatoeba-en-ja",a,o])}return te(r,e),C(r,[{key:"extractResultData",value:function(){var t=A(v().mark(function s(i){var a;return v().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!i.error){l.next=2;break}throw i.error;case 2:return l.abrupt("return",{text:((a=i[0])==null?void 0:a.translation_text)||""});case 3:case"end":return l.stop()}},s)}));function n(s){return t.apply(this,arguments)}return n}()}])}(Ln),Zy=function(e){function r(t){var n;w(this,r);var s,i=JSON.parse(JSON.stringify(t.directConnection)),a=i.stabilityAI;n=ee(this,r,[t,cn.buildKeyVerificationDetails(),cn.buildHeaders,a]),n.url="https://api.stability.ai/v1/generation/stable-diffusion-v1-6/text-to-image",n.textInputPlaceholderText="Describe an image",n.introPanelMarkUp=`
    <div style="width: 100%; text-align: center; margin-left: -10px"><b>Stability AI: Text to Image</b></div>
    <p>Insert text to generate an image.</p>
    <p>Click <a href="https://platform.stability.ai/">here</a> for more info.</p>`;var o=(s=i.stabilityAI)==null?void 0:s.textToImage;return W(o)=="object"&&(o.engine_id&&(n.url="https://api.stability.ai/v1/generation/".concat(o.engine_id,"/text-to-image")),o.weight!==void 0&&o.weight!==null&&(n._imageWeight=o.weight),r.cleanConfig(o),Object.assign(n.rawBody,o)),n.canSendMessage=r.canSendTextMessage,n}return te(r,e),C(r,[{key:"preprocessBody",value:function(n,s){var i=JSON.parse(JSON.stringify(n)),a={text:s};return this._imageWeight&&(a.weight=this._imageWeight),i.text_prompts=[a],i}},{key:"callServiceAPI",value:function(){var t=A(v().mark(function s(i,a){var o;return v().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(this.connectSettings){u.next=2;break}throw new Error("Request settings have not been set up");case 2:o=this.preprocessBody(this.rawBody,a[a.length-1].text),Ie.request(this,o,i);case 4:case"end":return u.stop()}},s,this)}));function n(s,i){return t.apply(this,arguments)}return n}()},{key:"extractResultData",value:function(){var t=A(v().mark(function s(i){return v().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!i.message){o.next=2;break}throw i.message;case 2:return o.abrupt("return",{files:i.artifacts.map(function(l){return{src:"".concat(cs).concat(l.base64),type:"image"}})});case 3:case"end":return o.stop()}},s)}));function n(s){return t.apply(this,arguments)}return n}()}],[{key:"cleanConfig",value:function(n){delete n.engine_id,delete n.weight}},{key:"canSendTextMessage",value:function(n){return!!(n&&n.trim()!=="")}}])}(pi),Qy=function(e){function r(t){var n;w(this,r);var s,i,a,o=(i=(s=t.directConnection)==null?void 0:s.huggingFace)==null?void 0:i.fillMask,l=(a=t.directConnection)==null?void 0:a.huggingFace;return n=ee(this,r,[t,"The goal of life is [MASK].","bert-base-uncased",o,l]),n.introPanelMarkUp=`
    <div style="width: 100%; text-align: center; margin-left: -10px"><b>Hugging Face</b></div>
    <p>Insert a sentence with the word [MASK] and the model will try to fill it for you. E.g. I want [MASK].</p>
    <p>First message may take an extented amount of time to complete as the model needs to be initialized.</p>`,n.permittedErrorPrefixes=["Authorization header","No mask_token"],n}return te(r,e),C(r,[{key:"extractResultData",value:function(){var t=A(v().mark(function s(i){var a;return v().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!i.error){l.next=2;break}throw i.error;case 2:return l.abrupt("return",{text:((a=i[0])==null?void 0:a.sequence)||""});case 3:case"end":return l.stop()}},s)}));function n(s){return t.apply(this,arguments)}return n}()}])}(Ln),ba=function(){function e(){w(this,e)}return C(e,null,[{key:"buildHeaders",value:function(t){return{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}}},{key:"handleVerificationResult",value:function(t,n,s,i){var a=t;a.error?a.error.code==="invalid_api_key"?i(xe.INVALID_KEY):i(xe.CONNECTION_FAILED):s(n)}},{key:"buildKeyVerificationDetails",value:function(){return{url:"https://api.openai.com/v1/models",method:"GET",handleVerificationResult:e.handleVerificationResult}}},{key:"directFetch",value:function(){var r=A(v().mark(function n(s,i,a){var o,l,u=arguments;return v().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return o=u.length>3&&u[3]!==void 0?u[3]:!0,s.connectSettings.method=a,d.next=4,oe.fetch(s,s.connectSettings.headers,o,i).then(function(h){return oe.processResponseByType(h)});case 4:if(l=d.sent,!l.error){d.next=7;break}throw l.error.message;case 7:return d.abrupt("return",l);case 8:case"end":return d.stop()}},n)}));function t(n,s,i){return r.apply(this,arguments)}return t}()}])}();ba.FUNCTION_TOOL_RESP_ERROR="Response object must either be {response: string}[] for each individual function or {text: string} for a direct response, see https://deepchat.dev/docs/directConnection/OpenAI#FunctionHandler.",ba.FUNCTION_TOOL_RESP_ARR_ERROR="Arrays are not accepted in handler responses";var Ne=ba,_a=function(){function e(){w(this,e)}return C(e,null,[{key:"storeFiles",value:function(){var r=A(v().mark(function n(s,i,a,o){var l,u,c,d;return v().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(l=s.connectSettings.headers,l){f.next=3;break}return f.abrupt("return");case 3:return s.url=o,u=l[oe.CONTENT_TYPE],delete l[oe.CONTENT_TYPE],c=a.map(function(){var m=A(v().mark(function p(y){var g;return v().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return g=new FormData,k.abrupt("return",(g.append("purpose","assistants"),g.append("file",y),new Promise(function(T){T(Ne.directFetch(s,g,"POST",!1))})));case 2:case"end":return k.stop()}},p)}));return function(p){return m.apply(this,arguments)}}()),f.prev=7,f.next=10,Promise.all(c);case 10:return d=f.sent.map(function(m){return{id:m.id,name:m.filename}}),f.abrupt("return",(l[oe.CONTENT_TYPE]=u,d));case 14:throw f.prev=14,f.t0=f.catch(7),l[oe.CONTENT_TYPE]=u,oe.displayError(i,f.t0),s.completionsHandlers.onFinish(),f.t0;case 17:case"end":return f.stop()}},n,null,[[7,14]])}));function t(n,s,i,a){return r.apply(this,arguments)}return t}()},{key:"getType",value:function(t,n){var s=t[n].path;return!s||s.endsWith("png")?"image":"any"}},{key:"getFiles",value:function(){var r=A(v().mark(function n(s,i,a,o){var l,u;return v().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return l=i.map(function(h){var f=h.fileId;return s.url="".concat(a).concat(f).concat(o),new Promise(function(m){m(Ne.directFetch(s,void 0,"GET",!1))})}),d.next=3,Promise.all(l);case 3:return u=d.sent.map(function(h,f){return new Promise(function(m){var p=new FileReader;p.readAsDataURL(h),p.onload=function(y){m({src:y.target.result,name:i[f].name,type:e.getType(i,f)})}})}),d.next=6,Promise.all(u);case 6:return d.abrupt("return",d.sent);case 7:case"end":return d.stop()}},n)}));function t(n,s,i,a){return r.apply(this,arguments)}return t}()},{key:"getFileName",value:function(t){var n=t.split("/");return n[n.length-1]}},{key:"getFilesAndNewText",value:function(){var r=A(v().mark(function n(s,i,a,o,l){var u,c,d,h,f;return v().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(h=a.getFilesPrefix,f=a.getFilesPostfix,p.t0=i.length>0,!p.t0){p.next=7;break}return p.next=5,e.getFiles(s,i,h,f);case 5:d=p.sent,(u=l==null?void 0:l.text)!=null&&u.value&&d.forEach(function(y,g){var S;if(y.src){var k=i[g].path;(S=l==null?void 0:l.text)!=null&&S.value&&k&&(l.text.value=l.text.value.replace(k,y.src))}});case 7:return p.abrupt("return",(c=l==null?void 0:l.text)!=null&&c.value?{text:l.text.value,role:o}:{files:d,role:o});case 8:case"end":return p.stop()}},n)}));function t(n,s,i,a,o){return r.apply(this,arguments)}return t}()},{key:"getFileDetails",value:function(t,n){var s,i=[];return(s=n==null?void 0:n.text)!=null&&s.value&&t.content.forEach(function(a){var o,l;(l=(o=a.text)==null?void 0:o.annotations)==null||l.forEach(function(u){var c;u.text&&u.text.startsWith("sandbox:")&&(c=u.file_path)!=null&&c.file_id&&i.push({path:u.text,fileId:u.file_path.file_id,name:e.getFileName(u.text)})})}),n!=null&&n.image_file&&i.push({fileId:n.image_file.file_id}),i}},{key:"getFilesAndText",value:function(){var r=A(v().mark(function n(s,i,a,o){var l;return v().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return l=e.getFileDetails(i,o),c.next=3,e.getFilesAndNewText(s,l,a,i.role,o);case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n)}));function t(n,s,i,a){return r.apply(this,arguments)}return t}()},{key:"parseResult",value:function(t,n){var s=[];if(n)s=t.data;else for(var i=0;i<t.data.length;i+=1){var a=t.data[i];if(a.role==="assistant")s.push(a);else break}return s.reverse()}},{key:"parseMessages",value:function(t,n,s){var i=[];return n.forEach(function(){var a=A(v().mark(function o(l){return v().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:l.content.filter(function(d){return!!d.text||!!d.image_file}).sort(function(d){return d.text?-1:d.image_file?1:0}).forEach(function(){var d=A(v().mark(function h(f){return v().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:i.push(e.getFilesAndText(t,l,s,f));case 1:case"end":return p.stop()}},h)}));return function(h){return d.apply(this,arguments)}}());case 1:case"end":return c.stop()}},o)}));return function(o){return a.apply(this,arguments)}}()),Promise.all(i)}},{key:"processStreamMessages",value:function(){var r=A(v().mark(function n(s,i,a){return v().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",e.parseMessages(s,[{content:i,role:"assistant"}],a));case 1:case"end":return l.stop()}},n)}));function t(n,s,i){return r.apply(this,arguments)}return t}()},{key:"processAPIMessages",value:function(){var r=A(v().mark(function n(s,i,a,o){var l;return v().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return l=e.parseResult(i,a),c.abrupt("return",e.parseMessages(s,l,o));case 2:case"end":return c.stop()}},n)}));function t(n,s,i,a){return r.apply(this,arguments)}return t}()}])}();_a.FILES_WITH_TEXT_ERROR="content with type `text` must have `text` values",_a.FUNCTION_TOOL_RESP_ERROR="Response must contain an array of strings for each individual function/tool_call, see https://deepchat.dev/docs/directConnection/OpenAI/#assistant-functions.";var vn=_a,Ld=function(e){function r(t,n,s,i,a,o){var l;if(w(this,r),l=ee(this,r,[t,i,a,o]),l.insertKeyPlaceholderText="OpenAI API Key",l.keyHelpUrl="https://platform.openai.com/account/api-keys",l.url="",l.permittedErrorPrefixes=["Incorrect","Please send text",oo.FAILED_ERROR_MESSAGE],l.shouldFetchHistory=!1,l.searchedForThreadId=!1,l.config={},l.newAssistantDetails={model:"gpt-4"},l.waitingForStreamResponse=!1,l.isSSEStream=!1,l.urlSegments=s,W(n)=="object"){l.config=n;var u=l.config,c=u.new_assistant,d=u.thread_id,h=u.load_thread_history;Object.assign(l.newAssistantDetails,c),d&&(l.sessionId=d),h&&(l.shouldFetchHistory=!0)}return l.maxMessages=1,l.isSSEStream=!!(l.stream&&(W(l.stream)!="object"||!l.stream.simulation)),l}return te(r,e),C(r,[{key:"fetchHistoryFunc",value:function(){var t=A(v().mark(function s(){var i=this,a;return v().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return setTimeout(function(){return i.deepChat.disableSubmitButton()},2),l.prev=1,l.next=4,this.getThreadMessages(this.sessionId,!0);case 4:return a=l.sent,l.abrupt("return",(this.deepChat.disableSubmitButton(!1),a));case 8:return l.prev=8,l.t0=l.catch(1),l.abrupt("return",[{error:"Failed to fetch history"}]);case 11:case"end":return l.stop()}},s,this,[[1,8]])}));function n(){return t.apply(this,arguments)}return n}()},{key:"processMessage",value:function(n,s){var i=this.totalMessagesMaxCharLength||-1,a=lo.getCharacterLimitMessages(n,i)[0];if(s&&s.length>0){var o=this.filesToolType;if(typeof this.filesToolType=="function"){var l=this.filesToolType(s.map(function(c){var d=c.name;return d}));l==="code_interpreter"||l==="file_search"||l==="images"?o=l:(console.error('Tool type "'.concat(l,'" is not valid')),console.error('Expected "code_interpreter" or "file_search" or "images". Going to default to "images"'))}if(o==="file_search")return r.processAttachmentsMessage(a,s,"file_search");if(o==="code_interpreter")return r.processAttachmentsMessage(a,s,"code_interpreter");if(s.find(function(c){var d=c.name;return!st.isImageFileExtension(d)}))console.error("The uploaded files contained a non-image file"),console.error('Make sure only images can be uploaded or define a "code_interpreter" or "file_search" value in the "files_tool_type" property'),console.warn('Make sure your existing assistant supports these "tools" or specify them in the "new_assistant" property');else{var u=r.processImageMessage(a,s);if(u)return u}}return{content:a.text||"",role:"user"}}},{key:"createNewThreadMessages",value:function(n,s,i){var a=JSON.parse(JSON.stringify(n)),o=this.processMessage(s,i);return a.thread={messages:[o]},a}},{key:"callService",value:function(n,s,i){if(this.messages=n,this.sessionId){this.url="".concat(this.urlSegments.threadsPrefix,"/").concat(this.sessionId,"/messages").concat(this.urlSegments.createMessagePostfix);var a=this.processMessage(s,i);Ie.request(this,a,n)}else{this.url="".concat(this.urlSegments.threadsPrefix,"/runs").concat(this.urlSegments.threadsPosfix);var o=this.createNewThreadMessages(this.rawBody,s,i);this.isSSEStream?this.createStreamRun(o):Ie.request(this,o,n)}}},{key:"callServiceAPI",value:function(){var t=A(v().mark(function s(i,a,o){var l,u,c;return v().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(this.waitingForStreamResponse=!1,!!this.connectSettings){h.next=2;break}throw new Error("Request settings have not been set up");case 2:if(!((l=(u=this.rawBody).assistant_id)!==null&&l!==void 0)){h.next=6;break}h.next=12;break;case 6:if(h.t0=this.config.assistant_id,h.t0){h.next=11;break}return h.next=10,this.createNewAssistant();case 10:h.t0=h.sent;case 11:u.assistant_id=h.t0;case 12:if(this.searchedForThreadId||this.searchPreviousMessagesForThreadId(i.messageToElements),!o){h.next=19;break}return h.next=16,vn.storeFiles(this,i,o,this.urlSegments.storeFiles);case 16:h.t1=h.sent,h.next=20;break;case 19:h.t1=void 0;case 20:c=h.t1,this.connectSettings.method="POST",this.callService(i,a,c);case 22:case"end":return h.stop()}},s,this)}));function n(s,i,a){return t.apply(this,arguments)}return n}()},{key:"createNewAssistant",value:function(){var t=A(v().mark(function s(){var i;return v().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,this.url=this.urlSegments.newAssistantUrl,o.next=4,Ne.directFetch(this,JSON.parse(JSON.stringify(this.newAssistantDetails)),"POST");case 4:return i=o.sent,o.abrupt("return",(this.config.assistant_id=i.id,this.config.assistant_id));case 8:o.prev=8,o.t0=o.catch(0),console.error(o.t0),console.error("Failed to create a new assistant");case 11:case"end":return o.stop()}},s,this,[[0,8]])}));function n(){return t.apply(this,arguments)}return n}()},{key:"searchPreviousMessagesForThreadId",value:function(n){var s=n.find(function(i){var a=Xa(i,1),o=a[0];return o._sessionId});s&&(this.sessionId=s[0]._sessionId),this.searchedForThreadId=!0}},{key:"extractResultData",value:function(){var t=A(v().mark(function s(i){var a,o,l;return v().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!(this.waitingForStreamResponse||this.isSSEStream&&this.sessionId)){c.next=4;break}return c.next=3,this.handleStream(i);case 3:return c.abrupt("return",c.sent);case 4:if(!i.error){c.next=6;break}throw i.error.message.startsWith(vn.FILES_WITH_TEXT_ERROR)?Error("Please send text with your file(s)"):i.error.message;case 6:return c.next=8,this.assignThreadAndRun(i);case 8:return o="".concat(this.urlSegments.threadsPrefix,"/").concat(this.sessionId,"/runs/").concat(this.run_id).concat(this.urlSegments.threadsPosfix),l={method:"GET",headers:(a=this.connectSettings)==null?void 0:a.headers},c.abrupt("return",(Ie.executePollRequest(this,o,l,this.messages),{makingAnotherRequest:!0}));case 10:case"end":return c.stop()}},s,this)}));function n(s){return t.apply(this,arguments)}return n}()},{key:"assignThreadAndRun",value:function(){var t=A(v().mark(function s(i){var a;return v().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!this.sessionId){l.next=8;break}return this.url="".concat(this.urlSegments.threadsPrefix,"/").concat(this.sessionId,"/runs").concat(this.urlSegments.threadsPosfix),l.next=4,Ne.directFetch(this,JSON.parse(JSON.stringify(this.rawBody)),"POST");case 4:a=l.sent,this.run_id=a.id,l.next=9;break;case 8:this.sessionId=i.thread_id,this.run_id=i.id,this.messages&&this.messages.messageToElements.length>0&&(this.messages.messageToElements[this.messages.messageToElements.length-1][0]._sessionId=this.sessionId);case 9:case"end":return l.stop()}},s,this)}));function n(s){return t.apply(this,arguments)}return n}()},{key:"getThreadMessages",value:function(){var t=A(v().mark(function s(i){var a,o,l,u,c=arguments;return v().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return a=c.length>1&&c[1]!==void 0?c[1]:!1,this.url="".concat(this.urlSegments.threadsPrefix,"/").concat(i,"/messages?").concat(this.urlSegments.listMessagesPostfix),h.next=4,Ne.directFetch(this,{},"GET");case 4:if(u=h.sent,h.t0=!a&&this.deepChat.responseInterceptor,!h.t0){h.next=10;break}return h.next=9,(l=(o=this.deepChat).responseInterceptor)==null?void 0:l.call(o,u);case 9:u=h.sent;case 10:return h.abrupt("return",vn.processAPIMessages(this,u,a,this.urlSegments));case 11:case"end":return h.stop()}},s,this)}));function n(s){return t.apply(this,arguments)}return n}()},{key:"extractPollResultData",value:function(){var t=A(v().mark(function s(i){var a=this,o,l,u,c,d,h,f,m;return v().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(l=i.status,u=i.required_action,!(l==="queued"||l==="in_progress")){y.next=3;break}return y.abrupt("return",{timeoutMS:r.POLLING_TIMEOUT_MS});case 3:if(!(l==="completed"&&this.messages)){y.next=11;break}return y.next=6,this.getThreadMessages(i.thread_id);case 6:return c=y.sent,d=c.shift(),h=d.text,f=d.files,y.abrupt("return",(setTimeout(function(){c.forEach(function(g){return a.deepChat.addMessage(g)})}),{text:h,_sessionId:this.sessionId,files:f}));case 11:if(m=(o=u==null?void 0:u.submit_tool_outputs)==null?void 0:o.tool_calls,!(l==="requires_action"&&m)){y.next=16;break}return y.next=15,this.handleTools(m);case 15:return y.abrupt("return",y.sent);case 16:throw Error("Thread run status: ".concat(l));case 17:case"end":return y.stop()}},s,this)}));function n(s){return t.apply(this,arguments)}return n}()},{key:"handleTools",value:function(){var t=A(v().mark(function s(i){var a,o,l,u,c,d;return v().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(this.functionHandler){f.next=2;break}throw Error("Please define the `function_handler` property inside the [openAI](https://deepchat.dev/docs/directConnection/openAI#Assistant) object.");case 2:return a=i.map(function(m){return{name:m.function.name,arguments:m.function.arguments}}),f.next=5,this.functionHandler(a);case 5:if(o=f.sent,!(!Array.isArray(o)||i.length!==o.length)){f.next=8;break}throw Error(vn.FUNCTION_TOOL_RESP_ERROR);case 8:return f.next=10,Promise.all(o);case 10:if(l=f.sent,!l.find(function(m){return typeof m!="string"})){f.next=13;break}throw Error(vn.FUNCTION_TOOL_RESP_ERROR);case 13:if(u=l.map(function(m,p){return{tool_call_id:i[p].id,output:m}}),c="".concat(this.urlSegments.threadsPrefix,"/").concat(this.sessionId),d="/runs/".concat(this.run_id,"/submit_tool_outputs").concat(this.urlSegments.threadsPosfix),this.url="".concat(c).concat(d),!this.isSSEStream){f.next=20;break}return f.next=18,this.createStreamRun({tool_outputs:u});case 18:f.next=22;break;case 20:return f.next=22,Ne.directFetch(this,{tool_outputs:u},"POST");case 22:return f.abrupt("return",{timeoutMS:r.POLLING_TIMEOUT_MS});case 23:case"end":return f.stop()}},s,this)}));function n(s){return t.apply(this,arguments)}return n}()},{key:"handleStream",value:function(){var t=A(v().mark(function s(i){var a,o,l,u;return v().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(l=(o=(a=i.required_action)==null?void 0:a.submit_tool_outputs)==null?void 0:o.tool_calls,!(i.status==="requires_action"&&l)){d.next=6;break}return this.run_id=i.id,d.next=5,this.handleTools(l);case 5:return d.abrupt("return",d.sent);case 6:if(!this.waitingForStreamResponse){d.next=8;break}return d.abrupt("return",this.parseStreamResult(i));case 8:return this.isSSEStream&&this.sessionId&&(this.url="".concat(this.urlSegments.threadsPrefix,"/").concat(this.sessionId,"/runs").concat(this.urlSegments.threadsPosfix),u=JSON.parse(JSON.stringify(this.rawBody)),this.createStreamRun(u)),d.abrupt("return",{makingAnotherRequest:!0});case 10:case"end":return d.stop()}},s,this)}));function n(s){return t.apply(this,arguments)}return n}()},{key:"parseStreamResult",value:function(){var t=A(v().mark(function s(i){var a,o,l,u,c,d,h,f,m,p;return v().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(!(i.content&&i.content.length>0&&this.messages)){g.next=5;break}if(d=i.content.find(function(S){return S.text}),!((a=d==null?void 0:d.text)!=null&&a.annotations&&d.text.annotations.length>0)){g.next=5;break}return h=i.content.find(function(S){return!!S.text})||i.content[0],f=vn.getFilesAndText.bind(this,this,{role:"assistant",content:i.content},this.urlSegments,h),g.abrupt("return",((o=this.messageStream)==null||o.endStreamAfterFileDownloaded(this.messages,f),{text:""}));case 5:if(!((l=i.delta)!=null&&l.content)){g.next=14;break}if(!(i.delta.content.length>1)){g.next=13;break}if(m=i.delta.content.find(function(S){return S.text}),!((u=m==null?void 0:m.text)!=null&&u.annotations&&m.text.annotations.length===0)){g.next=13;break}return g.next=11,vn.processStreamMessages(this,i.delta.content,this.urlSegments);case 11:return p=g.sent,g.abrupt("return",{text:p[0].text,files:p[1].files});case 13:return g.abrupt("return",{text:(c=i.delta.content[0].text)==null?void 0:c.value});case 14:return g.abrupt("return",(!this.sessionId&&i.thread_id&&(this.sessionId=i.thread_id),{makingAnotherRequest:!0}));case 15:case"end":return g.stop()}},s,this)}));function n(s){return t.apply(this,arguments)}return n}()},{key:"createStreamRun",value:function(){var t=A(v().mark(function s(i){return v().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return i.stream=!0,this.waitingForStreamResponse=!0,o.next=4,je.request(this,i,this.messages,!0,!0);case 4:this.messageStream=o.sent;case 5:case"end":return o.stop()}},s,this)}));function n(s){return t.apply(this,arguments)}return n}()}],[{key:"processImageMessage",value:function(n,s){var i=s==null?void 0:s.filter(function(a){return st.isImageFileExtension(a.name)}).map(function(a){return{type:"image_file",image_file:{file_id:a.id}}});if(i&&i.length>0)return n.text&&n.text.length>0&&i.push({type:"text",text:n.text}),{content:i,role:"user"}}},{key:"processAttachmentsMessage",value:function(n,s,i){return{attachments:s.map(function(a){return{tools:[{type:i}],file_id:a.id}}),content:[{type:"text",text:n.text}],role:"user"}}}])}(Ze);Ld.POLLING_TIMEOUT_MS=500;var Od=Ld,e0=function(e){function r(t){var n,s,i;w(this,r);var a,o,l,u,c,d=JSON.parse(JSON.stringify(t.directConnection)),h=d.openAI,f=(a=d.openAI)==null?void 0:a.assistant,m=r.buildUrlSegments(f);if(i=ee(this,r,[t,f,m,Ne.buildKeyVerificationDetails(),Ne.buildHeaders,h]),(n=(o=i.connectSettings).headers)!==null&&n!==void 0||(o.headers={}),(s=(l=i.connectSettings.headers)["OpenAI-Beta"])!==null&&s!==void 0||(l["OpenAI-Beta"]="assistants=v2"),i.shouldFetchHistory&&i.sessionId&&(i.fetchHistory=i.fetchHistoryFunc.bind(tr(i))),W(f)=="object"){var p=(c=(u=t.directConnection)==null?void 0:u.openAI)==null?void 0:c.assistant,y=p.function_handler,g=p.files_tool_type;y&&(i.functionHandler=y),g&&(i.filesToolType=g)}return i}return te(r,e),C(r,null,[{key:"buildUrlSegments",value:function(n){var s=W(n)=="object"&&n.custom_base_url||"https://api.openai.com/v1";return{threadsPrefix:"".concat(s,"/threads"),threadsPosfix:"",newAssistantUrl:"".concat(s,"/assistants"),createMessagePostfix:"",listMessagesPostfix:"order=desc",storeFiles:"".concat(s,"/files"),getFilesPrefix:"".concat(s,"/files/"),getFilesPostfix:"/content"}}}])}(Od),Kl=function(){function e(){w(this,e)}return C(e,null,[{key:"buildHeaders",value:function(t){return{Authorization:"Bearer ".concat(t),"Content-Type":"application/json",accept:"application/json"}}},{key:"handleVerificationResult",value:function(t,n,s,i){var a;(a=t.message)!=null&&a.includes("invalid request: prompt must be at least 1 token long")?s(n):i(xe.INVALID_KEY)}},{key:"buildKeyVerificationDetails",value:function(){return{url:"https://api.cohere.ai/v1/generate",method:"POST",handleVerificationResult:e.handleVerificationResult,body:JSON.stringify({prompt:""})}}}])}(),fo=function(e){function r(t,n,s,i,a){var o;return w(this,r),o=ee(this,r,[t,Kl.buildKeyVerificationDetails(),Kl.buildHeaders,a]),o.insertKeyPlaceholderText="Cohere API Key",o.keyHelpUrl="https://dashboard.cohere.ai/api-keys",o.permittedErrorPrefixes=["invalid"],o.url=n,o.textInputPlaceholderText=s,i&&W(i)=="object"&&Object.assign(o.rawBody,i),o}return te(r,e),C(r)}(Ze),t0=function(e){function r(t){w(this,r);var n,s,i,a=(s=(n=t.directConnection)==null?void 0:n.cohere)==null?void 0:s.textGeneration,o=(i=t.directConnection)==null?void 0:i.cohere;return ee(this,r,[t,"https://api.cohere.ai/v1/generate","Once upon a time",a,o])}return te(r,e),C(r,[{key:"preprocessBody",value:function(n,s){var i=JSON.parse(JSON.stringify(n)),a=s[s.length-1].text;if(a)return ve({prompt:a},i)}},{key:"callServiceAPI",value:function(){var t=A(v().mark(function s(i,a){var o;return v().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(this.connectSettings){u.next=2;break}throw new Error("Request settings have not been set up");case 2:o=this.preprocessBody(this.rawBody,a),Ie.request(this,o,i);case 4:case"end":return u.stop()}},s,this)}));function n(s,i){return t.apply(this,arguments)}return n}()},{key:"extractResultData",value:function(){var t=A(v().mark(function s(i){var a;return v().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!i.message){l.next=2;break}throw i.message;case 2:return l.abrupt("return",{text:((a=i.generations)==null?void 0:a[0].text)||""});case 3:case"end":return l.stop()}},s)}));function n(s){return t.apply(this,arguments)}return n}()}])}(fo),Pd=function(){function e(){w(this,e)}return C(e,null,[{key:"buildHeaders",value:function(t){return{"api-key":t,"Content-Type":"application/json"}}},{key:"buildKeyVerificationDetails",value:function(t){return{url:"".concat(t.endpoint,"/openai/models?api-version=").concat(t.version),method:"GET",handleVerificationResult:Ne.handleVerificationResult}}},{key:"validateURLDetails",value:function(t){var n=t.endpoint,s=t.version,i=t.deploymentId;return n&&s&&i}}])}();Pd.URL_DETAILS_ERROR_MESSAGE="Please define the Azure URL Details. [More Information](https://deepchat.dev/docs/directConnection/Azure)";var Lt=Pd,Sa=function(e){function r(t){var n,s;w(this,r);var i,a,o,l,u,c,d,h,f=JSON.parse(JSON.stringify(t.directConnection)),m=f.azure,p=(i=f.azure)==null?void 0:i.openAI,y=(p==null?void 0:p.urlDetails)||{},g="".concat((a=p==null?void 0:p.urlDetails)==null?void 0:a.endpoint,"/openai/"),S="?api-version=".concat((o=p==null?void 0:p.urlDetails)==null?void 0:o.version),k={threadsPrefix:"".concat(g).concat(r.THREAD_RESOURCE),threadsPosfix:S,newAssistantUrl:"".concat(g).concat(r.NEW_ASSISTANT_RESOURCE).concat(S),createMessagePostfix:S,listMessagesPostfix:"order=desc&api-version=".concat((l=p==null?void 0:p.urlDetails)==null?void 0:l.version),storeFiles:"".concat(g,"files").concat(S),getFilesPrefix:"".concat(g,"files/"),getFilesPostfix:"/content".concat(S)};if(s=ee(this,r,[t,p==null?void 0:p.assistant,k,Lt.buildKeyVerificationDetails(y),Lt.buildHeaders,m]),s.permittedErrorPrefixes=[Lt.URL_DETAILS_ERROR_MESSAGE],s.insertKeyPlaceholderText="Azure OpenAI API Key",s.keyHelpUrl="https://learn.microsoft.com/en-us/answers/questions/1193991/how-to-get-the-value-of-openai-api-key",s.isTextInputDisabled=!1,W(p==null?void 0:p.assistant)=="object"){var T=(d=(c=(u=t.directConnection)==null?void 0:u.azure)==null?void 0:c.openAI)==null?void 0:d.assistant,x=T.function_handler,I=T.files_tool_type;x&&(s.functionHandler=x),I&&(s.filesToolType=I)}return Lt.validateURLDetails(y)?(n=(h=s.connectSettings).headers)!==null&&n!==void 0||(h.headers={}):(s.isTextInputDisabled=!0,s.canSendMessage=function(){return!1},setTimeout(function(){t.addMessage({error:Lt.URL_DETAILS_ERROR_MESSAGE})})),s}return te(r,e),C(r)}(Od);Sa.THREAD_RESOURCE="threads",Sa.NEW_ASSISTANT_RESOURCE="assistants";var n0=Sa,r0=function(e){function r(t){w(this,r);var n,s,i,a=(s=(n=t.directConnection)==null?void 0:n.cohere)==null?void 0:s.summarization,o=(i=t.directConnection)==null?void 0:i.cohere;return ee(this,r,[t,"https://api.cohere.ai/v1/summarize","Insert text to summarize",a,o])}return te(r,e),C(r,[{key:"preprocessBody",value:function(n,s){var i=JSON.parse(JSON.stringify(n)),a=s[s.length-1].text;if(a)return ve({text:a},i)}},{key:"callServiceAPI",value:function(){var t=A(v().mark(function s(i,a){var o;return v().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(this.connectSettings){u.next=2;break}throw new Error("Request settings have not been set up");case 2:o=this.preprocessBody(this.rawBody,a),Ie.request(this,o,i);case 4:case"end":return u.stop()}},s,this)}));function n(s,i){return t.apply(this,arguments)}return n}()},{key:"extractResultData",value:function(){var t=A(v().mark(function s(i){return v().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!i.message){o.next=2;break}throw i.message;case 2:return o.abrupt("return",{text:i.summary||""});case 3:case"end":return o.stop()}},s)}));function n(s){return t.apply(this,arguments)}return n}()}])}(fo),Fe=function(){function e(){w(this,e)}return C(e,null,[{key:"addAttributes",value:function(t){t.role="button",t.setAttribute("tabindex","0")}},{key:"addAriaBusy",value:function(t){t.setAttribute("aria-busy","true")}},{key:"removeAriaBusy",value:function(t){t.removeAttribute("aria-busy")}},{key:"addAriaDisabled",value:function(t){t.setAttribute("aria-disabled","true")}},{key:"removeAriaDisabled",value:function(t){t.removeAttribute("aria-disabled")}},{key:"removeAriaAttributes",value:function(t){e.removeAriaBusy(t),e.removeAriaDisabled(t)}}])}(),Nd=`<?xml version="1.0" encoding="iso-8859-1"?>
<svg height="1.4em" width="1.4em" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
	 viewBox="0 0 490.9 490.9" xml:space="preserve">
	<g>
		<g>
			<path d="M245.5,322.9c53,0,96.2-43.2,96.2-96.2V96.2c0-53-43.2-96.2-96.2-96.2s-96.2,43.2-96.2,96.2v130.5
				C149.3,279.8,192.5,322.9,245.5,322.9z M173.8,96.2c0-39.5,32.2-71.7,71.7-71.7s71.7,32.2,71.7,71.7v130.5
				c0,39.5-32.2,71.7-71.7,71.7s-71.7-32.2-71.7-71.7V96.2z"/>
			<path d="M94.4,214.5c-6.8,0-12.3,5.5-12.3,12.3c0,85.9,66.7,156.6,151.1,162.8v76.7h-63.9c-6.8,0-12.3,5.5-12.3,12.3
				s5.5,12.3,12.3,12.3h152.3c6.8,0,12.3-5.5,12.3-12.3s-5.5-12.3-12.3-12.3h-63.9v-76.7c84.4-6.3,151.1-76.9,151.1-162.8
				c0-6.8-5.5-12.3-12.3-12.3s-12.3,5.5-12.3,12.3c0,76.6-62.3,138.9-138.9,138.9s-138.9-62.3-138.9-138.9
				C106.6,220,101.2,214.5,94.4,214.5z"/>
		</g>
	</g>
</svg>
`,Is=function(){function e(){w(this,e)}return C(e,null,[{key:"createTextElement",value:function(t){var n=document.createElement("div");return n.classList.add(e.INPUT_BUTTON_INNER_TEXT_CLASS),n.innerText=t,n}},{key:"tryAddSVGElement",value:function(t,n,s,i){s?t.push(Wt.createSVGElement(s)):s!==""&&i&&t.push(n)}},{key:"createCustomElements",value:function(t,n,s){var i,a,o=s==null?void 0:s[t],l=(i=o==null?void 0:o.text)==null?void 0:i.content,u=(a=o==null?void 0:o.svg)==null?void 0:a.content,c=[];return e.tryAddSVGElement(c,n,u,l),l&&c.push(e.createTextElement(l)),c.length>0?c:void 0}},{key:"reassignClassBasedOnChildren",value:function(t,n){t.classList.remove(e.INPUT_BUTTON_SVG_CLASS,e.INPUT_BUTTON_SVG_TEXT_CLASS),n.find(function(s){return s.classList.contains(e.INPUT_BUTTON_INNER_TEXT_CLASS)})?n.length>1&&t.classList.add(e.INPUT_BUTTON_SVG_TEXT_CLASS):t.classList.add(e.INPUT_BUTTON_SVG_CLASS)}}])}();Is.INPUT_BUTTON_SVG_TEXT_CLASS="input-button-svg-text",Is.INPUT_BUTTON_INNER_TEXT_CLASS="text-button",Is.INPUT_BUTTON_SVG_CLASS="input-button-svg";var un=Is,Vr=function(){function e(){w(this,e)}return C(e,null,[{key:"parseSVGTextElements",value:function(t){return{svg:t.find(function(n){return n.tagName.toLowerCase()==="svg"}),text:t.find(function(n){return n.tagName.toLowerCase()==="div"})}}}])}(),tt=function(){function e(){w(this,e)}return C(e,null,[{key:"unsetAllCSS",value:function(t,n){var s,i;n.container&&He.unsetAllCSSMouseStates(t,n.container);var a=Vr.parseSVGTextElements(Array.from(t.children)),o=a.svg,l=a.text;(s=n.svg)!=null&&s.styles&&o&&He.unsetAllCSSMouseStates(o,n.svg.styles),(i=n.text)!=null&&i.styles&&l&&He.unsetAllCSSMouseStates(l,n.text.styles)}},{key:"unsetActionCSS",value:function(t,n){var s,i;n.container&&He.unsetActivityCSSMouseStates(t,n.container);var a=Vr.parseSVGTextElements(Array.from(t.children)),o=a.svg,l=a.text;(s=n.svg)!=null&&s.styles&&o&&He.unsetActivityCSSMouseStates(o,n.svg.styles),(i=n.text)!=null&&i.styles&&l&&He.unsetActivityCSSMouseStates(l,n.text.styles)}},{key:"setElementsCSS",value:function(t,n,s){var i,a,o,l,u;Object.assign(t.style,(i=n.container)==null?void 0:i[s]);var c=Vr.parseSVGTextElements(Array.from(t.children)),d=c.svg,h=c.text;d&&Object.assign(d.style,(o=(a=n.svg)==null?void 0:a.styles)==null?void 0:o[s]),h&&Object.assign(h.style,(u=(l=n.text)==null?void 0:l.styles)==null?void 0:u[s])}},{key:"setElementCssUpToState",value:function(t,n,s){e.setElementsCSS(t,n,"default"),s!=="default"&&(e.setElementsCSS(t,n,"hover"),s!=="hover"&&e.setElementsCSS(t,n,"click"))}}])}(),On=function(){function e(r,t,n,s,i){w(this,e),this._mouseState={state:"default"},this.isCustom=!1,Fe.addAttributes(r),this.elementRef=r,this.svg=Wt.createSVGElement(t),this.customStyles=s,this.position=n,this.dropupText=i}return C(e,[{key:"buttonMouseLeave",value:function(t){this._mouseState.state="default",t&&(tt.unsetAllCSS(this.elementRef,t),tt.setElementsCSS(this.elementRef,t,"default"))}},{key:"buttonMouseEnter",value:function(t){this._mouseState.state="hover",t&&tt.setElementsCSS(this.elementRef,t,"hover")}},{key:"buttonMouseUp",value:function(t){t&&tt.unsetActionCSS(this.elementRef,t),this.buttonMouseEnter(t)}},{key:"buttonMouseDown",value:function(t){this._mouseState.state="click",t&&tt.setElementsCSS(this.elementRef,t,"click")}},{key:"setEvents",value:function(t){this.elementRef.onmousedown=this.buttonMouseDown.bind(this,t),this.elementRef.onmouseup=this.buttonMouseUp.bind(this,t),this.elementRef.onmouseenter=this.buttonMouseEnter.bind(this,t),this.elementRef.onmouseleave=this.buttonMouseLeave.bind(this,t)}},{key:"unsetCustomStateStyles",value:function(t){if(this.customStyles)for(var n=0;n<t.length;n+=1){var s=t[n],i=s&&this.customStyles[s];i&&tt.unsetActionCSS(this.elementRef,i)}}},{key:"reapplyStateStyle",value:function(t,n){if(this.customStyles){n&&this.unsetCustomStateStyles(n);var s=this.customStyles[t];s&&tt.setElementCssUpToState(this.elementRef,s,this._mouseState.state),this.setEvents(s)}}},{key:"changeElementsByState",value:function(t){var n;(n=this.elementRef).replaceChildren.apply(n,us(t)),un.reassignClassBasedOnChildren(this.elementRef,t)}},{key:"buildDefaultIconElement",value:function(t){var n=this.svg.cloneNode(!0);return n.id=t,[n]}},{key:"createInnerElements",value:function(t,n,s){var i=un.createCustomElements(n,this.svg,s);if(i&&i.length>0){if(this.position==="dropup-menu"){var a=this.svg.cloneNode(!0);a.id=i[0]===this.svg?t:"dropup-menu-item-icon-element-custom",i[0]=a}return i}return this.buildDefaultIconElement(t)}}])}(),Dd=function(e){function r(t){var n;w(this,r);var s,i,a=((i=(s=t==null?void 0:t.default)==null?void 0:s.svg)==null?void 0:i.content)||r.EMPTY_SVG;return n=ee(this,r,[document.createElement("div"),a,void 0,t]),n.isActive=!1,n._innerElements=n.createInnerElementsForStates(n.customStyles),n.changeToDefault(),n}return te(r,e),C(r,[{key:"createInnerElementsForStates",value:function(n){return{default:this.createInnerButtonElements("default",n),active:this.createInnerButtonElements("active",n),unavailable:this.createInnerButtonElements("unavailable",n)}}},{key:"createInnerButtonElements",value:function(n,s){return un.createCustomElements(n,this.svg,s)||[this.svg]}},{key:"changeState",value:function(n){this.changeElementsByState(n),this.elementRef.classList.replace(un.INPUT_BUTTON_SVG_CLASS,"deep-chat-openai-realtime-button")}},{key:"changeToActive",value:function(){this.changeState(this._innerElements.active),this.reapplyStateStyle("active",["unavailable","default"]),this.isActive=!0}},{key:"changeToDefault",value:function(){var n,s,i,a;this.changeState(this._innerElements.default),(n=this.customStyles)!=null&&n.active&&tt.unsetAllCSS(this.elementRef,(s=this.customStyles)==null?void 0:s.active),(i=this.customStyles)!=null&&i.unavailable&&tt.unsetAllCSS(this.elementRef,(a=this.customStyles)==null?void 0:a.unavailable),this.reapplyStateStyle("default",["active","unavailable"]),this.isActive=!1}},{key:"changeToUnavailable",value:function(){var n,s,i,a;this.changeState(this._innerElements.unavailable),(n=this.customStyles)!=null&&n.active&&tt.unsetAllCSS(this.elementRef,(s=this.customStyles)==null?void 0:s.active),(i=this.customStyles)!=null&&i.default&&tt.unsetAllCSS(this.elementRef,(a=this.customStyles)==null?void 0:a.default),this.reapplyStateStyle("unavailable",["default","active"]),this.isActive=!1}}])}(On);Dd.EMPTY_SVG='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"></svg>';var Wl=Dd,Ht=function(){function e(){w(this,e)}return C(e,null,[{key:"setPropertyValueIfDoesNotExist",value:function(t,n,s){var i,a,o=n[0];n.length===1?(i=t[o])!==null&&i!==void 0||(t[o]=s):((a=t[o])!==null&&a!==void 0||(t[o]={}),n.shift(),e.setPropertyValueIfDoesNotExist(t[o],n,s))}},{key:"setPropertyValue",value:function(t,n,s){var i,a=n[0];n.length===1?t[a]=s:((i=t[a])!==null&&i!==void 0||(t[a]={}),n.shift(),e.setPropertyValue(t[a],n,s))}},{key:"getObjectValue",value:function(t,n){var s=n[0],i=t[s];return i===void 0||n.length===1?i:e.getObjectValue(i,n.slice(1))}},{key:"overwritePropertyObjectFromAnother",value:function(t,n,s){var i=e.getObjectValue(n,s);if(i){var a=ve(ve({},i),e.getObjectValue(t,s)||{});e.setPropertyValue(t,s,a)}}},{key:"isJson",value:function(t){try{return JSON.stringify(t),!0}catch{return!1}}},{key:"assignPropertyFromOneToAnother",value:function(t,n,s){var i;(i=n[t])!==null&&i!==void 0||(n[t]={}),Object.assign(n[t],s==null?void 0:s[t])}}])}(),Bd=`<?xml version="1.0" encoding="utf-8"?>
<svg viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M5.92 24.096q0 1.088 0.928 1.728 0.512 0.288 1.088 0.288 0.448 0 0.896-0.224l16.16-8.064q0.48-0.256 0.8-0.736t0.288-1.088-0.288-1.056-0.8-0.736l-16.16-8.064q-0.448-0.224-0.896-0.224-0.544 0-1.088 0.288-0.928 0.608-0.928 1.728v16.16z"></path>
</svg>`,Ea=`<?xml version="1.0" encoding="utf-8"?>
<svg viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg">
<path d="M5.92 24.096q0 0.832 0.576 1.408t1.44 0.608h16.128q0.832 0 1.44-0.608t0.576-1.408v-16.16q0-0.832-0.576-1.44t-1.44-0.576h-16.128q-0.832 0-1.44 0.576t-0.576 1.44v16.16z"></path>
</svg>`,Mr=function(e){function r(t){var n,s;w(this,r);var i,a,o,l,u=JSON.parse(JSON.stringify(t.directConnection)),c=r.getKey(t);s=ee(this,r,[t,Ne.buildKeyVerificationDetails(),Ne.buildHeaders,{key:c}]),s.insertKeyPlaceholderText="OpenAI API Key",s.keyHelpUrl="https://platform.openai.com/account/api-keys",s._microphoneButton=null,s._toggleButton=null,s._errorElement=null,s._loadingElement=null,s._pc=null,s._mediaStream=null,s._isMuted=!1;var d=(i=u.openAI)==null?void 0:i.realtime;if(W(d)=="object"){s._avatarConfig=d.avatar,s._ephemeralKey=d.ephemeralKey,s._errorConfig=d.error,s._loadingConfig=d.loading,Object.assign(s.rawBody,d.config);var h=((o=(a=t.directConnection)==null?void 0:a.openAI)==null?void 0:o.realtime).config||{},f=h.function_handler;f&&(s._functionHandler=f)}return(n=(l=s.rawBody).model)!==null&&n!==void 0||(l.model="gpt-4o-realtime-preview-2024-12-17"),s._avatarConfig=r.buildAvatarConfig(d),s._buttonsConfig=r.buildButtonsConfig(d),s._avatarEl=r.createAvatar(s._avatarConfig),s._containerEl=s.createContainer(),s._deepChat=t,s}return te(r,e),C(r,[{key:"setUpView",value:function(n,s){n.style.display="none",s.appendChild(this._containerEl),this.setup()}},{key:"setup",value:function(){var t=A(v().mark(function s(){var i,a,o,l;return v().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(a=(i=this._deepChat.directConnection)==null?void 0:i.openAI,a){c.next=3;break}return c.abrupt("return");case 3:if(o=a==null?void 0:a.realtime,!(W(o)!="object"||!o.autoStart&&!o.autoFetchEphemeralKey)){c.next=6;break}return c.abrupt("return");case 6:l=this.key||a.key,(o.fetchEphemeralKey||l)&&o.autoStart&&(this.changeToUnavailable(),this.displayLoading()),this.fetchEphemeralKey(o.autoStart);case 8:case"end":return c.stop()}},s,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"fetchEphemeralKey",value:function(){var t=A(v().mark(function s(i){var a,o,l,u,c,d;return v().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(o=(a=this._deepChat.directConnection)==null?void 0:a.openAI,l=W(o==null?void 0:o.realtime)=="object"?o==null?void 0:o.realtime.fetchEphemeralKey:void 0,u=o==null?void 0:o.realtime,c=this.key||o.key,W(u)!="object"){f.next=26;break}if(this._ephemeralKey){f.next=23;break}if(f.prev=3,!l){f.next=12;break}return d=l(),d.then&&(this._retrievingEphemeralKey=d),f.next=9,d;case 9:this._ephemeralKey=f.sent,f.next=18;break;case 12:if(f.t0=c,!f.t0){f.next=18;break}return this._retrievingEphemeralKey=this.getEphemeralKey(c),f.next=17,this._retrievingEphemeralKey;case 17:this._ephemeralKey=f.sent;case 18:f.next=23;break;case 20:f.prev=20,f.t1=f.catch(3),this.displayFailedToRetrieveEphemeralKey(f.t1);case 23:this._ephemeralKey&&(i?this.init(this._ephemeralKey):this.changeToAvailable()),f.next=38;break;case 26:if(!c){f.next=38;break}return f.prev=27,this._retrievingEphemeralKey=this.getEphemeralKey(c),f.next=31,this._retrievingEphemeralKey;case 31:this._ephemeralKey=f.sent,i&&this.init(this._ephemeralKey),f.next=38;break;case 35:f.prev=35,f.t2=f.catch(27),this.displayFailedToRetrieveEphemeralKey(f.t2);case 38:case"end":return f.stop()}},s,this,[[3,20],[27,35]])}));function n(s){return t.apply(this,arguments)}return n}()},{key:"getEphemeralKey",value:function(){var t=A(v().mark(function s(i){return v().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,fetch("https://api.openai.com/v1/realtime/sessions",{method:"POST",body:JSON.stringify(this.rawBody),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i)}});case 2:return o.next=4,o.sent.json();case 4:return o.abrupt("return",o.sent.client_secret.value);case 5:case"end":return o.stop()}},s,this)}));function n(s){return t.apply(this,arguments)}return n}()},{key:"createContainer",value:function(){var n=document.createElement("div");return n.id="deep-chat-openai-realtime-container",n.appendChild(this.createAvatarContainer()),n.appendChild(this.createButtonsContainer()),n.appendChild(this.createError()),n}},{key:"createAvatarContainer",value:function(){var n,s,i=document.createElement("div");return i.id="deep-chat-openai-realtime-avatar-container",Object.assign(i.style,(s=(n=this._avatarConfig)==null?void 0:n.styles)==null?void 0:s.container),i.appendChild(this._avatarEl),i}},{key:"createButtonsContainer",value:function(){var n,s=document.createElement("div");s.id="deep-chat-openai-realtime-buttons-container",Object.assign(s.style,(n=this._buttonsConfig)==null?void 0:n.container),this._microphoneButton=this.createMicophoneButton();var i=r.createButtonContainer(this._microphoneButton.elementRef);this._toggleButton=this.createToggleButton();var a=r.createButtonContainer(this._toggleButton.elementRef);return s.appendChild(i),s.appendChild(a),s.appendChild(this.createLoading()),s}},{key:"createMicophoneButton",value:function(){var n=this,s,i=new Wl((s=this._buttonsConfig)==null?void 0:s.microphone);return i.elementRef.classList.add(r.BUTTON_DEFAULT,"deep-chat-openai-realtime-microphone"),i.elementRef.onclick=function(){i.isActive?(n.toggleMicorphone(!0),i.elementRef.classList.replace(r.MICROPHONE_ACTIVE,r.BUTTON_DEFAULT),i.changeToDefault(),n._isMuted=!1):(n.toggleMicorphone(!1),i.elementRef.classList.replace(r.BUTTON_DEFAULT,r.MICROPHONE_ACTIVE),Fe.removeAriaAttributes(i.elementRef),i.changeToActive(),n._isMuted=!0)},i}},{key:"toggleMicorphone",value:function(n){var s;(s=this._mediaStream)==null||s.getAudioTracks().forEach(function(i){return i.enabled=n})}},{key:"createToggleButton",value:function(){var n=this,s,i=new Wl((s=this._buttonsConfig)==null?void 0:s.toggle);return i.elementRef.classList.add(r.BUTTON_DEFAULT,"deep-chat-openai-realtime-toggle"),i.elementRef.onclick=A(v().mark(function a(){var o,l;return v().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!i.isActive){c.next=4;break}i.changeToDefault(),n.stop(),c.next=30;break;case 4:if(c.prev=4,!n._ephemeralKey){c.next=11;break}return n.displayLoading(),c.next=9,n.init(n._ephemeralKey);case 9:c.next=25;break;case 11:if(!n._retrievingEphemeralKey){c.next=22;break}return n.displayLoading(),c.next=15,n._retrievingEphemeralKey;case 15:if(l=c.sent,c.t0=(o=n._toggleButton)!=null&&o.isActive,!c.t0){c.next=20;break}return c.next=20,n.init(l);case 20:c.next=25;break;case 22:return n.displayLoading(),c.next=25,n.fetchEphemeralKey(!0);case 25:c.next=30;break;case 27:c.prev=27,c.t1=c.catch(4),console.error("Failed to start conversation:",c.t1),n.displayError(),n.hideLoading();case 30:case"end":return c.stop()}},a,null,[[4,27]])})),i}},{key:"init",value:function(){var t=A(v().mark(function s(i){var a=this,o,l,u,c,d,h,f,m,p;return v().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return o=new RTCPeerConnection,this._pc=o,l=document.createElement("audio"),l.autoplay=!0,u=new AudioContext,c=u.createAnalyser(),c.fftSize=256,d=new Uint8Array(c.frequencyBinCount),this._pc.ontrack=function(){var S=A(v().mark(function k(T){var x;return v().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(!T.streams[0]){F.next=11;break}if(l.srcObject=T.streams[0],x=u.createMediaStreamSource(T.streams[0]),F.t0=u.state==="suspended",!F.t0){F.next=7;break}return F.next=7,u.resume();case 7:x.connect(c),a.monitorFrequencies(c,d),F.next=12;break;case 11:console.error("No streams found in the ontrack event."),a.displayError();case 12:case"end":return F.stop()}},k)}));return function(k){return S.apply(this,arguments)}}(),g.next=10,navigator.mediaDevices.getUserMedia({audio:!0}).then(function(S){var k;o===a._pc&&(a._mediaStream=S,(k=a._pc)==null||k.addTrack(a._mediaStream.getTracks()[0]),a._isMuted&&a.toggleMicorphone(!1))}).catch(function(S){console.error("Error accessing microphone:",S),a.displayError()});case 10:return h=this._pc.createDataChannel("oai-events"),h.addEventListener("message",function(){var S=A(v().mark(function k(T){var x,I,F,$,ae;return v().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(I=JSON.parse(T.data),I.type!=="session.created"){re.next=5;break}a.removeUnavailable(),a._toggleButton&&(Fe.removeAriaAttributes(a._toggleButton.elementRef),a._toggleButton.changeToActive()),a.hideLoading(),re.next=20;break;case 5:if(I.type!=="response.done"){re.next=19;break}if(F=(x=JSON.parse(T.data).response.output)==null?void 0:x[0],(F==null?void 0:F.type)!=="function_call"){re.next=17;break}return $=F.name,ae=F.call_id,re.prev=9,re.next=12,a.handleTool($,F.arguments,ae,h);case 12:re.next=17;break;case 14:re.prev=14,re.t0=re.catch(9),a.stopOnError(re.t0);case 17:re.next=20;break;case 19:I.type==="error"?a.stopOnError(I.error.message):I.type==="invalid_request_error"?a.stopOnError(I.message):I.type;case 20:case"end":return re.stop()}},k,null,[[9,14]])}));return function(k){return S.apply(this,arguments)}}()),g.prev=12,g.next=15,this._pc.createOffer();case 15:if(f=g.sent,g.t0=o!==this._pc,g.t0){g.next=21;break}return g.next=20,this._pc.setLocalDescription(f);case 20:g.t0=o!==this._pc;case 21:if(!g.t0){g.next=23;break}return g.abrupt("return");case 23:return g.next=25,fetch("https://api.openai.com/v1/realtime",{method:"POST",body:f.sdp,headers:{Authorization:"Bearer ".concat(i),"Content-Type":"application/sdp"}});case 25:if(m=g.sent,o===this._pc){g.next=28;break}return g.abrupt("return");case 28:return g.next=30,m.text();case 30:if(g.t1=g.sent,p={type:"answer",sdp:g.t1},g.t2=o!==this._pc,g.t2){g.next=37;break}return g.next=36,this._pc.setRemoteDescription(p);case 36:g.t2=o!==this._pc;case 37:if(!g.t2){g.next=39;break}return g.abrupt("return");case 39:g.next=44;break;case 41:g.prev=41,g.t3=g.catch(12),console.error(g.t3),this.displayError();case 44:case"end":return g.stop()}},s,this,[[12,41]])}));function n(s){return t.apply(this,arguments)}return n}()},{key:"monitorFrequencies",value:function(n,s){var i=this,a=function(o){function l(){return o.apply(this,arguments)}return l.toString=function(){return o.toString()},l}(function(){var o;n.getByteFrequencyData(s);var l=s.reduce(function(f,m){return f+m},0),u=s.length*255,c=l/u*100,d=1,h=d+c/100*(((o=i._avatarConfig)==null?void 0:o.maxScale)-d);i._avatarEl.style.transform="scale(".concat(h,")"),requestAnimationFrame(a)});a()}},{key:"stopOnError",value:function(n){this.stop(),console.error(n),this.displayError()}},{key:"stop",value:function(){var n;(n=this._mediaStream)==null||n.getTracks().forEach(function(s){return s.stop()}),this._mediaStream=null,this._pc&&(this._pc.close(),this._pc=null)}},{key:"changeToUnavailable",value:function(){this._microphoneButton&&r.changeButtonToUnavailable(this._microphoneButton),this._toggleButton&&r.changeButtonToUnavailable(this._toggleButton)}},{key:"changeToAvailable",value:function(){this._microphoneButton&&r.changeButtonToAvailable(this._microphoneButton),this._toggleButton&&r.changeButtonToAvailable(this._toggleButton)}},{key:"removeUnavailable",value:function(){this._microphoneButton&&r.removeButtonUnavailable(this._microphoneButton),this._toggleButton&&r.removeButtonUnavailable(this._toggleButton)}},{key:"createError",value:function(){var n,s=document.createElement("div");return s.id="deep-chat-openai-realtime-error",Object.assign(s.style,(n=this._errorConfig)==null?void 0:n.style),this._errorElement=s,s}},{key:"displayFailedToRetrieveEphemeralKey",value:function(n){console.error("Failed to retrieve ephemeral key"),console.error(n),this.displayError()}},{key:"displayError",value:function(){var n;this._errorElement&&(this._errorElement.style.display="block",this._errorElement.textContent=((n=this._errorConfig)==null?void 0:n.text)||"Error",this.changeToUnavailable()),this.hideLoading()}},{key:"createLoading",value:function(){var n,s,i=document.createElement("div");return i.id="deep-chat-openai-realtime-loading",this._loadingElement=i,(n=this._loadingConfig)!=null&&n.html&&(this._loadingElement.innerHTML=this._loadingConfig.html),Object.assign(i.style,(s=this._loadingConfig)==null?void 0:s.style),i.style.display="none",i}},{key:"displayLoading",value:function(){var n,s,i;this._toggleButton&&(this._toggleButton.changeToActive(),this._toggleButton.elementRef.classList.add(r.BUTTON_LOADING),Fe.removeAriaDisabled(this._toggleButton.elementRef),Fe.addAriaBusy(this._toggleButton.elementRef)),(typeof((n=this._loadingConfig)==null?void 0:n.display)!="boolean"||this._loadingConfig.display)&&this._loadingElement&&(this._loadingElement.style.display="block",(s=this._loadingConfig)!=null&&s.html||(this._loadingElement.textContent=((i=this._loadingConfig)==null?void 0:i.text)||"Loading"))}},{key:"hideLoading",value:function(){this._toggleButton&&(this._toggleButton.elementRef.classList.remove(r.BUTTON_LOADING),Fe.removeAriaBusy(this._toggleButton.elementRef)),this._loadingElement&&(this._loadingElement.style.display="none")}},{key:"handleTool",value:function(){var t=A(v().mark(function s(i,a,o,l){var u,c,d;return v().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(this._functionHandler){f.next=2;break}throw Error("Please define the `function_handler` property inside the [openAI](https://deepchat.dev/docs/directConnection/OpenAI/OpenAIRealtime#OpenAIRealtimeFunction) object.");case 2:return f.next=4,this._functionHandler({name:i,arguments:a});case 4:if(u=f.sent,!(W(u)!="object"||!Ht.isJson(u))){f.next=7;break}throw Error('The `function_handler` response must be a JSON object, e.g. {response: "My response"}');case 7:c=JSON.stringify({type:"conversation.item.create",item:{type:"function_call_output",call_id:o,output:JSON.stringify(u)}}),l.send(c),d={type:"response.create"},l.send(JSON.stringify(d));case 11:case"end":return f.stop()}},s,this)}));function n(s,i,a,o){return t.apply(this,arguments)}return n}()},{key:"isCustomView",value:function(){return!0}}],[{key:"getKey",value:function(n){var s=n.directConnection.openAI;if(s!=null&&s.key)return s.key;var i=s==null?void 0:s.realtime;if(W(i)=="object"&&(i.ephemeralKey||i.fetchEphemeralKey))return"placeholder"}},{key:"buildAvatarConfig",value:function(n){var s=W(n)=="object"&&n.avatar?JSON.parse(JSON.stringify(n.avatar)):{};return s.maxScale=s.maxScale&&s.maxScale>=1?s.maxScale:2.5,s}},{key:"buildButtonsConfig",value:function(n){var s,i,a,o,l,u,c,d,h,f,m,p,y,g,S,k,T,x,I,F,$,ae,me,re,se,ge,z=W(n)=="object"&&n.buttons?JSON.parse(JSON.stringify(n.buttons)):{};return(g=(y=(p=z.microphone)==null?void 0:p.default)==null?void 0:y.text)!=null&&g.content||((s=z.microphone)!==null&&s!==void 0||(z.microphone={}),(i=(S=z.microphone).default)!==null&&i!==void 0||(S.default={}),(a=(k=z.microphone.default).svg)!==null&&a!==void 0||(k.svg={}),(o=(T=z.microphone.default.svg).content)!==null&&o!==void 0||(T.content=Nd)),(F=(I=(x=z.toggle)==null?void 0:x.default)==null?void 0:I.text)!=null&&F.content||((l=z.toggle)!==null&&l!==void 0||(z.toggle={}),(u=($=z.toggle).default)!==null&&u!==void 0||($.default={}),(c=(ae=z.toggle.default).svg)!==null&&c!==void 0||(ae.svg={}),(d=(me=z.toggle.default.svg).content)!==null&&d!==void 0||(me.content=Bd),(h=(re=z.toggle).active)!==null&&h!==void 0||(re.active={}),(f=(se=z.toggle.active).svg)!==null&&f!==void 0||(se.svg={}),(m=(ge=z.toggle.active.svg).content)!==null&&m!==void 0||(ge.content=Ea)),z}},{key:"createAvatar",value:function(n){var s,i=document.createElement("img");return i.id="deep-chat-openai-realtime-avatar",Object.assign(i.style,(s=n==null?void 0:n.styles)==null?void 0:s.image),i.src=(n==null?void 0:n.src)||ma,i}},{key:"createButtonContainer",value:function(n){var s=document.createElement("div");return s.classList.add("deep-chat-openai-realtime-button-container"),s.appendChild(n),s}},{key:"changeButtonToUnavailable",value:function(n){n.elementRef.classList.add(r.UNAVAILABLE),Fe.removeAriaBusy(n.elementRef),Fe.addAriaDisabled(n.elementRef),n.changeToUnavailable()}},{key:"changeButtonToAvailable",value:function(n){r.removeButtonUnavailable(n),n.changeToDefault()}},{key:"removeButtonUnavailable",value:function(n){Fe.removeAriaDisabled(n.elementRef),n.elementRef.classList.remove(r.UNAVAILABLE)}}])}(Ze);Mr.BUTTON_DEFAULT="deep-chat-openai-realtime-button-default",Mr.BUTTON_LOADING="deep-chat-openai-realtime-button-loading",Mr.MICROPHONE_ACTIVE="deep-chat-openai-realtime-microphone-active",Mr.UNAVAILABLE="deep-chat-openai-realtime-button-unavailable";var s0=Mr,ka=function(e){function r(t){var n,s,i;w(this,r);var a,o,l,u=JSON.parse(JSON.stringify(t.directConnection)),c=u==null?void 0:u.openAI;i=ee(this,r,[t,Ne.buildKeyVerificationDetails(),Ne.buildHeaders,c]),i.insertKeyPlaceholderText="OpenAI API Key",i.keyHelpUrl="https://platform.openai.com/account/api-keys",i.url="https://api.openai.com/v1/audio/speech",i.permittedErrorPrefixes=["Invalid"],i.introPanelMarkUp=`
    <div style="width: 100%; text-align: center; margin-left: -10px"><b>OpenAI : Text To Speech</b></div>
    <p>Generate an audio file based on your text input.</p>
    <p>Click <a href="https://platform.openai.com/docs/guides/text-to-speech">here</a> for more information.</p>`;var d=(a=u==null?void 0:u.openAI)==null?void 0:a.textToSpeech;return W(d)=="object"&&Object.assign(i.rawBody,d),(n=(o=i.rawBody).model)!==null&&n!==void 0||(o.model=r.DEFAULT_MODEL),(s=(l=i.rawBody).voice)!==null&&s!==void 0||(l.voice=r.DEFAULT_VOIDE),i.textInputPlaceholderText="Insert text to generate audio",i.rawBody.response_format="mp3",i}return te(r,e),C(r,[{key:"preprocessBody",value:function(n,s){var i,a,o=JSON.parse(JSON.stringify(n)),l=(a=(i=s[s.length-1])==null?void 0:i.text)==null?void 0:a.trim();return l&&l!==""&&(o.input=l),o}},{key:"callServiceAPI",value:function(){var t=A(v().mark(function s(i,a){var o,l;return v().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if((o=this.connectSettings)!=null&&o.headers){c.next=2;break}throw new Error("Request settings have not been set up");case 2:this.url=this.connectSettings.url||this.url,l=this.preprocessBody(this.rawBody,a),Ie.request(this,l,i);case 5:case"end":return c.stop()}},s,this)}));function n(s,i){return t.apply(this,arguments)}return n}()},{key:"extractResultData",value:function(){var t=A(v().mark(function s(i){return v().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!(i instanceof Blob)){o.next=2;break}return o.abrupt("return",new Promise(function(l){var u=new FileReader;u.readAsDataURL(i),u.onload=function(c){l({files:[{src:c.target.result,type:"audio"}]})}}));case 2:if(!i.error){o.next=4;break}throw i.error.message;case 4:return o.abrupt("return",{error:"error"});case 5:case"end":return o.stop()}},s)}));function n(s){return t.apply(this,arguments)}return n}()}])}(Ze);ka.DEFAULT_MODEL="tts-1",ka.DEFAULT_VOIDE="alloy";var i0=ka,Ls=function(e){function r(t){var n,s;w(this,r);var i,a,o=JSON.parse(JSON.stringify(t.directConnection)),l=o==null?void 0:o.openAI;s=ee(this,r,[t,Ne.buildKeyVerificationDetails(),Ne.buildHeaders,l,{audio:{}}]),s.insertKeyPlaceholderText="OpenAI API Key",s.keyHelpUrl="https://platform.openai.com/account/api-keys",s.introPanelMarkUp=`
    <div style="width: 100%; text-align: center; margin-left: -10px"><b>OpenAI : Speech To Text</b></div>
    <p><b>Upload an audio file</b> to transcribe it into text. You can optionally provide text to guide the audio
      processing.
    <p>Click <a href="https://platform.openai.com/docs/guides/speech-to-text">here</a> for more info.</p>`,s.url="",s.permittedErrorPrefixes=["Invalid"],s.textInputPlaceholderText="Upload an audio file",s._service_url=r.AUDIO_TRANSCRIPTIONS_URL;var u=(i=o==null?void 0:o.openAI)==null?void 0:i.audio;return W(u)=="object"&&(s.processConfig(u),r.cleanConfig(u),Object.assign(s.rawBody,u)),(n=(a=s.rawBody).model)!==null&&n!==void 0||(a.model=r.DEFAULT_MODEL),s.rawBody.response_format="json",s.canSendMessage=r.canSendFileMessage,s}return te(r,e),C(r,[{key:"processConfig",value:function(n){n!=null&&n.type&&n.type==="translation"&&(this._service_url=r.AUDIO_TRANSLATIONS_URL,delete n.language)}},{key:"preprocessBody",value:function(n,s){var i,a,o=JSON.parse(JSON.stringify(n)),l=(a=(i=s[s.length-1])==null?void 0:i.text)==null?void 0:a.trim();return l&&l!==""&&(o.prompt=l),o}},{key:"callServiceAPI",value:function(){var t=A(v().mark(function s(i,a,o){var l,u,c;return v().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if((l=this.connectSettings)!=null&&l.headers){h.next=2;break}throw new Error("Request settings have not been set up");case 2:if(o!=null&&o[0]){h.next=4;break}throw new Error("No file was added");case 4:this.url=this.connectSettings.url||this._service_url,u=this.preprocessBody(this.rawBody,a),c=r.createFormDataBody(u,o[0]),oe.tempRemoveContentHeader(this.connectSettings,Ie.request.bind(this,this,c,i),!1);case 7:case"end":return h.stop()}},s,this)}));function n(s,i,a){return t.apply(this,arguments)}return n}()},{key:"extractResultData",value:function(){var t=A(v().mark(function s(i){return v().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!i.error){o.next=2;break}throw i.error.message;case 2:return o.abrupt("return",{text:i.text});case 3:case"end":return o.stop()}},s)}));function n(s){return t.apply(this,arguments)}return n}()}],[{key:"canSendFileMessage",value:function(n,s){return!!(s!=null&&s[0])}},{key:"cleanConfig",value:function(n){delete n.type}},{key:"createFormDataBody",value:function(n,s){var i=new FormData;return i.append("file",s),Object.keys(n).forEach(function(a){i.append(a,String(n[a]))}),i}}])}(Ze);Ls.AUDIO_TRANSCRIPTIONS_URL="https://api.openai.com/v1/audio/transcriptions",Ls.AUDIO_TRANSLATIONS_URL="https://api.openai.com/v1/audio/translations",Ls.DEFAULT_MODEL="whisper-1";var a0=Ls,Tn=function(){function e(){w(this,e)}return C(e,null,[{key:"buildTextToSpeechHeaders",value:function(t,n){return{"Ocp-Apim-Subscription-Key":n,"Content-Type":"application/ssml+xml","X-Microsoft-OutputFormat":t}}},{key:"buildSpeechToTextHeaders",value:function(t){return{"Ocp-Apim-Subscription-Key":t,Accept:"application/json"}}},{key:"handleSpeechVerificationResult",value:function(t,n,s,i){t.error?i(xe.INVALID_KEY):s(n)}},{key:"buildSpeechKeyVerificationDetails",value:function(t){return{url:"https://".concat(t,".api.cognitive.microsoft.com/sts/v1.0/issuetoken"),method:"POST",createHeaders:function(s){return{"Ocp-Apim-Subscription-Key":"".concat(s)}},handleVerificationResult:e.handleSpeechVerificationResult}}},{key:"buildSummarizationHeader",value:function(t){return{"Ocp-Apim-Subscription-Key":t,"Content-Type":"application/json"}}},{key:"handleLanguageVerificationResult",value:function(t,n,s,i){var a;((a=t.error)==null?void 0:a.code)==="401"?i(xe.INVALID_KEY):s(n)}},{key:"buildLanguageKeyVerificationDetails",value:function(t){return{url:"".concat(t,"/language/analyze-text/jobs?api-version=2022-10-01-preview"),method:"POST",createHeaders:function(s){return{"Ocp-Apim-Subscription-Key":"".concat(s)}},handleVerificationResult:e.handleLanguageVerificationResult}}},{key:"handleTranslationVerificationResult",value:function(t,n,s,i){t.json().then(function(a){!Array.isArray(a)&&a.error.code===401e3?i(xe.INVALID_KEY):s(n)})}},{key:"buildTranslationKeyVerificationDetails",value:function(t){return{url:"https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=es",method:"POST",createHeaders:function(s){return e.buildTranslationHeaders(t,s)},handleVerificationResult:e.handleTranslationVerificationResult}}},{key:"buildTranslationHeaders",value:function(t,n){var s={"Ocp-Apim-Subscription-Key":n,"Content-Type":"application/json"};return t&&(s["Ocp-Apim-Subscription-Region"]=t),s}}])}(),o0=function(e){function r(t,n,s,i,a){var o;return w(this,r),o=ee(this,r,[t,Tn.buildLanguageKeyVerificationDetails(s),n,i,a]),o.insertKeyPlaceholderText="Azure Language Subscription Key",o.keyHelpUrl="https://learn.microsoft.com/en-us/azure/api-management/api-management-subscriptions#create-and-manage-subscriptions-in-azure-portal",o.permittedErrorPrefixes=["Access"],o}return te(r,e),C(r)}(Ze),Fd=function(e){function r(t){var n,s;w(this,r);var i,a,o,l,u=(a=(i=t.directConnection)==null?void 0:i.azure)==null?void 0:a.summarization,c=(o=t.directConnection)==null?void 0:o.azure;return s=ee(this,r,[t,Tn.buildSummarizationHeader,u.endpoint,c]),s.permittedErrorPrefixes=[r.ENDPOINT_ERROR_MESSAGE],s.url="",s.textInputPlaceholderText="Insert text to summarize",s.isTextInputDisabled=!1,u.endpoint?((n=(l=s.rawBody).language)!==null&&n!==void 0||(l.language="en"),Object.assign(s.rawBody,u),s.url="".concat(u.endpoint,"/language/analyze-text/jobs?api-version=2022-10-01-preview")):(s.isTextInputDisabled=!0,s.canSendMessage=function(){return!1},setTimeout(function(){t.addMessage({error:r.ENDPOINT_ERROR_MESSAGE})})),s}return te(r,e),C(r,[{key:"preprocessBody",value:function(n,s){var i=s[s.length-1].text;if(i)return{analysisInput:{documents:[{id:"1",language:n.language,text:i}]},tasks:[{kind:"ExtractiveSummarization"}]}}},{key:"callServiceAPI",value:function(){var t=A(v().mark(function s(i,a){var o;return v().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(this.connectSettings){u.next=2;break}throw new Error("Request settings have not been set up");case 2:o=this.preprocessBody(this.rawBody,a),Ie.request(this,o,i),this.messages=i;case 4:case"end":return u.stop()}},s,this)}));function n(s,i){return t.apply(this,arguments)}return n}()},{key:"extractResultData",value:function(){var t=A(v().mark(function s(i){var a,o,l;return v().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!i.error){c.next=2;break}throw i.error.message;case 2:return this.messages&&this.completionsHandlers&&(o=i.headers.get("operation-location"),l={method:"GET",headers:(a=this.connectSettings)==null?void 0:a.headers},Ie.executePollRequest(this,o,l,this.messages)),c.abrupt("return",{makingAnotherRequest:!0});case 4:case"end":return c.stop()}},s,this)}));function n(s){return t.apply(this,arguments)}return n}()},{key:"extractPollResultData",value:function(){var t=A(v().mark(function s(i){var a,o,l,u;return v().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!i.error){d.next=2;break}throw i.error;case 2:if(i.status!=="running"){d.next=4;break}return d.abrupt("return",{timeoutMS:2e3});case 4:if(!(i.errors.length>0)){d.next=6;break}throw i.errors[0];case 6:if(!(i.tasks.items[0].results.errors.length>0)){d.next=8;break}throw i.tasks.items[0].results.errors[0];case 8:a="",o=Ev(i.tasks.items[0].results.documents[0].sentences);try{for(o.s();!(l=o.n()).done;)u=l.value,a+=u.text}catch(h){o.e(h)}finally{o.f()}return d.abrupt("return",{text:a||""});case 12:case"end":return d.stop()}},s)}));function n(s){return t.apply(this,arguments)}return n}()}])}(o0);Fd.ENDPOINT_ERROR_MESSAGE="Please define the azure endpoint. [More Information](https://deepchat.dev/docs/directConnection/Azure#Summarization)";var l0=Fd,Hi=function(){function e(){w(this,e)}return C(e,null,[{key:"poll",value:function(){var r=A(v().mark(function n(s,i){var a,o,l,u;return v().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return a={authorization:s,"content-type":"application/json"},d.t0="https://api.assemblyai.com/v2/transcript/",d.next=4,fetch("https://api.assemblyai.com/v2/transcript",{method:"POST",body:JSON.stringify({audio_url:i}),headers:a});case 4:return d.next=6,d.sent.json();case 6:d.t1=d.sent.id,o=d.t0.concat.call(d.t0,d.t1);case 8:if(l){d.next=24;break}return d.next=11,fetch(o,{headers:a});case 11:return d.next=13,d.sent.json();case 13:if(u=d.sent,u.status!=="completed"){d.next=18;break}l=u,d.next=22;break;case 18:if(u.status!=="error"){d.next=20;break}throw new Error("Transcription failed: ".concat(u.error));case 20:return d.next=22,new Promise(function(h){return setTimeout(h,3e3)});case 22:d.next=8;break;case 24:return d.abrupt("return",l);case 25:case"end":return d.stop()}},n)}));function t(n,s){return r.apply(this,arguments)}return t}()},{key:"buildHeaders",value:function(t){return{Authorization:t,"Content-Type":"application/octet-stream"}}},{key:"handleVerificationResult",value:function(t,n,s,i){var a=t;a.error?a.error.code==="invalid_api_key"?i(xe.INVALID_KEY):i(xe.CONNECTION_FAILED):s(n)}},{key:"buildKeyVerificationDetails",value:function(){return{url:"https://api.assemblyai.com/v2/upload",method:"POST",handleVerificationResult:e.handleVerificationResult}}}])}(),u0=function(e){function r(t){var n;w(this,r);var s,i=(s=t.directConnection)==null?void 0:s.assemblyAI;return n=ee(this,r,[t,Hi.buildKeyVerificationDetails(),Hi.buildHeaders,i,{audio:{}}]),n.insertKeyPlaceholderText="AssemblyAI API Key",n.keyHelpUrl="https://www.assemblyai.com/app/account",n.introPanelMarkUp=`
    <div style="width: 100%; text-align: center; margin-left: -10px"><b>AssemblyAI Audio</b></div>
    <p><b>Upload an audio file</b> to transcribe it into text.
    <p>
      Click <a href="https://www.assemblyai.com/docs/Guides/transcribing_an_audio_file#get-started">here</a> for more info.
    </p>`,n.url="https://api.assemblyai.com/v2/upload",n.isTextInputDisabled=!0,n.textInputPlaceholderText="Upload an audio file",n.permittedErrorPrefixes=["Authentication","Invalid"],n.canSendMessage=r.canFileSendMessage,n}return te(r,e),C(r,[{key:"callServiceAPI",value:function(){var t=A(v().mark(function s(i,a,o){var l;return v().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if((l=this.connectSettings)!=null&&l.headers){c.next=2;break}throw new Error("Request settings have not been set up");case 2:if(o!=null&&o[0]){c.next=4;break}throw new Error("No file was added");case 4:Ie.request(this,o[0],i,!1);case 5:case"end":return c.stop()}},s,this)}));function n(s,i,a){return t.apply(this,arguments)}return n}()},{key:"extractResultData",value:function(){var t=A(v().mark(function s(i){var a,o,l;return v().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!i.error){c.next=2;break}throw i.error;case 2:return l=(o=(a=this.connectSettings)==null?void 0:a.headers)==null?void 0:o.Authorization,c.next=5,Hi.poll(l,i.upload_url);case 5:return c.t0=c.sent.text,c.abrupt("return",{text:c.t0});case 7:case"end":return c.stop()}},s,this)}));function n(s){return t.apply(this,arguments)}return n}()}],[{key:"canFileSendMessage",value:function(n,s){return!!(s!=null&&s[0])}}])}(Ze),jd=function(e){function r(t,n,s,i,a){var o;return w(this,r),o=ee(this,r,[t,Tn.buildSpeechKeyVerificationDetails(s),n,i,a]),o.insertKeyPlaceholderText="Azure Speech Subscription Key",o.keyHelpUrl="https://learn.microsoft.com/en-us/azure/api-management/api-management-subscriptions#create-and-manage-subscriptions-in-azure-portal",o}return te(r,e),C(r)}(Ze),wa=function(e){function r(t){var n,s,i,a;w(this,r);var o,l,u,c,d,h,f=(l=(o=t.directConnection)==null?void 0:o.azure)==null?void 0:l.textToSpeech,m=(u=t.directConnection)==null?void 0:u.azure;return a=ee(this,r,[t,Tn.buildTextToSpeechHeaders.bind({},(f==null?void 0:f.outputFormat)||"audio-16khz-128kbitrate-mono-mp3"),f.region,m]),a.permittedErrorPrefixes=[r.REGION_ERROR_MESSAGE],a.introPanelMarkUp=`
    <div style="width: 100%; text-align: center; margin-left: -10px"><b>Azure Text To Speech</b></div>
    <p>Insert text to synthesize it to audio.
    <p>
      Click <a href="`.concat(r.HELP_LINK,`">here</a> for more info.
    </p>`),a.isTextInputDisabled=!1,a.url="",f.region?(Object.assign(a.rawBody,f),(n=(c=a.rawBody).lang)!==null&&n!==void 0||(c.lang="en-US"),(s=(d=a.rawBody).name)!==null&&s!==void 0||(d.name="en-US-JennyNeural"),(i=(h=a.rawBody).gender)!==null&&i!==void 0||(h.gender="Female"),a.url="https://".concat(f.region,".tts.speech.microsoft.com/cognitiveservices/v1")):(a.isTextInputDisabled=!0,a.canSendMessage=function(){return!1},setTimeout(function(){t.addMessage({error:r.REGION_ERROR_MESSAGE})})),a}return te(r,e),C(r,[{key:"preprocessBody",value:function(n,s){var i=s[s.length-1].text;if(i)return"<speak version='1.0' xml:lang='".concat(n.lang,`'>
      <voice xml:lang='`).concat(n.lang,"' xml:gender='").concat(n.gender,"' name='").concat(n.name,`'>
        `).concat(i,`
      </voice>
    </speak>`)}},{key:"callServiceAPI",value:function(){var t=A(v().mark(function s(i,a){var o;return v().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(this.connectSettings){u.next=2;break}throw new Error("Request settings have not been set up");case 2:o=this.preprocessBody(this.rawBody,a),Ie.request(this,o,i,!1);case 4:case"end":return u.stop()}},s,this)}));function n(s,i){return t.apply(this,arguments)}return n}()},{key:"extractResultData",value:function(){var t=A(v().mark(function s(i){return v().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",new Promise(function(l){var u=new FileReader;u.readAsDataURL(i),u.onload=function(c){l({files:[{src:c.target.result,type:"audio"}]})}}));case 1:case"end":return o.stop()}},s)}));function n(s){return t.apply(this,arguments)}return n}()}])}(jd);wa.HELP_LINK="https://learn.microsoft.com/en-GB/azure/cognitive-services/speech-service/get-started-text-to-speech?tabs=windows%2Cterminal&pivots=programming-language-rest",wa.REGION_ERROR_MESSAGE="Please define a region config property. [More Information](https://deepchat.dev/docs/directConnection/Azure#TextToSpeech)";var c0=wa,Ca=function(e){function r(t){var n;w(this,r);var s,i,a,o=(i=(s=t.directConnection)==null?void 0:s.azure)==null?void 0:i.speechToText,l=(a=t.directConnection)==null?void 0:a.azure,u={audio:{files:{acceptedFormats:".wav,.ogg"}}};if(n=ee(this,r,[t,Tn.buildSpeechToTextHeaders,o.region,l,u]),n.permittedErrorPrefixes=[r.REGION_ERROR_MESSAGE],n.introPanelMarkUp=`
    <div style="width: 100%; text-align: center; margin-left: -10px"><b>Azure Speech To Text</b></div>
    <p><b>Upload a .wav or .ogg audio file</b> to transcribe it into text.
    <p>
      Click <a href="`.concat(r.HELP_LINK,`">here</a> for more info.
    </p>`),n.url="",n.isTextInputDisabled=!0,n.textInputPlaceholderText="Upload an audio file",!o.region)n.isTextInputDisabled=!0,n.canSendMessage=function(){return!1},setTimeout(function(){t.addMessage({error:r.REGION_ERROR_MESSAGE})});else{n.canSendMessage=r.canFileSendMessage;var c=o.lang||"en-US";n.url="https://".concat(o.region,".stt.speech.microsoft.com/speech/recognition/conversation/cognitiveservices/v1?language=").concat(c,"&format=detailed"),n.recordAudio=void 0}return n}return te(r,e),C(r,[{key:"callServiceAPI",value:function(){var t=A(v().mark(function s(i,a,o){var l,u;return v().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if((l=this.connectSettings)!=null&&l.headers){d.next=2;break}throw new Error("Request settings have not been set up");case 2:if(o!=null&&o[0]){d.next=4;break}throw new Error("No file was added");case 4:(u=this.connectSettings)!=null&&u.headers&&(this.connectSettings.headers["Content-Type"]=o[0].name.toLocaleLowerCase().endsWith(".wav")?"audio/wav; codecs=audio/pcm; samplerate=16000":"audio/ogg; codecs=opus"),Ie.request(this,o[0],i,!1);case 5:case"end":return d.stop()}},s,this)}));function n(s,i,a){return t.apply(this,arguments)}return n}()},{key:"extractResultData",value:function(){var t=A(v().mark(function s(i){return v().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!i.error){o.next=2;break}throw i.error;case 2:return o.abrupt("return",{text:i.DisplayText||""});case 3:case"end":return o.stop()}},s)}));function n(s){return t.apply(this,arguments)}return n}()}],[{key:"canFileSendMessage",value:function(n,s){return!!(s!=null&&s[0])}}])}(jd);Ca.HELP_LINK="https://learn.microsoft.com/en-GB/azure/cognitive-services/speech-service/get-started-text-to-speech?tabs=windows%2Cterminal&pivots=programming-language-rest",Ca.REGION_ERROR_MESSAGE="Please define a region config property. [More Information](https://deepchat.dev/docs/directConnection/Azure#SpeechToText)";var d0=Ca,f0=function(e){function r(t){var n;w(this,r);var s,i,a,o=(i=(s=t.directConnection)==null?void 0:s.azure)==null?void 0:i.translation,l=(a=t.directConnection)==null?void 0:a.azure;return n=ee(this,r,[t,Tn.buildTranslationKeyVerificationDetails(o.region),Tn.buildTranslationHeaders.bind({},o==null?void 0:o.region),l]),n.insertKeyPlaceholderText="Azure Translate Subscription Key",n.keyHelpUrl="https://learn.microsoft.com/en-us/azure/api-management/api-management-subscriptions#create-and-manage-subscriptions-in-azure-portal",n.url="",n.url="https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=".concat(o.language||"es"),n}return te(r,e),C(r,[{key:"preprocessBody",value:function(n){var s=n[n.length-1].text;if(s)return[{Text:s}]}},{key:"callServiceAPI",value:function(){var t=A(v().mark(function s(i,a){var o;return v().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(this.connectSettings){u.next=2;break}throw new Error("Request settings have not been set up");case 2:o=this.preprocessBody(a),Ie.request(this,o,i);case 4:case"end":return u.stop()}},s,this)}));function n(s,i){return t.apply(this,arguments)}return n}()},{key:"extractResultData",value:function(){var t=A(v().mark(function s(i){var a;return v().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!Array.isArray(i)){l.next=2;break}return l.abrupt("return",{text:((a=i[0].translations)==null?void 0:a[0].text)||""});case 2:throw i.error;case 3:case"end":return l.stop()}},s)}));function n(s){return t.apply(this,arguments)}return n}()}])}(Ze),Ud=function(e){function r(t,n,s,i,a){var o,l,u;w(this,r);var c,d,h,f,m,p=JSON.parse(JSON.stringify(t.directConnection)),y=n||Ne.buildKeyVerificationDetails(),g=s||Ne.buildHeaders,S=i||p.openAI;u=ee(this,r,[t,y,g,S]),u.insertKeyPlaceholderText="OpenAI API Key",u.keyHelpUrl="https://platform.openai.com/account/api-keys",u.url="https://api.openai.com/v1/chat/completions",u.permittedErrorPrefixes=["Incorrect"],u.asyncCallInProgress=!1,u._systemMessage=r.generateSystemMessage("You are a helpful assistant.");var k=a||((c=p.openAI)==null?void 0:c.chat);if(W(k)=="object"){k.system_prompt&&(u._systemMessage=r.generateSystemMessage(k.system_prompt));var T=(f=(h=(d=t.directConnection)==null?void 0:d.openAI)==null?void 0:h.chat)==null?void 0:f.function_handler;T&&(u._functionHandler=T),u.cleanConfig(k),Object.assign(u.rawBody,k)}return(o=u.maxMessages)!==null&&o!==void 0||(u.maxMessages=-1),(l=(m=u.rawBody).model)!==null&&l!==void 0||(m.model="gpt-4o"),u}return te(r,e),C(r,[{key:"cleanConfig",value:function(n){delete n.system_prompt,delete n.function_handler}},{key:"preprocessBody",value:function(n,s){var i,a=JSON.parse(JSON.stringify(n)),o=lo.getCharacterLimitMessages(s,this.totalMessagesMaxCharLength?this.totalMessagesMaxCharLength-this._systemMessage.content.length:-1).map(function(l){return{content:r.getContent(l),role:l.role===Z.USER_ROLE?"user":"assistant"}});return s.find(function(l){return l.files&&l.files.length>0})&&((i=a.max_tokens)!==null&&i!==void 0||(a.max_tokens=300)),a.messages=[this._systemMessage].concat(us(o)),a}},{key:"callServiceAPI",value:function(){var t=A(v().mark(function s(i,a){var o,l;return v().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(this.connectSettings){c.next=2;break}throw new Error("Request settings have not been set up");case 2:o=this.preprocessBody(this.rawBody,a),l=this.stream,l&&(W(l)!="object"||!l.simulation)||o.stream?(o.stream=!0,je.request(this,o,i)):Ie.request(this,o,i);case 4:case"end":return c.stop()}},s,this)}));function n(s,i){return t.apply(this,arguments)}return n}()},{key:"extractResultData",value:function(){var t=A(v().mark(function s(i,a,o){var l,u,c,d;return v().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!i.error){f.next=2;break}throw i.error.message;case 2:return f.abrupt("return",(u=(l=i.choices)==null?void 0:l[0])!=null&&u.delta?this.extractStreamResult(i.choices[0],a,o):(d=(c=i.choices)==null?void 0:c[0])!=null&&d.message?i.choices[0].message.tool_calls?this.handleTools(i.choices[0].message,a,o):{text:i.choices[0].message.content}:{text:""});case 3:case"end":return f.stop()}},s,this)}));function n(s,i,a){return t.apply(this,arguments)}return n}()},{key:"extractStreamResult",value:function(){var t=A(v().mark(function s(i,a,o){var l=this,u,c,d;return v().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(u=i.delta,c=i.finish_reason,c!=="tool_calls"){f.next=7;break}return this.asyncCallInProgress=!0,d={tool_calls:this._streamToolCalls},f.abrupt("return",(this._streamToolCalls=void 0,this.handleTools(d,a,o)));case 7:u!=null&&u.tool_calls&&(this._streamToolCalls?u.tool_calls.forEach(function(m,p){l._streamToolCalls&&(l._streamToolCalls[p].function.arguments+=m.function.arguments)}):this._streamToolCalls=u.tool_calls);case 8:return f.abrupt("return",{text:(u==null?void 0:u.content)||""});case 9:case"end":return f.stop()}},s,this)}));function n(s,i,a){return t.apply(this,arguments)}return n}()},{key:"handleTools",value:function(){var t=A(v().mark(function s(i,a,o){var l,u,c,d,h,f,m,p,y,g,S,k;return v().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(!(!i.tool_calls||!a||!o||!this._functionHandler)){x.next=2;break}throw Error("Please define the `function_handler` property inside the [openAI](https://deepchat.dev/docs/directConnection/openAI#Chat) object.");case 2:return f=JSON.parse(JSON.stringify(o)),m=i.tool_calls.map(function(I){return{name:I.function.name,arguments:I.function.arguments}}),x.next=6,(l=this._functionHandler)==null?void 0:l.call(this,m);case 6:if(p=x.sent,Array.isArray(p)){x.next=20;break}if(!p.text){x.next=19;break}return y={text:p.text},x.next=12,(c=(u=this.deepChat).responseInterceptor)==null?void 0:c.call(u,y);case 12:if(x.t0=x.sent,x.t0){x.next=15;break}x.t0=y;case 15:if(g=x.t0,!Array.isArray(g)){x.next=18;break}throw Error(Ne.FUNCTION_TOOL_RESP_ARR_ERROR);case 18:return x.abrupt("return",g);case 19:throw Error(Ne.FUNCTION_TOOL_RESP_ERROR);case 20:return x.next=22,Promise.all(p);case 22:if(S=x.sent,f.messages.push({tool_calls:i.tool_calls,role:"assistant",content:null}),!(!S.find(function(I){var F=I.response;return typeof F!="string"})&&m.length===S.length)){x.next=43;break}return S.forEach(function(I,F){var $,ae=($=i.tool_calls)==null?void 0:$[F];f==null||f.messages.push({role:"tool",tool_call_id:ae==null?void 0:ae.id,name:ae==null?void 0:ae.function.name,content:I.response})}),delete f.tools,delete f.tool_choice,delete f.stream,x.prev=25,x.next=28,a==null?void 0:a(f).then(function(I){return oe.processResponseByType(I)});case 28:return k=x.sent,x.next=31,(h=(d=this.deepChat).responseInterceptor)==null?void 0:h.call(d,k);case 31:if(x.t1=x.sent,x.t1){x.next=34;break}x.t1=k;case 34:if(k=x.t1,!k.error){x.next=37;break}throw k.error.message;case 37:return x.abrupt("return",{text:k.choices[0].message.content||""});case 40:throw x.prev=40,x.t2=x.catch(25),this.asyncCallInProgress=!1,x.t2;case 43:throw Error(Ne.FUNCTION_TOOL_RESP_ERROR);case 44:case"end":return x.stop()}},s,this,[[25,40]])}));function n(s,i,a){return t.apply(this,arguments)}return n}()}],[{key:"generateSystemMessage",value:function(n){return{role:"system",content:n}}},{key:"getContent",value:function(n){if(n.files&&n.files.length>0){var s=n.files.map(function(i){return{type:"image_url",image_url:{url:i.src}}});return n.text&&n.text.trim().length>0&&s.unshift({type:"text",text:n.text}),s}return n.text}}])}(Ze),h0=function(e){function r(t){var n;w(this,r);var s,i,a,o,l,u,c,d=JSON.parse(JSON.stringify(t.directConnection)),h=d.azure,f=((i=(s=d.azure)==null?void 0:s.openAI)==null?void 0:i.urlDetails)||{},m=(o=(a=d.azure)==null?void 0:a.openAI)==null?void 0:o.chat;if(n=ee(this,r,[t,Lt.buildKeyVerificationDetails(f),Lt.buildHeaders,h,m]),n.permittedErrorPrefixes=[Lt.URL_DETAILS_ERROR_MESSAGE],n.isTextInputDisabled=!1,W(m)=="object"){var p=(c=(u=(l=t.directConnection)==null?void 0:l.azure)==null?void 0:u.openAI)==null?void 0:c.chat,y=p.function_handler;y&&(n._functionHandler=y)}return Lt.validateURLDetails(f)?n.url=r.buildURL(f):(n.isTextInputDisabled=!0,n.canSendMessage=function(){return!1},setTimeout(function(){t.addMessage({error:Lt.URL_DETAILS_ERROR_MESSAGE})})),n}return te(r,e),C(r,null,[{key:"buildURL",value:function(n){var s=n.endpoint,i=n.deploymentId,a=n.version;return"".concat(s,"/openai/deployments/").concat(i,"/completions?api-version=").concat(a)}}])}(Ud),Os=function(e){function r(t){var n;w(this,r);var s,i=t.directConnection,a=i==null?void 0:i.openAI,o={images:{files:{acceptedFormats:".png",maxNumberOfFiles:2}}};n=ee(this,r,[t,Ne.buildKeyVerificationDetails(),Ne.buildHeaders,a,o]),n.insertKeyPlaceholderText="OpenAI API Key",n.keyHelpUrl="https://platform.openai.com/account/api-keys",n.introPanelMarkUp=`
    <div style="width: 100%; text-align: center; margin-left: -10px"><b>OpenAI DALLE</b></div>
    <p><b>Insert text</b> to generate an image.</p>
    <p><b>Upload 1</b> PNG image to generate its variation and optionally insert text to specify the change.</p>
    <p><b>Upload 2</b> PNG images where the second is a copy of the first with a transparent area where the edit should
      take place and text to specify the edit.</p>
    <p>Click <a href="https://platform.openai.com/docs/guides/images/introduction">here</a> for more info.</p>`,n.url="",n.permittedErrorPrefixes=["Incorrect","Invalid input image"];var l=(s=i==null?void 0:i.openAI)==null?void 0:s.images;if(n.camera){var u=W(l)=="object"&&l.size?Number.parseInt(l.size):1024;n.camera.files={dimensions:{width:u,height:u}}}return W(l)=="object"&&Object.assign(n.rawBody,l),n.canSendMessage=r.canFileSendMessage,n}return te(r,e),C(r,[{key:"preprocessBody",value:function(n,s){var i=JSON.parse(JSON.stringify(n));return s&&s!==""&&(i.prompt=s),i}},{key:"callApiWithImage",value:function(n,s,i){var a,o,l,u=(o=(a=s[s.length-1])==null?void 0:a.text)==null?void 0:o.trim();if(i[1]||u&&u!==""){this.url=r.IMAGE_EDIT_URL;var c=this.preprocessBody(this.rawBody,u);l=r.createFormDataBody(c,i[0],i[1])}else this.url=r.IMAGE_VARIATIONS_URL,l=r.createFormDataBody(this.rawBody,i[0]);oe.tempRemoveContentHeader(this.connectSettings,Ie.request.bind(this,this,l,n),!1)}},{key:"callServiceAPI",value:function(){var t=A(v().mark(function s(i,a,o){var l,u;return v().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if((l=this.connectSettings)!=null&&l.headers){d.next=2;break}throw new Error("Request settings have not been set up");case 2:if(!(o!=null&&o[0])){d.next=6;break}this.callApiWithImage(i,a,o),d.next=11;break;case 6:if(this.connectSettings){d.next=8;break}throw new Error("Request settings have not been set up");case 8:this.url=r.IMAGE_GENERATION_URL,u=this.preprocessBody(this.rawBody,a[a.length-1].text),Ie.request(this,u,i);case 11:case"end":return d.stop()}},s,this)}));function n(s,i,a){return t.apply(this,arguments)}return n}()},{key:"extractResultData",value:function(){var t=A(v().mark(function s(i){return v().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!i.error){o.next=2;break}throw i.error.message;case 2:return o.abrupt("return",{files:i.data.map(function(l){return l.url?{src:l.url,type:"image"}:{src:"".concat(cs).concat(l.b64_json),type:"image"}})});case 3:case"end":return o.stop()}},s)}));function n(s){return t.apply(this,arguments)}return n}()}],[{key:"canFileSendMessage",value:function(n,s){return!!(s!=null&&s[0])||!!(n&&n.trim()!=="")}},{key:"createFormDataBody",value:function(n,s,i){var a=new FormData;return a.append("image",s),i&&a.append("mask",i),Object.keys(n).forEach(function(o){a.append(o,String(n[o]))}),a}}])}(Ze);Os.IMAGE_GENERATION_URL="https://api.openai.com/v1/images/generations",Os.IMAGE_VARIATIONS_URL="https://api.openai.com/v1/images/variations",Os.IMAGE_EDIT_URL="https://api.openai.com/v1/images/edits";var p0=Os,m0=function(e){function r(t){var n,s;w(this,r);var i,a=JSON.parse(JSON.stringify(t.directConnection)),o=(i=a.cohere)==null?void 0:i.chat,l=a.cohere;return s=ee(this,r,[t,"https://api.cohere.ai/v1/chat","Ask me anything!",o,l]),W(o)=="object"&&Object.assign(s.rawBody,o),(n=s.maxMessages)!==null&&n!==void 0||(s.maxMessages=-1),s}return te(r,e),C(r,[{key:"preprocessBody",value:function(n,s){var i=JSON.parse(JSON.stringify(n)),a=s.filter(function(o){return o.text});return i.query=a[a.length-1].text,i.chat_history=a.slice(0,a.length-1).map(function(o){return{text:o.text,user_name:o.role==="ai"?"CHATBOT":"USER"}}),i}},{key:"callServiceAPI",value:function(){var t=A(v().mark(function s(i,a){var o;return v().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(this.connectSettings){u.next=2;break}throw new Error("Request settings have not been set up");case 2:o=this.preprocessBody(this.rawBody,a),Ie.request(this,o,i);case 4:case"end":return u.stop()}},s,this)}));function n(s,i){return t.apply(this,arguments)}return n}()},{key:"extractResultData",value:function(){var t=A(v().mark(function s(i){return v().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!i.message){o.next=2;break}throw i.message;case 2:return o.abrupt("return",{text:i.text});case 3:case"end":return o.stop()}},s)}));function n(s){return t.apply(this,arguments)}return n}()}])}(fo),Jl=function(){function e(){w(this,e)}return C(e,null,[{key:"buildHeaders",value:function(t){return{Authorization:"Bearer ".concat(t),"Content-Type":"application/json",accept:"application/json"}}},{key:"handleVerificationResult",value:function(t,n,s,i){var a;(a=t.message)!=null&&a.includes("invalid request: prompt must be at least 1 token long")?s(n):i(xe.INVALID_KEY)}},{key:"buildKeyVerificationDetails",value:function(){return{url:"https://api.mistral.ai/v1/models",method:"GET",handleVerificationResult:e.handleVerificationResult}}}])}(),v0=function(e){function r(t){var n,s,i;w(this,r);var a,o=JSON.parse(JSON.stringify(t.directConnection)).mistral;return i=ee(this,r,[t,Jl.buildKeyVerificationDetails(),Jl.buildHeaders,o]),i.insertKeyPlaceholderText="Mistral API Key",i.keyHelpUrl="https://console.mistral.ai/api-keys/",i.url="https://api.mistral.ai/v1/chat/completions",i.permittedErrorPrefixes=["invalid"],o&&(i.cleanConfig(o),Object.assign(i.rawBody,o)),(n=i.maxMessages)!==null&&n!==void 0||(i.maxMessages=-1),(s=(a=i.rawBody).model)!==null&&s!==void 0||(a.model="open-mistral-7b"),i}return te(r,e),C(r,[{key:"cleanConfig",value:function(n){delete n.key}},{key:"preprocessBody",value:function(n,s){var i=JSON.parse(JSON.stringify(n)),a=s.filter(function(o){return o.text});return i.messages=a.slice(0,a.length-1).map(function(o){return{text:o.text,user_name:o.role==="ai"?"system":"user"}}),i}},{key:"callServiceAPI",value:function(){var t=A(v().mark(function s(i,a){var o;return v().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(this.connectSettings){u.next=2;break}throw new Error("Request settings have not been set up");case 2:o=this.preprocessBody(this.rawBody,a),Ie.request(this,o,i);case 4:case"end":return u.stop()}},s,this)}));function n(s,i){return t.apply(this,arguments)}return n}()},{key:"extractResultData",value:function(){var t=A(v().mark(function s(i){return v().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!i.message){o.next=2;break}throw i.message;case 2:return o.abrupt("return",{text:i.text});case 3:case"end":return o.stop()}},s)}));function n(s){return t.apply(this,arguments)}return n}()}])}(Ze),g0=function(){function e(){w(this,e)}return C(e,null,[{key:"create",value:function(t){var n=t.directConnection,s=t.connect,i=t.demo,a=t.webModel;if(a)return new uo(t);if(n){if(n.openAI)return n.openAI.images?new p0(t):n.openAI.speechToText?new a0(t):n.openAI.textToSpeech?new i0(t):n.openAI.assistant?new e0(t):n.openAI.realtime?new s0(t):new Ud(t);if(n.assemblyAI)return new u0(t);if(n.cohere)return n.cohere.textGeneration?new t0(t):n.cohere.summarization?new r0(t):new m0(t);if(n.huggingFace)return n.huggingFace.textGeneration?new Gy(t):n.huggingFace.summarization?new Wy(t):n.huggingFace.translation?new Xy(t):n.huggingFace.fillMask?new Qy(t):n.huggingFace.questionAnswer?new Ky(t):n.huggingFace.audioSpeechRecognition?new zy(t):n.huggingFace.audioClassification?new Hy(t):n.huggingFace.imageClassification?new $y(t):new Jy(t);if(n.azure){if(n.azure.openAI){if(n.azure.openAI.chat)return new h0(t);if(n.azure.openAI.assistant)return new n0(t)}if(n.azure.speechToText)return new d0(t);if(n.azure.textToSpeech)return new c0(t);if(n.azure.summarization)return new l0(t);if(n.azure.translation)return new f0(t)}if(n.stabilityAI)return n.stabilityAI.imageToImage?new Yy(t):n.stabilityAI.imageToImageUpscale?new Vy(t):n.stabilityAI.imageToImageMasking?new qy(t):new Zy(t);if(n.mistral)return new v0(t)}return s&&Object.keys(s).length>0&&!i?new Js(t):new Js(t,void 0,i||!0)}}])}(),Hd=C(function e(){w(this,e)});Hd.attibutes={string:function(r){return r},number:function(r){return parseFloat(r)},boolean:function(r){return r==="true"},object:function(r){return JSON.parse(r)},array:function(r){return JSON.parse(r)},function:function(r){return new Function("return ".concat(r))()}};var y0=Hd;function he(e){return function(r,t){Object.defineProperty(r,t,{});var n=r.constructor,s=t.toLocaleLowerCase();n._attributes_[s]=y0.attibutes[e],n._attributeToProperty_[s]=t}}var b0=function(){function e(r,t,n){w(this,e),this._isDisplayed=!1,r?(this._elementRef=this.createIntroPanelWithChild(r,n),this._isDisplayed=!0):t&&(this._elementRef=this.createInternalIntroPanel(t,n),this._isDisplayed=!0)}return C(e,[{key:"createIntroPanelWithChild",value:function(t,n){var s=e.createIntroPanel(n);return t.style.display==="none"&&(t.style.display="block"),s.appendChild(t),s}},{key:"createInternalIntroPanel",value:function(t,n){var s=e.createIntroPanel(n);return s.id="internal-intro-panel",s.innerHTML=t,s}},{key:"hide",value:function(){this._isDisplayed&&this._elementRef&&(this._elementRef.style.display="none",this._isDisplayed=!1)}},{key:"display",value:function(){!this._isDisplayed&&this._elementRef&&(this._elementRef.style.display="",this._isDisplayed=!0)}}],[{key:"createIntroPanel",value:function(t){var n=document.createElement("div");return n.classList.add("intro-panel"),Object.assign(n.style,t),n}}])}(),_0=`<?xml version="1.0" encoding="iso-8859-1"?>
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
	 viewBox="50 30 420 450" xml:space="preserve">
<g filter="brightness(0) saturate(100%) invert(16%) sepia(0%) saturate(1942%) hue-rotate(215deg) brightness(99%) contrast(93%)">
	<g>
		<path d="M447.933,103.629c-0.034-3.076-1.224-6.09-3.485-8.352L352.683,3.511c-0.004-0.004-0.007-0.005-0.011-0.008
			C350.505,1.338,347.511,0,344.206,0H89.278C75.361,0,64.04,11.32,64.04,25.237v461.525c0,13.916,11.32,25.237,25.237,25.237
			h333.444c13.916,0,25.237-11.32,25.237-25.237V103.753C447.96,103.709,447.937,103.672,447.933,103.629z M356.194,40.931
			l50.834,50.834h-49.572c-0.695,0-1.262-0.567-1.262-1.262V40.931z M423.983,486.763c0,0.695-0.566,1.261-1.261,1.261H89.278
			c-0.695,0-1.261-0.566-1.261-1.261V25.237c0-0.695,0.566-1.261,1.261-1.261h242.94v66.527c0,13.916,11.322,25.239,25.239,25.239
			h66.527V486.763z"/>
	</g>
</g>
<g>
	<g>
		<path d="M362.088,164.014H149.912c-6.62,0-11.988,5.367-11.988,11.988c0,6.62,5.368,11.988,11.988,11.988h212.175
			c6.62,0,11.988-5.368,11.988-11.988C374.076,169.381,368.707,164.014,362.088,164.014z"/>
	</g>
</g>
<g>
	<g>
		<path d="M362.088,236.353H149.912c-6.62,0-11.988,5.368-11.988,11.988c0,6.62,5.368,11.988,11.988,11.988h212.175
			c6.62,0,11.988-5.368,11.988-11.988C374.076,241.721,368.707,236.353,362.088,236.353z"/>
	</g>
</g>
<g>
	<g>
		<path d="M362.088,308.691H149.912c-6.62,0-11.988,5.368-11.988,11.988c0,6.621,5.368,11.988,11.988,11.988h212.175
			c6.62,0,11.988-5.367,11.988-11.988C374.076,314.06,368.707,308.691,362.088,308.691z"/>
	</g>
</g>
<g>
	<g>
		<path d="M256,381.031H149.912c-6.62,0-11.988,5.368-11.988,11.988c0,6.621,5.368,11.988,11.988,11.988H256
			c6.62,0,11.988-5.367,11.988-11.988C267.988,386.398,262.62,381.031,256,381.031z"/>
	</g>
</g>
</svg>`,Ps=function(){function e(){w(this,e)}return C(e,null,[{key:"createImage",value:function(t,n,s){var i=new Image;return i.src=t.src,s&&st.scrollDownOnImageLoad(i.src,n),st.processContent("image",i,i.src,t.name)}},{key:"createImageMessage",value:function(t,n,s,i){var a=e.createImage(n,t.elementRef,!i&&!t.focusMode),o=t.createNewMessageElement("",s);return o.bubbleElement.appendChild(a),o.bubbleElement.classList.add(e.IMAGE_BUBBLE_CLASS),{type:"image",elements:o}}},{key:"createAudioElement",value:function(t,n){var s=document.createElement("audio");return s.src=t.src,s.classList.add("audio-player"),s.controls=!0,Sn.IS_SAFARI&&(s.classList.add("audio-player-safari"),s.classList.add(n===Z.USER_ROLE?"audio-player-safari-right":"audio-player-safari-left")),s}},{key:"createNewAudioMessage",value:function(t,n,s,i){var a=e.createAudioElement(n,s),o=t.createMessageElementsOnOrientation("",s,i);return o.bubbleElement.appendChild(a),o.bubbleElement.classList.add(e.AUDIO_BUBBLE_CLASS),{type:"audio",elements:o}}},{key:"createAnyFile",value:function(t){var n=document.createElement("div");n.classList.add("any-file-message-contents");var s=document.createElement("div");s.classList.add("any-file-message-icon-container");var i=Wt.createSVGElement(_0);i.classList.add("any-file-message-icon"),s.appendChild(i);var a=document.createElement("div");return a.classList.add("any-file-message-text"),a.textContent=t.name||st.DEFAULT_FILE_NAME,n.appendChild(s),n.appendChild(a),st.processContent("any",n,t.src,a.textContent)}},{key:"createNewAnyFileMessage",value:function(t,n,s,i){var a=t.createMessageElementsOnOrientation("",s,i),o=e.createAnyFile(n);return a.bubbleElement.classList.add(e.ANY_FILE_BUBBLE_CLASS),a.bubbleElement.appendChild(o),{type:"file",elements:a}}},{key:"createMessages",value:function(t,n,s){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return n.map(function(a){return a.ref&&(a=st.removeFileRef(a)),st.isAudioFile(a)?e.createNewAudioMessage(t,a,s,i):st.isImageFile(a)?e.createImageMessage(t,a,s,i):e.createNewAnyFileMessage(t,a,s,i)})}},{key:"addMessages",value:function(t,n,s,i){e.createMessages(t,n,s,i).forEach(function(a){var o=a.type,l=a.elements;st.addMessage(t,l,o,s,i)})}}])}();Ps.IMAGE_BUBBLE_CLASS="image-message",Ps.AUDIO_BUBBLE_CLASS="audio-message",Ps.ANY_FILE_BUBBLE_CLASS="any-file-message";var $d=Ps,S0=function(){function e(){w(this,e)}return C(e,null,[{key:"removeElements",value:function(t,n){if(n){var s=t.findIndex(function(i){return i===n});t.splice(s,1),n==null||n.outerContainer.remove()}}},{key:"removeFilesMessages",value:function(t,n){var s;(s=n[1].files)==null||s.forEach(function(i){e.removeElements(t.messageElementRefs,i)}),delete n[0].files,delete n[1].files}},{key:"removeTextHTMLMessage",value:function(t,n,s){var i=n[1][s];e.removeElements(t.messageElementRefs,i),delete n[0][s],delete n[1][s]}},{key:"updateHTMLMessage",value:function(t,n,s){var i,a,o;if(n[1].html)on.overwriteElements(t,s,n[1].html);else{var l=on.create(t,s,n[0].role),u=((a=n[1].files)==null?void 0:a[((i=n[1].files)==null?void 0:i.length)-1])||n[1].text,c=u.outerContainer.nextSibling;(o=c==null?void 0:c.parentElement)==null||o.insertBefore(l.outerContainer,c),t.messageElementRefs.splice(t.messageElementRefs.length-1,1);var d=t.messageElementRefs.findIndex(function(h){return h===u});t.messageElementRefs.splice(d+1,0,l),n[1].html=l}n[0].html=s}},{key:"updateFileMessages",value:function(t,n,s){var i,a,o=n[0].role,l=$d.createMessages(t,s,o),u=n[1].html,c=((a=n[1].files)==null?void 0:a[((i=n[1].files)==null?void 0:i.length)-1])||n[1].text,d=u||c,h=t.messageElementRefs.findIndex(function(m){return m===d});c&&(h+=1);var f=(u==null?void 0:u.outerContainer)||(c==null?void 0:c.outerContainer.nextSibling);l.forEach(function(m,p){var y=m.type,g=m.elements,S;st.setElementProps(t,g,y,o),(S=f.parentElement)==null||S.insertBefore(g.outerContainer,f),t.messageElementRefs.splice(t.messageElementRefs.length-1,1),t.messageElementRefs.splice(h+p,0,g)}),e.removeFilesMessages(t,n),n[1].files=l.map(function(m){var p=m.elements;return p}),n[0].files=s}},{key:"updateTextMessage",value:function(t,n,s){var i,a;if(n[1].text)t.renderText(n[1].text.bubbleElement,s);else{var o=t.createElements(s,n[0].role),l=((i=n[1].files)==null?void 0:i[0])||n[1].html;(a=l.outerContainer.parentElement)==null||a.insertBefore(o.outerContainer,l.outerContainer);var u=t.messageElementRefs.findIndex(function(c){return c===l});t.messageElementRefs.splice(u,0,o),n[1].text=o}n[0].text=s}},{key:"isElementActive",value:function(t){var n,s;return Ta.isActiveElement((n=t.text)==null?void 0:n.bubbleElement.classList)||Ta.isActiveElement((s=t.html)==null?void 0:s.bubbleElement.classList)}},{key:"update",value:function(t,n,s){var i=t.messageToElements[s];if(i){if(e.isElementActive(i[1]))return console.error("Cannot update a message that is being streamed");n.text&&e.updateTextMessage(t,i,n.text),n.files?e.updateFileMessages(t,i,n.files):e.removeFilesMessages(t,i),n.html&&e.updateHTMLMessage(t,i,n.html),!n.text&&i[1].text&&e.removeTextHTMLMessage(t,i,"text"),!n.html&&i[1].html&&e.removeTextHTMLMessage(t,i,"html");var a=t.messageElementRefs,o=t.avatar,l=t.name;Z.classifyRoleMessages(a),Z.resetAllRoleElements(a,o,l)}else console.error("Message index not found. Please use the `getMessages` method to find the correct index")}}])}(),E0=function(){function e(){w(this,e)}return C(e,null,[{key:"getText",value:function(t,n){var s;if(!t.directConnection&&!t.connect&&!t.webModel&&!t.demo)return`Connect to any API using the [connect](https://deepchat.dev/docs/connect#connect-1) property or a popular service via [directConnection](https://deepchat.dev/docs/directConnection/#directConnection).
 Host AI entirely on your browser via a [webModel](https://deepchat.dev/docs/webModel).
 To get started checkout the [Start](https://deepchat.dev/start) page and live code [examples](https://deepchat.dev/examples/frameworks).
 To remove this message set the [demo](https://deepchat.dev/docs/modes#demo) property to true.`;if(t.directConnection){if(!n.isDirectConnection())return`Please define a valid service inside
          the [directConnection](https://deepchat.dev/docs/directConnection/#directConnection) object.`;var i=(s=t.directConnection.openAI)==null?void 0:s.chat;if(W(i)=="object"&&i.tools&&!i.function_handler)return"Please define the `function_handler` property inside the openAI [chat](https://deepchat.dev/docs/directConnection/openAI#Chat) object."}else if(t.connect&&!t.connect.url&&!t.connect.handler)return"Please define a `url` or a `handler` property inside the [connect](https://deepchat.dev/docs/connect#connect-1) object.";return null}}])}(),Ta=function(e){function r(t,n,s){var i;w(this,r);var a,o;i=ee(this,r,[t]);var l=n.permittedErrorPrefixes,u=n.introPanelMarkUp,c=n.demo;return i._errorMessageOverrides=(a=t.errorMessages)==null?void 0:a.overrides,i._onClearMessages=Ws.onClearMessages.bind(i,t),i._onError=Ws.onError.bind(i,t),i._isLoadingMessageAllowed=r.getDefaultDisplayLoadingMessage(t,n),W(t.displayLoadingBubble)=="object"&&t.displayLoadingBubble.toggle&&(t.displayLoadingBubble.toggle=i.setLoadingToggle.bind(i)),i._permittedErrorPrefixes=l,i.addSetupMessageIfNeeded(t,n)||i.populateIntroPanel(s,u,t.introPanelStyle),c&&i.prepareDemo(lt.processDemo(c),t.loadHistory),i.addIntroductoryMessages(t,n),new oo(t,i,n),i._displayServiceErrorMessages=(o=t.errorMessages)==null?void 0:o.displayServiceErrorMessages,t.getMessages=function(){return JSON.parse(JSON.stringify(i.messageToElements.map(function(d){var h=Xa(d,1),f=h[0];return f})))},t.clearMessages=i.clearMessages.bind(i,n),t.refreshMessages=i.refreshTextMessages.bind(i,t.remarkable),t.scrollToBottom=pt.scrollToBottom.bind(i,i.elementRef),t.addMessage=function(d,h){i.addAnyMessage(ve(ve({},d),{},{sendUpdate:!!h}),!h)},t.updateMessage=function(d,h){return S0.update(i,d,h)},n.isWebModel()&&n.setUpMessages(i),t.textToSpeech&&As.processConfig(t.textToSpeech,function(d){i.textToSpeech=d}),i}return te(r,e),C(r,[{key:"setLoadingToggle",value:function(){var n=this.messageElementRefs[this.messageElementRefs.length-1];It.isLoadingMessage(n)?this.removeLastMessage():this.addLoadingMessage(!0)}},{key:"prepareDemo",value:function(n,s){var i;if(W(n)=="object"){if(!s&&n.displayLoading){var a=n.displayLoading.history;a!=null&&a.small&&En.addMessage(this,!1),a!=null&&a.full&&En.addMessage(this)}n.displayErrors&&(n.displayErrors.default&&this.addNewErrorMessage("",""),n.displayErrors.service&&this.addNewErrorMessage("service",""),n.displayErrors.speechToText&&this.addNewErrorMessage("speechToText","")),(i=n.displayLoading)!=null&&i.message&&this.addLoadingMessage(),n.response&&(this.customDemoResponse=n.response)}}},{key:"addSetupMessageIfNeeded",value:function(n,s){var i=E0.getText(n,s);if(i){var a=this.createAndAppendNewMessageElement(i,Z.AI_ROLE);this.applyCustomStyles(a,Z.AI_ROLE,!1)}return!!i}},{key:"addIntroductoryMessages",value:function(n,s){var i=this;n!=null&&n.shadowRoot&&(this._introMessage=n.introMessage);var a=this._introMessage;s!=null&&s.isWebModel()&&(a??(a=s.getIntroMessage(a)));var o=!(n!=null&&n.history)&&!!(n!=null&&n.loadHistory||s!=null&&s.fetchHistory);a&&(Array.isArray(a)?a.forEach(function(l,u){if(u!==0){var c=i.messageElementRefs[i.messageElementRefs.length-1].innerContainer;Z.hideRoleElements(c,i.avatar,i.name)}i.addIntroductoryMessage(l,o)}):this.addIntroductoryMessage(a,o))}},{key:"addIntroductoryMessage",value:function(n,s){var i,a;return n!=null&&n.text?a=this.createAndAppendNewMessageElement(n.text,Z.AI_ROLE):n!=null&&n.html&&(a=on.add(this,n.html,Z.AI_ROLE)),a&&(this.applyCustomStyles(a,Z.AI_ROLE,!1,(i=this.messageStyles)==null?void 0:i.intro),a.outerContainer.classList.add(It.INTRO_CLASS),s&&(a.outerContainer.style.display="none")),a}},{key:"removeIntroductoryMessage",value:function(){var n=this.messageElementRefs[0];n.outerContainer.classList.contains(It.INTRO_CLASS)&&(n.outerContainer.remove(),this.messageElementRefs.shift())}},{key:"addAnyMessage",value:function(n){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return n.error?this.addNewErrorMessage("service",n.error,i):this.addNewMessage(n,s,i)}},{key:"tryAddTextMessage",value:function(n,s,i){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;!i.ignoreText&&n.text!==void 0&&i.text!==null&&(this.addNewTextMessage(n.text,n.role,s,o),!a&&this.textToSpeech&&n.role!==Z.USER_ROLE&&As.speak(n.text,this.textToSpeech))}},{key:"tryAddFileMessages",value:function(n){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n.files&&Array.isArray(n.files)&&$d.addMessages(this,n.files,n.role,s)}},{key:"tryAddHTMLMessage",value:function(n,s){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(n.html!==void 0&&n.html!==null){var a=on.add(this,n.html,n.role,s,i);i&&Yn.isElementTemporary(a)&&delete n.html}}},{key:"addNewMessage",value:function(n){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=r.createMessageContent(n),o={status:n.overwrite};return i?(this.tryAddHTMLMessage(a,o,i),this.tryAddFileMessages(a,i),this.tryAddTextMessage(a,o,n,s,i)):(this.tryAddTextMessage(a,o,n,s,i),this.tryAddFileMessages(a,i),this.tryAddHTMLMessage(a,o,i)),this.isValidMessageContent(a)&&!i&&this.updateStateOnMessage(a,n.overwrite,n.sendUpdate,s),a}},{key:"isValidMessageContent",value:function(n){return n.text||n.html||n.files&&n.files.length>0}},{key:"updateStateOnMessage",value:function(n,s){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!s){var o=Z.generateMessageBody(n,this.messageElementRefs);this.messageToElements.push([n,o])}i&&this.sendClientUpdate(n,a)}},{key:"removeMessageOnError",value:function(){var n=this.messageElementRefs[this.messageElementRefs.length-1],s=n==null?void 0:n.bubbleElement;(s!=null&&s.classList.contains(ln.MESSAGE_CLASS)&&s.textContent===""||r.isTemporaryElement(n))&&this.removeLastMessage()}},{key:"addNewErrorMessage",value:function(n,s){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a,o,l,u,c;this.removeMessageOnError();var d=this.getPermittedMessage(s)||((a=this._errorMessageOverrides)==null?void 0:a[n])||((o=this._errorMessageOverrides)==null?void 0:o.default)||"Error, please try again.",h=this.createMessageElementsOnOrientation(d,"error",i);Z.hideRoleElements(h.innerContainer,this.avatar,this.name);var f=h.bubbleElement,m=h.outerContainer;f.classList.add(Z.ERROR_MESSAGE_TEXT_CLASS),this.renderText(f,d);var p=xs.extractParticularSharedStyles(["fontSize","fontFamily"],(l=this.messageStyles)==null?void 0:l.default);xs.applyCustomStylesToElements(h,!1,p),xs.applyCustomStylesToElements(h,!1,(u=this.messageStyles)==null?void 0:u.error),i||this.appendOuterContainerElemet(m),this.textToSpeech&&As.speak(d,this.textToSpeech),(c=this._onError)==null||c.call(this,d)}},{key:"getPermittedMessage",value:function(n){if(n)for(var s=r.extractErrorMessages(n),i=0;i<s.length;i+=1){var a=s[i];if(typeof a=="string"){if(this._displayServiceErrorMessages)return a;if(this._permittedErrorPrefixes){var o=r.checkPermittedErrorPrefixes(this._permittedErrorPrefixes,a);if(o)return o}}}}},{key:"removeError",value:function(){this.isLastMessageError()&&Z.getLastMessageElement(this.elementRef).remove()}},{key:"addDefaultLoadingMessage",value:function(){var n=this.createMessageElements("",Z.AI_ROLE),s=n.bubbleElement;n.bubbleElement.classList.add(yn.DOTS_CONTAINER_CLASS);var i=document.createElement("div");return i.classList.add("loading-message-dots"),s.appendChild(i),yn.setDots(s,this.messageStyles),n}},{key:"addLoadingMessage",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,s,i,a,o,l,u,c=this.messageElementRefs[this.messageElementRefs.length-1];if(!(It.isLoadingMessage(c)||!n&&!this._isLoadingMessageAllowed)){var d=(a=(i=(s=this.messageStyles)==null?void 0:s.loading)==null?void 0:i.message)==null?void 0:a.html,h=d?on.createElements(this,d,Z.AI_ROLE,!1):this.addDefaultLoadingMessage();this.appendOuterContainerElemet(h.outerContainer),h.bubbleElement.classList.add(yn.BUBBLE_CLASS),this.applyCustomStyles(h,Z.AI_ROLE,!1,(u=(l=(o=this.messageStyles)==null?void 0:o.loading)==null?void 0:l.message)==null?void 0:u.styles),this.focusMode||pt.scrollToBottom(this.elementRef)}}},{key:"populateIntroPanel",value:function(n,s,i){(n||s)&&(this._introPanel=new b0(n,s,i),this._introPanel._elementRef&&(an.apply(this,this._introPanel._elementRef),this.elementRef.appendChild(this._introPanel._elementRef)))}},{key:"addMultipleFiles",value:function(){var t=A(v().mark(function s(i){return v().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Promise.all((i||[]).map(function(l){return new Promise(function(u){if(!l.type||l.type==="any"){var c=l.file.name||st.DEFAULT_FILE_NAME;u({name:c,type:"any",ref:l.file})}else{var d=new FileReader;d.readAsDataURL(l.file),d.onload=function(){u({src:d.result,type:l.type,ref:l.file})}}})})));case 1:case"end":return o.stop()}},s)}));function n(s){return t.apply(this,arguments)}return n}()},{key:"clearMessages",value:function(n,s){var i,a,o,l=[];this.messageElementRefs.forEach(function(c){r.isActiveElement(c.bubbleElement.classList)?l.push(c):c.outerContainer.remove()}),Array.from(this.elementRef.children).forEach(function(c){var d,h=(d=c.children[0])==null?void 0:d.children[0];h!=null&&h.classList.contains(Z.ERROR_MESSAGE_TEXT_CLASS)&&c.remove()}),this.messageElementRefs=l;var u=this.messageToElements.filter(function(c){return c[1].text&&r.isActiveElement(c[1].text.bubbleElement.classList)||c[1].html&&r.isActiveElement(c[1].html.bubbleElement.classList)});(i=this.messageToElements).splice.apply(i,[0,this.messageToElements.length].concat(us(u))),s!==!1&&((a=this._introPanel)!=null&&a._elementRef&&this._introPanel.display(),this.addIntroductoryMessages()),(o=this._onClearMessages)==null||o.call(this),delete n.sessionId}}],[{key:"getDefaultDisplayLoadingMessage",value:function(n,s){var i;return s.websocket?!!n.displayLoadingBubble:(i=W(n.displayLoadingBubble)=="object"||n.displayLoadingBubble)!==null&&i!==void 0?i:!0}},{key:"checkPermittedErrorPrefixes",value:function(n,s){for(var i=0;i<n.length;i+=1)if(s.startsWith(n[i]))return s}},{key:"extractErrorMessages",value:function(n){return Array.isArray(n)?n:n instanceof Error?[n.message]:typeof n=="string"?[n]:W(n)=="object"&&n.error?[n.error]:[]}},{key:"isActiveElement",value:function(n){return n?n.contains(yn.BUBBLE_CLASS)||n.contains(En.CLASS)||n.contains(ln.MESSAGE_CLASS):!1}}])}(It),Ir=function(){function e(){w(this,e)}return C(e,null,[{key:"adjustInputPadding",value:function(t,n){n["inside-left"].length>0&&t.classList.add("text-input-inner-left-adjustment"),n["inside-right"].length>0&&t.classList.add("text-input-inner-right-adjustment")}},{key:"adjustForOutsideButton",value:function(t,n,s){s["outside-right"].length===0&&s["outside-left"].length>0?(t[0].classList.add(e.INPUT_OUTSIDE_LEFT_SMALL_ADJUSTMENT_CLASS),n.classList.add(e.INPUT_OUTSIDE_LEFT_SMALL_ADJUSTMENT_CLASS)):s["outside-left"].length===0&&s["outside-right"].length>0&&(t[3].classList.add(e.INPUT_OUTSIDE_RIGHT_SMALL_ADJUSTMENT_CLASS),n.classList.add(e.INPUT_OUTSIDE_RIGHT_SMALL_ADJUSTMENT_CLASS))}},{key:"adjustOutsideSubmit",value:function(t,n,s){if(!(s["inside-left"].length>0||s["inside-right"].length>0)){if(s["outside-right"].length===0&&s["outside-left"].length>0)return t[0].classList.add(e.INPUT_OUTSIDE_LEFT_ADJUSTMENT_CLASS),n.classList.add(e.INPUT_OUTSIDE_LEFT_ADJUSTMENT_CLASS),s["outside-left"].map(function(i){return i.button.elementRef.classList.add("submit-button-enlarged")});if(s["outside-left"].length===0&&s["outside-right"].length>0)return t[3].classList.add(e.INPUT_OUTSIDE_RIGHT_ADJUSTMENT_CLASS),n.classList.add(e.INPUT_OUTSIDE_RIGHT_ADJUSTMENT_CLASS),s["outside-right"].map(function(i){return i.button.elementRef.classList.add("submit-button-enlarged")})}}},{key:"set",value:function(t,n,s,i){e.adjustOutsideSubmit(n,s,i)||e.adjustForOutsideButton(n,s,i),e.adjustInputPadding(t,i)}}])}();Ir.INPUT_OUTSIDE_LEFT_ADJUSTMENT_CLASS="text-input-container-left-adjustment",Ir.INPUT_OUTSIDE_RIGHT_ADJUSTMENT_CLASS="text-input-container-right-adjustment",Ir.INPUT_OUTSIDE_LEFT_SMALL_ADJUSTMENT_CLASS="text-input-container-left-small-adjustment",Ir.INPUT_OUTSIDE_RIGHT_SMALL_ADJUSTMENT_CLASS="text-input-container-right-small-adjustment";var k0=Ir,Ys=function(){function e(){w(this,e)}return C(e,null,[{key:"create",value:function(){return Array.from({length:4}).map(function(t,n){var s=document.createElement("div");return s.classList.add("input-button-container"),(n===0||n===3)&&s.classList.add("outer-button-container"),(n===1||n===2)&&s.classList.add("inner-button-container"),s})}},{key:"add",value:function(t,n){t.insertBefore(n[1],t.firstChild),t.insertBefore(n[0],t.firstChild),t.appendChild(n[2]),t.appendChild(n[3])}},{key:"getContainerIndex",value:function(t){return t==="outside-left"?0:t==="inside-left"?1:t==="inside-right"?2:3}},{key:"addButton",value:function(t,n,s){n.classList.add(s);var i=e.getContainerIndex(s);t[i].appendChild(n),i===3&&n.classList.add("outside-right")}}])}(),Yl=["camera","gifs","images","audio","mixedFiles","submit","microphone"],w0=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22" fill="none">
  <rect x="2.5" y="2.5" width="17" height="17" rx="2" stroke="#000000" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,Ns=function(){function e(){w(this,e)}return C(e,null,[{key:"addItemEvents",value:function(t,n,s,i){no.add(n,i),n.addEventListener("click",function(){s.click()}),n.addEventListener("mouseenter",function(a){t.highlightedItem=a.target}),n.addEventListener("mouseleave",function(){t.highlightedItem=void 0})}},{key:"createItemText",value:function(t,n){var s=document.createElement("div");return Object.assign(s.style,n),s.classList.add(e.TEXT_CLASS),s.textContent=t||"File",s}},{key:"createItemIcon",value:function(t,n){var s=document.createElement("div");return Object.assign(s.style,n),s.classList.add(e.ICON_CLASS),s.appendChild(t),s}},{key:"populateItem",value:function(t,n,s){var i=t.elementRef,a=t.dropupText,o=t.svg,l=t.customStyles,u=i.children[0],c=l&&Object.values(l).find(function(d){var h;return((h=d.svg)==null?void 0:h.content)===""});u.classList.contains(un.INPUT_BUTTON_INNER_TEXT_CLASS)?(c||n.appendChild(e.createItemIcon(o,s==null?void 0:s.iconContainer)),n.appendChild(e.createItemText(u.textContent,s==null?void 0:s.text))):(c||n.appendChild(e.createItemIcon(i.children[0],s==null?void 0:s.iconContainer)),n.appendChild(e.createItemText(a,s==null?void 0:s.text)))}},{key:"createItem",value:function(t,n,s){var i,a=document.createElement("div");Object.assign(a.style,(i=s==null?void 0:s.item)==null?void 0:i.default),e.populateItem(n,a,s),a.classList.add(e.MENU_ITEM_CLASS);var o=n.elementRef;if(n.isCustom)n.setDropupItem(a);else{var l=He.processStateful((s==null?void 0:s.item)||{});e.addItemEvents(t,a,o,l)}return a}}])}();Ns.MENU_ITEM_CLASS="dropup-menu-item",Ns.TEXT_CLASS="dropup-menu-item-text",Ns.ICON_CLASS="dropup-menu-item-icon";var Zt=Ns,$n=function(e){function r(t,n,s,i){var a;w(this,r);var o,l,u,c,d,h,f=((c=(u=(l=(o=t==null?void 0:t.styles)==null?void 0:o.button)==null?void 0:l.default)==null?void 0:u.text)==null?void 0:c.content)||"Custom ".concat(n),m=w0;return a=ee(this,r,[r.createButtonElement(),m,t==null?void 0:t.position,(d=t==null?void 0:t.styles)==null?void 0:d.button,f]),a._state="default",a.isCustom=!0,a._innerElements=a.createInnerElementsForStates(a.customStyles),a._menuStyles=i,a._onClick=t.onClick,a._dropupStyles=(h=t.styles)==null?void 0:h.dropup,a.setSetState(t),a.addClickListener(s),a.changeState(t.initialState,!0),a}return te(r,e),C(r,[{key:"createInnerElementsForStates",value:function(n){var s="custom-icon",i=this.createInnerElements(s,"default",n);return{default:i,active:this.genStateInnerElements(s,"active",i,n),disabled:this.genStateInnerElements(s,"disabled",i,n)}}},{key:"setSetState",value:function(n){var s=this;n.setState=function(i){i==="default"&&s.changeToDefault(),i==="active"&&s.changeToActive(),i==="disabled"&&s.changeToDisabled()}}},{key:"addClickListener",value:function(n){var s=this;this.elementRef.addEventListener("click",function(){var i,a=(i=s._onClick)==null?void 0:i.call(s,s._state);n==null||n(),(a==="default"||a==="active"||a==="disabled")&&s.changeState(a)})}},{key:"changeState",value:function(n,s){n==="disabled"?this.changeToDisabled(s):n==="active"?this.changeToActive(s):this.changeToDefault(s)}},{key:"applyDropupContentStyles",value:function(n){var s=Array.from(this.elementRef.children);if(n!=null&&n.text){var i=s.find(function(o){return o.classList.contains(Zt.TEXT_CLASS)});i&&Object.assign(i.style,n.text)}if(n!=null&&n.iconContainer){var a=s.find(function(o){return o.classList.contains(Zt.ICON_CLASS)});a&&Object.assign(a.style,n.iconContainer)}}},{key:"resetDropupItem",value:function(n){var s,i,a;this.elementRef=an.replaceElementWithNewClone(this.elementRef,this._originalElementRef),this.elementRef.innerHTML="",((s=n==null?void 0:n.svg)==null?void 0:s.content)===""||this.elementRef.appendChild(Zt.createItemIcon(this.svg,(i=this._menuStyles)==null?void 0:i.iconContainer)),this.elementRef.appendChild(Zt.createItemText(this.dropupText,(a=this._menuStyles)==null?void 0:a.text))}},{key:"assignDropupItemStyle",value:function(n,s){var i;this.elementRef.parentElement&&this._originalElementRef&&this.resetDropupItem(s),this.applyDropupContentStyles(n),Object.assign(this.elementRef.style,(i=n==null?void 0:n.item)==null?void 0:i.default);var a=He.processStateful((n==null?void 0:n.item)||{});no.add(this.elementRef,a),this.addClickListener()}},{key:"changeToDefault",value:function(n){var s,i,a,o,l,u;!n&&this._state==="default"||(this.elementRef.classList.contains(Zt.MENU_ITEM_CLASS)?this.assignDropupItemStyle((s=this._dropupStyles)==null?void 0:s.default,(i=this.customStyles)==null?void 0:i.default):(this.changeElementsByState(this._innerElements.default),(a=this.customStyles)!=null&&a.active&&tt.unsetAllCSS(this.elementRef,(o=this.customStyles)==null?void 0:o.active),(l=this.customStyles)!=null&&l.disabled&&tt.unsetAllCSS(this.elementRef,(u=this.customStyles)==null?void 0:u.disabled),this.reapplyStateStyle("default",["active","disabled"])),this.elementRef.classList.remove(r.DISABLED_CONTAINER_CLASS,r.ACTIVE_CONTAINER_CLASS),this.elementRef.classList.add(r.DEFAULT_CONTAINER_CLASS),Fe.removeAriaDisabled(this.elementRef),this._state="default")}},{key:"changeToActive",value:function(n){var s,i;!n&&this._state==="active"||(this.elementRef.classList.contains(Zt.MENU_ITEM_CLASS)?this.assignDropupItemStyle((s=this._dropupStyles)==null?void 0:s.active,(i=this.customStyles)==null?void 0:i.active):(this.changeElementsByState(this._innerElements.active),this.reapplyStateStyle("active",["disabled","default"])),this.elementRef.classList.remove(r.DISABLED_CONTAINER_CLASS,r.DEFAULT_CONTAINER_CLASS),this.elementRef.classList.add(r.ACTIVE_CONTAINER_CLASS),Fe.removeAriaDisabled(this.elementRef),this._state="active")}},{key:"changeToDisabled",value:function(n){var s,i,a,o,l,u;!n&&this._state==="disabled"||(this.elementRef.classList.contains(Zt.MENU_ITEM_CLASS)?this.assignDropupItemStyle((s=this._dropupStyles)==null?void 0:s.disabled,(i=this.customStyles)==null?void 0:i.disabled):(this.changeElementsByState(this._innerElements.disabled),(a=this.customStyles)!=null&&a.active&&tt.unsetAllCSS(this.elementRef,(o=this.customStyles)==null?void 0:o.active),(l=this.customStyles)!=null&&l.default&&tt.unsetAllCSS(this.elementRef,(u=this.customStyles)==null?void 0:u.default),this.reapplyStateStyle("disabled",["default","active"])),this.elementRef.classList.remove(r.ACTIVE_CONTAINER_CLASS,r.DEFAULT_CONTAINER_CLASS),this.elementRef.classList.add(r.DISABLED_CONTAINER_CLASS),Fe.addAriaDisabled(this.elementRef),this._state="disabled")}},{key:"setDropupItem",value:function(n){this.elementRef=n,this._originalElementRef=n.cloneNode(!0),this.changeState(this._state,!0)}},{key:"genStateInnerElements",value:function(n,s,i,a){var o,l,u,c,d=this.createInnerElements(n,s,a),h=(l=(o=a==null?void 0:a[s])==null?void 0:o.svg)==null?void 0:l.content,f=(c=(u=a==null?void 0:a[s])==null?void 0:u.text)==null?void 0:c.content;if(h===void 0||f===void 0){var m=Vr.parseSVGTextElements(i),p=m.svg,y=m.text,g=Vr.parseSVGTextElements(d),S=g.svg,k=g.text,T=[];r.addToInnerElements(T,h,p,S),r.addToInnerElements(T,f,y,k),d=T}return d}}],[{key:"createButtonElement",value:function(){var n=document.createElement("div");return n.classList.add("input-button",r.BUTTON_CLASS),n}},{key:"addToInnerElements",value:function(n,s,i,a){s===void 0&&i?n.push(i.cloneNode(!0)):a&&n.push(a)}},{key:"add",value:function(n,s){var i=n.customButtons,a=n.focusInput,o=n.dropupStyles;i==null||i.forEach(function(l,u){var c={button:new r(l,u+1,a,o==null?void 0:o.menu)};s["".concat(r.INDICATOR_PREFIX).concat(u+1)]=c})}}])}(On);$n.INDICATOR_PREFIX="custom",$n.BUTTON_CLASS="custom-button",$n.DISABLED_CONTAINER_CLASS="custom-button-container-disabled",$n.DEFAULT_CONTAINER_CLASS="custom-button-container-default",$n.ACTIVE_CONTAINER_CLASS="custom-button-container-active";var qr=$n,C0=`<?xml version="1.0" encoding="utf-8"?>
<svg viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg">
    <path d="M16 0c-8.836 0-16 7.163-16 16s7.163 16 16 16c8.837 0 16-7.163 16-16s-7.163-16-16-16zM16 30.032c-7.72 0-14-6.312-14-14.032s6.28-14 14-14 14 6.28 14 14-6.28 14.032-14 14.032zM23 15h-6v-6c0-0.552-0.448-1-1-1s-1 0.448-1 1v6h-6c-0.552 0-1 0.448-1 1s0.448 1 1 1h6v6c0 0.552 0.448 1 1 1s1-0.448 1-1v-6h6c0.552 0 1-0.448 1-1s-0.448-1-1-1z"></path>
</svg>`,Xl=function(){function e(){w(this,e)}return C(e,null,[{key:"focusItemWhenOnEdge",value:function(t,n){var s=n?t.children[0]:t.children[t.children.length-1];e.focusSiblingItem(s,t,n,!0)}},{key:"focusSiblingItem",value:function(t,n,s){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,a=i?t:t[s?"nextSibling":"previousSibling"];a?(t.dispatchEvent(new MouseEvent("mouseleave")),a.dispatchEvent(new MouseEvent("mouseenter"))):(t.dispatchEvent(new MouseEvent("mouseleave")),e.focusItemWhenOnEdge(n,s))}}])}(),T0=function(){function e(r,t){var n=this;w(this,e);var s;this._isOpen=!0,this._styles=t,this.elementRef=e.createElement((s=this._styles)==null?void 0:s.container),this.close(),setTimeout(function(){return n.addWindowEvents(r)})}return C(e,[{key:"open",value:function(){this.elementRef.style.display="block",this._isOpen=!0}},{key:"close",value:function(){this._isOpen&&(this.elementRef.style.display="none",this._isOpen=!1)}},{key:"toggle",value:function(){this._isOpen?this.close():this.open()}},{key:"addItem",value:function(t){var n=Zt.createItem(this,t,this._styles);this.elementRef.appendChild(n)}},{key:"addWindowEvents",value:function(t){this.clickEvent=this.windowClick.bind(this,t),window.addEventListener("click",this.clickEvent),this.keyDownEvent=this.windowKeyDown.bind(this,t),window.addEventListener("keydown",this.keyDownEvent)}},{key:"windowClick",value:function(t,n){var s;!t.isConnected&&this.clickEvent?window.removeEventListener("click",this.clickEvent):t.parentElement!==((s=n.target.shadowRoot)==null?void 0:s.children[0])&&this.close()}},{key:"windowKeyDown",value:function(t,n){var s,i,a;!t.isConnected&&this.keyDownEvent?window.removeEventListener("keydown",this.keyDownEvent):this._isOpen&&(n.key===Ue.ESCAPE?(this.close(),(s=this.highlightedItem)==null||s.dispatchEvent(new MouseEvent("mouseleave"))):n.key===Ue.ENTER?((i=this.highlightedItem)==null||i.click(),(a=this.highlightedItem)==null||a.dispatchEvent(new MouseEvent("mouseleave"))):n.key===Ue.ARROW_DOWN?Xl.focusSiblingItem(this.highlightedItem||this.elementRef.children[this.elementRef.children.length-1],this.elementRef,!0):n.key===Ue.ARROW_UP&&Xl.focusSiblingItem(this.highlightedItem||this.elementRef.children[0],this.elementRef,!1))}}],[{key:"createElement",value:function(t){var n=document.createElement("div");return n.id="dropup-menu",Object.assign(n.style,t),n}}])}(),Vd=function(e){function r(t,n){var s;w(this,r);var i;s=ee(this,r,[r.createButtonElement(),C0,void 0,{styles:(i=n==null?void 0:n.button)==null?void 0:i.styles}]);var a=s.createInnerElementsForStates(s.customStyles);return s._menu=new T0(t,n==null?void 0:n.menu),s.addClickEvent(),s.buttonContainer=r.createButtonContainer(),s.changeElementsByState(a.styles),s.buttonContainer.appendChild(s.elementRef),s.elementRef.classList.add(r.BUTTON_ICON_CLASS),s.buttonContainer.appendChild(s._menu.elementRef),s.reapplyStateStyle("styles"),s.addContainerEvents(t),s}return te(r,e),C(r,[{key:"createInnerElementsForStates",value:function(n){return{styles:this.createInnerElements("dropup-icon","styles",n)}}},{key:"addClickEvent",value:function(){this.elementRef.onclick=this._menu.toggle.bind(this._menu)}},{key:"addItem",value:function(n){this._menu.addItem(n)}},{key:"addContainerEvents",value:function(n){var s=this;n.addEventListener("click",function(i){var a=i.target.classList;!a.contains(r.BUTTON_ICON_CLASS)&&!a.contains(qr.DISABLED_CONTAINER_CLASS)&&s._menu.close()})}}],[{key:"createButtonElement",value:function(){var n=document.createElement("div");return n.classList.add("input-button"),n}},{key:"createButtonContainer",value:function(){var n=document.createElement("div");return n.id="dropup-container",n}},{key:"getPosition",value:function(n,s){var i,a;return(i=s==null?void 0:s.button)!=null&&i.position?(a=s==null?void 0:s.button)==null?void 0:a.position:n["outside-left"].length>0&&n["outside-right"].length===0?"outside-right":"outside-left"}}])}(On);Vd.BUTTON_ICON_CLASS="dropup-button";var Zl=Vd,A0=function(){function e(){w(this,e)}return C(e,null,[{key:"addToDropup",value:function(t,n,s,i){var a=new Zl(s,i);Yl.forEach(function(l){var u=n["dropup-menu"].findIndex(function(d){return d.buttonType===l}),c=n["dropup-menu"][u];c&&(a.addItem(c.button),n["dropup-menu"].splice(u,1))}),n["dropup-menu"].forEach(function(l){var u=l.button;return a.addItem(u)});var o=Zl.getPosition(n,i);Ys.addButton(t,a.buttonContainer,o),n[o].push({})}},{key:"addToSideContainer",value:function(t,n){["inside-left","inside-right","outside-left","outside-right"].forEach(function(s){var i=s;n[i].forEach(function(a){Ys.addButton(t,a.button.elementRef,i)})})}},{key:"setPosition",value:function(t,n,s){var i=ve(ve({},t[n]),{},{buttonType:n});s.push(i),delete t[n]}},{key:"createPositionsToButtonsObj",value:function(){return{"dropup-menu":[],"outside-left":[],"inside-left":[],"inside-right":[],"outside-right":[]}}},{key:"generatePositionToButtons",value:function(t){var n=e.createPositionsToButtonsObj();Object.keys(t).forEach(function(i){var a,o=(a=t[i])==null?void 0:a.button.position;o&&e.setPosition(t,i,n[o])}),n["inside-right"].length===0&&t.submit&&e.setPosition(t,"submit",n["inside-right"]),n["outside-right"].length===0&&(t.submit?e.setPosition(t,"submit",n["outside-right"]):t.microphone?e.setPosition(t,"microphone",n["outside-right"]):t.camera?e.setPosition(t,"camera",n["outside-right"]):t["".concat(qr.INDICATOR_PREFIX,"1")]&&e.setPosition(t,"".concat(qr.INDICATOR_PREFIX,"1"),n["outside-right"])),t.submit&&e.setPosition(t,"submit",n["outside-left"].length===0?n["outside-left"]:n["inside-right"]),t.microphone&&e.setPosition(t,"microphone",n["outside-left"].length===0?n["outside-left"]:n["inside-right"]);var s=Object.keys(t);return s.length>1||n["dropup-menu"].length>0?(Yl.forEach(function(i){t[i]&&n["dropup-menu"].push(ve(ve({},t[i]),{},{buttonType:i}))}),s.forEach(function(i){var a=i;a.startsWith(qr.INDICATOR_PREFIX)&&t[a]&&n["dropup-menu"].push(ve(ve({},t[a]),{},{customType:a}))})):s.length===1&&e.setPosition(t,s[0],n["outside-right"].length===0?n["outside-right"]:n["outside-left"]),n}},{key:"addButtons",value:function(t,n,s,i){var a=e.generatePositionToButtons(n);return e.addToSideContainer(t,a),a["dropup-menu"].length>0&&e.addToDropup(t,a,s,i),a}}])}(),x0=`<?xml version="1.0" encoding="utf-8"?>
<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M20 10.9696L11.9628 18.5497C10.9782 19.4783 9.64274 20 8.25028 20C6.85782 20 5.52239 19.4783 4.53777 18.5497C3.55315 17.6211 3 16.3616 3 15.0483C3 13.7351 3.55315 12.4756 4.53777 11.547L12.575 3.96687C13.2314 3.34779 14.1217 3 15.05 3C15.9783 3 16.8686 3.34779 17.525 3.96687C18.1814 4.58595 18.5502 5.4256 18.5502 6.30111C18.5502 7.17662 18.1814 8.01628 17.525 8.63535L9.47904 16.2154C9.15083 16.525 8.70569 16.6989 8.24154 16.6989C7.77738 16.6989 7.33224 16.525 7.00403 16.2154C6.67583 15.9059 6.49144 15.4861 6.49144 15.0483C6.49144 14.6106 6.67583 14.1907 7.00403 13.8812L14.429 6.88674" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>`,R0=`<?xml version="1.0" encoding="utf-8"?>
<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <path d="M20,15.2928932 L20,5.5 C20,4.67157288 19.3284271,4 18.5,4 L5.5,4 C4.67157288,4 4,4.67157288 4,5.5 L4,12.2928932 L7.14644661,9.14644661 C7.34170876,8.95118446 7.65829124,8.95118446 7.85355339,9.14644661 L13.5,14.7928932 L16.1464466,12.1464466 C16.3417088,11.9511845 16.6582912,11.9511845 16.8535534,12.1464466 L20,15.2928932 Z M20,16.7071068 L16.5,13.2071068 L13.8535534,15.8535534 C13.6582912,16.0488155 13.3417088,16.0488155 13.1464466,15.8535534 L7.5,10.2071068 L4,13.7071068 L4,18.5 C4,19.3284271 4.67157288,20 5.5,20 L18.5,20 C19.3284271,20 20,19.3284271 20,18.5 L20,16.7071068 Z M3,5.5 C3,4.11928813 4.11928813,3 5.5,3 L18.5,3 C19.8807119,3 21,4.11928813 21,5.5 L21,18.5 C21,19.8807119 19.8807119,21 18.5,21 L5.5,21 C4.11928813,21 3,19.8807119 3,18.5 L3,5.5 Z M15,6 L17,6 C17.5522847,6 18,6.44771525 18,7 L18,9 C18,9.55228475 17.5522847,10 17,10 L15,10 C14.4477153,10 14,9.55228475 14,9 L14,7 C14,6.44771525 14.4477153,6 15,6 Z M15,7 L15,9 L17,9 L17,7 L15,7 Z"/>
</svg>
`,M0=`<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="-49.49 -49.49 593.87 593.87" stroke-width="3.95908" transform="rotate(0)">
  <g stroke-width="0"></g>
  <g stroke-linecap="round" stroke-linejoin="round" stroke-width="0.98977"></g>
  <g>
    <g>
      <g>
        <path d="M163.205,76.413v293.301c-3.434-3.058-7.241-5.867-11.486-8.339c-21.38-12.452-49.663-15.298-77.567-7.846 c-49.038,13.096-80.904,54.519-71.038,92.337c4.019,15.404,14.188,28.221,29.404,37.087c13.553,7.894,29.87,11.933,47.115,11.933 c9.962,0,20.231-1.356,30.447-4.087c42.74-11.406,72.411-44.344,72.807-77.654h0.011v-0.162c0.002-0.166,0-0.331,0-0.496V187.072 l290.971-67.3v178.082c-3.433-3.055-7.238-5.863-11.481-8.334c-21.385-12.452-49.654-15.308-77.567-7.846 c-49.038,13.087-80.904,54.519-71.038,92.356c4.019,15.385,14.183,28.212,29.404,37.067c13.548,7.894,29.875,11.933,47.115,11.933 c9.962,0,20.231-1.356,30.452-4.087c42.74-11.413,72.411-44.346,72.804-77.654h0.004v-0.065c0.003-0.236,0.001-0.469,0-0.704V0 L163.205,76.413z M104.999,471.779c-22.543,6.038-45.942,3.846-62.572-5.846c-10.587-6.163-17.591-14.817-20.255-25.038 c-7.144-27.375,18.452-58.029,57.062-68.346c8.409-2.25,16.938-3.346,25.188-3.346c13.87,0,26.962,3.115,37.389,9.192 c10.587,6.163,17.591,14.817,20.255,25.029c0.809,3.102,1.142,6.248,1.139,9.4v0.321h0.014 C162.99,437.714,139.082,462.678,104.999,471.779z M182.898,166.853V92.067l290.971-67.298v74.784L182.898,166.853z M415.677,399.923c-22.558,6.038-45.942,3.837-62.587-5.846c-10.587-6.163-17.587-14.817-20.25-25.019 c-7.144-27.385,18.452-58.058,57.058-68.365c8.414-2.25,16.942-3.346,25.192-3.346c13.875,0,26.962,3.115,37.385,9.192 c10.596,6.163,17.596,14.817,20.26,25.029v0.01c0.796,3.05,1.124,6.144,1.135,9.244v0.468h0.02 C473.668,365.851,449.763,390.814,415.677,399.923z">
        </path>
      </g>
    </g>
  </g>
</svg>`,I0=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 5.9266752 5.6408391" height="21.31971" width="22.4">
  <g>
    <path d="m 5.2564627,1.548212 c -3.1136005,-0.4796804 -1.5568006,-0.2398402 0,0 z M 2.0001198,2.0922063 c 0.1556781,0 0.2657489,0.020893 0.3917849,0.080366 0.081154,0.038347 0.1153492,0.134065 0.076377,0.2138602 -0.038973,0.07979 -0.1363527,0.1134129 -0.2175069,0.075091 -0.078199,-0.036919 -0.1407455,-0.048792 -0.250655,-0.048792 -0.2260486,0 -0.3921482,0.2042182 -0.3921482,0.4801409 0,0.2761822 0.1663188,0.4810688 0.3921482,0.4810688 0.1117901,0 0.2064255,-0.046133 0.255659,-0.1284198 l 0.00162,-0.00389 V 3.0534032 l -0.098011,1.75e-4 c -0.081844,0 -0.1495979,-0.059305 -0.1612403,-0.1365887 l -0.00175,-0.023683 c 0,-0.08047 0.060311,-0.1470874 0.1389194,-0.1585331 l 0.024085,-0.00195 h 0.2612303 c 0.081842,0 0.149598,0.059305 0.1612404,0.1365891 l 0.00175,0.023683 -3.398e-4,0.3968809 v 0 l -0.00168,0.014211 v 0 l -0.00553,0.023034 v 0 l -0.00532,0.014145 c -0.098178,0.22826 -0.3236506,0.3528713 -0.5706303,0.3528713 -0.4240855,0 -0.7181621,-0.3622714 -0.7181621,-0.8016063 0,-0.4391857 0.2940275,-0.8006848 0.7181621,-0.8006848 z m 1.2034759,0.031275 c 0.081843,0 0.1495977,0.059305 0.1612403,0.1365891 l 0.00175,0.023683 v 1.2211775 c 0,0.088516 -0.07298,0.1602721 -0.1630073,0.1602721 -0.081841,0 -0.1495972,-0.059305 -0.1612397,-0.1365892 L 3.040589,3.5049308 V 2.2837527 c 0,-0.088516 0.07298,-0.1602721 0.1630067,-0.1602714 z m 0.7813442,0 0.5209469,0.00195 c 0.090025,3.048e-4 0.1627543,0.072306 0.1624458,0.1608234 -2.809e-4,0.08047 -0.06083,0.1468798 -0.1394772,0.158066 l -0.024092,0.00195 -0.3575326,-0.0013 v 0.4497782 l 0.2928918,2.27e-4 c 0.081842,0 0.1495979,0.059305 0.1612403,0.136589 l 0.00175,0.023683 c 0,0.080469 -0.06031,0.1470871 -0.1389193,0.1585393 l -0.024092,0.00195 -0.2928919,-2.336e-4 1.563e-4,0.2860316 c 0,0.080471 -0.06031,0.1470873 -0.1389193,0.1585395 l -0.024085,0.00195 c -0.081843,0 -0.1495979,-0.059305 -0.1612403,-0.1365826 l -0.00175,-0.023691 V 2.2841354 c 2.798e-4,-0.08047 0.060829,-0.1468797 0.1394758,-0.1580594 z"/>
    <path d="m 5.0894191,1.0943261 c 0,-0.21918999 -0.177687,-0.39686999 -0.396876,-0.39686999 h -3.43959 c -0.2191879,0 -0.391262,0.1777519 -0.3968759,0.39686999 l -0.027082,3.4379266 c 0.040152,0.2939927 0.4235456,0.409415 0.4235456,0.409415 l 3.4785583,-0.00851 c 0,0 0.3008506,-0.1402998 0.3236271,-0.4201576 0.042911,-0.5272495 0.034693,-1.6106146 0.034693,-3.4186761 z m -4.49792494,0 c 0,-0.36530999 0.29614504,-0.66145999 0.66145894,-0.66145999 h 3.43959 c 0.365314,0 0.66146,0.29615 0.66146,0.66145999 v 3.43959 c 0,0.36532 -0.296146,0.66146 -0.66146,0.66146 h -3.43959 c -0.3653139,0 -0.66145894,-0.29614 -0.66145894,-0.66146 z"/>
  </g>
</svg>
`,L0={images:{id:"upload-images-icon",svgString:R0,dropupText:"Image"},gifs:{id:"upload-gifs-icon",svgString:I0,dropupText:"GIF"},audio:{id:"upload-audio-icon",svgString:M0,dropupText:"Audio"},mixedFiles:{id:"upload-mixed-files-icon",svgString:x0,dropupText:"File"}},qd=function(e){function r(t){var n;return w(this,r),(t==null?void 0:t.position)==="dropup-menu"&&(t.position="outside-right"),n=ee(this,r,[r.createMicrophoneElement(),Nd,t==null?void 0:t.position,t]),n.isActive=!1,n._innerElements=n.createInnerElementsForStates(n.customStyles),n.changeToDefault(),n}return te(r,e),C(r,[{key:"createInnerElementsForStates",value:function(n){var s="microphone-icon";return{default:this.createInnerElements(s,"default",n),active:this.createInnerElements(s,"active",n),unsupported:this.createInnerElements(s,"unsupported",n),commandMode:this.createInnerElements(s,"commandMode",n)}}},{key:"changeToActive",value:function(){this.changeElementsByState(this._innerElements.active),this.toggleIconFilter("active"),this.reapplyStateStyle("active",["default","commandMode"]),this.isActive=!0}},{key:"changeToDefault",value:function(){this.changeElementsByState(this._innerElements.default),this.toggleIconFilter("default"),this.reapplyStateStyle("default",["active","commandMode"]),this.isActive=!1}},{key:"changeToCommandMode",value:function(){this.changeElementsByState(this._innerElements.commandMode),this.toggleIconFilter("command"),this.reapplyStateStyle("commandMode",["active"])}},{key:"changeToUnsupported",value:function(){this.changeElementsByState(this._innerElements.unsupported),this.elementRef.classList.add("unsupported-microphone"),this.reapplyStateStyle("unsupported",["active"])}},{key:"toggleIconFilter",value:function(n){var s=this.elementRef.children[0];if(s.tagName.toLocaleLowerCase()==="svg")switch(n){case"default":s.classList.remove("active-microphone-icon","command-microphone-icon"),s.classList.add("default-microphone-icon");break;case"active":s.classList.remove("default-microphone-icon","command-microphone-icon"),s.classList.add("active-microphone-icon");break;case"command":s.classList.remove("active-microphone-icon","default-microphone-icon"),s.classList.add("command-microphone-icon");break}}}],[{key:"createMicrophoneElement",value:function(){var n=document.createElement("div");return n.id="microphone-button",n.classList.add("input-button"),n}}])}(On);function O0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _s={},or={},lr={},ur={},cr={},Ql;function mi(){if(Ql)return cr;Ql=1,Object.defineProperty(cr,"__esModule",{value:!0}),cr.Text=void 0;var e=function(){function r(){w(this,r)}return C(r,null,[{key:"capitalize",value:function(n){return n.replace(r.FIRST_CHAR_REGEX,function(s){return s.toUpperCase()})}},{key:"lineBreak",value:function(n){return n.replace(r.DOUBLE_LINE,"<p></p>").replace(r.ONE_LINE,"<br>")}},{key:"isCharDefined",value:function(n){return n!==void 0&&n!==""&&n!==" "&&n!==`
`&&n!==""}},{key:"breakupIntoWordsArr",value:function(n){return n.split(/(\W+)/)}}])}();return cr.Text=e,e.FIRST_CHAR_REGEX=/\S/,e.DOUBLE_LINE=/\n\n/g,e.ONE_LINE=/\n/g,cr}var eu;function zd(){if(eu)return ur;eu=1,Object.defineProperty(ur,"__esModule",{value:!0}),ur.Translate=void 0;var e=mi(),r=function(){function t(){w(this,t)}return C(t,null,[{key:"translate",value:function(s,i){for(var a=e.Text.breakupIntoWordsArr(s),o=0;o<a.length;o+=1)i[a[o]]&&(a[o]=i[a[o]]);return a.join("")}}])}();return ur.Translate=r,ur}var tu;function P0(){if(tu)return lr;tu=1,Object.defineProperty(lr,"__esModule",{value:!0}),lr.WebSpeechTranscript=void 0;var e=zd(),r=function(){function t(){w(this,t)}return C(t,null,[{key:"extract",value:function(s,i,a){for(var o="",l=s.resultIndex;l<s.results.length;++l){var u=s.results[l][0].transcript;a&&(u=e.Translate.translate(u,a)),s.results[l].isFinal?i+=u:o+=u}return{interimTranscript:o,finalTranscript:i,newText:o||i}}},{key:"extractSafari",value:function(s,i,a){for(var o="",l="",u=s.resultIndex;u<s.results.length;++u){var c=s.results[u][0].transcript;a&&(c=e.Translate.translate(c,a)),o+=c}return{interimTranscript:l,finalTranscript:o,newText:l||o}}}])}();return lr.WebSpeechTranscript=r,lr}var dr={},nu;function ho(){if(nu)return dr;nu=1,Object.defineProperty(dr,"__esModule",{value:!0}),dr.Browser=void 0;var e=C(function r(){w(this,r)});return dr.Browser=e,e.IS_SAFARI=function(){return e._IS_SAFARI===void 0&&(e._IS_SAFARI=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),e._IS_SAFARI},dr}var fr={},hr={},ru;function N0(){if(ru)return hr;ru=1,Object.defineProperty(hr,"__esModule",{value:!0}),hr.EventListeners=void 0;var e=function(){function r(){w(this,r)}return C(r,null,[{key:"getElementIfFocusedOnAvailable",value:function(n,s){return Array.isArray(n)?n.find(function(i){return s===i}):s===n?n:void 0}},{key:"keyDownWindow",value:function(n){var s=this;n.element&&r.getElementIfFocusedOnAvailable(n.element,document.activeElement)&&(r.KEY_DOWN_TIMEOUT!==null&&clearTimeout(r.KEY_DOWN_TIMEOUT),r.KEY_DOWN_TIMEOUT=setTimeout(function(){r.KEY_DOWN_TIMEOUT=null,s.resetRecording(n)},500))}},{key:"mouseDownWindow",value:function(n,s){this.mouseDownElement=r.getElementIfFocusedOnAvailable(n,s.target)}},{key:"mouseUpWindow",value:function(n){this.mouseDownElement&&this.resetRecording(n),this.mouseDownElement=void 0}},{key:"add",value:function(n,s){var i=(s==null?void 0:s.insertInCursorLocation)===void 0||(s==null?void 0:s.insertInCursorLocation);s!=null&&s.element&&i&&(n.mouseDownEvent=r.mouseDownWindow.bind(n,s.element),document.addEventListener("mousedown",n.mouseDownEvent),n.mouseUpEvent=r.mouseUpWindow.bind(n,s),document.addEventListener("mouseup",n.mouseUpEvent),n.keyDownEvent=r.keyDownWindow.bind(n,s),document.addEventListener("keydown",n.keyDownEvent))}},{key:"remove",value:function(n){document.removeEventListener("mousedown",n.mouseDownEvent),document.removeEventListener("mouseup",n.mouseUpEvent),document.removeEventListener("keydown",n.keyDownEvent)}}])}();return hr.EventListeners=e,e.KEY_DOWN_TIMEOUT=null,hr}var pr={},su;function D0(){if(su)return pr;su=1,Object.defineProperty(pr,"__esModule",{value:!0}),pr.PreResultUtils=void 0;var e=function(){function r(){w(this,r)}return C(r,null,[{key:"process",value:function(n,s,i,a,o){var l=a==null?void 0:a(s,i);return l?(setTimeout(function(){l.restart?n.resetRecording(o):l.stop&&n.stop()}),(l.stop||l.restart)&&l.removeNewText):!1}}])}();return pr.PreResultUtils=e,pr}var mr={},vr={},iu;function Gd(){if(iu)return vr;iu=1,Object.defineProperty(vr,"__esModule",{value:!0}),vr.AutoScroll=void 0;var e=function(){function r(){w(this,r)}return C(r,null,[{key:"changeStateIfNeeded",value:function(n,s){s&&!n.isCursorAtEnd&&(n.endPadding="",n.scrollingSpan.innerHTML="&nbsp;")}},{key:"scrollGeneric",value:function(n,s){n.isCursorAtEnd?s.scrollTop=s.scrollHeight:n.scrollingSpan.scrollIntoView({block:"nearest"})}},{key:"scrollSafariPrimitiveToEnd",value:function(n){n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight}},{key:"isElementOverflown",value:function(n){return n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth}},{key:"isRequired",value:function(n,s){return n&&r.isElementOverflown(s)}}])}();return vr.AutoScroll=e,vr}var gr={},au;function vi(){if(au)return gr;au=1,Object.defineProperty(gr,"__esModule",{value:!0}),gr.Elements=void 0;var e=function(){function r(){w(this,r)}return C(r,null,[{key:"isPrimitiveElement",value:function(n){return n.tagName==="INPUT"||n.tagName==="TEXTAREA"}},{key:"createInterimSpan",value:function(){var n=document.createElement("span");return n.style.color="grey",n.style.pointerEvents="none",n}},{key:"createGenericSpan",value:function(){var n=document.createElement("span");return n.style.pointerEvents="none",n}},{key:"appendSpans",value:function(n,s){if(n.spansPopulated=!0,n.insertInCursorLocation&&document.activeElement===s){var i=window.getSelection();if(i!=null&&i.focusNode){var a=i.getRangeAt(0);a.insertNode(n.scrollingSpan),a.insertNode(n.interimSpan),a.insertNode(n.finalSpan),a.collapse(!1),i.removeAllRanges(),i.addRange(a);return}}s.appendChild(n.finalSpan),s.appendChild(n.interimSpan),s.appendChild(n.scrollingSpan)}},{key:"applyCustomColors",value:function(n,s){s.interim&&(n.interimSpan.style.color=s.interim),s.final&&(n.finalSpan.style.color=s.final)}},{key:"isInsideShadowDOM",value:function(n){return n.getRootNode()instanceof ShadowRoot}}])}();return gr.Elements=e,gr}var yr={},ou;function gi(){if(ou)return yr;ou=1,Object.defineProperty(yr,"__esModule",{value:!0}),yr.Cursor=void 0;var e=function(){function r(){w(this,r)}return C(r,null,[{key:"setOffsetForGeneric",value:function(n,s){for(var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=0,o=0;o<n.childNodes.length;o+=1){var l=n.childNodes[o];if(l.childNodes.length>0){var u=r.setOffsetForGeneric(l,s,i);if(u===-1)return-1;i+=u}else if(l.textContent!==null){if(i+l.textContent.length>s){var c=document.createRange();c.setStart(l,s-i),c.collapse(!0);var d=window.getSelection();return d==null||d.removeAllRanges(),d==null||d.addRange(c),n.focus(),-1}i+=l.textContent.length,a+=l.textContent.length}}return a}},{key:"focusEndOfGeneric",value:function(n){var s=document.createRange();s.selectNodeContents(n),s.collapse(!1);var i=window.getSelection();i&&(i.removeAllRanges(),i.addRange(s))}},{key:"setOffsetForSafariGeneric",value:function(n,s){var i=window.getSelection();if(i){var a=r.getGenericElementCursorOffset(n,i,!0);r.setOffsetForGeneric(n,a+s)}}},{key:"setOffsetForPrimitive",value:function(n,s,i){i&&n.blur(),n.setSelectionRange(s,s),n.focus()}},{key:"getGenericElementCursorOffset",value:function(n,s,i){var a=0;if(s.rangeCount>0){var o=s.getRangeAt(0),l=o.cloneRange();l.selectNodeContents(n),i?l.setEnd(o.startContainer,o.startOffset):l.setEnd(o.endContainer,o.endOffset),a=l.toString().length}return a}}])}();return yr.Cursor=e,yr}var lu;function Kd(){if(lu)return mr;lu=1,Object.defineProperty(mr,"__esModule",{value:!0}),mr.CommandUtils=void 0;var e=Gd(),r=vi(),t=ho(),n=gi(),s=mi(),i=function(){function a(){w(this,a)}return C(a,null,[{key:"processCommand",value:function(l,u){return(!u||!u.caseSensitive)&&(l=l.toLowerCase()),(u==null?void 0:u.substrings)===!1?s.Text.breakupIntoWordsArr(l):l}},{key:"process",value:function(l){var u;return((u=l.settings)===null||u===void 0?void 0:u.caseSensitive)===!0?l:Object.keys(l).reduce(function(c,d){var h=l[d];return c[d]=typeof h=="string"?a.processCommand(h,l.settings):h,c},{})}},{key:"toggleCommandModeOn",value:function(l){var u;l.isWaitingForCommand=!0,(u=l.onCommandModeTrigger)===null||u===void 0||u.call(l,!0)}},{key:"toggleCommandModeOff",value:function(l){var u;l.isWaitingForCommand&&((u=l.onCommandModeTrigger)===null||u===void 0||u.call(l,!1),l.isWaitingForCommand=!1)}},{key:"setText",value:function(l,u,c,d){a.toggleCommandModeOff(l),r.Elements.isPrimitiveElement(d)?(d.value=c,l.isTargetInShadow||n.Cursor.setOffsetForPrimitive(d,c.length,!0),t.Browser.IS_SAFARI()&&l.autoScroll&&e.AutoScroll.scrollSafariPrimitiveToEnd(d)):(d.textContent=c,l.isTargetInShadow||n.Cursor.focusEndOfGeneric(d),setTimeout(function(){return e.AutoScroll.scrollGeneric(l,d)})),l.resetRecording(u)}},{key:"checkIfMatchesSubstring",value:function(l,u){return u.includes(l)}},{key:"checkIfMatchesWord",value:function(l,u,c){for(var d=l,h=c.length-1;h>=0;h-=1){for(var f=h,m=d.length-1;c[f]===d[m]&&m>=0;)f-=1,m-=1;if(m<0)return!0}return!1}},{key:"execCommand",value:function(l,u,c,d,h){var f,m,p,y=l.commands;if(!(!y||!d||!c)){var g=((f=y.settings)===null||f===void 0?void 0:f.caseSensitive)===!0?u:u.toLowerCase(),S=s.Text.breakupIntoWordsArr(g),k=((m=y.settings)===null||m===void 0?void 0:m.substrings)===!1?a.checkIfMatchesWord:a.checkIfMatchesSubstring;if(y.commandMode&&k(y.commandMode,g,S))return l.setInterimColorToFinal(),setTimeout(function(){return a.toggleCommandModeOn(l)}),{doNotProcessTranscription:!1};if(!(y.commandMode&&!l.isWaitingForCommand)){if(y.stop&&k(y.stop,g,S))return a.toggleCommandModeOff(l),setTimeout(function(){return l.stop()}),{doNotProcessTranscription:!1};if(y.pause&&k(y.pause,g,S))return a.toggleCommandModeOff(l),l.setInterimColorToFinal(),setTimeout(function(){var T;l.isPaused=!0,(T=l.onPauseTrigger)===null||T===void 0||T.call(l,!0)}),{doNotProcessTranscription:!1};if(y.resume&&k(y.resume,g,S))return l.isPaused=!1,(p=l.onPauseTrigger)===null||p===void 0||p.call(l,!1),a.toggleCommandModeOff(l),l.resetRecording(c),{doNotProcessTranscription:!0};if(y.reset&&k(y.reset,g,S))return h!==void 0&&a.setText(l,c,h,d),{doNotProcessTranscription:!0};if(y.removeAllText&&k(y.removeAllText,g,S))return a.setText(l,c,"",d),{doNotProcessTranscription:!0}}}}}])}();return mr.CommandUtils=i,mr}var br={},uu;function B0(){if(uu)return br;uu=1,Object.defineProperty(br,"__esModule",{value:!0}),br.Highlight=void 0;var e=vi(),r=gi(),t=function(){function n(){w(this,n)}return C(n,null,[{key:"setStateForPrimitive",value:function(i,a){var o,l;a.selectionStart!==null&&(o=a.selectionStart),a.selectionEnd!==null&&(l=a.selectionEnd),i.isHighlighted=o!==l}},{key:"setStateForGeneric",value:function(i,a){var o=window.getSelection();if(o!=null&&o.focusNode){var l=r.Cursor.getGenericElementCursorOffset(a,o,!0),u=r.Cursor.getGenericElementCursorOffset(a,o,!1);i.isHighlighted=l!==u}}},{key:"setState",value:function(i,a){document.activeElement===a&&(e.Elements.isPrimitiveElement(a)?n.setStateForPrimitive(i,a):n.setStateForGeneric(i,a))}},{key:"removeForGeneric",value:function(i,a){var o=window.getSelection();if(o){var l=r.Cursor.getGenericElementCursorOffset(a,o,!0);o.deleteFromDocument(),r.Cursor.setOffsetForGeneric(a,l),i.isHighlighted=!1}}},{key:"removeForPrimitive",value:function(i,a){var o=a.selectionStart,l=a.selectionEnd,u=a.value;if(o&&l){var c=u.substring(0,o)+u.substring(l);a.value=c,r.Cursor.setOffsetForPrimitive(a,o,i.autoScroll)}i.isHighlighted=!1}}])}();return br.Highlight=t,br}var _r={},cu;function F0(){if(cu)return _r;cu=1,Object.defineProperty(_r,"__esModule",{value:!0}),_r.Padding=void 0;var e=vi(),r=gi(),t=mi(),n=function(){function s(){w(this,s)}return C(s,null,[{key:"setStateForPrimitiveElement",value:function(a,o){if(document.activeElement===o&&o.selectionStart!==null){var l=o.selectionStart,u=o.value[l-1],c=o.selectionEnd===null?l:o.selectionEnd,d=o.value[c];t.Text.isCharDefined(u)&&(a.startPadding=" ",a.numberOfSpacesBeforeNewText=1),t.Text.isCharDefined(d)&&(a.endPadding=" ",a.numberOfSpacesAfterNewText=1),a.isCursorAtEnd=o.value.length===c;return}var h=o.value[o.value.length-1];t.Text.isCharDefined(h)&&(a.startPadding=" ",a.numberOfSpacesBeforeNewText=1),a.isCursorAtEnd=!0}},{key:"setStateForGenericElement",value:function(a,o){var l,u,c;if(document.activeElement===o){var d=window.getSelection();if(d!=null&&d.focusNode){var h=r.Cursor.getGenericElementCursorOffset(o,d,!0),f=(l=o.textContent)===null||l===void 0?void 0:l[h-1],m=r.Cursor.getGenericElementCursorOffset(o,d,!1),p=(u=o.textContent)===null||u===void 0?void 0:u[m];t.Text.isCharDefined(f)&&(a.startPadding=" "),t.Text.isCharDefined(p)&&(a.endPadding=" "),a.isCursorAtEnd=((c=o.textContent)===null||c===void 0?void 0:c.length)===m;return}}var y=o.innerText.charAt(o.innerText.length-1);t.Text.isCharDefined(y)&&(a.startPadding=" "),a.isCursorAtEnd=!0}},{key:"setState",value:function(a,o){e.Elements.isPrimitiveElement(o)?s.setStateForPrimitiveElement(a,o):s.setStateForGenericElement(a,o)}},{key:"adjustStateAfterRecodingPrimitiveElement",value:function(a,o){if(a.primitiveTextRecorded=!0,a.insertInCursorLocation&&document.activeElement===o&&(o.selectionEnd!==null&&(a.endPadding=a.endPadding+o.value.slice(o.selectionEnd)),o.selectionStart!==null)){a.startPadding=o.value.slice(0,o.selectionStart)+a.startPadding;return}a.startPadding=o.value+a.startPadding}},{key:"adjustSateForNoTextPrimitiveElement",value:function(a){a.numberOfSpacesBeforeNewText===1&&(a.startPadding=a.startPadding.substring(0,a.startPadding.length-1),a.numberOfSpacesBeforeNewText=0),a.numberOfSpacesAfterNewText===1&&(a.endPadding=a.endPadding.substring(1),a.numberOfSpacesAfterNewText=0)}}])}();return _r.Padding=n,_r}var du;function Wd(){if(du)return fr;du=1,Object.defineProperty(fr,"__esModule",{value:!0}),fr.Speech=void 0;var e=N0(),r=D0(),t=Kd(),n=Gd(),s=B0(),i=vi(),a=F0(),o=ho(),l=gi(),u=mi(),c=function(){function d(){w(this,d),this.finalTranscript="",this.interimSpan=i.Elements.createInterimSpan(),this.finalSpan=i.Elements.createGenericSpan(),this.scrollingSpan=i.Elements.createGenericSpan(),this.isCursorAtEnd=!1,this.spansPopulated=!1,this.startPadding="",this.endPadding="",this.numberOfSpacesBeforeNewText=0,this.numberOfSpacesAfterNewText=0,this.isHighlighted=!1,this.primitiveTextRecorded=!1,this.recognizing=!1,this._displayInterimResults=!0,this.insertInCursorLocation=!0,this.autoScroll=!0,this.isRestarting=!1,this.isPaused=!1,this.isWaitingForCommand=!1,this.isTargetInShadow=!1,this.cannotBeStopped=!1,this.resetState()}return C(d,[{key:"prepareBeforeStart",value:function(f){var m,p;if(f!=null&&f.element)if(e.EventListeners.add(this,f),Array.isArray(f.element)){var y=f.element.find(function(g){return g===document.activeElement})||f.element[0];if(!y)return;this.prepare(y)}else this.prepare(f.element);(f==null?void 0:f.displayInterimResults)!==void 0&&(this._displayInterimResults=f.displayInterimResults),f!=null&&f.textColor&&(this._finalTextColor=(m=f==null?void 0:f.textColor)===null||m===void 0?void 0:m.final,i.Elements.applyCustomColors(this,f.textColor)),(f==null?void 0:f.insertInCursorLocation)!==void 0&&(this.insertInCursorLocation=f.insertInCursorLocation),(f==null?void 0:f.autoScroll)!==void 0&&(this.autoScroll=f.autoScroll),this._onResult=f==null?void 0:f.onResult,this._onPreResult=f==null?void 0:f.onPreResult,this._onStart=f==null?void 0:f.onStart,this._onStop=f==null?void 0:f.onStop,this._onError=f==null?void 0:f.onError,this.onCommandModeTrigger=f==null?void 0:f.onCommandModeTrigger,this.onPauseTrigger=f==null?void 0:f.onPauseTrigger,this._options=f,!((p=this._options)===null||p===void 0)&&p.commands&&(this.commands=t.CommandUtils.process(this._options.commands))}},{key:"prepare",value:function(f){a.Padding.setState(this,f),s.Highlight.setState(this,f),this.isTargetInShadow=i.Elements.isInsideShadowDOM(f),i.Elements.isPrimitiveElement(f)?(this._primitiveElement=f,this._originalText=this._primitiveElement.value):(this._genericElement=f,this._originalText=this._genericElement.textContent)}},{key:"resetRecording",value:function(f){this.isRestarting=!0,this.stop(!0),this.resetState(!0),this.start(f,!0)}},{key:"updateElements",value:function(f,m,p){var y,g=u.Text.capitalize(m);if(!(this.finalTranscript===g&&f==="")){r.PreResultUtils.process(this,p,f==="",this._onPreResult,this._options)&&(f="",p="");var S=this.commands&&t.CommandUtils.execCommand(this,p,this._options,this._primitiveElement||this._genericElement,this._originalText);if(S){if(S.doNotProcessTranscription)return;f="",p=""}if(!(this.isPaused||this.isWaitingForCommand)){(y=this._onResult)===null||y===void 0||y.call(this,p,f===""),this.finalTranscript=g,this._displayInterimResults||(f="");var k=this.finalTranscript===""&&f==="";this._primitiveElement?this.updatePrimitiveElement(this._primitiveElement,f,k):this._genericElement&&this.updateGenericElement(this._genericElement,f,k)}}}},{key:"updatePrimitiveElement",value:function(f,m,p){this.isHighlighted&&s.Highlight.removeForPrimitive(this,f),this.primitiveTextRecorded||a.Padding.adjustStateAfterRecodingPrimitiveElement(this,f),p&&a.Padding.adjustSateForNoTextPrimitiveElement(this);var y=this.startPadding+this.finalTranscript+m;if(f.value=y+this.endPadding,!this.isTargetInShadow){var g=y.length+this.numberOfSpacesAfterNewText;l.Cursor.setOffsetForPrimitive(f,g,this.autoScroll)}this.autoScroll&&o.Browser.IS_SAFARI()&&this.isCursorAtEnd&&n.AutoScroll.scrollSafariPrimitiveToEnd(f)}},{key:"updateGenericElement",value:function(f,m,p){this.isHighlighted&&s.Highlight.removeForGeneric(this,f),this.spansPopulated||i.Elements.appendSpans(this,f);var y=(p?"":this.startPadding)+u.Text.lineBreak(this.finalTranscript);this.finalSpan.innerHTML=y;var g=n.AutoScroll.isRequired(this.autoScroll,f);n.AutoScroll.changeStateIfNeeded(this,g);var S=u.Text.lineBreak(m)+(p?"":this.endPadding);this.interimSpan.innerHTML=S,o.Browser.IS_SAFARI()&&this.insertInCursorLocation&&l.Cursor.setOffsetForSafariGeneric(f,y.length+S.length),g&&n.AutoScroll.scrollGeneric(this,f),p&&(this.scrollingSpan.innerHTML="")}},{key:"finalise",value:function(f){this._genericElement&&(f?(this.finalSpan=i.Elements.createGenericSpan(),this.setInterimColorToFinal(),this.interimSpan=i.Elements.createInterimSpan(),this.scrollingSpan=i.Elements.createGenericSpan()):this._genericElement.textContent=this._genericElement.textContent,this.spansPopulated=!1),e.EventListeners.remove(this)}},{key:"setInterimColorToFinal",value:function(){this.interimSpan.style.color=this._finalTextColor||"black"}},{key:"resetState",value:function(f){this._primitiveElement=void 0,this._genericElement=void 0,this.finalTranscript="",this.finalSpan.innerHTML="",this.interimSpan.innerHTML="",this.scrollingSpan.innerHTML="",this.startPadding="",this.endPadding="",this.isHighlighted=!1,this.primitiveTextRecorded=!1,this.numberOfSpacesBeforeNewText=0,this.numberOfSpacesAfterNewText=0,f||(this.stopTimeout=void 0)}},{key:"setStateOnStart",value:function(){var f;this.recognizing=!0,this.isRestarting?this.isRestarting=!1:(f=this._onStart)===null||f===void 0||f.call(this)}},{key:"setStateOnStop",value:function(){var f;this.recognizing=!1,this.isRestarting||(f=this._onStop)===null||f===void 0||f.call(this)}},{key:"setStateOnError",value:function(f){var m;(m=this._onError)===null||m===void 0||m.call(this,f),this.recognizing=!1}}])}();return fr.Speech=c,fr}var fu;function j0(){if(fu)return or;fu=1,Object.defineProperty(or,"__esModule",{value:!0}),or.WebSpeech=void 0;var e=P0(),r=ho(),t=Wd(),n=function(s){function i(){return w(this,i),ee(this,i)}return te(i,s),C(i,[{key:"start",value:function(o){var l;this._extractText===void 0&&(this._extractText=r.Browser.IS_SAFARI()?e.WebSpeechTranscript.extractSafari:e.WebSpeechTranscript.extract),this.validate()&&(this.prepareBeforeStart(o),this.instantiateService(o),(l=this._service)===null||l===void 0||l.start(),this._translations=o==null?void 0:o.translations)}},{key:"validate",value:function(){return i.getAPI()?!0:(this.error("Speech Recognition is unsupported"),!1)}},{key:"instantiateService",value:function(o){var l,u,c=i.getAPI();this._service=new c,this._service.continuous=!0,this._service.interimResults=(l=o==null?void 0:o.displayInterimResults)!==null&&l!==void 0?l:!0,this._service.lang=((u=o==null?void 0:o.language)===null||u===void 0?void 0:u.trim())||"en-US",this.setEvents()}},{key:"setEvents",value:function(){var o=this;this._service&&(this._service.onstart=function(){o.setStateOnStart()},this._service.onerror=function(l){r.Browser.IS_SAFARI()&&l.message==="Another request is started"||l.error==="aborted"&&o.isRestarting||l.error!=="no-speech"&&o.error(l.message||l.error)},this._service.onaudioend=function(){o.setStateOnStop()},this._service.onend=function(){o._stopping=!1},this._service.onresult=function(l){if(W(l.results)>"u"&&o._service)o._service.onend=null,o._service.stop();else if(o._extractText&&!o._stopping){var u=o._extractText(l,o.finalTranscript,o._translations),c=u.interimTranscript,d=u.finalTranscript,h=u.newText;o.updateElements(c,d,h)}})}},{key:"stop",value:function(o){var l;this._stopping=!0,(l=this._service)===null||l===void 0||l.stop(),this.finalise(o)}},{key:"error",value:function(o){console.error(o),this.setStateOnError(o),this.stop()}}],[{key:"getAPI",value:function(){return window.webkitSpeechRecognition||window.SpeechRecognition}}])}(t.Speech);return or.WebSpeech=n,or}var Sr={},hu;function U0(){if(hu)return Sr;hu=1,Object.defineProperty(Sr,"__esModule",{value:!0}),Sr.GlobalState=void 0;var e=function(){function r(){w(this,r)}return C(r,null,[{key:"doubleClickDetector",value:function(){return r.doubleClickPending?!0:(r.doubleClickPending=!0,setTimeout(function(){r.doubleClickPending=!1},300),!1)}}])}();return Sr.GlobalState=e,e.doubleClickPending=!1,Sr}var Er={},kr={},pu;function H0(){if(pu)return kr;pu=1,Object.defineProperty(kr,"__esModule",{value:!0}),kr.PreventConnectionStop=void 0;var e=function(){function r(){w(this,r)}return C(r,null,[{key:"applyPrevention",value:function(n){clearTimeout(n._manualConnectionStopPrevention),n.cannotBeStopped=!0,n._manualConnectionStopPrevention=setTimeout(function(){n.cannotBeStopped=!1},800)}},{key:"clearPrevention",value:function(n){clearTimeout(n._manualConnectionStopPrevention),n.cannotBeStopped=!1}}])}();return kr.PreventConnectionStop=e,kr}var wr={},Ss={},mu;function $0(){return mu||(mu=1,Object.defineProperty(Ss,"__esModule",{value:!0}),Ss.README_URL=void 0,Ss.README_URL="https://github.com/OvidijusParsiunas/speech-to-element"),Ss}var vu;function V0(){if(vu)return wr;vu=1,Object.defineProperty(wr,"__esModule",{value:!0}),wr.AzureSpeechConfig=void 0;var e=$0(),r=function(){function t(){w(this,t)}return C(t,null,[{key:"validateOptions",value:function(s,i){return i?!i.subscriptionKey&&!i.token&&!i.retrieveToken?(s("Please define a 'subscriptionKey', 'token' or 'retrieveToken' property - more info: ".concat(e.README_URL)),!1):i.region?!0:(s("Please define a 'region' property - more info: ".concat(e.README_URL)),!1):(s("Please provide subscription details - more info: ".concat(e.README_URL)),!1)}},{key:"getNewSpeechConfig",value:function(){var n=A(v().mark(function i(a,o){return v().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!o.region){u.next=2;break}return u.abrupt("return",o.subscriptionKey?a.fromSubscription(o.subscriptionKey.trim(),o.region.trim()):o.token?a.fromAuthorizationToken(o.token.trim(),o.region.trim()):o.retrieveToken?o.retrieveToken().then(function(c){return o.region?a.fromAuthorizationToken((c==null?void 0:c.trim())||"",o.region.trim()):null}).catch(function(c){return console.error(c),null}):null);case 2:case"end":return u.stop()}},i)}));function s(i,a){return n.apply(this,arguments)}return s}()},{key:"process",value:function(s,i){i.endpointId&&(s.endpointId=i.endpointId.trim()),i.language&&(s.speechRecognitionLanguage=i.language.trim())}},{key:"get",value:function(){var n=A(v().mark(function i(a,o){var l;return v().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,t.getNewSpeechConfig(a,o);case 2:return l=c.sent,c.abrupt("return",(l&&t.process(l,o),l));case 4:case"end":return c.stop()}},i)}));function s(i,a){return n.apply(this,arguments)}return s}()}])}();return wr.AzureSpeechConfig=r,wr}var Cr={},gu;function q0(){if(gu)return Cr;gu=1,Object.defineProperty(Cr,"__esModule",{value:!0}),Cr.StopTimeout=void 0;var e=function(){function r(){w(this,r)}return C(r,null,[{key:"set",value:function(n){n.stopTimeout=setTimeout(function(){return n.stop()},n.stopTimeoutMS)}},{key:"reset",value:function(n,s){n.stopTimeoutMS=s||r.DEFAULT_MS,r.stop(n),r.set(n)}},{key:"stop",value:function(n){n.stopTimeout&&clearTimeout(n.stopTimeout)}}])}();return Cr.StopTimeout=e,e.DEFAULT_MS=2e4,Cr}var Tr={},yu;function z0(){if(yu)return Tr;yu=1,Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.AzureAudioConfig=void 0;var e=function(){function r(){w(this,r)}return C(r,null,[{key:"get",value:function(n,s){return s?n.fromMicrophoneInput(s):n.fromDefaultMicrophoneInput()}}])}();return Tr.AzureAudioConfig=e,Tr}var Ar={},bu;function G0(){if(bu)return Ar;bu=1,Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.AzureTranscript=void 0;var e=zd(),r=function(){function t(){w(this,t)}return C(t,null,[{key:"extract",value:function(s,i,a,o){return o&&(s=e.Translate.translate(s,o)),a?{interimTranscript:"",finalTranscript:i+s,newText:s}:{interimTranscript:s,finalTranscript:i,newText:s}}}])}();return Ar.AzureTranscript=r,Ar}var _u;function K0(){if(_u)return Er;_u=1,Object.defineProperty(Er,"__esModule",{value:!0}),Er.Azure=void 0;var e=H0(),r=V0(),t=q0(),n=z0(),s=G0(),i=Wd(),a=function(o){function l(){var u;return w(this,l),u=ee(this,l,arguments),u._newTextPadding="",u}return te(l,o),C(l,[{key:"start",value:function(c,d){this._newTextPadding="",this.stopTimeout===void 0&&t.StopTimeout.reset(this,c==null?void 0:c.stopAfterSilenceMs),this.prepareBeforeStart(c),this.startAsync(c),d||e.PreventConnectionStop.applyPrevention(this)}},{key:"startAsync",value:function(){var u=A(v().mark(function d(h){var f;return v().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(p.t0=this.validate(h),!p.t0){p.next=6;break}return p.next=4,this.instantiateService(h);case 4:this._translations=h==null?void 0:h.translations,(f=this._service)===null||f===void 0||f.startContinuousRecognitionAsync(function(){},this.error);case 6:case"end":return p.stop()}},d,this)}));function c(d){return u.apply(this,arguments)}return c}()},{key:"validate",value:function(c){return l.getAPI()?r.AzureSpeechConfig.validateOptions(this.error.bind(this),c):(this.moduleNotFound(),!1)}},{key:"instantiateService",value:function(){var u=A(v().mark(function d(h){var f,m,p,y,g,S,k,T,x;return v().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return f=l.getAPI(),m=n.AzureAudioConfig.get(f.AudioConfig,h.deviceId),F.next=4,r.AzureSpeechConfig.get(f.SpeechConfig,h);case 4:p=F.sent,p?(h.autoLanguage&&h.autoLanguage.languages.length>0?(g=h.autoLanguage,S=g.type,k=g.languages,T=k.slice(0,S==="Continuous"?10:4),x=f.AutoDetectSourceLanguageConfig.fromLanguages(T),S==="Continuous"&&(x.mode=1),y=f.SpeechRecognizer.FromConfig(p,x,m)):y=new f.SpeechRecognizer(p,m),this.setEvents(y),this._service=y,h.retrieveToken&&this.retrieveTokenInterval(h.retrieveToken)):this.error("Unable to contact Azure server");case 6:case"end":return F.stop()}},d,this)}));function c(d){return u.apply(this,arguments)}return c}()},{key:"setEvents",value:function(c){c.recognizing=this.onRecognizing.bind(this),c.recognized=this.onRecognized.bind(this),c.sessionStarted=this.onSessionStarted.bind(this),c.canceled=this.onCanceled.bind(this),c.sessionStopped=this.onSessionStopped.bind(this)}},{key:"onRecognizing",value:function(c,d){if(!this._stopping){var h=s.AzureTranscript.extract(this._newTextPadding+d.result.text,this.finalTranscript,!1,this._translations),f=h.interimTranscript,m=h.finalTranscript,p=h.newText;t.StopTimeout.reset(this,this.stopTimeoutMS),this.updateElements(f,m,p)}}},{key:"onRecognized",value:function(c,d){var h=d.result;switch(h.reason){case window.SpeechSDK.ResultReason.Canceled:break;case window.SpeechSDK.ResultReason.RecognizedSpeech:if(h.text&&!this._stopping){var f=s.AzureTranscript.extract(this._newTextPadding+h.text,this.finalTranscript,!0,this._translations),m=f.interimTranscript,p=f.finalTranscript,y=f.newText;t.StopTimeout.reset(this,this.stopTimeoutMS),this.updateElements(m,p,y),p!==""&&(this._newTextPadding=" ")}break}}},{key:"onCanceled",value:function(c,d){d.reason===window.SpeechSDK.CancellationReason.Error&&this.error(d.errorDetails)}},{key:"onSessionStarted",value:function(){e.PreventConnectionStop.clearPrevention(this),this.setStateOnStart()}},{key:"onSessionStopped",value:function(){this._retrieveTokenInterval||clearInterval(this._retrieveTokenInterval),this._stopping=!1,this.setStateOnStop()}},{key:"retrieveTokenInterval",value:function(c){var d=this;this._retrieveTokenInterval=setInterval(function(){c==null||c().then(function(h){d._service&&(d._service.authorizationToken=(h==null?void 0:h.trim())||"")}).catch(function(h){d.error(h)})},1e4)}},{key:"stop",value:function(c){var d;!c&&this._retrieveTokenInterval&&clearInterval(this._retrieveTokenInterval),this._stopping=!0,(d=this._service)===null||d===void 0||d.stopContinuousRecognitionAsync(),t.StopTimeout.stop(this),this.finalise(c)}},{key:"moduleNotFound",value:function(){console.error("speech recognition module not found:"),console.error(`please install the 'microsoft-cognitiveservices-speech-sdk' npm package or add a script tag: <script src="https://aka.ms/csspeech/jsbrowserpackageraw"><\/script>`),this.setStateOnError("speech recognition module not found")}},{key:"error",value:function(c){this._retrieveTokenInterval&&clearInterval(this._retrieveTokenInterval),console.error(c),this.setStateOnError(c),this.stop()}}],[{key:"getAPI",value:function(){return window.SpeechSDK}}])}(i.Speech);return Er.Azure=a,Er}var Su;function W0(){if(Su)return _s;Su=1,Object.defineProperty(_s,"__esModule",{value:!0});var e=j0(),r=Kd(),t=U0(),n=K0(),s=function(){function i(){w(this,i)}return C(i,null,[{key:"toggle",value:function(o,l){var u,c,d=o.toLocaleLowerCase().trim();!((u=t.GlobalState.service)===null||u===void 0)&&u.recognizing?this.stop():d==="webspeech"?i.startWebSpeech(l):d==="azure"?i.startAzure(l):(console.error("service not found - must be either 'webspeech' or 'azure'"),(c=l==null?void 0:l.onError)===null||c===void 0||c.call(l,"service not found - must be either 'webspeech' or 'azure'"))}},{key:"startWebSpeech",value:function(o){i.stop()||(t.GlobalState.service=new e.WebSpeech,t.GlobalState.service.start(o))}},{key:"isWebSpeechSupported",value:function(){return!!e.WebSpeech.getAPI()}},{key:"startAzure",value:function(o){var l;i.stop()||!((l=t.GlobalState.service)===null||l===void 0)&&l.cannotBeStopped||(t.GlobalState.service=new n.Azure,t.GlobalState.service.start(o))}},{key:"stop",value:function(){var o;return t.GlobalState.doubleClickDetector()?!0:(!((o=t.GlobalState.service)===null||o===void 0)&&o.recognizing&&t.GlobalState.service.stop(),!1)}},{key:"endCommandMode",value:function(){t.GlobalState.service&&r.CommandUtils.toggleCommandModeOff(t.GlobalState.service)}}])}();return _s.default=s,_s}var J0=W0(),Ds=O0(J0),Y0=function(){function e(r,t){w(this,e),this.silenceMS=2e3,this.stop=!0,typeof t=="boolean"&&t===!1&&(this.stop=!1),typeof r=="number"&&(this.silenceMS=r)}return C(e,[{key:"setSilenceTimeout",value:function(t,n){var s=this;this._silenceTimeout=setTimeout(function(){var i;(i=t.submit)==null||i.call(t),Ds.stop(),s.stop||setTimeout(n,po.MICROPHONE_RESET_TIMEOUT_MS)},this.silenceMS)}},{key:"clearSilenceTimeout",value:function(){this._silenceTimeout&&clearTimeout(this._silenceTimeout)}},{key:"resetSilenceTimeout",value:function(t,n){this.clearSilenceTimeout(),this.setSilenceTimeout(t,n)}},{key:"onPause",value:function(t,n,s){t?this.resetSilenceTimeout(n,s):this.clearSilenceTimeout()}}])}(),Jd=function(e){function r(t,n,s){var i;w(this,r);var a=W(t.speechToText)=="object"?t.speechToText:{};i=ee(this,r,[a==null?void 0:a.button]);var o=i.processConfiguration(n,t.speechToText),l=o.serviceName,u=o.processedConfig;if(i._addErrorMessage=s,l==="webspeech"&&!Ds.isWebSpeechSupported())i.changeToUnsupported();else{var c=!t.textInput||!t.textInput.disabled;i.elementRef.onclick=i.buttonClick.bind(i,n,c,l,u)}return setTimeout(function(){i._validationHandler=t._validationHandler}),i}return te(r,e),C(r,[{key:"processConfiguration",value:function(n,s){var i,a,o,l,u,c,d=W(s)=="object"?s:{},h=W(d.webSpeech)=="object"?d.webSpeech:{},f=d.azure||{},m=ve(ve({displayInterimResults:(i=d.displayInterimResults)!==null&&i!==void 0?i:void 0,textColor:(a=d.textColor)!==null&&a!==void 0?a:void 0,translations:(o=d.translations)!==null&&o!==void 0?o:void 0,commands:(l=d.commands)!==null&&l!==void 0?l:void 0,events:(u=d.events)!==null&&u!==void 0?u:void 0},h),f),p=(c=d.commands)==null?void 0:c.submit;return p&&(m.onPreResult=function(y){return y.toLowerCase().includes(p)?(setTimeout(function(){var g;return(g=n.submit)==null?void 0:g.call(n)}),Ds.endCommandMode(),{restart:!0,removeNewText:!0}):null}),d.submitAfterSilence&&(this._silenceSubmit=new Y0(d.submitAfterSilence,d.stopAfterSubmit)),{serviceName:r.getServiceName(d),processedConfig:m}}},{key:"buttonClick",value:function(n,s,i,a){var o=this,l=a==null?void 0:a.events;n.removePlaceholderStyle(),Ds.toggle(i,ve({insertInCursorLocation:!1,element:s?n.inputElementRef:void 0,onError:function(){var c;o.onError(),(c=o._silenceSubmit)==null||c.clearSilenceTimeout()},onStart:function(){var c;o.changeToActive(),(c=l==null?void 0:l.onStart)==null||c.call(l)},onStop:function(){var c,d,h;(c=o._validationHandler)==null||c.call(o),(d=o._silenceSubmit)==null||d.clearSilenceTimeout(),o.changeToDefault(),(h=l==null?void 0:l.onStop)==null||h.call(l)},onPauseTrigger:function(c){var d,h;(d=o._silenceSubmit)==null||d.onPause(c,n,o.elementRef.onclick),(h=l==null?void 0:l.onPauseTrigger)==null||h.call(l,c)},onPreResult:function(c,d){var h;(h=l==null?void 0:l.onPreResult)==null||h.call(l,c,d)},onResult:function(c,d){var h,f,m;d&&((h=o._validationHandler)==null||h.call(o)),(f=o._silenceSubmit)==null||f.resetSilenceTimeout(n,o.elementRef.onclick),(m=l==null?void 0:l.onResult)==null||m.call(l,c,d)},onCommandModeTrigger:function(c){var d;o.onCommandModeTrigger(c),(d=l==null?void 0:l.onCommandModeTrigger)==null||d.call(l,c)}},a))}},{key:"onCommandModeTrigger",value:function(n){n?this.changeToCommandMode():this.changeToActive()}},{key:"onError",value:function(){this._addErrorMessage("speechToText","speech input error")}}],[{key:"getServiceName",value:function(n){return n.azure?"azure":"webspeech"}},{key:"toggleSpeechAfterSubmit",value:function(n){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;n.click(),s||setTimeout(function(){return n.click()},r.MICROPHONE_RESET_TIMEOUT_MS)}}])}(qd);Jd.MICROPHONE_RESET_TIMEOUT_MS=300;var po=Jd,mo=function(){function e(r,t,n,s){var i=this;w(this,e),this._attachments=[],this._fileCountLimit=99,this._acceptedFormat="",t.maxNumberOfFiles&&(this._fileCountLimit=t.maxNumberOfFiles),this._toggleContainerDisplay=n,this._fileAttachmentsContainerRef=s,t.acceptedFormats&&(this._acceptedFormat=t.acceptedFormats),setTimeout(function(){i._validationHandler=r._validationHandler})}return C(e,[{key:"attemptAddFile",value:function(t,n){return e.isFileTypeValid(t,this._acceptedFormat)?(this.addAttachmentBasedOnType(t,n,!0),!0):!1}},{key:"addAttachmentBasedOnType",value:function(t,n,s){var i=e.getTypeFromBlob(t);if(i==="image"){var a=e.createImageAttachment(n);this.addFileAttachment(t,"image",a,s)}else if(i==="audio"){var o=Aa.createAudioAttachment(n);this.addFileAttachment(t,"audio",o,s)}else{var l=e.createAnyFileAttachment(t.name);this.addFileAttachment(t,"any",l,s)}}},{key:"addFileAttachment",value:function(t,n,s,i){var a,o=e.createContainer(s);if(this._attachments.length>=this._fileCountLimit){var l=this._attachments[this._attachments.length-1].removeButton;l==null||l.click();var u=this._fileAttachmentsContainerRef.children;this._fileAttachmentsContainerRef.insertBefore(o,u[0])}else this._fileAttachmentsContainerRef.appendChild(o);var c={file:t,attachmentContainerElement:o,fileType:n};return i&&(c.removeButton=this.createRemoveAttachmentButton(c),o.appendChild(c.removeButton)),this._toggleContainerDisplay(!0),this._attachments.push(c),this._fileAttachmentsContainerRef.scrollTop=this._fileAttachmentsContainerRef.scrollHeight,(a=this._validationHandler)==null||a.call(this),c}},{key:"createRemoveAttachmentButton",value:function(t){var n=document.createElement("div");n.classList.add("remove-file-attachment-button"),n.onclick=this.removeAttachment.bind(this,t);var s=document.createElement("div");return s.classList.add("x-icon"),s.innerText="",n.appendChild(s),n}},{key:"removeAttachment",value:function(t){var n,s=this._attachments.findIndex(function(a){return a===t}),i=this._attachments[s].attachmentContainerElement;this._attachments.splice(s,1),Aa.stopAttachmentPlayback(i),i.remove(),this._toggleContainerDisplay(!1),(n=this._validationHandler)==null||n.call(this)}},{key:"getFiles",value:function(){return Array.from(this._attachments).map(function(t){return{file:t.file,type:t.fileType}})}},{key:"removeAllAttachments",value:function(){this._attachments.forEach(function(t){setTimeout(function(){var n;return(n=t.removeButton)==null?void 0:n.click()})})}}],[{key:"isFileTypeValid",value:function(t,n){if(n==="")return!0;for(var s=n.split(","),i=0;i<s.length;i++){var a=s[i].trim();if(t.type===a)return!0;if(a.startsWith(".")){var o=a.slice(1);if(t.name.endsWith(o))return!0}else if(t.name.endsWith(a)||a.endsWith("/*")&&t.type.startsWith(a.slice(0,-2)))return!0}return!1}},{key:"getTypeFromBlob",value:function(t){var n=t.type;return n.startsWith("image")?"image":n.startsWith("audio")?"audio":"any"}},{key:"createImageAttachment",value:function(t){var n=new Image;return n.src=t,n.classList.add("image-attachment"),n}},{key:"createAnyFileAttachment",value:function(t){var n=document.createElement("div");n.classList.add("border-bound-attachment"),Sn.IS_SAFARI&&n.classList.add("border-bound-attachment-safari");var s=document.createElement("div");s.classList.add("any-file-attachment-text");var i=document.createElement("div");return i.classList.add("file-attachment-text-container"),i.appendChild(s),s.textContent=t,n.appendChild(i),n}},{key:"createContainer",value:function(t){var n=document.createElement("div");return n.classList.add("file-attachment"),n.appendChild(t),n}}])}(),Yd=function(e){function r(t,n,s,i){return w(this,r),ee(this,r,[t,n,s,i])}return te(r,e),C(r,[{key:"createTimer",value:function(n,s){var i=this,a=0,o=s!==void 0&&s<r.TIMER_LIMIT_S?s:r.TIMER_LIMIT_S;return setInterval(function(){var l;a+=1,a===o&&((l=i.stopPlaceholderCallback)==null||l.call(i),i.clearTimer()),a===600&&n.classList.add("audio-placeholder-text-4-digits");var u=Math.floor(a/60),c=(a%60).toString().padStart(2,"0");n.textContent="".concat(u,":").concat(c)},1e3)}},{key:"createPlaceholderAudioAttachment",value:function(n){var s=r.createAudioContainer(),i=document.createElement("div");i.classList.add("audio-placeholder-text-3-digits");var a=document.createElement("div");a.classList.add("file-attachment-text-container","audio-placeholder-text-3-digits-container"),a.appendChild(i);var o=Wt.createSVGElement(Ea);return o.classList.add("attachment-icon","stop-icon","not-removable-attachment-icon"),i.textContent="0:00",this._activePlaceholderTimer=this.createTimer(i,n),s.appendChild(a),this.addPlaceholderAudioAttachmentEvents(s,o,a),s}},{key:"addPlaceholderAudioAttachmentEvents",value:function(n,s,i){var a=this,o=function(){return n.replaceChildren(s)};n.addEventListener("mouseenter",o);var l=function(){return n.replaceChildren(i)};n.addEventListener("mouseleave",l);var u=function(){var d;return(d=a.stopPlaceholderCallback)==null?void 0:d.call(a)};n.addEventListener("click",u)}},{key:"addPlaceholderAttachment",value:function(n,s){var i=this.createPlaceholderAudioAttachment(s);this._activePlaceholderAttachment=this.addFileAttachment(new File([],""),"audio",i,!1),this.stopPlaceholderCallback=n}},{key:"completePlaceholderAttachment",value:function(n,s){var i=this._activePlaceholderAttachment;i&&(i.file=n,r.addAudioElements(i.attachmentContainerElement.children[0],s),i.removeButton=this.createRemoveAttachmentButton(i),i.attachmentContainerElement.appendChild(i.removeButton),this._activePlaceholderAttachment=void 0,this.clearTimer())}},{key:"removePlaceholderAttachment",value:function(){this._activePlaceholderAttachment&&(this.removeAttachment(this._activePlaceholderAttachment),this._activePlaceholderAttachment=void 0,this.clearTimer())}},{key:"clearTimer",value:function(){this._activePlaceholderTimer!==void 0&&(clearInterval(this._activePlaceholderTimer),this._activePlaceholderTimer=void 0,this.stopPlaceholderCallback=void 0)}}],[{key:"createAudioContainer",value:function(){var n=document.createElement("div");return n.classList.add("border-bound-attachment","audio-attachment-icon-container"),Sn.IS_SAFARI&&n.classList.add("border-bound-attachment-safari"),n}},{key:"addAudioElements",value:function(n,s){var i=n.parentElement?pt.cloneElement(n):n,a=document.createElement("audio");a.src=s;var o=Wt.createSVGElement(Bd);o.classList.add("attachment-icon","play-icon");var l=Wt.createSVGElement(Ea);l.classList.add("attachment-icon","stop-icon"),i.replaceChildren(o),a.onplay=function(){i.replaceChildren(l)},a.onpause=function(){i.replaceChildren(o),a.currentTime=0},a.onended=function(){i.replaceChildren(o)},i.onclick=function(){a.paused?a.play():a.pause()}}},{key:"createAudioAttachment",value:function(n){var s=r.createAudioContainer();return r.addAudioElements(s,n),s}},{key:"stopAttachmentPlayback",value:function(n){var s,i,a;(a=(i=(s=n.children[0])==null?void 0:s.children)==null?void 0:i[0])!=null&&a.classList.contains("stop-icon")&&n.children[0].click()}}])}(mo);Yd.TIMER_LIMIT_S=5999;var Aa=Yd,X0=function(){function e(){w(this,e)}return C(e,null,[{key:"create",value:function(t,n,s,i,a){return a==="audio"?new Aa(t,n,s,i):new mo(t,n,s,i)}}])}(),vo=function(){function e(r,t,n){w(this,e),this._fileAttachmentsTypes=[],this.elementRef=this.createAttachmentContainer();var s=W(n)=="object"&&!!n.displayFileAttachmentContainer;this.toggleContainerDisplay(s),r.appendChild(this.elementRef),t&&Object.assign(this.elementRef.style,t)}return C(e,[{key:"addType",value:function(t,n,s){var i=X0.create(t,n,this.toggleContainerDisplay.bind(this),this.elementRef,s);return this._fileAttachmentsTypes.push(i),i}},{key:"createAttachmentContainer",value:function(){var t=document.createElement("div");return t.id="file-attachment-container",t}},{key:"toggleContainerDisplay",value:function(t){t?this.elementRef.style.display="block":this.elementRef.children.length===0&&(this.elementRef.style.display="none")}},{key:"getAllFileData",value:function(){var t=this._fileAttachmentsTypes.map(function(n){return n.getFiles()}).flat();return t.length>0?t:void 0}},{key:"completePlaceholders",value:function(){var r=A(v().mark(function n(){return v().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Promise.all(this._fileAttachmentsTypes.map(function(){var a=A(v().mark(function o(l){var u;return v().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(u=l.stopPlaceholderCallback)==null?void 0:u.call(l));case 1:case"end":return d.stop()}},o)}));return function(o){return a.apply(this,arguments)}}()));case 2:case"end":return i.stop()}},n,this)}));function t(){return r.apply(this,arguments)}return t}()},{key:"addFilesToAnyType",value:function(t){e.addFilesToType(t,this._fileAttachmentsTypes)}},{key:"removeAllFiles",value:function(){this._fileAttachmentsTypes.forEach(function(t){return t.removeAllAttachments()}),this.elementRef.replaceChildren(),this.toggleContainerDisplay(!1)}},{key:"getNumberOfTypes",value:function(){return this._fileAttachmentsTypes.length}}],[{key:"addFilesToType",value:function(t,n){t.forEach(function(s){var i=new FileReader;i.readAsDataURL(s),i.onload=function(a){for(var o=0;o<n.length&&!n[o].attemptAddFile(s,a.target.result);o+=1);}})}}])}(),Xd=function(){function e(r,t,n){w(this,e),this._isOpen=!1,this._contentRef=e.createModalContent(t,n==null?void 0:n.backgroundColor),this._buttonPanel=e.createButtonPanel(n==null?void 0:n.backgroundColor),this._elementRef=e.createContainer(this._contentRef,n),this._elementRef.appendChild(this._buttonPanel),r.appendChild(this._elementRef),this._backgroundPanelRef=e.createDarkBackgroundPanel(),r.appendChild(this._backgroundPanelRef),this.addWindowEvents(r)}return C(e,[{key:"isOpen",value:function(){return this._isOpen}},{key:"addButtons",value:function(){for(var t=this,n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];s.forEach(function(a){Fe.addAttributes(a),t._buttonPanel.appendChild(a)})}},{key:"close",value:function(){var t=this;this._elementRef.classList.remove("show-modal"),this._elementRef.classList.add("hide-modal"),this._backgroundPanelRef.classList.remove("show-modal-background"),this._backgroundPanelRef.classList.add("hide-modal-background"),this._isOpen=!1,setTimeout(function(){t._elementRef.style.display="none",t._backgroundPanelRef.style.display="none"},e.MODAL_CLOSE_TIMEOUT_MS)}},{key:"displayModalElements",value:function(){this._elementRef.style.display="flex",this._elementRef.classList.remove("hide-modal"),this._elementRef.classList.add("show-modal"),this._backgroundPanelRef.style.display="block",this._backgroundPanelRef.classList.remove("hide-modal-background"),this._backgroundPanelRef.classList.add("show-modal-background"),this._isOpen=!0}},{key:"openTextModal",value:function(t){this._contentRef.innerHTML=t,this.displayModalElements()}},{key:"addCloseButton",value:function(t,n,s){var i=this,a=n?e.createSVGButton(t):e.createTextButton(t);return this.addButtons(a),a.onclick=function(){i.close(),setTimeout(function(){s==null||s()},140)},a}},{key:"addWindowEvents",value:function(t){this.keyDownEvent=this.windowKeyDown.bind(this,t),window.addEventListener("keydown",this.keyDownEvent)}},{key:"windowKeyDown",value:function(t,n){var s,i;!t.isConnected&&this.keyDownEvent?window.removeEventListener("keydown",this.keyDownEvent):this._isOpen&&(n.key===Ue.ESCAPE?(this.close(),(s=this.extensionCloseCallback)==null||s.call(this)):n.key===Ue.ENTER&&(this.close(),(i=this.extensionCloseCallback)==null||i.call(this)))}}],[{key:"createContainer",value:function(t,n){var s=document.createElement("div");return s.classList.add("modal"),s.appendChild(t),n&&delete n.backgroundColor,Object.assign(s.style,n),s}},{key:"createModalContent",value:function(t,n){var s,i=document.createElement("div");return(s=i.classList).add.apply(s,us(t)),n&&(i.style.backgroundColor=n),document.createElement("div").appendChild(i),i}},{key:"createButtonPanel",value:function(t){var n=document.createElement("div");return n.classList.add("modal-button-panel"),t&&(n.style.backgroundColor=t),n}},{key:"createDarkBackgroundPanel",value:function(){var t=document.createElement("div");return t.id="modal-background-panel",t}},{key:"createTextButton",value:function(t){var n=document.createElement("div");return n.classList.add("modal-button"),n.textContent=t,n}},{key:"createSVGButton",value:function(t){var n=document.createElement("div");n.classList.add("modal-button","modal-svg-button");var s=Wt.createSVGElement(t);return s.classList.add("modal-svg-button-icon"),n.appendChild(s),n}},{key:"createTextModalFunc",value:function(t,n,s){var i;if(W(n)=="object"&&(i=n.files)!=null&&i.infoModal){var a=new e(t,["modal-content"],n.files.infoModal.containerStyle);return a.addCloseButton("OK",!1,s),a.openTextModal.bind(a,n.infoModalTextMarkUp||"")}}}])}();Xd.MODAL_CLOSE_TIMEOUT_MS=190;var Lr=Xd,Z0=function(e){function r(t,n,s,i,a,o){var l;w(this,r);var u,c,d,h,f,m,p,y,g,S=(u=s==null?void 0:s.button)==null?void 0:u.position,k=((h=(d=(c=s==null?void 0:s.button)==null?void 0:c.styles)==null?void 0:d.text)==null?void 0:h.content)||o;l=ee(this,r,[r.createButtonElement(),a,S,s.button,k]);var T=l.createInnerElementsForStates(i,l.customStyles);return l._inputElement=r.createInputElement((f=s==null?void 0:s.files)==null?void 0:f.acceptedFormats),l.addClickEvent(t,s),l.changeElementsByState(T.styles),l.reapplyStateStyle("styles"),l._fileAttachmentsType=n,l._openModalOnce=((p=(m=s.files)==null?void 0:m.infoModal)==null?void 0:p.openModalOnce)===!1||(g=(y=s.files)==null?void 0:y.infoModal)==null?void 0:g.openModalOnce,l}return te(r,e),C(r,[{key:"createInnerElementsForStates",value:function(n,s){return{styles:this.createInnerElements(n,"styles",s)}}},{key:"triggerImportPrompt",value:function(n){n.onchange=this.import.bind(this,n),n.click()}},{key:"import",value:function(n){vo.addFilesToType(Array.from(n.files||[]),[this._fileAttachmentsType]),n.value=""}},{key:"addClickEvent",value:function(n,s){var i=this.triggerImportPrompt.bind(this,this._inputElement),a=Lr.createTextModalFunc(n,s,i);this.elementRef.onclick=this.click.bind(this,a)}},{key:"click",value:function(n){n&&(this._openModalOnce===void 0||this._openModalOnce===!0)?(n(),this._openModalOnce===!0&&(this._openModalOnce=!1)):this.triggerImportPrompt(this._inputElement)}}],[{key:"createInputElement",value:function(n){var s=document.createElement("input");return s.type="file",s.accept=n||"",s.hidden=!0,s.multiple=!0,s}},{key:"createButtonElement",value:function(){var n=document.createElement("div");return n.classList.add("input-button"),n}}])}(On),Eu=function(){function e(){w(this,e)}return C(e,null,[{key:"create",value:function(t,n,s){var i=e.createElement(s);e.addEvents(i,t,n),t.appendChild(i)}},{key:"createElement",value:function(t){var n=document.createElement("div");return n.id="drag-and-drop",W(t)=="object"&&Object.assign(n.style,t),n}},{key:"addEvents",value:function(t,n,s){n.ondragenter=function(i){i.preventDefault(),e.display(t)},t.ondragleave=function(i){i.preventDefault(),e.hide(t)},t.ondragover=function(i){i.preventDefault()},t.ondrop=function(i){i.preventDefault(),e.uploadFile(s,i),e.hide(t)}}},{key:"uploadFile",value:function(t,n){var s,i=(s=n.dataTransfer)==null?void 0:s.files;i&&t.addFilesToAnyType(Array.from(i))}},{key:"display",value:function(t){t.style.display="block"}},{key:"hide",value:function(t){t.style.display="none"}},{key:"isEnabled",value:function(t,n){return n!==void 0&&n===!1?!1:!!n||t.getNumberOfTypes()>0}}])}(),Q0=function(){function e(){w(this,e)}return C(e,null,[{key:"validate",value:function(t,n,s,i,a){var o=t(s,i,a);return o?n.changeToSubmitIcon():n.changeToDisabledIcon(),o}},{key:"useValidationFunc",value:function(){var r=A(v().mark(function n(s,i,a,o){var l,u,c;return v().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return l=i.isTextInputEmpty()?"":i.inputElementRef.textContent,h.next=3,a.completePlaceholders();case 3:return u=a.getAllFileData(),c=u==null?void 0:u.map(function(f){return f.file}),h.abrupt("return",e.validate(s,o,l,c));case 5:case"end":return h.stop()}},n)}));function t(n,s,i,a){return r.apply(this,arguments)}return t}()},{key:"useValidationFuncProgrammatic",value:function(){var r=A(v().mark(function n(s,i,a){var o,l;return v().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return l=(o=i.files)==null?void 0:o.map(function(d){return d.file}),c.abrupt("return",e.validate(s,a,i.text,l,!0));case 2:case"end":return c.stop()}},n)}));function t(n,s,i){return r.apply(this,arguments)}return t}()},{key:"validateWebsocket",value:function(t,n){var s=t.websocket,i=t.connectSettings;return s&&i.url!==Jt.URL&&!is.canSendMessage(s)?(n.changeToDisabledIcon(),!1):!0}},{key:"attach",value:function(t,n,s,i,a){var o=t.validateInput||lt.processValidateInput(t);t._validationHandler=function(){var l=A(v().mark(function u(c){var d;return v().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!(a.status.loadingActive||a.status.requestInProgress||n.isSubmitProgrammaticallyDisabled===!0||!e.validateWebsocket(n,a))){f.next=2;break}return f.abrupt("return",!1);case 2:return d=o||n.canSendMessage,f.abrupt("return",d?c?e.useValidationFuncProgrammatic(d,c,a):e.useValidationFunc(d,s,i,a):null);case 4:case"end":return f.stop()}},u)}));return function(u){return l.apply(this,arguments)}}()}}])}(),Zd=function(){function e(){w(this,e)}return C(e,null,[{key:"getFileName",value:function(t,n){var s=new Date,i=String(s.getHours()).padStart(2,"0"),a=String(s.getMinutes()).padStart(2,"0"),o=String(s.getSeconds()).padStart(2,"0");return"".concat(t,"-").concat(i,"-").concat(a,"-").concat(o,".").concat(n)}}])}(),eb=function(e){function r(t,n){var s;w(this,r);var i,a;return s=ee(this,r,[n.button]),s._waitingForBrowserApproval=!1,s._audioType=t,s._extension=((i=n.files)==null?void 0:i.format)||"mp3",s._maxDurationSeconds=(a=n.files)==null?void 0:a.maxDurationSeconds,s.elementRef.onclick=s.buttonClick.bind(tr(s)),s}return te(r,e),C(r,[{key:"buttonClick",value:function(){this._waitingForBrowserApproval||(this.isActive?this.stop():(this._waitingForBrowserApproval=!0,this.record()))}},{key:"stop",value:function(){var n=this;return new Promise(function(s){var i,a;n.changeToDefault(),(i=n._mediaRecorder)==null||i.stop(),(a=n._mediaStream)==null||a.getTracks().forEach(function(o){return o.stop()}),setTimeout(function(){s()},10)})}},{key:"record",value:function(){var n=this;navigator.mediaDevices.getUserMedia({audio:!0}).then(function(s){n.changeToActive(),n._mediaRecorder=new MediaRecorder(s),n._audioType.addPlaceholderAttachment(n.stop.bind(n),n._maxDurationSeconds),n._mediaStream=s,n._mediaRecorder.addEventListener("dataavailable",function(i){n.createFile(i)}),n._mediaRecorder.start()}).catch(function(s){console.error(s),n.stop()}).finally(function(){n._waitingForBrowserApproval=!1})}},{key:"createFile",value:function(n){var s=this,i=new Blob([n.data],{type:"audio/".concat(this._extension)}),a=Zd.getFileName(this._newFilePrefix||"audio",this._extension),o=new File([i],a,{type:i.type}),l=new FileReader;l.readAsDataURL(o),l.onload=function(u){s._audioType.completePlaceholderAttachment(o,u.target.result)}}}])}(qd),tb=`<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.0//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg xmlns="http://www.w3.org/2000/svg" stroke="currentColor" fill="none" stroke-width="1" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
  <line x1="22" y1="2" x2="11" y2="14"></line>
  <polygon points="22 2 15 22 11 14 2 10 22 2"></polygon>
</svg>
`,ku=function(){function e(){w(this,e)}return C(e,null,[{key:"resetSubmit",value:function(t,n){n?t.unsetCustomStateStyles(["loading","submit"]):t.unsetCustomStateStyles(["stop","loading","submit"]),t.reapplyStateStyle("submit")}},{key:"overwriteDefaultStyleWithSubmit",value:function(t,n){if(t.submit){var s=JSON.parse(JSON.stringify(t[n]||{}));Ht.overwritePropertyObjectFromAnother(s,t.submit,["container","default"]),Ht.overwritePropertyObjectFromAnother(s,t.submit,["text","styles","default"]),Ht.overwritePropertyObjectFromAnother(s,t.submit,["svg","styles","default"]),t[n]=s}}},{key:"setUpDisabledButton",value:function(t){Ht.setPropertyValueIfDoesNotExist(t,["submit","container","default","backgroundColor"],""),Ht.setPropertyValueIfDoesNotExist(t,["disabled","container","default","backgroundColor"],"unset"),Ht.setPropertyValueIfDoesNotExist(t.submit,["svg","styles","default","filter"],""),Ht.setPropertyValueIfDoesNotExist(t.disabled,["svg","styles","default","filter"],"brightness(0) saturate(100%) invert(70%) sepia(0%) saturate(5564%) hue-rotate(207deg) brightness(100%) contrast(97%)"),Ht.setPropertyValueIfDoesNotExist(t.disabled,["text","styles","default","color"],"grey"),e.overwriteDefaultStyleWithSubmit(t,"disabled")}},{key:"process",value:function(t){var n=JSON.parse(JSON.stringify(t||{}));return e.overwriteDefaultStyleWithSubmit(n,"loading"),e.overwriteDefaultStyleWithSubmit(n,"stop"),t!=null&&t.alwaysEnabled||e.setUpDisabledButton(n),n}}])}(),Bs=function(e){function r(t,n,s,i,a,o){var l;w(this,r);var u=ku.process(t.submitButtonStyles),c=tb;return l=ee(this,r,[r.createButtonContainerElement(),c,u==null?void 0:u.position,u]),l._isSVGLoadingIconOverriden=!1,l.status={requestInProgress:!1,loadingActive:!1},l._messages=s,l._textInput=n,l._fileAttachments=a,l._innerElements=l.createInnerElementsForStates(),l._abortStream=new AbortController,l._stopClicked={listener:function(){}},l._serviceIO=i,l._alwaysEnabled=!!(u!=null&&u.alwaysEnabled),t.disableSubmitButton=l.disableSubmitButton.bind(tr(l),i),l.attemptOverwriteLoadingStyle(t),o.microphone&&l.setUpSpeechToText(o.microphone.button,t.speechToText),setTimeout(function(){var d;l._validationHandler=t._validationHandler,l.assignHandlers(l._validationHandler),(d=l._validationHandler)==null||d.call(tr(l))}),l}return te(r,e),C(r,[{key:"createInnerElementsForStates",value:function(){var n=this.createCustomElements(),s=n.submit,i=n.loading,a=n.stop;return{submit:s,loading:i||[r.createLoadingIconElement()],stop:a||[r.createStopIconElement()],disabled:this.createDisabledIconElement(s)}}},{key:"createCustomElements",value:function(){var n=this,s=un.createCustomElements("submit",this.svg,this.customStyles),i={loading:void 0,stop:void 0};return Object.keys(i).forEach(function(a){var o=a,l=un.createCustomElements(o,n.svg,n.customStyles);l&&(i[o]=l)}),i.submit=s||this.buildDefaultIconElement("submit-icon"),i}},{key:"createDisabledIconElement",value:function(n){return un.createCustomElements("disabled",this.svg,this.customStyles)||[n[0].cloneNode(!0)]}},{key:"attemptOverwriteLoadingStyle",value:function(n){var s,i,a,o,l,u,c,d,h;if(!((i=(s=this.customStyles)==null?void 0:s.submit)!=null&&i.svg||(l=(o=(a=this.customStyles)==null?void 0:a.loading)==null?void 0:o.svg)!=null&&l.content||(d=(c=(u=this.customStyles)==null?void 0:u.loading)==null?void 0:c.text)!=null&&d.content)&&(n.displayLoadingBubble===void 0||n.displayLoadingBubble===!0)){var f=document.createElement("style");f.textContent=`
        .loading-button > * {
          filter: brightness(0) saturate(100%) invert(72%) sepia(0%) saturate(3044%) hue-rotate(322deg) brightness(100%)
            contrast(96%) !important;
        }`,(h=n.shadowRoot)==null||h.appendChild(f),this._isSVGLoadingIconOverriden=!0}}},{key:"assignHandlers",value:function(n){this._serviceIO.completionsHandlers={onFinish:this.resetSubmit.bind(this,n)},this._serviceIO.streamHandlers={onOpen:this.changeToStopIcon.bind(this),onClose:this.resetSubmit.bind(this,n),abortStream:this._abortStream,stopClicked:this._stopClicked};var s=this._serviceIO.stream;W(s)=="object"&&typeof s.simulation=="number"&&(this._serviceIO.streamHandlers.simulationInterim=s.simulation)}},{key:"setUpSpeechToText",value:function(n,s){this._microphoneButton=n,this._stopSTTAfterSubmit=W(s)=="object"?s.stopAfterSubmit:!1}},{key:"resetSubmit",value:function(n){this.status.requestInProgress=!1,this.status.loadingActive=!1,n()}},{key:"submitFromInput",value:function(){var t=A(v().mark(function s(){var i,a;return v().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this._fileAttachments.completePlaceholders();case 2:i=this._fileAttachments.getAllFileData(),this._textInput.isTextInputEmpty()?this.attemptSubmit({text:"",files:i}):(a=this._textInput.inputElementRef.innerText.trim(),this.attemptSubmit({text:a,files:i}));case 4:case"end":return l.stop()}},s,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"programmaticSubmit",value:function(){var t=A(v().mark(function s(i){var a=this,o;return v().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:typeof i=="string"&&(i=lt.processSubmitUserMessage(i)),o={text:i.text},i.files&&(o.files=Array.from(i.files).map(function(c){return{file:c,type:mo.getTypeFromBlob(c)}})),setTimeout(function(){return a.attemptSubmit(o,!0)});case 3:case"end":return u.stop()}},s)}));function n(s){return t.apply(this,arguments)}return n}()},{key:"attemptSubmit",value:function(){var t=A(v().mark(function s(i){var a,o,l,u,c,d,h,f=arguments;return v().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return a=f.length>1&&f[1]!==void 0?f[1]:!1,p.next=3,(o=this._validationHandler)==null?void 0:o.call(this,a?i:void 0);case 3:if(p.t0=p.sent,p.t1=!1,p.t0!==p.t1){p.next=7;break}return p.abrupt("return");case 7:if(this.changeToLoadingIcon(),this._textInput.clear(),p.t2=typeof this._messages.focusMode!="boolean"&&(l=this._messages.focusMode)!=null&&l.fade,!p.t2){p.next=13;break}return p.next=13,wd.fadeAnimation(this._messages.elementRef,this._messages.focusMode.fade);case 13:return p.next=15,this.addNewMessage(i);case 15:return this._serviceIO.isWebModel()||this._messages.addLoadingMessage(),d=(u=i.files)==null?void 0:u.map(function(y){return y.file}),h={text:i.text===""?void 0:i.text,files:d},p.next=19,this._serviceIO.callAPI(h,this._messages);case 19:(c=this._fileAttachments)==null||c.removeAllFiles();case 20:case"end":return p.stop()}},s,this)}));function n(s){return t.apply(this,arguments)}return n}()},{key:"addNewMessage",value:function(){var t=A(v().mark(function s(i){var a,o,l;return v().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(a=i.text,o=i.files,l={role:Z.USER_ROLE},a&&(l.text=a),c.t0=o,!c.t0){c.next=8;break}return c.next=7,this._messages.addMultipleFiles(o);case 7:l.files=c.sent;case 8:this._serviceIO.sessionId&&(l._sessionId=this._serviceIO.sessionId),Object.keys(l).length>0&&this._messages.addNewMessage(l);case 10:case"end":return c.stop()}},s,this)}));function n(s){return t.apply(this,arguments)}return n}()},{key:"stopStream",value:function(){var n;this._abortStream.abort(),(n=this._stopClicked)==null||n.listener(),this._validationHandler&&this.resetSubmit(this._validationHandler)}},{key:"changeToStopIcon",value:function(){this._serviceIO.websocket||(this.elementRef.classList.remove(r.LOADING_CLASS,r.DISABLED_CLASS,r.SUBMIT_CLASS),Fe.removeAriaAttributes(this.elementRef),this.changeElementsByState(this._innerElements.stop),this.reapplyStateStyle("stop",["loading","submit"]),this.elementRef.onclick=this.stopStream.bind(this),this.status.loadingActive=!1)}},{key:"changeToLoadingIcon",value:function(){this._serviceIO.websocket||(this._isSVGLoadingIconOverriden||this.changeElementsByState(this._innerElements.loading),this.elementRef.classList.remove(r.SUBMIT_CLASS,r.DISABLED_CLASS),Fe.removeAriaDisabled(this.elementRef),this.elementRef.classList.add(r.LOADING_CLASS),Fe.addAriaBusy(this.elementRef),this.reapplyStateStyle("loading",["submit"]),this.elementRef.onclick=function(){},this.status.requestInProgress=!0,this.status.loadingActive=!0)}},{key:"changeToSubmitIcon",value:function(){var n=this;this.elementRef.classList.contains(r.SUBMIT_CLASS)||(this.elementRef.classList.remove(r.LOADING_CLASS,r.DISABLED_CLASS),Fe.removeAriaAttributes(this.elementRef),this.elementRef.classList.add(r.SUBMIT_CLASS),this.changeElementsByState(this._innerElements.submit),ku.resetSubmit(this,this.status.loadingActive),this.elementRef.onclick=function(){var s;n.submitFromInput(),(s=n._microphoneButton)!=null&&s.isActive&&po.toggleSpeechAfterSubmit(n._microphoneButton.elementRef,!!n._stopSTTAfterSubmit)})}},{key:"changeToDisabledIcon",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this._alwaysEnabled&&!n?this.changeToSubmitIcon():this.elementRef.classList.contains(r.DISABLED_CLASS)||(this.elementRef.classList.remove(r.LOADING_CLASS,r.SUBMIT_CLASS),Fe.removeAriaBusy(this.elementRef),this.elementRef.classList.add(r.DISABLED_CLASS),Fe.addAriaDisabled(this.elementRef),this.changeElementsByState(this._innerElements.disabled),this.reapplyStateStyle("disabled",["submit"]),this.elementRef.onclick=function(){})}},{key:"disableSubmitButton",value:function(n,s){var i;n.isSubmitProgrammaticallyDisabled=s!==!1,!(this.status.requestInProgress||this.status.loadingActive)&&(s===!1?(i=this._validationHandler)==null||i.call(this):this.changeToDisabledIcon(!0))}}],[{key:"createButtonContainerElement",value:function(){var n=document.createElement("div");return n.classList.add("input-button"),n}},{key:"createLoadingIconElement",value:function(){var n=document.createElement("div");return n.classList.add("loading-submit-button"),n}},{key:"createStopIconElement",value:function(){var n=document.createElement("div");return n.id="stop-icon",n}}])}(On);Bs.SUBMIT_CLASS="submit-button",Bs.LOADING_CLASS="loading-button",Bs.DISABLED_CLASS="disabled-button";var nb=Bs,rb=`<?xml version="1.0" encoding="utf-8"?>
<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
  <path d="M27.1 14.313V5.396L24.158 8.34c-2.33-2.325-5.033-3.503-8.11-3.503C9.902 4.837 4.901 9.847 4.899 16c.001 6.152 5.003 11.158 11.15 11.16 4.276 0 9.369-2.227 10.836-8.478l.028-.122h-3.23l-.022.068c-1.078 3.242-4.138 5.421-7.613 5.421a8 8 0 0 1-5.691-2.359A7.993 7.993 0 0 1 8 16.001c0-4.438 3.611-8.049 8.05-8.049 2.069 0 3.638.58 5.924 2.573l-3.792 3.789H27.1z"/>
</svg>
`,sb=`<?xml version="1.0" encoding="utf-8"?>
<svg viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M0 16q0 3.264 1.28 6.208t3.392 5.12 5.12 3.424 6.208 1.248 6.208-1.248 5.12-3.424 3.392-5.12 1.28-6.208-1.28-6.208-3.392-5.12-5.088-3.392-6.24-1.28q-3.264 0-6.208 1.28t-5.12 3.392-3.392 5.12-1.28 6.208zM4 16q0-3.264 1.6-6.016t4.384-4.352 6.016-1.632 6.016 1.632 4.384 4.352 1.6 6.016-1.6 6.048-4.384 4.352-6.016 1.6-6.016-1.6-4.384-4.352-1.6-6.048z"></path>
</svg>
`,ib=`<?xml version="1.0" encoding="utf-8"?>
<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">
  <path d="M195.2 195.2a64 64 0 0 1 90.496 0L512 421.504 738.304 195.2a64 64 0 0 1 90.496 90.496L602.496 512 828.8 738.304a64 64 0 0 1-90.496 90.496L512 602.496 285.696 828.8a64 64 0 0 1-90.496-90.496L421.504 512 195.2 285.696a64 64 0 0 1 0-90.496z"/>
</svg>`,ab=`<?xml version="1.0" encoding="utf-8"?>
<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M4.89163 13.2687L9.16582 17.5427L18.7085 8" stroke="#000000" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>`,ob=function(e){function r(t,n,s,i){var a;w(this,r),a=ee(this,r,[t,["modal-content","modal-camera-content"],s]),a._stopped=!1,a._format="image/png",a._canvas=document.createElement("canvas"),a._canvas.classList.add("camera-modal-canvas");var o=a.addButtonsAndTheirEvents(n),l=o.captureButton,u=o.submitButton;return a._captureButton=l,a._submitButton=u,a._captureIcon=a._captureButton.children[0],a._refreshIcon=Wt.createSVGElement(rb),a._refreshIcon.classList.add("modal-svg-button-icon","modal-svg-refresh-icon"),(i==null?void 0:i.format)==="jpeg"&&(a._format="image/jpeg"),i!=null&&i.dimensions&&(a._dimensions=i.dimensions),a._contentRef.appendChild(a._canvas),a.extensionCloseCallback=a.stop,a}return te(r,e),C(r,[{key:"addButtonsAndTheirEvents",value:function(n){var s=Lr.createSVGButton(sb);s.classList.add("modal-svg-camera-button"),s.children[0].classList.add("modal-svg-camera-icon");var i=this.addCloseButton(ib,!0);i.classList.add("modal-svg-close-button"),i.children[0].classList.add("modal-svg-close-icon");var a=Lr.createSVGButton(ab);return a.classList.add("modal-svg-submit-button"),this.addButtons(s,a),this.addButtonEvents(s,i,a,n),{captureButton:s,submitButton:a}}},{key:"addButtonEvents",value:function(n,s,i,a){var o=this;n.onclick=function(){o.capture()},s.addEventListener("click",this.stop.bind(this)),i.onclick=function(){var l=o.getFile();l&&vo.addFilesToType([l],[a]),o.stop(),o.close()}}},{key:"stop",value:function(){var n=this;this._mediaStream&&this._mediaStream.getTracks().forEach(function(s){return s.stop()}),this._stopped=!0,setTimeout(function(){n._captureButton.replaceChildren(n._captureIcon),n._captureButton.classList.replace("modal-svg-refresh-button","modal-svg-camera-button");var s=n._canvas.getContext("2d");s==null||s.clearRect(0,0,n._canvas.width,n._canvas.height)},Lr.MODAL_CLOSE_TIMEOUT_MS)}},{key:"start",value:function(){var n=this;this._dataURL=void 0,this._submitButton.classList.add("modal-svg-submit-disabled"),this._stopped=!1,navigator.mediaDevices.getUserMedia({video:this._dimensions||!0}).then(function(s){if(n._mediaStream=s,!n.isOpen())return n.stop();var i=document.createElement("video");i.srcObject=s,i.play(),requestAnimationFrame(n.updateCanvas.bind(n,i,n._canvas))}).catch(function(s){console.error(s),n.stop(),n.close()})}},{key:"capture",value:function(){this._dataURL?(this._captureButton.replaceChildren(this._captureIcon),this._captureButton.classList.replace("modal-svg-refresh-button","modal-svg-camera-button"),this._submitButton.classList.add("modal-svg-submit-disabled"),this._dataURL=void 0):(this._captureButton.replaceChildren(this._refreshIcon),this._captureButton.classList.replace("modal-svg-camera-button","modal-svg-refresh-button"),this._submitButton.classList.remove("modal-svg-submit-disabled"),this._dataURL=this._canvas.toDataURL())}},{key:"getFile",value:function(){if(this._dataURL){for(var n=atob(this._dataURL.split(",")[1]),s=new Array(n.length),i=0;i<n.length;i++)s[i]=n.charCodeAt(i);var a=new Uint8Array(s),o=new Blob([a],{type:this._format}),l=this._format==="image/jpeg"?"jpeg":"png",u=Zd.getFileName(this._newFilePrefix||"photo",l);return new File([o],u,{type:o.type})}}},{key:"updateCanvas",value:function(n,s){if(!this._stopped){if(!this._dataURL){s.width=n.videoWidth,s.height=n.videoHeight;var i=s.getContext("2d");i==null||i.drawImage(n,0,0,s.width,s.height)}requestAnimationFrame(this.updateCanvas.bind(this,n,s))}}},{key:"openCameraModal",value:function(n){this.displayModalElements(),n.start()}}],[{key:"createCameraModalFunc",value:function(n,s,i,a){var o=new r(n,s,i,a);return o.openCameraModal.bind(o,o)}}])}(Lr),lb=`<?xml version="1.0" encoding="utf-8"?>
<svg viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M29 7h-4.599l-2.401-4h-12l-2.4 4h-4.6c-1 0-3 1-3 2.969v16.031c0 1.657 1.5 3 2.792 3h26.271c1.313 0 2.938-1.406 2.938-2.968v-16.032c0-1-1-3-3-3zM30 26.032c0 0.395-0.639 0.947-0.937 0.969h-26.265c-0.232-0.019-0.797-0.47-0.797-1v-16.031c0-0.634 0.851-0.953 1-0.969h5.732l2.4-4h9.802l1.785 3.030 0.55 0.97h5.731c0.705 0 0.99 0.921 1 1v16.032zM16 10c-3.866 0-7 3.134-7 7s3.134 7 7 7 7-3.134 7-7-3.134-7-7-7zM16 22c-2.757 0-5-2.243-5-5s2.243-5 5-5 5 2.243 5 5-2.243 5-5 5z"></path>
</svg>`,ub=function(e){function r(t,n,s){var i;w(this,r);var a,o,l,u,c=(a=s==null?void 0:s.button)==null?void 0:a.position,d=((u=(l=(o=s==null?void 0:s.button)==null?void 0:o.styles)==null?void 0:l.text)==null?void 0:u.content)||"Photo";i=ee(this,r,[r.createButtonElement(),lb,c,(s==null?void 0:s.button)||{},d]);var h=i.createInnerElementsForStates(i.customStyles);return s&&i.addClickEvent(t,n,s.modalContainerStyle,s.files),i.changeElementsByState(h.styles),i.reapplyStateStyle("styles"),i}return te(r,e),C(r,[{key:"createInnerElementsForStates",value:function(n){return{styles:this.createInnerElements("camera-icon","styles",n)}}},{key:"addClickEvent",value:function(n,s,i,a){var o=ob.createCameraModalFunc(n,s,i,a);this.elementRef.onclick=o}}],[{key:"createButtonElement",value:function(){var n=document.createElement("div");return n.classList.add("input-button"),n}}])}(On),cb=function(){function e(r,t,n,s){w(this,e),this.elementRef=e.createPanelElement(r.inputAreaStyle);var i={},a=this.createFileUploadComponents(r,n,s,i),o=new ld(r,n,a);r.speechToText&&!i.microphone&&(i.microphone={button:new po(r,o,t.addNewErrorMessage.bind(t))});var l=new nb(r,o,t,n,a,i);o.submit=l.submitFromInput.bind(l),Q0.attach(r,n,o,a,l),r.submitUserMessage=l.programmaticSubmit.bind(l),i.submit={button:l},r.customButtons&&qr.add(r,i),e.addElements(this.elementRef,o,i,s,a,r.dropupStyles)}return C(e,[{key:"createFileUploadComponents",value:function(t,n,s,i){var a,o,l,u,c=new vo(this.elementRef,t.attachmentContainerStyle,n.demo);if(e.createUploadButtons(t,n.fileTypes||{},c,s,i),(a=n.camera)!=null&&a.files){var d=((o=i.images)==null?void 0:o.fileType)||c.addType(t,n.camera.files,"images");i.camera={button:new ub(s,d,n.camera)}}if((l=n.recordAudio)!=null&&l.files){var h=((u=i.audio)==null?void 0:u.fileType)||c.addType(t,n.recordAudio.files,"audio");i.microphone={button:new eb(h,n.recordAudio)}}return Eu.isEnabled(c,t.dragAndDrop)&&Eu.create(s,c,t.dragAndDrop),c}}],[{key:"createPanelElement",value:function(t){var n=document.createElement("div");return n.id="input",Object.assign(n.style,t),n}},{key:"createUploadButtons",value:function(t,n,s,i,a){Object.keys(n).forEach(function(o){var l=o,u=n[l];if(u.files){var c=s.addType(t,u.files,l),d=L0[l],h=d.id,f=d.svgString,m=d.dropupText,p=new Z0(i,c,u,h,f,m);a[l]={button:p,fileType:c}}})}},{key:"addElements",value:function(t,n,s,i,a,o){pt.addElements(t,n.elementRef);var l=Ys.create(),u=A0.addButtons(l,s,i,o);k0.set(n.inputElementRef,l,a.elementRef,u),Ys.add(t,l)}}])}(),db=function(){function e(){w(this,e)}return C(e,null,[{key:"createElements",value:function(t,n,s){var i=document.createElement("div");i.id="chat-view";var a=new Ta(t,n,s);n.websocket&&is.createConnection(n,a);var o=new cb(t,a,n,i);return pt.addElements(i,a.elementRef,o.elementRef),i}},{key:"render",value:function(t,n,s,i){var a=e.createElements(t,s,i);n.replaceChildren(a),s.isCustomView()&&s.setUpView(a,n)}}])}(),fb=`#validate-property-key-view{height:100%;position:relative;display:flex;justify-content:center;align-items:center;padding:8px}#loading-validate-key-property{display:inline-block;width:50px;height:50px}#loading-validate-key-property:after{content:" ";display:block;width:38px;height:38px;margin:1px;border-radius:50%;border:5px solid #5fb2ff;border-color:#5fb2ff transparent #5fb2ff transparent;animation:loading-spinner 1.4s linear infinite}#deep-chat-openai-realtime-container{height:100%;width:100%}#deep-chat-openai-realtime-avatar-container{height:60%;width:100%;display:flex;justify-content:center;align-items:center}#deep-chat-openai-realtime-avatar{border-radius:50%;height:110px;border:1px solid rgb(215,215,215);padding:8px;-webkit-user-select:none;user-select:none;margin-top:20px}#deep-chat-openai-realtime-buttons-container{height:40%;display:flex;position:relative}.deep-chat-openai-realtime-button-container{height:100%;width:50%;display:flex;justify-content:center;align-items:center}.deep-chat-openai-realtime-button{width:70px;height:70px;border-radius:50%;display:flex;justify-content:center;align-items:center;cursor:pointer}.deep-chat-openai-realtime-button-default{background-color:#e3e3e3}.deep-chat-openai-realtime-button-default:hover{background-color:#d4d4d4}.deep-chat-openai-realtime-button-default:active{background-color:#c5c5c5}.deep-chat-openai-realtime-button-loading{opacity:.7;pointer-events:none}.deep-chat-openai-realtime-microphone-active{background-color:#ffe7e7}.deep-chat-openai-realtime-microphone-active:hover{background-color:#ffdede}.deep-chat-openai-realtime-microphone-active:active{background-color:#ffd2d2}.deep-chat-openai-realtime-microphone>*{height:30px;width:30px}.deep-chat-openai-realtime-microphone-active>*{filter:brightness(0) saturate(100%) invert(35%) sepia(60%) saturate(1360%) hue-rotate(325deg) brightness(95%) contrast(92%)}.deep-chat-openai-realtime-toggle>*{height:32px;width:32px;padding-left:3px;filter:brightness(0) saturate(100%) invert(22%) sepia(0%) saturate(4537%) hue-rotate(208deg) brightness(105%) contrast(91%)}.deep-chat-openai-realtime-button-unavailable{opacity:.45;pointer-events:none}#deep-chat-openai-realtime-error{color:red;position:absolute;top:calc(50% + 40px);left:50%;transform:translate(-50%,-50%);font-size:17px}#deep-chat-openai-realtime-loading{position:absolute;font-size:15px;top:50%;left:50%;transform:translate(-50%,-50%)}#insert-key-view{height:100%;position:relative}#insert-key-contents{text-align:center;position:absolute;top:44%;left:50%;transform:translate(-50%,-50%);width:82%;display:flex;max-width:700px}#insert-key-title{margin-bottom:15px}#insert-key-input-container{margin-right:2.7em;width:calc(100% - 80px)}#insert-key-input{padding:.3em 1.7em .3em .3em;border-width:1px;border-style:solid;border-radius:3px;width:100%;font-size:inherit}.insert-key-input-valid{border-color:gray}.insert-key-input-invalid{border-color:red}#visibility-icon-container{position:relative;float:right;cursor:pointer;-webkit-user-select:none;user-select:none}.visibility-icon{filter:brightness(0) saturate(100%) invert(63%) sepia(1%) saturate(9%) hue-rotate(43deg) brightness(98%) contrast(92%);position:absolute;right:-1.7em;top:-1.43em}#visible-icon{top:-1.4em}.visibility-icon:hover{filter:unset}.visibility-icon>*{pointer-events:none}#start-button{border:1px solid grey;color:#454545;border-radius:4px;width:3em;display:flex;justify-content:center;align-items:center;cursor:pointer;padding:.28em .3em;-webkit-user-select:none;user-select:none;background-color:#fff}#start-button:hover{background-color:#f2f2f2}#start-button:active{background-color:#d2d2d2}#insert-key-help-text-container{width:100%;position:absolute;margin-top:32px;margin-bottom:20px}#insert-key-help-text-contents{width:100%;position:absolute}#insert-key-input-invalid-text{display:block;margin-top:1em;margin-bottom:.5em;color:red}.insert-key-input-help-text{display:block;margin-top:16px}#loading-key{display:inline-block;width:16px;height:16px}#loading-key:after{content:" ";display:block;width:11px;height:11px;margin:1px;border-radius:50%;border:2px solid #0084ff;border-color:#0084ff transparent #0084ff transparent;animation:loading-spinner 1.2s linear infinite}#error-view{color:red;font-size:1.2em;line-height:1.3em;margin-top:-5px;text-align:center;height:100%;display:flex;justify-content:center;align-items:center;padding-left:8px;padding-right:8px}@keyframes loading-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.intro-panel{position:absolute;display:flex;justify-content:center;right:0;bottom:0;left:0;margin:auto;height:fit-content;top:-2.5em}#internal-intro-panel{width:250px;height:min-content;display:block;border-radius:5px;overflow:auto;border:1px solid rgb(203,203,203);padding:10px;max-height:calc(100% - 6.8em)}#internal-intro-panel>p{margin-block-start:.8em;margin-block-end:.8em}pre code.hljs{display:block;overflow-x:auto;padding:1em}code.hljs{padding:3px 5px}/*!
  Theme: a11y-dark
  Author: @ericwbailey
  Maintainer: @ericwbailey

  Based on the Tomorrow Night Eighties theme: https://github.com/isagalaev/highlight.js/blob/master/src/styles/tomorrow-night-eighties.css
*/.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast: active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}#messages{overflow:auto}.outer-message-container:last-child{margin-bottom:5px}.inner-message-container{display:flex;margin-left:auto;margin-right:auto;width:calc(97.5% - 24px);max-width:100%}.message-bubble{margin-top:10px;word-wrap:break-word;width:fit-content;max-width:60%;border-radius:10px;padding:.42em .55em;height:fit-content;line-height:1.26em}.user-message-text{color:#fff;background-color:#0084ff;margin-right:0;margin-left:auto}.ai-message-text{color:#000;background-color:#e4e6eb;margin-left:0;margin-right:auto}.deep-chat-last-group-messages-active{height:100%}.loading-history-message-full-view{position:absolute;height:70%;width:100%;display:flex;align-items:center}.loading-history-message-small{height:20px;margin-bottom:30px}.loading-history-message-small>div>div{scale:.6}.loading-history-message{margin-top:0;width:100%;max-width:100%;display:flex;justify-content:center;background-color:unset}.loading-history{width:70px}.loading-history div{position:absolute;width:var(--loading-history-width);height:var(--loading-history-height);margin:var(--loading-history-margin);border:var(--loading-history-border);border-radius:50%;animation:loading-spinner 1.2s cubic-bezier(.5,0,.5,1) infinite;border-color:var(--loading-history-color) transparent transparent transparent}.loading-history div:nth-child(1){animation-delay:-.45s}.loading-history div:nth-child(2){animation-delay:-.3s}.loading-history div:nth-child(3){animation-delay:-.15s}.html-message{max-width:unset}.error-message-text{margin:14px auto 10px;background-color:#f4c0c0;color:#474747;text-align:center;max-width:95%}.deep-chat-loading-message-dots-container{width:1em;padding:.6em .75em .6em 1.3em}.loading-message-dots{position:relative;width:.45em;height:.45em;border-radius:5px;background-color:var(--loading-message-color);color:var(--loading-message-color);animation:loading-message-dots 1s infinite linear alternate;animation-delay:.5s}.loading-message-dots:before,.loading-message-dots:after{content:"";display:inline-block;position:absolute;top:0}.loading-message-dots:before{left:-.7em;width:.45em;height:.45em;border-radius:5px;background-color:var(--loading-message-color);color:var(--loading-message-color);animation:loading-message-dots 1s infinite alternate;animation-delay:0s}.loading-message-dots:after{left:.7em;width:.45em;height:.45em;border-radius:5px;background-color:var(--loading-message-color);color:var(--loading-message-color);animation:loading-message-dots 1s infinite alternate;animation-delay:1s}@keyframes loading-message-dots{0%{background-color:var(--loading-message-color)}50%,to{background-color:var(--loading-message-color-fade)}}.message-bubble>p:first-child{margin-top:0}.message-bubble>p:last-child{margin-bottom:0}pre{overflow:auto;display:block;word-break:break-all;word-wrap:break-word;border-radius:7px;background:#2b2b2b;color:#f8f8f2;margin-top:.8em;margin-bottom:.8em;padding:.6em;font-size:.9em;line-height:1.5em}.image-message{padding:0;display:flex;background-color:#ddd}.image-message>*,.image-message>*>*{width:100%;border-radius:8px;display:flex}.audio-message{width:60%;max-width:300px;height:2.2em;max-height:54px;padding:0;background-color:unset}.audio-player{width:100%;height:100%}.audio-player-safari{height:fit-content;width:40px}.audio-player-safari-left{float:left}.audio-player-safari-right{float:right}.any-file-message{padding:1px}.any-file-message-contents{display:flex}.any-file-message-icon-container{width:1.3em;min-width:1.3em;position:relative;border-radius:4px;margin-left:6px;margin-right:2px}.any-file-message-icon{background-color:#fff;border-radius:4px;position:absolute;width:1em;height:1.25em;padding:1px;margin-top:auto;margin-bottom:auto;top:0;bottom:0}.any-file-message-text{padding-top:5px;overflow-wrap:anywhere;padding-bottom:5px;padding-right:7px}.message-bubble>a{color:inherit}.left-item-position{margin-right:10px}.right-item-position{margin-left:10px}.role-hidden{display:none}.avatar{padding-top:5px;width:1.5em;height:1.5em;border-radius:1px}.avatar-container{margin-top:9px}.name{margin-top:16px;font-size:15px}#drag-and-drop{position:absolute;display:none;z-index:10;height:calc(100% - 10px);width:calc(100% - 10px);background-color:#70c6ff4d;border:5px dashed #6dafff}#file-attachment-container{position:absolute;height:3.6em;width:calc(80% - 4px);top:-2.5em;border-radius:5px;overflow:auto;text-align:left;background-color:#d7d7d73b;padding-left:4px}.file-attachment{width:2.85em;height:2.85em;display:inline-flex;margin-right:.6em;margin-bottom:.44em;margin-top:4px;position:relative;background-color:#fff;border-radius:5px}.image-attachment{width:100%;height:100%;object-fit:cover;border-radius:5px}.border-bound-attachment{width:calc(100% - 2px);height:calc(100% - 2px);border:1px solid #c3c3c3;border-radius:5px;overflow:hidden}.border-bound-attachment-safari{width:calc(100% - 1px);height:calc(100% - 1px)}.audio-attachment-icon-container{cursor:pointer}.audio-attachment-icon-container:hover{background-color:#f8f8f8}.attachment-icon{left:0;right:0;bottom:0;top:2px;margin:auto;position:absolute;width:25px;-webkit-user-select:none;user-select:none}.not-removable-attachment-icon{top:0;right:0;bottom:0;left:0}.play-icon{filter:brightness(0) saturate(100%) invert(17%) sepia(0%) saturate(1392%) hue-rotate(67deg) brightness(98%) contrast(97%)}.stop-icon{filter:brightness(0) saturate(100%) invert(29%) sepia(90%) saturate(1228%) hue-rotate(198deg) brightness(93%) contrast(98%)}.audio-placeholder-text-3-digits{padding-left:.26rem}.audio-placeholder-text-4-digits{padding-left:.1rem}.any-file-attachment{padding:2px 0}.file-attachment-text-container{position:absolute;width:inherit;display:flex;align-items:center;height:100%;top:-1px}.audio-placeholder-text-3-digits-container{padding-top:1px;cursor:default}.any-file-attachment-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;padding-left:.13em;margin-left:auto;margin-right:auto}.remove-file-attachment-button{height:1.25em;width:1.25em;border:1px solid #cfcfcf;border-radius:25px;background-color:#fff;top:-4px;right:-5px;position:absolute;display:flex;justify-content:center;cursor:pointer;-webkit-user-select:none;user-select:none}.remove-file-attachment-button:hover{background-color:#e4e4e4}.remove-file-attachment-button:active{background-color:#d7d7d7}.x-icon{color:#4e4e4e;top:-.075em;position:relative;font-size:1.05em}.modal{display:none;flex-direction:column;align-items:center;justify-content:center;position:absolute;width:80%;max-width:420px;max-height:80%;margin:auto;top:0;right:0;bottom:0;left:0;z-index:3}.modal-content{border-top:1px solid rgb(217,217,217);border-left:1px solid rgb(217,217,217);border-right:1px solid rgb(217,217,217);border-top-left-radius:inherit;border-top-right-radius:inherit;background-color:#fff;overflow-y:auto;height:fit-content;max-height:calc(100% - 3.3em);width:100%}.modal-content>p{margin-left:1em;margin-right:1em}.modal-content>ul{margin-right:1em}.modal-button-panel{height:3.3em;border:1px solid;border-color:rgb(223,223,223) rgb(217,217,217) rgb(217,217,217);border-bottom-left-radius:inherit;border-bottom-right-radius:inherit;background-color:#fff;text-align:center;justify-content:center;display:flex;width:100%}.modal-button{min-width:2.5em;text-align:center;color:#fff;border-radius:5px;padding:.4em .4em .3em;height:1.25em;background-color:#3279b2;top:0;bottom:0;cursor:pointer;-webkit-user-select:none;user-select:none;margin:auto .31em}.modal-button:hover{background-color:#276da7}.modal-button:active{background-color:#1b5687}.modal-svg-button{padding:0 0 2px;width:2em;height:1.8em}.modal-svg-button-icon{width:100%;height:100%;filter:brightness(0) saturate(100%) invert(100%) sepia(15%) saturate(4%) hue-rotate(346deg) brightness(101%) contrast(102%)}#modal-background-panel{position:absolute;width:100%;height:100%;background-color:#00000042;z-index:2;display:none}.show-modal-background{animation:fadeInBackground .3s ease-in-out}@keyframes fadeInBackground{0%{opacity:0}to{opacity:1}}.show-modal{animation:fadeInModal .3s ease-in-out}@keyframes fadeInModal{0%{opacity:0;scale:.95}to{opacity:1;scale:1}}.hide-modal-background{animation:fadeOutBackground .2s ease-in-out}@keyframes fadeOutBackground{0%{opacity:1}to{opacity:0}}.hide-modal{animation:fadeOutModal .2s ease-in-out}@keyframes fadeOutModal{0%{opacity:1;scale:1}to{opacity:0;scale:.95}}.modal-camera-content{overflow:hidden;text-align:center;border:unset;height:100%;background-color:#2a2a2a;display:flex;justify-content:center}.camera-modal-canvas{max-width:100%;max-height:100%;margin-top:auto;margin-bottom:auto}.modal-svg-submit-button{background-color:green}.modal-svg-submit-button:hover{background-color:#007500}.modal-svg-submit-button:active{background-color:#006500}.modal-svg-submit-disabled{pointer-events:none;background-color:#747474}.modal-svg-close-button{height:1.56em;padding-top:.37em;padding-bottom:0;background-color:#c13e3e}.modal-svg-close-button:hover{background-color:#b43434}.modal-svg-close-button:active{background-color:#972929}.modal-svg-close-icon{width:80%;height:80%}.modal-svg-camera-button{height:1.6em;padding-top:.38em;padding-bottom:0}.modal-svg-camera-icon{height:76%}.modal-svg-refresh-icon{height:105%}.modal-svg-refresh-button{height:1.66em;padding-top:.11em;padding-bottom:.21em}.input-button-container{position:relative;z-index:1}.inside-right{position:absolute;right:calc(10% + .35em);bottom:.85em}.inside-left{position:absolute;left:calc(10% + .35em);bottom:.85em}.outside-left{position:absolute;right:calc(11px - .55em);bottom:.88em}.outside-right{position:absolute;left:calc(11px - .55em);bottom:.88em}#upload-images-icon{position:absolute;pointer-events:none;width:1.45em;height:1.45em;left:.11em;bottom:.08em;filter:brightness(0) saturate(100%) invert(43%) sepia(0%) saturate(740%) hue-rotate(77deg) brightness(99%) contrast(92%)}#upload-gifs-icon{position:absolute;pointer-events:none;width:1.5em;height:1.48em;left:.07em;bottom:.08em;filter:brightness(0) saturate(100%) invert(49%) sepia(0%) saturate(2586%) hue-rotate(12deg) brightness(93%) contrast(90%)}#upload-audio-icon{position:absolute;pointer-events:none;width:1.21em;height:1.21em;left:.17em;bottom:.2em;filter:brightness(0) saturate(100%) invert(15%) sepia(0%) saturate(337%) hue-rotate(125deg) brightness(91%) contrast(94%);transform:scaleX(.95)}#camera-icon{position:absolute;pointer-events:none;width:1.21em;height:1.21em;left:.23em;bottom:.2em;filter:brightness(0) saturate(100%) invert(52%) sepia(0%) saturate(161%) hue-rotate(164deg) brightness(91%) contrast(92%);transform:scaleX(.95)}#upload-mixed-files-icon{position:absolute;pointer-events:none;width:1.21em;height:1.21em;left:.25em;bottom:.2em;filter:brightness(0) saturate(100%) invert(53%) sepia(0%) saturate(36%) hue-rotate(74deg) brightness(98%) contrast(93%);transform:scaleX(.95)}#interim-text{color:gray}#microphone-button{padding-top:.5px}.outer-button-container>#microphone-button{padding-bottom:1px}#microphone-icon{position:absolute;pointer-events:none;width:1.21em;height:1.21em;left:.25em;bottom:.25em}.default-microphone-icon{filter:brightness(0) saturate(100%) invert(32%) sepia(0%) saturate(924%) hue-rotate(46deg) brightness(95%) contrast(99%)}.active-microphone-icon{filter:brightness(0) saturate(100%) invert(10%) sepia(97%) saturate(7495%) hue-rotate(0deg) brightness(101%) contrast(107%);border-radius:10px}.command-microphone-icon{filter:brightness(0) saturate(100%) invert(42%) sepia(96%) saturate(1067%) hue-rotate(77deg) brightness(99%) contrast(102%)}.unsupported-microphone{display:none}#submit-icon{height:100%;filter:brightness(0) saturate(100%) invert(32%) sepia(0%) saturate(924%) hue-rotate(46deg) brightness(95%) contrast(99%);width:1.21em}#stop-icon{background-color:#acacac;position:absolute;width:.95em;height:.95em;left:.35em;bottom:.35em;border-radius:2px}.submit-button-enlarged{scale:1.1;margin-right:.3em;margin-left:.3em}.loading-submit-button{position:relative;left:calc(-9990px + .275em);width:.22em;height:.22em;border-radius:5px;background-color:#848484;color:#848484;box-shadow:9990px 0 #848484,calc(9990px + .44em) 0 0 0 #848484,calc(9990px + .8em) 0 0 0 #848484;animation:loading-submit-button 1.5s infinite linear;bottom:-.75em}@keyframes loading-submit-button{0%{box-shadow:9990px 0 #848484,calc(9990px + .44em) 0 0 0 #848484,calc(9990px + .8em) 0 0 0 #848484}16.667%{box-shadow:9990px -6px #848484,calc(9990px + .44em) 0 0 0 #848484,calc(9990px + .8em) 0 0 0 #848484}33.333%{box-shadow:9990px 0 #848484,calc(9990px + .44em) 0 0 0 #848484,calc(9990px + .8em) 0 0 0 #848484}50%{box-shadow:9990px 0 #848484,calc(9990px + .44em) -6px 0 0 #848484,calc(9990px + .8em) 0 0 0 #848484}66.667%{box-shadow:9990px 0 #848484,calc(9990px + .44em) 0 0 0 #848484,calc(9990px + .8em) 0 0 0 #848484}83.333%{box-shadow:9990px 0 #848484,calc(9990px + .44em) 0 0 0 #848484,calc(9990px + .8em) -6px 0 0 #848484}to{box-shadow:9990px 0 #848484,calc(9990px + .44em) 0 0 0 #848484,calc(9990px + .8em) 0 0 0 #848484}}.input-button{border-radius:4px;cursor:pointer;margin-bottom:.2em;-webkit-user-select:none;user-select:none}.input-button-svg{width:1.65em;height:1.65em}.input-button-svg-text{padding:1px;height:1.65em;display:flex}.input-button-svg-text>svg{padding:.22rem}.input-button-svg-text>div{margin-left:2px}.input-button:hover,.input-button:focus-visible{background-color:#9c9c9c2e}.input-button:active{background-color:#9c9c9c5e}.input-button:active:not(:hover){background-color:transparent}.loading-button{cursor:auto}.loading-button:hover{background-color:unset}.text-button{filter:unset!important;display:flex;justify-content:center;align-items:center;margin-left:4px;margin-right:4px;height:1.6em;width:max-content}#custom-icon{height:100%;width:1.2em}.custom-button-container-default{color:#505050}.custom-button-container-default>.dropup-menu-item-icon{color:unset}.custom-button-container-default>svg{filter:brightness(0) saturate(100%) invert(39%) sepia(1%) saturate(0%) hue-rotate(83deg) brightness(93%) contrast(90%)}.custom-button-container-default>.dropup-menu-item-icon>svg{position:absolute;left:.2em}.custom-button-container-active{background-color:#edf7ff;color:#0285ff}.custom-button-container-active:hover,.custom-button-container-active:focus-visible{background-color:#def0ff}.custom-button-container-active:active{background-color:#d2eaff}.custom-button-container-active>svg{filter:brightness(0) saturate(100%) invert(32%) sepia(34%) saturate(4196%) hue-rotate(196deg) brightness(107%) contrast(104%)}.custom-button-container-disabled{color:#aeaeae;cursor:auto}.custom-button-container-disabled>div{pointer-events:none}.custom-button-container-disabled:hover,.custom-button-container-disabled:focus-visible{background-color:transparent}.custom-button-container-disabled:active{background-color:transparent}.custom-button-container-disabled>svg{filter:brightness(0) saturate(100%) invert(67%) sepia(0%) saturate(818%) hue-rotate(28deg) brightness(102%) contrast(100%)}#text-input-container{background-color:#fff;width:80%;display:flex;border:1px solid #0000001a;border-radius:5px;margin-top:.8em;margin-bottom:.8em;box-shadow:#959da533 0 1px 12px;overflow-y:auto;max-height:200px;position:relative}.text-input-container-left-adjustment{margin-left:1.5em}.text-input-container-right-adjustment{margin-right:1.5em}.text-input-container-left-small-adjustment{margin-left:1.1em}.text-input-container-left-small-adjustment>.outside-left{right:calc(14px - .55em)}.text-input-container-right-small-adjustment{margin-right:1.1em}.text-input-container-right-small-adjustment>.outside-right{left:calc(14px - .55em)}#text-input{text-align:left;outline:none;word-wrap:break-word;line-break:auto}.text-input-styling{padding:.4em .5em;overflow:overlay;width:100%}.text-input-inner-left-adjustment{padding-left:2.2em}.text-input-inner-right-adjustment{padding-right:2em}.text-input-disabled{pointer-events:none;-webkit-user-select:none;user-select:none}[contenteditable]:empty:before{content:attr(deep-chat-placeholder-text);pointer-events:none}[contenteditable][textcolor]:empty:before{color:gray}.outside-right>#dropup-menu,.inside-right>#dropup-menu{right:0}#dropup-icon{position:absolute;pointer-events:none;width:1.16em;height:1.2em;left:.265em;bottom:.43em;filter:brightness(0) saturate(100%) invert(54%) sepia(0%) saturate(724%) hue-rotate(6deg) brightness(92%) contrast(90%)}.dropup-button>*{pointer-events:none}#dropup-menu{background-color:#fff;position:absolute;transform:translateY(-100%);border-radius:5px;z-index:1;top:-.49em;box-shadow:#0003 -1px 2px 10px,#0000001a 0 2px 4px;cursor:pointer;-webkit-user-select:none;user-select:none}.dropup-menu-item{height:1.4em;padding:.28em .84em .28em .35em;display:flex;position:relative}.dropup-menu-item:hover,.dropup-menu-item:focus-visible{background-color:#f3f3f3}.dropup-menu-item:active{background-color:#ebebeb}.dropup-menu-item:active:not(:hover){background-color:transparent}.dropup-menu-item:first-child{padding-top:.49em;border-top-left-radius:inherit;border-top-right-radius:inherit}.dropup-menu-item:last-child{padding-bottom:.45em;border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.dropup-menu-item-icon{width:1.39em;position:relative}.dropup-menu-item-icon>svg{bottom:0!important;top:0!important;margin-bottom:auto;margin-top:auto}#dropup-menu-item-icon-element-custom{position:absolute;pointer-events:none;width:1.21em;height:1.21em;left:.28em;filter:brightness(0) saturate(100%) invert(15%) sepia(0%) saturate(337%) hue-rotate(125deg) brightness(91%) contrast(94%)}.dropup-menu-item-text{margin-left:.56em;margin-top:.08em;width:max-content}#input{width:100%;display:inline-flex;text-align:center;margin-left:auto;margin-right:auto;margin-top:auto;position:relative;justify-content:center}#chat-view{height:100%;display:grid;grid-template-columns:100%}::-webkit-scrollbar{width:9px;height:9px}::-webkit-scrollbar-thumb{background-color:#d0d0d0;border-radius:5px}::-webkit-scrollbar-track{background-color:#f2f2f2}.deep-chat-web-model-button{margin-top:10px;margin-bottom:5px;margin-left:1px}:host{all:initial;display:table-cell}#container{height:inherit;width:inherit;overflow:hidden}`,hb=Object.defineProperty,pe=function(r,t,n,s){for(var i=void 0,a=r.length-1,o;a>=0;a--)(o=r[a])&&(i=o(t,n,i)||i);return i&&hb(t,n,i),i},fe=function(e){function r(){var t;return w(this,r),t=ee(this,r),t.getMessages=function(){return[]},t.submitUserMessage=function(){return console.warn("submitUserMessage failed - please wait for chat view to render before calling this property.")},t.addMessage=function(){return console.warn("addMessage failed - please wait for chat view to render before calling this property.")},t.updateMessage=function(){},t.clearMessages=function(){},t.focusInput=function(){return eo.focusFromParentElement(t._elementRef)},t.refreshMessages=function(){},t.scrollToBottom=function(){},t.disableSubmitButton=function(){},t.setPlaceholderText=function(){},t._hasBeenRendered=!1,t._auxiliaryStyleApplied=!1,t._elementRef=document.createElement("div"),t._elementRef.id="container",t.attachShadow({mode:"open"}).appendChild(t._elementRef),Di.apply(fb,t.shadowRoot),setTimeout(function(){t._hasBeenRendered||t.onRender()},20),t}return te(r,e),C(r,[{key:"changeToChatView",value:function(){this._activeService&&(this._activeService.validateKeyProperty=!1),this.onRender()}},{key:"onRender",value:function(){var n;sd.attemptAppendStyleSheetToHead(this.style),lt.processConnect(this),(!this._activeService||this._activeService.demo)&&(this._activeService=g0.create(this)),this.auxiliaryStyle&&!this._auxiliaryStyleApplied&&(Di.apply(this.auxiliaryStyle,this.shadowRoot),this._auxiliaryStyleApplied=!0),Di.applyDefaultStyleToComponent(this.style,this.chatStyle),lt.checkForContainerStyles(this,this._elementRef),this._activeService.key&&this._activeService.validateKeyProperty?Pv.render(this._elementRef,this.changeToChatView.bind(this),this._activeService):!(this._activeService instanceof Ze)||this._activeService.key?((n=this._childElement)!==null&&n!==void 0||(this._childElement=this.children[0]),db.render(this,this._elementRef,this._activeService,this._childElement)):this._activeService instanceof Ze&&Uy.render(this._elementRef,this.changeToChatView.bind(this),this._activeService),this._hasBeenRendered||Ws.onRender(this),this._hasBeenRendered=!0}},{key:"disconnectedCallback",value:function(){uo.chat=void 0}}])}(Dy);pe([he("object")],fe.prototype,"connect");pe([he("object")],fe.prototype,"directConnection");pe([he("object")],fe.prototype,"webModel");pe([he("object")],fe.prototype,"requestBodyLimits");pe([he("function")],fe.prototype,"requestInterceptor");pe([he("function")],fe.prototype,"responseInterceptor");pe([he("function")],fe.prototype,"validateInput");pe([he("function")],fe.prototype,"loadHistory");pe([he("object")],fe.prototype,"chatStyle");pe([he("object")],fe.prototype,"attachmentContainerStyle");pe([he("object")],fe.prototype,"dropupStyles");pe([he("object")],fe.prototype,"inputAreaStyle");pe([he("object")],fe.prototype,"textInput");pe([he("object")],fe.prototype,"submitButtonStyles");pe([he("object")],fe.prototype,"customButtons");pe([he("string")],fe.prototype,"auxiliaryStyle");pe([he("array")],fe.prototype,"history");pe([he("object")],fe.prototype,"introMessage");pe([he("object")],fe.prototype,"avatars");pe([he("object")],fe.prototype,"names");pe([he("object")],fe.prototype,"displayLoadingBubble");pe([he("object")],fe.prototype,"errorMessages");pe([he("object")],fe.prototype,"messageStyles");pe([he("object")],fe.prototype,"textToSpeech");pe([he("object")],fe.prototype,"speechToText");pe([he("object")],fe.prototype,"images");pe([he("object")],fe.prototype,"gifs");pe([he("object")],fe.prototype,"camera");pe([he("object")],fe.prototype,"audio");pe([he("object")],fe.prototype,"microphone");pe([he("object")],fe.prototype,"mixedFiles");pe([he("object")],fe.prototype,"dragAndDrop");pe([he("object")],fe.prototype,"introPanelStyle");pe([he("object")],fe.prototype,"htmlClassUtilities");pe([he("object")],fe.prototype,"remarkable");pe([he("object")],fe.prototype,"focusMode");pe([he("function")],fe.prototype,"onMessage");pe([he("function")],fe.prototype,"onClearMessages");pe([he("function")],fe.prototype,"onComponentRender");pe([he("function")],fe.prototype,"onError");pe([he("object")],fe.prototype,"demo");pe([he("object")],fe.prototype,"_insertKeyViewStyles");customElements.define("deep-chat",fe);const Qd="/assets/Logo-BYfDRrrf.png",ds=(e,r)=>{const t=e.__vccOpts||e;for(const[n,s]of r)t[n]=s;return t},pb={},mb={style:{display:"flex","justify-content":"center","align-items":"center","flex-direction":"column","margin-bottom":"120px",color:"#009150"}};function vb(e,r){return kt(),rn("div",mb,r[0]||(r[0]=[be("img",{src:Qd,alt:"Logo",width:"100px",height:"100px"},null,-1),be("div",null,[be("div",{style:{"text-align":"center","margin-bottom":"8px","font-size":"16px"}},[be("b",null,"Bienvenido a UPR-Chat")]),be("div",{style:{"font-size":"15px","line-height":"20px"}}," El asistente virtual de la UPR ")],-1)]))}const gb=ds(pb,[["render",vb]]),yb=xn({__name:"HistoryChat",props:{text:{}},setup(e){const r=e;return(t,n)=>(kt(),rn("div",null,[be("p",null,Oa(r.text),1)]))}}),bb=ds(yb,[["__scopeId","data-v-2a4a3669"]]),_b={class:"container slide-in"},Sb={class:"chats-history"},Eb={class:"down-buttons"},kb={class:"user-login"},wb=xn({__name:"SideMenu",props:{chats:{}},emits:["closeSideMenu","createNewChat","getChat"],setup(e,{emit:r}){const t=r,n=e,s=localStorage.getItem("username"),i=nd(),a=()=>{t("closeSideMenu",!1)},o=()=>{localStorage.removeItem("access_token"),i.push("/")},l=c=>{t("getChat",c)},u=async()=>{t("createNewChat",[])};return(c,d)=>(kt(),rn("div",_b,[be("div",{class:"up-buttons"},[be("button",{onClick:u,class:"new-chat"},d[0]||(d[0]=[be("i",{class:"pi pi-plus"},"Nuevo chat",-1)])),be("button",{class:"cancel",onClick:a},d[1]||(d[1]=[be("i",{class:"pi pi-times"},null,-1)]))]),be("div",Sb,[(kt(!0),rn(bt,null,oh(n.chats.filter(h=>h.llmqueries[0]!=null),h=>{var f,m;return kt(),Ka(bb,{key:h.id,text:(m=(f=h.llmqueries[h.llmqueries.length-1])==null?void 0:f.output)==null?void 0:m.text,onClick:p=>l(h.id)},null,8,["text","onClick"])}),128))]),be("div",Eb,[be("div",kb,[d[2]||(d[2]=be("i",{class:"pi pi-user"},null,-1)),be("p",null,Oa($e(s)),1)]),be("button",{onClick:o,class:"logout"},d[3]||(d[3]=[be("i",{class:"pi pi-sign-out"},null,-1)]))])]))}}),Cb=ds(wb,[["__scopeId","data-v-15031d8b"]]),Tb="width: 100%; height: 90dvh; border: none",Ab={placeholder:{text:"Haz tu consulta"},styles:{container:{height:"90px",width:"90%",borderRadius:"10px",boxShadow:"0px 0px 10px 5px #dff7df"}}},xb={default:{shared:{bubble:{color:"white"}},user:{bubble:{backgroundColor:"#009150"}},ai:{bubble:{backgroundColor:"#dff7df",color:"black"}}},loading:{message:{styles:{bubble:{color:"#009150",backgroundColor:"#dff7df"}}}}},Rb={submit:{container:{default:{height:"30px",width:"30px",padding:"10px",borderRadius:"50%"},hover:{backgroundColor:"#dff7df"}},svg:{content:'<svg width="30px" height="30px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"/><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"/><g id="SVGRepo_iconCarrier"> <path d="M11.5003 12H5.41872M5.24634 12.7972L4.24158 15.7986C3.69128 17.4424 3.41613 18.2643 3.61359 18.7704C3.78506 19.21 4.15335 19.5432 4.6078 19.6701C5.13111 19.8161 5.92151 19.4604 7.50231 18.7491L17.6367 14.1886C19.1797 13.4942 19.9512 13.1471 20.1896 12.6648C20.3968 12.2458 20.3968 11.7541 20.1896 11.3351C19.9512 10.8529 19.1797 10.5057 17.6367 9.81135L7.48483 5.24303C5.90879 4.53382 5.12078 4.17921 4.59799 4.32468C4.14397 4.45101 3.77572 4.78336 3.60365 5.22209C3.40551 5.72728 3.67772 6.54741 4.22215 8.18767L5.24829 11.2793C5.34179 11.561 5.38855 11.7019 5.407 11.8459C5.42338 11.9738 5.42321 12.1032 5.40651 12.231C5.38768 12.375 5.34057 12.5157 5.24634 12.7972Z" stroke="#009150" stroke-width="2.304" stroke-linecap="round" stroke-linejoin="round"/> </g></svg>'},loading:{}},position:"inside-right"},Mb=localStorage.getItem("username"),Ib={ai:{text:"AI",style:{color:"#009150",textAlign:"center",fontWeight:"bolder"}},user:{text:Mb,style:{color:"#009150",fontWeight:"bolder"}}},Lb={url:"http://localhost:8000/chats/query",method:"POST"};let Ve={},Or=[];const Ob=e=>{const r=/{(?:[^{}]|{(?:[^{}]|{[^{}]*})*})*}/,t=e.match(r);if(!t)return null;let n;try{n=JSON.parse(t[0])}catch(s){return console.error(s),null}return!n.fields||!Array.isArray(n.fields)?(console.log("Incorrect structure"),null):n},Pb=e=>{const r=document.createElement("div");e.formAttributes&&Object.entries(e.formAttributes).forEach(([s,i])=>{r.setAttribute(s,i)});for(const s of e.fields){const i=document.createElement("div");if(i.className=`form-field ${s.className||""}`.trim(),s.label){const o=document.createElement("label");o.textContent=s.label,o.htmlFor=s.id||s.name,i.appendChild(o)}const a=Nb(s);i.appendChild(a),r.appendChild(i)}const t=document.createElement("p");t.className="text-error",t.textContent="Faltan datos por llenar",r.appendChild(t);const n=document.createElement("button");return n.type="submit",n.textContent=e.submitButtonText||"Enviar",n.className=e.submitButtonClass||"send-btn",n.classList.add("deep-chat-temporary-message"),n.classList.add("deep-chat-suggestion-button"),r.appendChild(n),r},Nb=e=>{let r;switch(e.type){case"textarea":const t=document.createElement("textarea");t.id=e.id||e.name,t.name=e.name,t.className="textarea",t.placeholder=e.placeholder||"",e.value&&(t.textContent=e.value),r=t,Ve[t.id]="";break;case"select":const n=document.createElement("select");n.id=e.id||e.name,n.name=e.name,n.className="select";const s=document.createElement("option");s.value="",s.textContent="Selecciona una opcin",s.selected=!0,s.hidden=!0,n.appendChild(s),e.options&&(Ve[n.id]=e.options[0].value,e.options.forEach(o=>{const l=document.createElement("option");l.value=o.value,l.textContent=o.label,n.appendChild(l)})),r=n;break;case"radio":const i=document.createElement("div");return i.className="radio-group",i.id=e.id||e.name,e.options&&(Ve[i.id]=e.options[0].value,e.options.forEach((o,l)=>{const u=`${e.id||e.name}-${l}`,c=document.createElement("div");c.className="radio-option";const d=document.createElement("input");d.type="radio",d.id=u,d.name=e.name,d.value=o.value,e.value===o.value&&(d.checked=!0);const h=document.createElement("label");h.htmlFor=u,h.textContent=o.label,c.appendChild(d),c.appendChild(h),i.appendChild(c)})),e.required&&(i.setAttribute("required",""),Or.push(e.id||e.name)),i;case"checkbox":if(e.options){const o=document.createElement("div");return o.className="checkbox-group",o.id=e.id||e.name,Ve[o.id]=[],e.options.forEach((l,u)=>{const c=`${e.id||e.name}-${u}`,d=document.createElement("div");d.className="checkbox-option";const h=document.createElement("input");h.type="checkbox",h.id=c,h.name=e.name,h.value=l.value,Array.isArray(e.value)&&e.value.includes(l.value)&&(h.checked=!0);const f=document.createElement("label");f.htmlFor=c,f.textContent=l.label,d.appendChild(h),d.appendChild(f),o.appendChild(d)}),e.required&&(o.setAttribute("required",""),Or.push(e.id||e.name)),o}else{const o=document.createElement("div");o.className="checkbox-single";const l=document.createElement("input");l.type="checkbox",l.id=e.id||e.name,l.name=e.name,Ve[l.id]=!1,e.value&&(l.checked=!!e.value);const u=document.createElement("label");return u.htmlFor=e.id||e.name,u.textContent=e.label||"",o.appendChild(l),o.appendChild(u),o.id=l.id,e.required&&(l.setAttribute("required",""),Or.push(e.id||e.name)),o}default:const a=document.createElement("input");a.type=e.type,a.id=e.id||e.name,a.name=e.name,a.className="input",a.placeholder=e.placeholder||"",Ve[a.id]="",e.value&&(a.value=e.value),r=a}return e.required&&(r.setAttribute("required",""),Or.push(e.id||e.name)),e.attributes&&Object.entries(e.attributes).forEach(([t,n])=>{r.setAttribute(t,n)}),r},Db=e=>{e.style.fontFamily="'Arial', sans-serif",e.style.maxWidth="600px",e.style.margin="20px auto",e.style.padding="20px",e.style.backgroundColor="#f9f9f9",e.style.borderRadius="8px",e.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)",e.querySelectorAll(".form-field").forEach(o=>{o.style.marginBottom="15px",o.style.display="flex",o.style.flexDirection="column"}),e.querySelectorAll("label").forEach(o=>{o.style.marginBottom="5px",o.style.fontWeight="bold",o.style.color="#333"}),e.querySelectorAll('input[type="text"], input[type="number"]').forEach(o=>{o.style.padding="10px",o.style.border="1px solid #ddd",o.style.borderRadius="4px",o.style.fontSize="16px",o.addEventListener("focus",function(){this.style.borderColor="#4a90e2",this.style.outline="none",this.style.boxShadow="0 0 0 2px rgba(74, 144, 226, 0.2)"}),o.addEventListener("blur",function(){this.style.borderColor="#ddd",this.style.boxShadow="none"})}),e.querySelectorAll('input[type="checkbox"]').forEach(o=>{o.style.width="auto",o.style.marginTop="5px"});const i=e.querySelector("button");i.style.backgroundColor="#009150",i.style.color="white",i.style.border="none",i.style.padding="10px 15px",i.style.fontSize="16px",i.style.borderRadius="4px",i.style.cursor="pointer",i.style.transition="background-color 0.3s";const a=e.querySelector(".text-error");return a.style.color="red",a.style.textAlign="center",a.style.visibility="hidden",e},Bb=(e,r)=>{const t=JSON.stringify(r,null,2);let n=e.indexOf(t);if(n!==-1)return(e.substring(0,n)+e.substring(n+t.length)).trim();const s=/{(?:[^{}]|{(?:[^{}]|{[^{}]*})*})*}/,i=e.match(s);if(!i)return console.warn("No se pudo encontrar ningn JSON en el texto"),e;try{const a=JSON.parse(i[0]);if(i.index===void 0)return e.trim();if(JSON.stringify(a)===JSON.stringify(r))return(e.substring(0,i.index)+e.substring(i.index+i[0].length)).trim()}catch(a){console.warn("El JSON encontrado no es vlido para comparar "+a)}return console.warn("No se pudo encontrar el JSON especfico para eliminar"),e},Fb=()=>{for(let e of Or)if(Ve[e]==""||Ve[e]==!1)return!1;return!0},jb={input:{events:{mouseleave:e=>{Ve[e.target.id]=e.target.value}}},textarea:{events:{mouseleave:e=>{Ve[e.target.id]=e.target.value}}},select:{events:{change:e=>{Ve[e.target.id]=e.target.value}}},"radio-group":{events:{change:e=>{Ve[e.target.closest(".radio-group").id]=e.target.value}}},"checkbox-group":{events:{change:e=>{Ve[e.target.closest(".checkbox-group").id]=new Array,Ve[e.target.closest(".checkbox-group").id].includes(e.target.value)||Ve[e.target.closest(".checkbox-group").id].push(e.target.value)}}},"checkbox-single":{events:{change:e=>{Ve[e.target.id]=e.target.value}}}};let xa=!1,go={input:{},output:{}};const Ub=async e=>(xa&&(Fb()?e.body.messages.push({role:"user",text:JSON.stringify(Ve)}):e.body.messages.push({role:"ai",text:"Faltan campos por llenar"})),go.input=e.body.messages,e),Hb=async e=>{let r=Ob(e.text);if(r){xa=!0;const t=Pb(r),n=Db(t),s=Bb(e.text,r);e.html=n.outerHTML,e.text=s}else xa=!1;return go.output=e,$b(),e},$b=async()=>{const e="http://localhost:8000",r=new URL(`${e}/llmqueries`),t=await ef();if(!t)throw new Error("No chat ID available");r.searchParams.append("chat_id",t);try{const n=await fetch(r,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(go)});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`)}catch(n){console.error("Error saving LLMQuery:",n)}},ef=async()=>{let e=localStorage.getItem("chat_id");if(e==""){const r="http://localhost:8000",t=localStorage.getItem("user_id"),n=localStorage.getItem("access_token");try{const s=await fetch(`${r}/chats`,{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-type":"application/json"},body:JSON.stringify({user_id:t})});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);e=(await s.json()).id}catch(s){console.error("Error creating new chat:",s)}}if(!e)throw new Error("No chat ID available");return localStorage.setItem("chat_id",e),e},Vb={key:0},qb=xn({__name:"Chat",setup(e){const r=it(!1),t=it([]),n=it(),s=it(0),i=()=>{r.value=!0},a=c=>{r.value=c},o=async()=>{t.value=[],localStorage.setItem("chat_id","");let c=await ef();if(!c)throw new Error("Not chat id");localStorage.setItem("chat_id",c),n.value=[],n.value=await l()},l=async()=>{const c="http://localhost:8000",d=localStorage.getItem("access_token");let h=[];try{const f=await fetch(`${c}/chats/`,{method:"GET",headers:{Authorization:`Bearer ${d}`}});if(!f.ok)throw new Error(`HTTP error status: ${f.status}`);h=await f.json();for(let m of h){const p=new URL(`${c}/llmqueries`);p.searchParams.append("chat_id",m.id);const y=await fetch(p,{method:"GET",headers:{Authorization:`Bearer ${d}`}});if(!y.ok)throw new Error(`HTTP error status: ${y.status}`);const g=await y.json();m.llmqueries=g}}catch(f){console.error("Error getting chats:",f)}return h},u=c=>{var h;const d=(h=n.value)==null?void 0:h.find(f=>f.id==c);if(t.value=[],d){let f=d.llmqueries;for(let m of f)t.value.push(m.input.find(p=>p.role=="user")),t.value.push({role:"ai",text:m.output.text,html:m.output.html,files:m.output.files})}localStorage.setItem("chat_id",c.toString()),s.value+=1};return za(async()=>{localStorage.setItem("chat_id",""),n.value=await l()}),(c,d)=>{var f;const h=sh("deep-chat");return kt(),rn(bt,null,[be("button",{class:"side-menu-btn",onClick:i},d[0]||(d[0]=[be("i",{class:"pi pi-bars"},null,-1)])),r.value?(kt(),rn("div",Vb,[Je(Cb,{chats:(f=n.value)!=null&&f.length?n.value:[],onCloseSideMenu:a,onCreateNewChat:o,onGetChat:u},null,8,["chats"])])):Uh("",!0),be("main",null,[(kt(),rn("div",{key:s.value,class:"chat-container"},[Je(h,{demo:!1,connect:$e(Lb),style:ni($e(Tb)),textInput:$e(Ab),messageStyles:$e(xb),submitButtonStyles:$e(Rb),requestInterceptor:$e(Ub),responseInterceptor:$e(Hb),htmlClassUtilities:$e(jb),history:t.value,names:$e(Ib)},{default:nc(()=>[Je(gb)]),_:1},8,["connect","style","textInput","messageStyles","submitButtonStyles","requestInterceptor","responseInterceptor","htmlClassUtilities","history","names"])]))])],64)}}}),zb=ds(qb,[["__scopeId","data-v-783fd6d7"]]),Gb={class:"container"},Kb={class:"username-container"},Wb={class:"password-container"},Jb={class:"error-msg"},Yb=["disabled"],Xb=xn({__name:"Login",setup(e){const r=nd(),t=it(""),n=it(""),s=it(!1),i=it(!0),a=async()=>{const u=new URLSearchParams;u.append("username",t.value),u.append("password",n.value);const c="http://localhost:8000";try{const d=await fetch(`${c}/users/login`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:u});if(!d.ok)throw new Error(`HTTP error! status: ${d.status}`);const h=await d.json();r.push("/chat").then(()=>{window.location.reload()}),localStorage.setItem("access_token",h.access_token),localStorage.setItem("username",t.value),o(c,h.access_token)}catch(d){console.error("Error getting OAuth token:",d),s.value=!0}},o=async(u,c)=>{try{const d=await fetch(`${u}/users/me`,{method:"GET",headers:{Authorization:`Bearer ${c}`}});if(!d.ok)throw new Error(`HTTP error! status: ${d.status}`);const h=await d.json();localStorage.setItem("user_id",h)}catch(d){console.error("Error getting user id:",d)}},l=()=>{s.value=!1,t.value.length>3&&n.value.length>3?i.value=!1:i.value=!0};return(u,c)=>(kt(),rn("div",Gb,[be("div",null,[c[4]||(c[4]=be("img",{src:Qd,alt:"Logo"},null,-1)),c[5]||(c[5]=be("p",{class:"welcome"},"Bienvenido",-1)),be("div",Kb,[c[2]||(c[2]=be("label",{for:"username"},"Usuario",-1)),wi(be("input",{type:"text",id:"username",placeholder:"Nombre de usuario",maxlength:"20","onUpdate:modelValue":c[0]||(c[0]=d=>t.value=d),onInput:l},null,544),[[Jo,t.value]])]),be("div",Wb,[c[3]||(c[3]=be("label",{for:"password"},"Contrasea",-1)),wi(be("input",{type:"password",id:"password",placeholder:"Contrasea",maxlength:"20","onUpdate:modelValue":c[1]||(c[1]=d=>n.value=d),onInput:l},null,544),[[Jo,n.value]])]),wi(be("p",Jb,"Usuario o contrasea incorrectos",512),[[rp,s.value]]),be("button",{disabled:i.value,class:ri([{"hover-btn":!i.value},"send-btn"]),onClick:a}," Entrar ",10,Yb)])]))}}),Zb=ds(Xb,[["__scopeId","data-v-e6d0d4d4"]]),tf=bv({history:Jm("/"),routes:[{path:"/chat",name:"chat",component:zb,meta:{requiresAuth:!0}},{path:"/",name:"login",component:Zb}]});tf.beforeEach((e,r,t)=>{const n=Qb();if(e.meta.requiresAuth&&!n){t({path:"/",query:{redirect:e.fullPath}});return}if(e.name==="login"&&n){t({path:"/chat"});return}t()});function Qb(){return localStorage.getItem("access_token")!==null}const yi=_p(Sv);yi.use(wp());yi.use(tf);yi.use(ym);yi.mount("#app");
